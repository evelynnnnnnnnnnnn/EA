(function(){if(typeof window.BX==="function"){return}
/**
 * Babel external helpers
 * (c) 2018 Babel
 * @license MIT
 */(function(e){var t=e.babelHelpers={};function n(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){t.typeof=n=function(e){return typeof e}}else{t.typeof=n=function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return n(e)}t.typeof=n;var r;function i(e,t,n,i){if(!r){r=typeof Symbol==="function"&&Symbol.for&&Symbol.for("react.element")||60103}var s=e&&e.defaultProps;var o=arguments.length-3;if(!t&&o!==0){t={children:void 0}}if(t&&s){for(var a in s){if(t[a]===void 0){t[a]=s[a]}}}else if(!t){t=s||{}}if(o===1){t.children=i}else if(o>1){var l=new Array(o);for(var u=0;u<o;u++){l[u]=arguments[u+3]}t.children=l}return{$$typeof:r,type:e,key:n===undefined?null:""+n,ref:null,props:t,_owner:null}}t.jsx=i;function s(e){var t;if(typeof Symbol==="function"){if(Symbol.asyncIterator){t=e[Symbol.asyncIterator];if(t!=null)return t.call(e)}if(Symbol.iterator){t=e[Symbol.iterator];if(t!=null)return t.call(e)}}throw new TypeError("Object is not async iterable")}t.asyncIterator=s;function o(e){this.wrapped=e}t.AwaitValue=o;function a(e){var n,r;function i(e,t){return new Promise((function(i,o){var a={key:e,arg:t,resolve:i,reject:o,next:null};if(r){r=r.next=a}else{n=r=a;s(e,t)}}))}function s(n,r){try{var i=e[n](r);var a=i.value;var l=a instanceof t.AwaitValue;Promise.resolve(l?a.wrapped:a).then((function(e){if(l){s("next",e);return}o(i.done?"return":"normal",e)}),(function(e){s("throw",e)}))}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":n.resolve({value:t,done:true});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:false});break}n=n.next;if(n){s(n.key,n.arg)}else{r=null}}this._invoke=i;if(typeof e.return!=="function"){this.return=undefined}}if(typeof Symbol==="function"&&Symbol.asyncIterator){a.prototype[Symbol.asyncIterator]=function(){return this}}a.prototype.next=function(e){return this._invoke("next",e)};a.prototype.throw=function(e){return this._invoke("throw",e)};a.prototype.return=function(e){return this._invoke("return",e)};t.AsyncGenerator=a;function l(e){return function(){return new t.AsyncGenerator(e.apply(this,arguments))}}t.wrapAsyncGenerator=l;function u(e){return new t.AwaitValue(e)}t.awaitAsyncGenerator=u;function c(e,t){var n={},r=false;function i(n,i){r=true;i=new Promise((function(t){t(e[n](i))}));return{done:false,value:t(i)}}if(typeof Symbol==="function"&&Symbol.iterator){n[Symbol.iterator]=function(){return this}}n.next=function(e){if(r){r=false;return e}return i("next",e)};if(typeof e.throw==="function"){n.throw=function(e){if(r){r=false;throw e}return i("throw",e)}}if(typeof e.return==="function"){n.return=function(e){return i("return",e)}}return n}t.asyncGeneratorDelegate=c;function f(e,t,n,r,i,s,o){try{var a=e[s](o);var l=a.value}catch(e){n(e);return}if(a.done){t(l)}else{Promise.resolve(l).then(r,i)}}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){f(s,r,i,o,a,"next",e)}function a(e){f(s,r,i,o,a,"throw",e)}o(undefined)}))}}t.asyncToGenerator=d;function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}t.classCallCheck=h;function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function m(e,t,n){if(t)p(e.prototype,t);if(n)p(e,n);return e}t.createClass=m;function g(e,t){for(var n in t){var r=t[n];r.configurable=r.enumerable=true;if("value"in r)r.writable=true;Object.defineProperty(e,n,r)}if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(var s=0;s<i.length;s++){var o=i[s];var r=t[o];r.configurable=r.enumerable=true;if("value"in r)r.writable=true;Object.defineProperty(e,o,r)}}return e}t.defineEnumerableProperties=g;function v(e,t){var n=Object.getOwnPropertyNames(t);for(var r=0;r<n.length;r++){var i=n[r];var s=Object.getOwnPropertyDescriptor(t,i);if(s&&s.configurable&&e[i]===undefined){Object.defineProperty(e,i,s)}}return e}t.defaults=v;function y(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}t.defineProperty=y;function b(){t.extends=b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return b.apply(this,arguments)}t.extends=b;function w(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};var i=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))}i.forEach((function(n){t.defineProperty(e,n,r[n])}))}return e}t.objectSpread=w;function S(e,n){if(typeof n!=="function"&&n!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:true,configurable:true}});if(n)t.setPrototypeOf(e,n)}t.inherits=S;function k(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}t.inheritsLoose=k;function I(e){t.getPrototypeOf=I=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return I(e)}t.getPrototypeOf=I;function E(e,n){t.setPrototypeOf=E=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return E(e,n)}t.setPrototypeOf=E;function C(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _(e,n,r){if(C()){t.construct=_=Reflect.construct}else{t.construct=_=function e(n,r,i){var s=[null];s.push.apply(s,r);var o=Function.bind.apply(n,s);var a=new o;if(i)t.setPrototypeOf(a,i.prototype);return a}}return _.apply(null,arguments)}t.construct=_;function x(e){return Function.toString.call(e).indexOf("[native code]")!==-1}t.isNativeFunction=x;function T(e){var n=typeof Map==="function"?new Map:undefined;t.wrapNativeSuper=T=function e(r){if(r===null||!t.isNativeFunction(r))return r;if(typeof r!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof n!=="undefined"){if(n.has(r))return n.get(r);n.set(r,i)}function i(){return t.construct(r,arguments,t.getPrototypeOf(this).constructor)}i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:false,writable:true,configurable:true}});return t.setPrototypeOf(i,r)};return T(e)}t.wrapNativeSuper=T;function O(e,t){if(t!=null&&typeof Symbol!=="undefined"&&t[Symbol.hasInstance]){return t[Symbol.hasInstance](e)}else{return e instanceof t}}t.instanceof=O;function M(e){return e&&e.__esModule?e:{default:e}}t.interopRequireDefault=M;function D(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}t.interopRequireWildcard=D;function A(e,t){if(e!==t){throw new TypeError("Cannot instantiate an arrow function")}}t.newArrowCheck=A;function P(e){if(e==null)throw new TypeError("Cannot destructure undefined")}t.objectDestructuringEmpty=P;function L(e,t){if(e==null)return{};var n={};var r=Object.keys(e);var i,s;for(s=0;s<r.length;s++){i=r[s];if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}t.objectWithoutPropertiesLoose=L;function R(e,n){if(e==null)return{};var r=t.objectWithoutPropertiesLoose(e,n);var i,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++){i=o[s];if(n.indexOf(i)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,i))continue;r[i]=e[i]}}return r}t.objectWithoutProperties=R;function H(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}t.assertThisInitialized=H;function j(e,n){if(n&&(typeof n==="object"||typeof n==="function")){return n}return t.assertThisInitialized(e)}t.possibleConstructorReturn=j;function N(e,n){while(!Object.prototype.hasOwnProperty.call(e,n)){e=t.getPrototypeOf(e);if(e===null)break}return e}t.superPropBase=N;function B(e,n,r){if(typeof Reflect!=="undefined"&&Reflect.get){t.get=B=Reflect.get}else{t.get=B=function e(n,r,i){var s=t.superPropBase(n,r);if(!s)return;var o=Object.getOwnPropertyDescriptor(s,r);if(o.get){return o.get.call(i)}return o.value}}return B(e,n,r||e)}t.get=B;function F(e,n,r,i){if(typeof Reflect!=="undefined"&&Reflect.set){F=Reflect.set}else{F=function e(n,r,i,s){var o=t.superPropBase(n,r);var a;if(o){a=Object.getOwnPropertyDescriptor(o,r);if(a.set){a.set.call(s,i);return true}else if(!a.writable){return false}}a=Object.getOwnPropertyDescriptor(s,r);if(a){if(!a.writable){return false}a.value=i;Object.defineProperty(s,r,a)}else{t.defineProperty(s,r,i)}return true}}return F(e,n,r,i)}function U(e,t,n,r,i){var s=F(e,t,n,r||e);if(!s&&i){throw new Error("failed to set property")}return n}t.set=U;function W(e,t){if(!t){t=e.slice(0)}return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}t.taggedTemplateLiteral=W;function $(e,t){if(!t){t=e.slice(0)}e.raw=t;return e}t.taggedTemplateLiteralLoose=$;function V(e,n){if(e===t.temporalUndefined){throw new ReferenceError(n+" is not defined - temporal dead zone")}else{return e}}t.temporalRef=V;function G(e){throw new Error('"'+e+'" is read-only')}t.readOnlyError=G;function z(e){throw new Error('Class "'+e+'" cannot be referenced in computed property keys.')}t.classNameTDZError=z;t.temporalUndefined={};function X(e,n){return t.arrayWithHoles(e)||t.iterableToArrayLimit(e,n)||t.nonIterableRest()}t.slicedToArray=X;function q(e,n){return t.arrayWithHoles(e)||t.iterableToArrayLimitLoose(e,n)||t.nonIterableRest()}t.slicedToArrayLoose=q;function K(e){return t.arrayWithHoles(e)||t.iterableToArray(e)||t.nonIterableRest()}t.toArray=K;function Y(e){return t.arrayWithoutHoles(e)||t.iterableToArray(e)||t.nonIterableSpread()}t.toConsumableArray=Y;function J(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}t.arrayWithoutHoles=J;function Q(e){if(Array.isArray(e))return e}t.arrayWithHoles=Q;function Z(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}t.iterableToArray=Z;function ee(e,t){var n=[];var r=true;var i=false;var s=undefined;try{for(var o=e[Symbol.iterator](),a;!(r=(a=o.next()).done);r=true){n.push(a.value);if(t&&n.length===t)break}}catch(e){i=true;s=e}finally{try{if(!r&&o["return"]!=null)o["return"]()}finally{if(i)throw s}}return n}t.iterableToArrayLimit=ee;function te(e,t){var n=[];for(var r=e[Symbol.iterator](),i;!(i=r.next()).done;){n.push(i.value);if(t&&n.length===t)break}return n}t.iterableToArrayLimitLoose=te;function ne(){throw new TypeError("Invalid attempt to spread non-iterable instance")}t.nonIterableSpread=ne;function re(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}t.nonIterableRest=re;function ie(e){return function(){var t=e.apply(this,arguments);t.next();return t}}t.skipFirstGeneratorNext=ie;function se(e){if(typeof e==="symbol"){return e}else{return String(e)}}t.toPropertyKey=se;function oe(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and set to use loose mode. "+"To use proposal-class-properties in spec mode with decorators, wait for "+"the next major version of decorators in stage 2.")}t.initializerWarningHelper=oe;function ae(e,t,n,r){if(!n)return;Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}t.initializerDefineProperty=ae;function le(e,t,n,r,i){var s={};Object["ke"+"ys"](r).forEach((function(e){s[e]=r[e]}));s.enumerable=!!s.enumerable;s.configurable=!!s.configurable;if("value"in s||s.initializer){s.writable=true}s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s);if(i&&s.initializer!==void 0){s.value=s.initializer?s.initializer.call(i):void 0;s.initializer=undefined}if(s.initializer===void 0){Object["define"+"Property"](e,t,s);s=null}return s}t.applyDecoratedDescriptor=le;var ue=0;function ce(e){return"__private_"+ue+++"_"+e}t.classPrivateFieldLooseKey=ce;function fe(e,t){if(!Object.prototype.hasOwnProperty.call(e,t)){throw new TypeError("attempted to use private field on non-instance")}return e}t.classPrivateFieldLooseBase=fe;function de(e,t){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return t.get(e).value}t.classPrivateFieldGet=de;function he(e,t,n){if(!t.has(e)){throw new TypeError("attempted to set private field on non-instance")}var r=t.get(e);if(!r.writable){throw new TypeError("attempted to set read only private field")}r.value=n;return n}t.classPrivateFieldSet=he})(typeof global==="undefined"?window:global);!function(e){"use strict";var t=Object.prototype;var n=t.hasOwnProperty;var r;var i=typeof Symbol==="function"?Symbol:{};var s=i.iterator||"@@iterator";var o=i.asyncIterator||"@@asyncIterator";var a=i.toStringTag||"@@toStringTag";var l=e.regeneratorRuntime={};function u(e,t,n,r){var i=t&&t.prototype instanceof g?t:g;var s=Object.create(i.prototype);var o=new O(r||[]);s._invoke=C(e,n,o);return s}l.wrap=u;function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}var f="suspendedStart";var d="suspendedYield";var h="executing";var p="completed";var m={};function g(){}function v(){}function y(){}var b={};b[s]=function(){return this};var w=Object.getPrototypeOf;var S=w&&w(w(M([])));if(S&&S!==t&&n.call(S,s)){b=S}var k=y.prototype=g.prototype=Object.create(b);v.prototype=k.constructor=y;y.constructor=v;y[a]=v.displayName="GeneratorFunction";function I(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}l.isGeneratorFunction=function(e){var t=typeof e==="function"&&e.constructor;return t?t===v||(t.displayName||t.name)==="GeneratorFunction":false};l.mark=function(e){if(Object.setPrototypeOf){Object.setPrototypeOf(e,y)}else{e.__proto__=y;if(!(a in e)){e[a]="GeneratorFunction"}}e.prototype=Object.create(k);return e};l.awrap=function(e){return{__await:e}};function E(e){function t(r,i,s,o){var a=c(e[r],e,i);if(a.type==="throw"){o(a.arg)}else{var l=a.arg;var u=l.value;if(u&&typeof u==="object"&&n.call(u,"__await")){return Promise.resolve(u.__await).then((function(e){t("next",e,s,o)}),(function(e){t("throw",e,s,o)}))}return Promise.resolve(u).then((function(e){l.value=e;s(l)}),o)}}var r;function i(e,n){function i(){return new Promise((function(r,i){t(e,n,r,i)}))}return r=r?r.then(i,i):i()}this._invoke=i}I(E.prototype);E.prototype[o]=function(){return this};l.AsyncIterator=E;l.async=function(e,t,n,r){var i=new E(u(e,t,n,r));return l.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))};function C(e,t,n){var r=f;return function i(s,o){if(r===h){throw new Error("Generator is already running")}if(r===p){if(s==="throw"){throw o}return D()}n.method=s;n.arg=o;while(true){var a=n.delegate;if(a){var l=_(a,n);if(l){if(l===m)continue;return l}}if(n.method==="next"){n.sent=n._sent=n.arg}else if(n.method==="throw"){if(r===f){r=p;throw n.arg}n.dispatchException(n.arg)}else if(n.method==="return"){n.abrupt("return",n.arg)}r=h;var u=c(e,t,n);if(u.type==="normal"){r=n.done?p:d;if(u.arg===m){continue}return{value:u.arg,done:n.done}}else if(u.type==="throw"){r=p;n.method="throw";n.arg=u.arg}}}}function _(e,t){var n=e.iterator[t.method];if(n===r){t.delegate=null;if(t.method==="throw"){if(e.iterator.return){t.method="return";t.arg=r;_(e,t);if(t.method==="throw"){return m}}t.method="throw";t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=c(n,e.iterator,t.arg);if(i.type==="throw"){t.method="throw";t.arg=i.arg;t.delegate=null;return m}var s=i.arg;if(!s){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return m}if(s.done){t[e.resultName]=s.value;t.next=e.nextLoc;if(t.method!=="return"){t.method="next";t.arg=r}}else{return s}t.delegate=null;return m}I(k);k[a]="Generator";k[s]=function(){return this};k.toString=function(){return"[object Generator]"};function x(e){var t={tryLoc:e[0]};if(1 in e){t.catchLoc=e[1]}if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(x,this);this.reset(true)}l.keys=function(e){var t=[];for(var n in e){t.push(n)}t.reverse();return function n(){while(t.length){var r=t.pop();if(r in e){n.value=r;n.done=false;return n}}n.done=true;return n}};function M(e){if(e){var t=e[s];if(t){return t.call(e)}if(typeof e.next==="function"){return e}if(!isNaN(e.length)){var i=-1,o=function t(){while(++i<e.length){if(n.call(e,i)){t.value=e[i];t.done=false;return t}}t.value=r;t.done=true;return t};return o.next=o}}return{next:D}}l.values=M;function D(){return{value:r,done:true}}O.prototype={constructor:O,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=r;this.done=false;this.delegate=null;this.method="next";this.arg=r;this.tryEntries.forEach(T);if(!e){for(var t in this){if(t.charAt(0)==="t"&&n.call(this,t)&&!isNaN(+t.slice(1))){this[t]=r}}}},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if(t.type==="throw"){throw t.arg}return this.rval},dispatchException:function(e){if(this.done){throw e}var t=this;function i(n,i){a.type="throw";a.arg=e;t.next=n;if(i){t.method="next";t.arg=r}return!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s];var a=o.completion;if(o.tryLoc==="root"){return i("end")}if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc");var u=n.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc){return i(o.catchLoc,true)}else if(this.prev<o.finallyLoc){return i(o.finallyLoc)}}else if(l){if(this.prev<o.catchLoc){return i(o.catchLoc,true)}}else if(u){if(this.prev<o.finallyLoc){return i(o.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}if(s&&(e==="break"||e==="continue")&&s.tryLoc<=t&&t<=s.finallyLoc){s=null}var o=s?s.completion:{};o.type=e;o.arg=t;if(s){this.method="next";this.next=s.finallyLoc;return m}return this.complete(o)},complete:function(e,t){if(e.type==="throw"){throw e.arg}if(e.type==="break"||e.type==="continue"){this.next=e.arg}else if(e.type==="return"){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else if(e.type==="normal"&&t){this.next=t}return m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e){this.complete(n.completion,n.afterLoc);T(n);return m}}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if(r.type==="throw"){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){this.delegate={iterator:M(e),resultName:t,nextLoc:n};if(this.method==="next"){this.arg=r}return m}}}(function(){return this}()||Function("return this")());(function(e){"use strict";var t=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}var r=function(e){return e&&e.Math==Math&&e};var i=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof t=="object"&&t)||function(){return this}()||Function("return this")();var s=function(e){try{return!!e()}catch(e){return true}};var o=!s((function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}));var a=Function.prototype.call;var l=a.bind?a.bind(a):function(){return a.apply(a,arguments)};var u={}.propertyIsEnumerable;var c=Object.getOwnPropertyDescriptor;var f=c&&!u.call({1:2},1);var d=f?function e(t){var n=c(this,t);return!!n&&n.enumerable}:u;var h={f:d};var p=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}};var m=Function.prototype;var g=m.bind;var v=m.call;var y=g&&g.bind(v);var b=g?function(e){return e&&y(v,e)}:function(e){return e&&function(){return v.apply(e,arguments)}};var w=b({}.toString);var S=b("".slice);var k=function(e){return S(w(e),8,-1)};var I=i.Object;var E=b("".split);var C=s((function(){return!I("z").propertyIsEnumerable(0)}))?function(e){return k(e)=="String"?E(e,""):I(e)}:I;var _=i.TypeError;var x=function(e){if(e==undefined)throw _("Can't call method on "+e);return e};var T=function(e){return C(x(e))};var O=function(e){return typeof e=="function"};var M=function(e){return typeof e=="object"?e!==null:O(e)};var D=function(e){return O(e)?e:undefined};var A=function(e,t){return arguments.length<2?D(i[e]):i[e]&&i[e][t]};var P=b({}.isPrototypeOf);var L=A("navigator","userAgent")||"";var R=i.process;var H=i.Deno;var j=R&&R.versions||H&&H.version;var N=j&&j.v8;var B,F;if(N){B=N.split(".");F=B[0]>0&&B[0]<4?1:+(B[0]+B[1])}if(!F&&L){B=L.match(/Edge\/(\d+)/);if(!B||B[1]>=74){B=L.match(/Chrome\/(\d+)/);if(B)F=+B[1]}}var U=F;var W=!!Object.getOwnPropertySymbols&&!s((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&U&&U<41}));var $=W&&!Symbol.sham&&typeof Symbol.iterator=="symbol";var V=i.Object;var G=$?function(e){return typeof e=="symbol"}:function(e){var t=A("Symbol");return O(t)&&P(t.prototype,V(e))};var z=i.String;var X=function(e){try{return z(e)}catch(e){return"Object"}};var q=i.TypeError;var K=function(e){if(O(e))return e;throw q(X(e)+" is not a function")};var Y=function(e,t){var n=e[t];return n==null?undefined:K(n)};var J=i.TypeError;var Q=function(e,t){var n,r;if(t==="string"&&O(n=e.toString)&&!M(r=l(n,e)))return r;if(O(n=e.valueOf)&&!M(r=l(n,e)))return r;if(t!=="string"&&O(n=e.toString)&&!M(r=l(n,e)))return r;throw J("Can't convert object to primitive value")};var Z=false;var ee=Object.defineProperty;var te=function(e,t){try{ee(i,e,{value:t,configurable:true,writable:true})}catch(n){i[e]=t}return t};var ne="__core-js_shared__";var re=i[ne]||te(ne,{});var ie=re;var se=n((function(e){(e.exports=function(e,t){return ie[e]||(ie[e]=t!==undefined?t:{})})("versions",[]).push({version:"3.19.2",mode:"global",copyright:"(c) 2021 Denis Pushkarev (zloirock.ru)"})}));var oe=i.Object;var ae=function(e){return oe(x(e))};var le=b({}.hasOwnProperty);var ue=Object.hasOwn||function e(t,n){return le(ae(t),n)};var ce=0;var fe=Math.random();var de=b(1..toString);var he=function(e){return"Symbol("+(e===undefined?"":e)+")_"+de(++ce+fe,36)};var pe=se("wks");var me=i.Symbol;var ge=me&&me["for"];var ve=$?me:me&&me.withoutSetter||he;var ye=function(e){if(!ue(pe,e)||!(W||typeof pe[e]=="string")){var t="Symbol."+e;if(W&&ue(me,e)){pe[e]=me[e]}else if($&&ge){pe[e]=ge(t)}else{pe[e]=ve(t)}}return pe[e]};var be=i.TypeError;var we=ye("toPrimitive");var Se=function(e,t){if(!M(e)||G(e))return e;var n=Y(e,we);var r;if(n){if(t===undefined)t="default";r=l(n,e,t);if(!M(r)||G(r))return r;throw be("Can't convert object to primitive value")}if(t===undefined)t="number";return Q(e,t)};var ke=function(e){var t=Se(e,"string");return G(t)?t:t+""};var Ie=i.document;var Ee=M(Ie)&&M(Ie.createElement);var Ce=function(e){return Ee?Ie.createElement(e):{}};var _e=!o&&!s((function(){return Object.defineProperty(Ce("div"),"a",{get:function(){return 7}}).a!=7}));var xe=Object.getOwnPropertyDescriptor;var Te=o?xe:function e(t,n){t=T(t);n=ke(n);if(_e)try{return xe(t,n)}catch(e){}if(ue(t,n))return p(!l(h.f,t,n),t[n])};var Oe={f:Te};var Me=i.String;var De=i.TypeError;var Ae=function(e){if(M(e))return e;throw De(Me(e)+" is not an object")};var Pe=i.TypeError;var Le=Object.defineProperty;var Re=o?Le:function e(t,n,r){Ae(t);n=ke(n);Ae(r);if(_e)try{return Le(t,n,r)}catch(e){}if("get"in r||"set"in r)throw Pe("Accessors not supported");if("value"in r)t[n]=r.value;return t};var He={f:Re};var je=o?function(e,t,n){return He.f(e,t,p(1,n))}:function(e,t,n){e[t]=n;return e};var Ne=b(Function.toString);if(!O(ie.inspectSource)){ie.inspectSource=function(e){return Ne(e)}}var Be=ie.inspectSource;var Fe=i.WeakMap;var Ue=O(Fe)&&/native code/.test(Be(Fe));var We=se("keys");var $e=function(e){return We[e]||(We[e]=he(e))};var Ve={};var Ge="Object already initialized";var ze=i.TypeError;var Xe=i.WeakMap;var qe,Ke,Ye;var Je=function(e){return Ye(e)?Ke(e):qe(e,{})};var Qe=function(e){return function(t){var n;if(!M(t)||(n=Ke(t)).type!==e){throw ze("Incompatible receiver, "+e+" required")}return n}};if(Ue||ie.state){var Ze=ie.state||(ie.state=new Xe);var et=b(Ze.get);var tt=b(Ze.has);var nt=b(Ze.set);qe=function(e,t){if(tt(Ze,e))throw new ze(Ge);t.facade=e;nt(Ze,e,t);return t};Ke=function(e){return et(Ze,e)||{}};Ye=function(e){return tt(Ze,e)}}else{var rt=$e("state");Ve[rt]=true;qe=function(e,t){if(ue(e,rt))throw new ze(Ge);t.facade=e;je(e,rt,t);return t};Ke=function(e){return ue(e,rt)?e[rt]:{}};Ye=function(e){return ue(e,rt)}}var it={set:qe,get:Ke,has:Ye,enforce:Je,getterFor:Qe};var st=Function.prototype;var ot=o&&Object.getOwnPropertyDescriptor;var at=ue(st,"name");var lt=at&&function e(){}.name==="something";var ut=at&&(!o||o&&ot(st,"name").configurable);var ct={EXISTS:at,PROPER:lt,CONFIGURABLE:ut};var ft=n((function(e){var t=ct.CONFIGURABLE;var n=it.get;var r=it.enforce;var s=String(String).split("String");(e.exports=function(e,n,o,a){var l=a?!!a.unsafe:false;var u=a?!!a.enumerable:false;var c=a?!!a.noTargetGet:false;var f=a&&a.name!==undefined?a.name:n;var d;if(O(o)){if(String(f).slice(0,7)==="Symbol("){f="["+String(f).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"}if(!ue(o,"name")||t&&o.name!==f){je(o,"name",f)}d=r(o);if(!d.source){d.source=s.join(typeof f=="string"?f:"")}}if(e===i){if(u)e[n]=o;else te(n,o);return}else if(!l){delete e[n]}else if(!c&&e[n]){u=true}if(u)e[n]=o;else je(e,n,o)})(Function.prototype,"toString",(function e(){return O(this)&&n(this).source||Be(this)}))}));var dt=Math.ceil;var ht=Math.floor;var pt=function(e){var t=+e;return t!==t||t===0?0:(t>0?ht:dt)(t)};var mt=Math.max;var gt=Math.min;var vt=function(e,t){var n=pt(e);return n<0?mt(n+t,0):gt(n,t)};var yt=Math.min;var bt=function(e){return e>0?yt(pt(e),9007199254740991):0};var wt=function(e){return bt(e.length)};var St=function(e){return function(t,n,r){var i=T(t);var s=wt(i);var o=vt(r,s);var a;if(e&&n!=n)while(s>o){a=i[o++];if(a!=a)return true}else for(;s>o;o++){if((e||o in i)&&i[o]===n)return e||o||0}return!e&&-1}};var kt={includes:St(true),indexOf:St(false)};var It=kt.indexOf;var Et=b([].push);var Ct=function(e,t){var n=T(e);var r=0;var i=[];var s;for(s in n)!ue(Ve,s)&&ue(n,s)&&Et(i,s);while(t.length>r)if(ue(n,s=t[r++])){~It(i,s)||Et(i,s)}return i};var _t=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];var xt=_t.concat("length","prototype");var Tt=Object.getOwnPropertyNames||function e(t){return Ct(t,xt)};var Ot={f:Tt};var Mt=Object.getOwnPropertySymbols;var Dt={f:Mt};var At=b([].concat);var Pt=A("Reflect","ownKeys")||function e(t){var n=Ot.f(Ae(t));var r=Dt.f;return r?At(n,r(t)):n};var Lt=function(e,t){var n=Pt(t);var r=He.f;var i=Oe.f;for(var s=0;s<n.length;s++){var o=n[s];if(!ue(e,o))r(e,o,i(t,o))}};var Rt=/#|\.prototype\./;var Ht=function(e,t){var n=Nt[jt(e)];return n==Ft?true:n==Bt?false:O(t)?s(t):!!t};var jt=Ht.normalize=function(e){return String(e).replace(Rt,".").toLowerCase()};var Nt=Ht.data={};var Bt=Ht.NATIVE="N";var Ft=Ht.POLYFILL="P";var Ut=Ht;var Wt=Oe.f;var $t=function(e,t){var n=e.target;var r=e.global;var s=e.stat;var o,a,l,u,c,f;if(r){a=i}else if(s){a=i[n]||te(n,{})}else{a=(i[n]||{}).prototype}if(a)for(l in t){c=t[l];if(e.noTargetGet){f=Wt(a,l);u=f&&f.value}else u=a[l];o=Ut(r?l:n+(s?".":"#")+l,e.forced);if(!o&&u!==undefined){if(typeof c==typeof u)continue;Lt(c,u)}if(e.sham||u&&u.sham){je(c,"sham",true)}ft(a,l,c,e)}};var Vt=!s((function(){function e(){}e.prototype.constructor=null;return Object.getPrototypeOf(new e)!==e.prototype}));var Gt=$e("IE_PROTO");var zt=i.Object;var Xt=zt.prototype;var qt=Vt?zt.getPrototypeOf:function(e){var t=ae(e);if(ue(t,Gt))return t[Gt];var n=t.constructor;if(O(n)&&t instanceof n){return n.prototype}return t instanceof zt?Xt:null};var Kt=i.String;var Yt=i.TypeError;var Jt=function(e){if(typeof e=="object"||O(e))return e;throw Yt("Can't set "+Kt(e)+" as a prototype")};var Qt=Object.setPrototypeOf||("__proto__"in{}?function(){var e=false;var t={};var n;try{n=b(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set);n(t,[]);e=t instanceof Array}catch(e){}return function t(r,i){Ae(r);Jt(i);if(e)n(r,i);else r.__proto__=i;return r}}():undefined);var Zt=Object.keys||function e(t){return Ct(t,_t)};var en=o?Object.defineProperties:function e(t,n){Ae(t);var r=T(n);var i=Zt(n);var s=i.length;var o=0;var a;while(s>o)He.f(t,a=i[o++],r[a]);return t};var tn=A("document","documentElement");var nn=">";var rn="<";var sn="prototype";var on="script";var an=$e("IE_PROTO");var ln=function(){};var un=function(e){return rn+on+nn+e+rn+"/"+on+nn};var cn=function(e){e.write(un(""));e.close();var t=e.parentWindow.Object;e=null;return t};var fn=function(){var e=Ce("iframe");var t="java"+on+":";var n;e.style.display="none";tn.appendChild(e);e.src=String(t);n=e.contentWindow.document;n.open();n.write(un("document.F=Object"));n.close();return n.F};var dn;var hn=function(){try{dn=new ActiveXObject("htmlfile")}catch(e){}hn=typeof document!="undefined"?document.domain&&dn?cn(dn):fn():cn(dn);var e=_t.length;while(e--)delete hn[sn][_t[e]];return hn()};Ve[an]=true;var pn=Object.create||function e(t,n){var r;if(t!==null){ln[sn]=Ae(t);r=new ln;ln[sn]=null;r[an]=t}else r=hn();return n===undefined?r:en(r,n)};var mn=function(e,t,n){var r=ke(t);if(r in e)He.f(e,r,p(0,n));else e[r]=n};var gn=i.Array;var vn=Math.max;var yn=function(e,t,n){var r=wt(e);var i=vt(t,r);var s=vt(n===undefined?r:n,r);var o=gn(vn(s-i,0));for(var a=0;i<s;i++,a++)mn(o,a,e[i]);o.length=a;return o};var bn=b("".replace);var wn=b("".split);var Sn=b([].join);var kn=function(e){return String(Error(e).stack)}("zxcasd");var In=/\n\s*at [^:]*:[^\n]*/;var En=In.test(kn);var Cn=/@[^\n]*\n/.test(kn)&&!/zxcasd/.test(kn);var _n=function(e,t){if(typeof e!="string")return e;if(En){while(t--)e=bn(e,In,"")}else if(Cn){return Sn(yn(wn(e,"\n"),t),"\n")}return e};var xn=function(e,t){if(M(t)&&"cause"in t){je(e,"cause",t.cause)}};var Tn=b(b.bind);var On=function(e,t){K(e);return t===undefined?e:Tn?Tn(e,t):function(){return e.apply(t,arguments)}};var Mn={};var Dn=ye("iterator");var An=Array.prototype;var Pn=function(e){return e!==undefined&&(Mn.Array===e||An[Dn]===e)};var Ln=ye("toStringTag");var Rn={};Rn[Ln]="z";var Hn=String(Rn)==="[object z]";var jn=ye("toStringTag");var Nn=i.Object;var Bn=k(function(){return arguments}())=="Arguments";var Fn=function(e,t){try{return e[t]}catch(e){}};var Un=Hn?k:function(e){var t,n,r;return e===undefined?"Undefined":e===null?"Null":typeof(n=Fn(t=Nn(e),jn))=="string"?n:Bn?k(t):(r=k(t))=="Object"&&O(t.callee)?"Arguments":r};var Wn=ye("iterator");var $n=function(e){if(e!=undefined)return Y(e,Wn)||Y(e,"@@iterator")||Mn[Un(e)]};var Vn=i.TypeError;var Gn=function(e,t){var n=arguments.length<2?$n(e):t;if(K(n))return Ae(l(n,e));throw Vn(X(e)+" is not iterable")};var zn=function(e,t,n){var r,i;Ae(e);try{r=Y(e,"return");if(!r){if(t==="throw")throw n;return n}r=l(r,e)}catch(e){i=true;r=e}if(t==="throw")throw n;if(i)throw r;Ae(r);return n};var Xn=i.TypeError;var qn=function(e,t){this.stopped=e;this.result=t};var Kn=qn.prototype;var Yn=function(e,t,n){var r=n&&n.that;var i=!!(n&&n.AS_ENTRIES);var s=!!(n&&n.IS_ITERATOR);var o=!!(n&&n.INTERRUPTED);var a=On(t,r);var u,c,f,d,h,p,m;var g=function(e){if(u)zn(u,"normal",e);return new qn(true,e)};var v=function(e){if(i){Ae(e);return o?a(e[0],e[1],g):a(e[0],e[1])}return o?a(e,g):a(e)};if(s){u=e}else{c=$n(e);if(!c)throw Xn(X(e)+" is not iterable");if(Pn(c)){for(f=0,d=wt(e);d>f;f++){h=v(e[f]);if(h&&P(Kn,h))return h}return new qn(false)}u=Gn(e,c)}p=u.next;while(!(m=l(p,u)).done){try{h=v(m.value)}catch(e){zn(u,"throw",e)}if(typeof h=="object"&&h&&P(Kn,h))return h}return new qn(false)};var Jn=i.String;var Qn=function(e){if(Un(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Jn(e)};var Zn=function(e,t){return e===undefined?arguments.length<2?"":t:Qn(e)};var er=!s((function(){var e=Error("a");if(!("stack"in e))return true;Object.defineProperty(e,"stack",p(1,7));return e.stack!==7}));var tr=ye("toStringTag");var nr=i.Error;var rr=[].push;var ir=function e(t,n){var r=arguments.length>2?arguments[2]:undefined;var i=P(sr,this);var s;if(Qt){s=Qt(new nr(undefined),i?qt(this):sr)}else{s=i?this:pn(sr);je(s,tr,"Error")}je(s,"message",Zn(n,""));if(er)je(s,"stack",_n(s.stack,1));xn(s,r);var o=[];Yn(t,rr,{that:o});je(s,"errors",o);return s};if(Qt)Qt(ir,nr);else Lt(ir,nr);var sr=ir.prototype=pn(nr.prototype,{constructor:p(1,ir),message:p(1,""),name:p(1,"AggregateError")});$t({global:true},{AggregateError:ir});var or=ye("unscopables");var ar=Array.prototype;if(ar[or]==undefined){He.f(ar,or,{configurable:true,value:pn(null)})}var lr=function(e){ar[or][e]=true};$t({target:"Array",proto:true},{at:function e(t){var n=ae(this);var r=wt(n);var i=pt(t);var s=i>=0?i:r+i;return s<0||s>=r?undefined:n[s]}});lr("at");var ur=Array.isArray||function e(t){return k(t)=="Array"};var cr=b([].reverse);var fr=[1,2];$t({target:"Array",proto:true,forced:String(fr)===String(fr.reverse())},{reverse:function e(){if(ur(this))this.length=this.length;return cr(this)}});var dr=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined";var hr=function(e,t,n){for(var r in t)ft(e,r,t[r],n);return e};var pr=i.TypeError;var mr=function(e,t){if(P(t,e))return e;throw pr("Incorrect invocation")};var gr=i.RangeError;var vr=function(e){if(e===undefined)return 0;var t=pt(e);var n=bt(t);if(t!==n)throw gr("Wrong length or index");return n};var yr=i.Array;var br=Math.abs;var wr=Math.pow;var Sr=Math.floor;var kr=Math.log;var Ir=Math.LN2;var Er=function(e,t,n){var r=yr(n);var i=n*8-t-1;var s=(1<<i)-1;var o=s>>1;var a=t===23?wr(2,-24)-wr(2,-77):0;var l=e<0||e===0&&1/e<0?1:0;var u=0;var c,f,d;e=br(e);if(e!=e||e===Infinity){f=e!=e?1:0;c=s}else{c=Sr(kr(e)/Ir);d=wr(2,-c);if(e*d<1){c--;d*=2}if(c+o>=1){e+=a/d}else{e+=a*wr(2,1-o)}if(e*d>=2){c++;d/=2}if(c+o>=s){f=0;c=s}else if(c+o>=1){f=(e*d-1)*wr(2,t);c=c+o}else{f=e*wr(2,o-1)*wr(2,t);c=0}}while(t>=8){r[u++]=f&255;f/=256;t-=8}c=c<<t|f;i+=t;while(i>0){r[u++]=c&255;c/=256;i-=8}r[--u]|=l*128;return r};var Cr=function(e,t){var n=e.length;var r=n*8-t-1;var i=(1<<r)-1;var s=i>>1;var o=r-7;var a=n-1;var l=e[a--];var u=l&127;var c;l>>=7;while(o>0){u=u*256+e[a--];o-=8}c=u&(1<<-o)-1;u>>=-o;o+=t;while(o>0){c=c*256+e[a--];o-=8}if(u===0){u=1-s}else if(u===i){return c?NaN:l?-Infinity:Infinity}else{c=c+wr(2,t);u=u-s}return(l?-1:1)*c*wr(2,u-t)};var _r={pack:Er,unpack:Cr};var xr=function e(t){var n=ae(this);var r=wt(n);var i=arguments.length;var s=vt(i>1?arguments[1]:undefined,r);var o=i>2?arguments[2]:undefined;var a=o===undefined?r:vt(o,r);while(a>s)n[s++]=t;return n};var Tr=He.f;var Or=ye("toStringTag");var Mr=function(e,t,n){if(e&&!ue(e=n?e:e.prototype,Or)){Tr(e,Or,{configurable:true,value:t})}};var Dr=Ot.f;var Ar=He.f;var Pr=ct.PROPER;var Lr=ct.CONFIGURABLE;var Rr=it.get;var Hr=it.set;var jr="ArrayBuffer";var Nr="DataView";var Br="prototype";var Fr="Wrong length";var Ur="Wrong index";var Wr=i[jr];var $r=Wr;var Vr=$r&&$r[Br];var Gr=i[Nr];var zr=Gr&&Gr[Br];var Xr=Object.prototype;var qr=i.Array;var Kr=i.RangeError;var Yr=b(xr);var Jr=b([].reverse);var Qr=_r.pack;var Zr=_r.unpack;var ei=function(e){return[e&255]};var ti=function(e){return[e&255,e>>8&255]};var ni=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]};var ri=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]};var ii=function(e){return Qr(e,23,4)};var si=function(e){return Qr(e,52,8)};var oi=function(e,t){Ar(e[Br],t,{get:function(){return Rr(this)[t]}})};var ai=function(e,t,n,r){var i=vr(n);var s=Rr(e);if(i+t>s.byteLength)throw Kr(Ur);var o=Rr(s.buffer).bytes;var a=i+s.byteOffset;var l=yn(o,a,a+t);return r?l:Jr(l)};var li=function(e,t,n,r,i,s){var o=vr(n);var a=Rr(e);if(o+t>a.byteLength)throw Kr(Ur);var l=Rr(a.buffer).bytes;var u=o+a.byteOffset;var c=r(+i);for(var f=0;f<t;f++)l[u+f]=c[s?f:t-f-1]};if(!dr){$r=function e(t){mr(this,Vr);var n=vr(t);Hr(this,{bytes:Yr(qr(n),0),byteLength:n});if(!o)this.byteLength=n};Vr=$r[Br];Gr=function e(t,n,r){mr(this,zr);mr(t,Vr);var i=Rr(t).byteLength;var s=pt(n);if(s<0||s>i)throw Kr("Wrong offset");r=r===undefined?i-s:bt(r);if(s+r>i)throw Kr(Fr);Hr(this,{buffer:t,byteLength:r,byteOffset:s});if(!o){this.buffer=t;this.byteLength=r;this.byteOffset=s}};zr=Gr[Br];if(o){oi($r,"byteLength");oi(Gr,"buffer");oi(Gr,"byteLength");oi(Gr,"byteOffset")}hr(zr,{getInt8:function e(t){return ai(this,1,t)[0]<<24>>24},getUint8:function e(t){return ai(this,1,t)[0]},getInt16:function e(t){var n=ai(this,2,t,arguments.length>1?arguments[1]:undefined);return(n[1]<<8|n[0])<<16>>16},getUint16:function e(t){var n=ai(this,2,t,arguments.length>1?arguments[1]:undefined);return n[1]<<8|n[0]},getInt32:function e(t){return ri(ai(this,4,t,arguments.length>1?arguments[1]:undefined))},getUint32:function e(t){return ri(ai(this,4,t,arguments.length>1?arguments[1]:undefined))>>>0},getFloat32:function e(t){return Zr(ai(this,4,t,arguments.length>1?arguments[1]:undefined),23)},getFloat64:function e(t){return Zr(ai(this,8,t,arguments.length>1?arguments[1]:undefined),52)},setInt8:function e(t,n){li(this,1,t,ei,n)},setUint8:function e(t,n){li(this,1,t,ei,n)},setInt16:function e(t,n){li(this,2,t,ti,n,arguments.length>2?arguments[2]:undefined)},setUint16:function e(t,n){li(this,2,t,ti,n,arguments.length>2?arguments[2]:undefined)},setInt32:function e(t,n){li(this,4,t,ni,n,arguments.length>2?arguments[2]:undefined)},setUint32:function e(t,n){li(this,4,t,ni,n,arguments.length>2?arguments[2]:undefined)},setFloat32:function e(t,n){li(this,4,t,ii,n,arguments.length>2?arguments[2]:undefined)},setFloat64:function e(t,n){li(this,8,t,si,n,arguments.length>2?arguments[2]:undefined)}})}else{var ui=Pr&&Wr.name!==jr;if(!s((function(){Wr(1)}))||!s((function(){new Wr(-1)}))||s((function(){new Wr;new Wr(1.5);new Wr(NaN);return ui&&!Lr}))){$r=function e(t){mr(this,Vr);return new Wr(vr(t))};$r[Br]=Vr;for(var ci=Dr(Wr),fi=0,di;ci.length>fi;){if(!((di=ci[fi++])in $r)){je($r,di,Wr[di])}}Vr.constructor=$r}else if(ui&&Lr){je(Wr,"name",jr)}if(Qt&&qt(zr)!==Xr){Qt(zr,Xr)}var hi=new Gr(new $r(2));var pi=b(zr.setInt8);hi.setInt8(0,2147483648);hi.setInt8(1,2147483649);if(hi.getInt8(0)||!hi.getInt8(1))hr(zr,{setInt8:function e(t,n){pi(this,t,n<<24>>24)},setUint8:function e(t,n){pi(this,t,n<<24>>24)}},{unsafe:true})}Mr($r,jr);Mr(Gr,Nr);var mi={ArrayBuffer:$r,DataView:Gr};var gi=function(){};var vi=[];var yi=A("Reflect","construct");var bi=/^\s*(?:class|function)\b/;var wi=b(bi.exec);var Si=!bi.exec(gi);var ki=function(e){if(!O(e))return false;try{yi(gi,vi,e);return true}catch(e){return false}};var Ii=function(e){if(!O(e))return false;switch(Un(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return false}return Si||!!wi(bi,Be(e))};var Ei=!yi||s((function(){var e;return ki(ki.call)||!ki(Object)||!ki((function(){e=true}))||e}))?Ii:ki;var Ci=i.TypeError;var _i=function(e){if(Ei(e))return e;throw Ci(X(e)+" is not a constructor")};var xi=ye("species");var Ti=function(e,t){var n=Ae(e).constructor;var r;return n===undefined||(r=Ae(n)[xi])==undefined?t:_i(r)};var Oi=mi.ArrayBuffer;var Mi=mi.DataView;var Di=Mi.prototype;var Ai=b(Oi.prototype.slice);var Pi=b(Di.getUint8);var Li=b(Di.setUint8);var Ri=s((function(){return!new Oi(2).slice(1,undefined).byteLength}));$t({target:"ArrayBuffer",proto:true,unsafe:true,forced:Ri},{slice:function e(t,n){if(Ai&&n===undefined){return Ai(Ae(this),t)}var r=Ae(this).byteLength;var i=vt(t,r);var s=vt(n===undefined?r:n,r);var o=new(Ti(this,Oi))(bt(s-i));var a=new Mi(this);var l=new Mi(o);var u=0;while(i<s){Li(l,u++,Pi(a,i++))}return o}});$t({target:"Object",stat:true},{fromEntries:function e(t){var n={};Yn(t,(function(e,t){mn(n,e,t)}),{AS_ENTRIES:true});return n}});$t({target:"Object",stat:true},{hasOwn:ue});var Hi=function(e){var t,n;this.promise=new e((function(e,r){if(t!==undefined||n!==undefined)throw TypeError("Bad Promise constructor");t=e;n=r}));this.resolve=K(t);this.reject=K(n)};var ji=function(e){return new Hi(e)};var Ni={f:ji};var Bi=function(e){try{return{error:false,value:e()}}catch(e){return{error:true,value:e}}};$t({target:"Promise",stat:true},{allSettled:function e(t){var n=this;var r=Ni.f(n);var i=r.resolve;var s=r.reject;var o=Bi((function(){var e=K(n.resolve);var r=[];var s=0;var o=1;Yn(t,(function(t){var a=s++;var u=false;o++;l(e,n,t).then((function(e){if(u)return;u=true;r[a]={status:"fulfilled",value:e};--o||i(r)}),(function(e){if(u)return;u=true;r[a]={status:"rejected",reason:e};--o||i(r)}))}));--o||i(r)}));if(o.error)s(o.value);return r.promise}});var Fi="No one promise resolved";$t({target:"Promise",stat:true},{any:function e(t){var n=this;var r=A("AggregateError");var i=Ni.f(n);var s=i.resolve;var o=i.reject;var a=Bi((function(){var e=K(n.resolve);var i=[];var a=0;var u=1;var c=false;Yn(t,(function(t){var f=a++;var d=false;u++;l(e,n,t).then((function(e){if(d||c)return;c=true;s(e)}),(function(e){if(d||c)return;d=true;i[f]=e;--u||o(new r(i,Fi))}))}));--u||o(new r(i,Fi))}));if(a.error)o(a.value);return i.promise}});var Ui=i.Promise;var Wi=function(e,t){Ae(e);if(M(t)&&t.constructor===e)return t;var n=Ni.f(e);var r=n.resolve;r(t);return n.promise};var $i=!!Ui&&s((function(){Ui.prototype["finally"].call({then:function(){}},(function(){}))}));$t({target:"Promise",proto:true,real:true,forced:$i},{finally:function(e){var t=Ti(this,A("Promise"));var n=O(e);return this.then(n?function(n){return Wi(t,e()).then((function(){return n}))}:e,n?function(n){return Wi(t,e()).then((function(){throw n}))}:e)}});if(!Z&&O(Ui)){var Vi=A("Promise").prototype["finally"];if(Ui.prototype["finally"]!==Vi){ft(Ui.prototype,"finally",Vi,{unsafe:true})}}var Gi=ye("iterator");var zi=false;var Xi,qi,Ki;if([].keys){Ki=[].keys();if(!("next"in Ki))zi=true;else{qi=qt(qt(Ki));if(qi!==Object.prototype)Xi=qi}}var Yi=Xi==undefined||s((function(){var e={};return Xi[Gi].call(e)!==e}));if(Yi)Xi={};if(!O(Xi[Gi])){ft(Xi,Gi,(function(){return this}))}var Ji={IteratorPrototype:Xi,BUGGY_SAFARI_ITERATORS:zi};var Qi=Ji.IteratorPrototype;var Zi=function(){return this};var es=function(e,t,n){var r=t+" Iterator";e.prototype=pn(Qi,{next:p(1,n)});Mr(e,r,false,true);Mn[r]=Zi;return e};var ts=ye("match");var ns=function(e){var t;return M(e)&&((t=e[ts])!==undefined?!!t:k(e)=="RegExp")};var rs=function(){var e=Ae(this);var t="";if(e.global)t+="g";if(e.ignoreCase)t+="i";if(e.multiline)t+="m";if(e.dotAll)t+="s";if(e.unicode)t+="u";if(e.sticky)t+="y";return t};var is=b("".charAt);var ss=b("".charCodeAt);var os=b("".slice);var as=function(e){return function(t,n){var r=Qn(x(t));var i=pt(n);var s=r.length;var o,a;if(i<0||i>=s)return e?"":undefined;o=ss(r,i);return o<55296||o>56319||i+1===s||(a=ss(r,i+1))<56320||a>57343?e?is(r,i):o:e?os(r,i,i+2):(o-55296<<10)+(a-56320)+65536}};var ls={codeAt:as(false),charAt:as(true)};var us=ls.charAt;var cs=function(e,t,n){return t+(n?us(e,t).length:1)};var fs=i.RegExp;var ds=s((function(){var e=fs("a","y");e.lastIndex=2;return e.exec("abcd")!=null}));var hs=ds||s((function(){return!fs("a","y").sticky}));var ps=ds||s((function(){var e=fs("^r","gy");e.lastIndex=2;return e.exec("str")!=null}));var ms={BROKEN_CARET:ps,MISSED_STICKY:hs,UNSUPPORTED_Y:ds};var gs=i.RegExp;var vs=s((function(){var e=gs(".","s");return!(e.dotAll&&e.exec("\n")&&e.flags==="s")}));var ys=i.RegExp;var bs=s((function(){var e=ys("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"}));var ws=it.get;var Ss=se("native-string-replace",String.prototype.replace);var ks=RegExp.prototype.exec;var Is=ks;var Es=b("".charAt);var Cs=b("".indexOf);var _s=b("".replace);var xs=b("".slice);var Ts=function(){var e=/a/;var t=/b*/g;l(ks,e,"a");l(ks,t,"a");return e.lastIndex!==0||t.lastIndex!==0}();var Os=ms.BROKEN_CARET;var Ms=/()??/.exec("")[1]!==undefined;var Ds=Ts||Ms||Os||vs||bs;if(Ds){Is=function e(t){var n=this;var r=ws(n);var i=Qn(t);var s=r.raw;var o,a,u,c,f,d,h;if(s){s.lastIndex=n.lastIndex;o=l(Is,s,i);n.lastIndex=s.lastIndex;return o}var p=r.groups;var m=Os&&n.sticky;var g=l(rs,n);var v=n.source;var y=0;var b=i;if(m){g=_s(g,"y","");if(Cs(g,"g")===-1){g+="g"}b=xs(i,n.lastIndex);if(n.lastIndex>0&&(!n.multiline||n.multiline&&Es(i,n.lastIndex-1)!=="\n")){v="(?: "+v+")";b=" "+b;y++}a=new RegExp("^(?:"+v+")",g)}if(Ms){a=new RegExp("^"+v+"$(?!\\s)",g)}if(Ts)u=n.lastIndex;c=l(ks,m?a:n,b);if(m){if(c){c.input=xs(c.input,y);c[0]=xs(c[0],y);c.index=n.lastIndex;n.lastIndex+=c[0].length}else n.lastIndex=0}else if(Ts&&c){n.lastIndex=n.global?c.index+c[0].length:u}if(Ms&&c&&c.length>1){l(Ss,c[0],a,(function(){for(f=1;f<arguments.length-2;f++){if(arguments[f]===undefined)c[f]=undefined}}))}if(c&&p){c.groups=d=pn(null);for(f=0;f<p.length;f++){h=p[f];d[h[0]]=c[h[1]]}}return c}}var As=Is;var Ps=i.TypeError;var Ls=function(e,t){var n=e.exec;if(O(n)){var r=l(n,e,t);if(r!==null)Ae(r);return r}if(k(e)==="RegExp")return l(As,e,t);throw Ps("RegExp#exec called on incompatible receiver")};var Rs=ye("matchAll");var Hs="RegExp String";var js=Hs+" Iterator";var Ns=it.set;var Bs=it.getterFor(js);var Fs=RegExp.prototype;var Us=i.TypeError;var Ws=b(rs);var $s=b("".indexOf);var Vs=b("".matchAll);var Gs=!!Vs&&!s((function(){Vs("a",/./)}));var zs=es((function e(t,n,r,i){Ns(this,{type:js,regexp:t,string:n,global:r,unicode:i,done:false})}),Hs,(function e(){var t=Bs(this);if(t.done)return{value:undefined,done:true};var n=t.regexp;var r=t.string;var i=Ls(n,r);if(i===null)return{value:undefined,done:t.done=true};if(t.global){if(Qn(i[0])==="")n.lastIndex=cs(r,bt(n.lastIndex),t.unicode);return{value:i,done:false}}t.done=true;return{value:i,done:false}}));var Xs=function(e){var t=Ae(this);var n=Qn(e);var r,i,s,o,a,l;r=Ti(t,RegExp);i=t.flags;if(i===undefined&&P(Fs,t)&&!("flags"in Fs)){i=Ws(t)}s=i===undefined?"":Qn(i);o=new r(r===RegExp?t.source:t,s);a=!!~$s(s,"g");l=!!~$s(s,"u");o.lastIndex=bt(t.lastIndex);return new zs(o,n,a,l)};$t({target:"String",proto:true,forced:Gs},{matchAll:function e(t){var n=x(this);var r,i,s,o;if(t!=null){if(ns(t)){r=Qn(x("flags"in Fs?t.flags:Ws(t)));if(!~$s(r,"g"))throw Us("`.matchAll` does not allow non-global regexes")}if(Gs)return Vs(n,t);s=Y(t,Rs);if(s===undefined&&Z&&k(t)=="RegExp")s=Xs;if(s)return l(s,t,n)}else if(Gs)return Vs(n,t);i=Qn(n);o=new RegExp(t,"g");return Z?l(Xs,o,i):o[Rs](i)}});Z||Rs in Fs||ft(Fs,Rs,Xs);var qs=Math.floor;var Ks=b("".charAt);var Ys=b("".replace);var Js=b("".slice);var Qs=/\$([$&'`]|\d{1,2}|<[^>]*>)/g;var Zs=/\$([$&'`]|\d{1,2})/g;var eo=function(e,t,n,r,i,s){var o=n+e.length;var a=r.length;var l=Zs;if(i!==undefined){i=ae(i);l=Qs}return Ys(s,l,(function(s,l){var u;switch(Ks(l,0)){case"$":return"$";case"&":return e;case"`":return Js(t,0,n);case"'":return Js(t,o);case"<":u=i[Js(l,1,-1)];break;default:var c=+l;if(c===0)return s;if(c>a){var f=qs(c/10);if(f===0)return s;if(f<=a)return r[f-1]===undefined?Ks(l,1):r[f-1]+Ks(l,1);return s}u=r[c-1]}return u===undefined?"":u}))};var to=ye("replace");var no=RegExp.prototype;var ro=i.TypeError;var io=b(rs);var so=b("".indexOf);var oo=b("".replace);var ao=b("".slice);var lo=Math.max;var uo=function(e,t,n){if(n>e.length)return-1;if(t==="")return n;return so(e,t,n)};$t({target:"String",proto:true},{replaceAll:function e(t,n){var r=x(this);var i,s,o,a,u,c,f,d,h;var p=0;var m=0;var g="";if(t!=null){i=ns(t);if(i){s=Qn(x("flags"in no?t.flags:io(t)));if(!~so(s,"g"))throw ro("`.replaceAll` does not allow non-global regexes")}o=Y(t,to);if(o){return l(o,t,r,n)}else if(Z&&i){return oo(Qn(r),t,n)}}a=Qn(r);u=Qn(t);c=O(n);if(!c)n=Qn(n);f=u.length;d=lo(1,f);p=uo(a,u,0);while(p!==-1){h=c?Qn(n(u,p,a)):eo(u,a,p,[],undefined,n);g+=ao(a,m,p)+h;m=p+f;p=uo(a,u,p+d)}if(m<a.length){g+=ao(a,m)}return g}});var co=ye("iterator");var fo=false;var ho=function(e,t){if(!t&&!fo)return false;var n=false;try{var r={};r[co]=function(){return{next:function(){return{done:n=true}}}};e(r)}catch(e){}return n};var po=He.f;var mo=i.Int8Array;var go=mo&&mo.prototype;var vo=i.Uint8ClampedArray;var yo=vo&&vo.prototype;var bo=mo&&qt(mo);var wo=go&&qt(go);var So=Object.prototype;var ko=i.TypeError;var Io=ye("toStringTag");var Eo=he("TYPED_ARRAY_TAG");var Co=he("TYPED_ARRAY_CONSTRUCTOR");var _o=dr&&!!Qt&&Un(i.opera)!=="Opera";var xo=false;var To,Oo,Mo;var Do={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};var Ao={BigInt64Array:8,BigUint64Array:8};var Po=function e(t){if(!M(t))return false;var n=Un(t);return n==="DataView"||ue(Do,n)||ue(Ao,n)};var Lo=function(e){if(!M(e))return false;var t=Un(e);return ue(Do,t)||ue(Ao,t)};var Ro=function(e){if(Lo(e))return e;throw ko("Target is not a typed array")};var Ho=function(e){if(O(e)&&(!Qt||P(bo,e)))return e;throw ko(X(e)+" is not a typed array constructor")};var jo=function(e,t,n){if(!o)return;if(n)for(var r in Do){var s=i[r];if(s&&ue(s.prototype,e))try{delete s.prototype[e]}catch(e){}}if(!wo[e]||n){ft(wo,e,n?t:_o&&go[e]||t)}};var No=function(e,t,n){var r,s;if(!o)return;if(Qt){if(n)for(r in Do){s=i[r];if(s&&ue(s,e))try{delete s[e]}catch(e){}}if(!bo[e]||n){try{return ft(bo,e,n?t:_o&&bo[e]||t)}catch(e){}}else return}for(r in Do){s=i[r];if(s&&(!s[e]||n)){ft(s,e,t)}}};for(To in Do){Oo=i[To];Mo=Oo&&Oo.prototype;if(Mo)je(Mo,Co,Oo);else _o=false}for(To in Ao){Oo=i[To];Mo=Oo&&Oo.prototype;if(Mo)je(Mo,Co,Oo)}if(!_o||!O(bo)||bo===Function.prototype){bo=function e(){throw ko("Incorrect invocation")};if(_o)for(To in Do){if(i[To])Qt(i[To],bo)}}if(!_o||!wo||wo===So){wo=bo.prototype;if(_o)for(To in Do){if(i[To])Qt(i[To].prototype,wo)}}if(_o&&qt(yo)!==wo){Qt(yo,wo)}if(o&&!ue(wo,Io)){xo=true;po(wo,Io,{get:function(){return M(this)?this[Eo]:undefined}});for(To in Do)if(i[To]){je(i[To],Eo,To)}}var Bo={NATIVE_ARRAY_BUFFER_VIEWS:_o,TYPED_ARRAY_CONSTRUCTOR:Co,TYPED_ARRAY_TAG:xo&&Eo,aTypedArray:Ro,aTypedArrayConstructor:Ho,exportTypedArrayMethod:jo,exportTypedArrayStaticMethod:No,isView:Po,isTypedArray:Lo,TypedArray:bo,TypedArrayPrototype:wo};var Fo=Bo.NATIVE_ARRAY_BUFFER_VIEWS;var Uo=i.ArrayBuffer;var Wo=i.Int8Array;var $o=!Fo||!s((function(){Wo(1)}))||!s((function(){new Wo(-1)}))||!ho((function(e){new Wo;new Wo(null);new Wo(1.5);new Wo(e)}),true)||s((function(){return new Wo(new Uo(2),1,undefined).length!==1}));var Vo=Math.floor;var Go=Number.isInteger||function e(t){return!M(t)&&isFinite(t)&&Vo(t)===t};var zo=i.RangeError;var Xo=function(e){var t=pt(e);if(t<0)throw zo("The argument can't be less than 0");return t};var qo=i.RangeError;var Ko=function(e,t){var n=Xo(e);if(n%t)throw qo("Wrong offset");return n};var Yo=Bo.aTypedArrayConstructor;var Jo=function e(t){var n=_i(this);var r=ae(t);var i=arguments.length;var s=i>1?arguments[1]:undefined;var o=s!==undefined;var a=$n(r);var u,c,f,d,h,p;if(a&&!Pn(a)){h=Gn(r,a);p=h.next;r=[];while(!(d=l(p,h)).done){r.push(d.value)}}if(o&&i>2){s=On(s,arguments[2])}c=wt(r);f=new(Yo(n))(c);for(u=0;c>u;u++){f[u]=o?s(r[u],u):r[u]}return f};var Qo=ye("species");var Zo=i.Array;var ea=function(e){var t;if(ur(e)){t=e.constructor;if(Ei(t)&&(t===Zo||ur(t.prototype)))t=undefined;else if(M(t)){t=t[Qo];if(t===null)t=undefined}}return t===undefined?Zo:t};var ta=function(e,t){return new(ea(e))(t===0?0:t)};var na=b([].push);var ra=function(e){var t=e==1;var n=e==2;var r=e==3;var i=e==4;var s=e==6;var o=e==7;var a=e==5||s;return function(l,u,c,f){var d=ae(l);var h=C(d);var p=On(u,c);var m=wt(h);var g=0;var v=f||ta;var y=t?v(l,m):n||o?v(l,0):undefined;var b,w;for(;m>g;g++)if(a||g in h){b=h[g];w=p(b,g,d);if(e){if(t)y[g]=w;else if(w)switch(e){case 3:return true;case 5:return b;case 6:return g;case 2:na(y,b)}else switch(e){case 4:return false;case 7:na(y,b)}}}return s?-1:r||i?i:y}};var ia={forEach:ra(0),map:ra(1),filter:ra(2),some:ra(3),every:ra(4),find:ra(5),findIndex:ra(6),filterReject:ra(7)};var sa=ye("species");var oa=function(e){var t=A(e);var n=He.f;if(o&&t&&!t[sa]){n(t,sa,{configurable:true,get:function(){return this}})}};var aa=function(e,t,n){var r,i;if(Qt&&O(r=t.constructor)&&r!==n&&M(i=r.prototype)&&i!==n.prototype)Qt(e,i);return e};var la=n((function(e){var t=Ot.f;var n=ia.forEach;var r=it.get;var s=it.set;var a=He.f;var u=Oe.f;var c=Math.round;var f=i.RangeError;var d=mi.ArrayBuffer;var h=d.prototype;var m=mi.DataView;var g=Bo.NATIVE_ARRAY_BUFFER_VIEWS;var v=Bo.TYPED_ARRAY_CONSTRUCTOR;var y=Bo.TYPED_ARRAY_TAG;var b=Bo.TypedArray;var w=Bo.TypedArrayPrototype;var S=Bo.aTypedArrayConstructor;var k=Bo.isTypedArray;var I="BYTES_PER_ELEMENT";var E="Wrong length";var C=function(e,t){S(e);var n=0;var r=t.length;var i=new e(r);while(r>n)i[n]=t[n++];return i};var _=function(e,t){a(e,t,{get:function(){return r(this)[t]}})};var x=function(e){var t;return P(h,e)||(t=Un(e))=="ArrayBuffer"||t=="SharedArrayBuffer"};var T=function(e,t){return k(e)&&!G(t)&&t in e&&Go(+t)&&t>=0};var O=function e(t,n){n=ke(n);return T(t,n)?p(2,t[n]):u(t,n)};var D=function e(t,n,r){n=ke(n);if(T(t,n)&&M(r)&&ue(r,"value")&&!ue(r,"get")&&!ue(r,"set")&&!r.configurable&&(!ue(r,"writable")||r.writable)&&(!ue(r,"enumerable")||r.enumerable)){t[n]=r.value;return t}return a(t,n,r)};if(o){if(!g){Oe.f=O;He.f=D;_(w,"buffer");_(w,"byteOffset");_(w,"byteLength");_(w,"length")}$t({target:"Object",stat:true,forced:!g},{getOwnPropertyDescriptor:O,defineProperty:D});e.exports=function(e,o,u){var h=e.match(/\d+$/)[0]/8;var p=e+(u?"Clamped":"")+"Array";var S="get"+e;var _="set"+e;var T=i[p];var O=T;var D=O&&O.prototype;var A={};var P=function(e,t){var n=r(e);return n.view[S](t*h+n.byteOffset,true)};var L=function(e,t,n){var i=r(e);if(u)n=(n=c(n))<0?0:n>255?255:n&255;i.view[_](t*h+i.byteOffset,n,true)};var R=function(e,t){a(e,t,{get:function(){return P(this,t)},set:function(e){return L(this,t,e)},enumerable:true})};if(!g){O=o((function(e,t,n,r){mr(e,D);var i=0;var o=0;var a,u,c;if(!M(t)){c=vr(t);u=c*h;a=new d(u)}else if(x(t)){a=t;o=Ko(n,h);var p=t.byteLength;if(r===undefined){if(p%h)throw f(E);u=p-o;if(u<0)throw f(E)}else{u=bt(r)*h;if(u+o>p)throw f(E)}c=u/h}else if(k(t)){return C(O,t)}else{return l(Jo,O,t)}s(e,{buffer:a,byteOffset:o,byteLength:u,length:c,view:new m(a)});while(i<c)R(e,i++)}));if(Qt)Qt(O,b);D=O.prototype=pn(w)}else if($o){O=o((function(e,t,n,r){mr(e,D);return aa(function(){if(!M(t))return new T(vr(t));if(x(t))return r!==undefined?new T(t,Ko(n,h),r):n!==undefined?new T(t,Ko(n,h)):new T(t);if(k(t))return C(O,t);return l(Jo,O,t)}(),e,O)}));if(Qt)Qt(O,b);n(t(T),(function(e){if(!(e in O)){je(O,e,T[e])}}));O.prototype=D}if(D.constructor!==O){je(D,"constructor",O)}je(D,v,O);if(y){je(D,y,p)}A[p]=O;$t({global:true,forced:O!=T,sham:!g},A);if(!(I in O)){je(O,I,h)}if(!(I in D)){je(D,I,h)}oa(p)}}else e.exports=function(){}}));la("Float32",(function(e){return function t(n,r,i){return e(this,n,r,i)}}));la("Float64",(function(e){return function t(n,r,i){return e(this,n,r,i)}}));la("Int8",(function(e){return function t(n,r,i){return e(this,n,r,i)}}));la("Int16",(function(e){return function t(n,r,i){return e(this,n,r,i)}}));la("Int32",(function(e){return function t(n,r,i){return e(this,n,r,i)}}));la("Uint8",(function(e){return function t(n,r,i){return e(this,n,r,i)}}));la("Uint8",(function(e){return function t(n,r,i){return e(this,n,r,i)}}),true);la("Uint16",(function(e){return function t(n,r,i){return e(this,n,r,i)}}));la("Uint32",(function(e){return function t(n,r,i){return e(this,n,r,i)}}));var ua=Bo.aTypedArray;var ca=Bo.exportTypedArrayMethod;ca("at",(function e(t){var n=ua(this);var r=wt(n);var i=pt(t);var s=i>=0?i:r+i;return s<0||s>=r?undefined:n[s]}));var fa=Bo.exportTypedArrayStaticMethod;fa("from",Jo,$o);var da=Bo.aTypedArrayConstructor;var ha=Bo.exportTypedArrayStaticMethod;ha("of",(function e(){var t=0;var n=arguments.length;var r=new(da(this))(n);while(n>t)r[t]=arguments[t++];return r}),$o);var pa=Math.floor;var ma=function(e,t){var n=e.length;var r=pa(n/2);return n<8?ga(e,t):va(e,ma(yn(e,0,r),t),ma(yn(e,r),t),t)};var ga=function(e,t){var n=e.length;var r=1;var i,s;while(r<n){s=r;i=e[r];while(s&&t(e[s-1],i)>0){e[s]=e[--s]}if(s!==r++)e[s]=i}return e};var va=function(e,t,n,r){var i=t.length;var s=n.length;var o=0;var a=0;while(o<i||a<s){e[o+a]=o<i&&a<s?r(t[o],n[a])<=0?t[o++]:n[a++]:o<i?t[o++]:n[a++]}return e};var ya=ma;var ba=L.match(/firefox\/(\d+)/i);var wa=!!ba&&+ba[1];var Sa=/MSIE|Trident/.test(L);var ka=L.match(/AppleWebKit\/(\d+)\./);var Ia=!!ka&&+ka[1];var Ea=i.Array;var Ca=Bo.aTypedArray;var _a=Bo.exportTypedArrayMethod;var xa=i.Uint16Array;var Ta=xa&&b(xa.prototype.sort);var Oa=!!Ta&&!(s((function(){Ta(new xa(2),null)}))&&s((function(){Ta(new xa(2),{})})));var Ma=!!Ta&&!s((function(){if(U)return U<74;if(wa)return wa<67;if(Sa)return true;if(Ia)return Ia<602;var e=new xa(516);var t=Ea(516);var n,r;for(n=0;n<516;n++){r=n%4;e[n]=515-n;t[n]=n-2*r+3}Ta(e,(function(e,t){return(e/4|0)-(t/4|0)}));for(n=0;n<516;n++){if(e[n]!==t[n])return true}}));var Da=function(e){return function(t,n){if(e!==undefined)return+e(t,n)||0;if(n!==n)return-1;if(t!==t)return 1;if(t===0&&n===0)return 1/t>0&&1/n<0?1:-1;return t>n}};_a("sort",(function e(t){if(t!==undefined)K(t);if(Ma)return Ta(this,t);return ya(Ca(this),Da(t))}),!Ma||Oa);var Aa={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};var Pa=Ce("span").classList;var La=Pa&&Pa.constructor&&Pa.constructor.prototype;var Ra=La===Object.prototype?undefined:La;var Ha=ct.PROPER;var ja=ct.CONFIGURABLE;var Na=Ji.IteratorPrototype;var Ba=Ji.BUGGY_SAFARI_ITERATORS;var Fa=ye("iterator");var Ua="keys";var Wa="values";var $a="entries";var Va=function(){return this};var Ga=function(e,t,n,r,i,s,o){es(n,t,r);var a=function(e){if(e===i&&h)return h;if(!Ba&&e in f)return f[e];switch(e){case Ua:return function t(){return new n(this,e)};case Wa:return function t(){return new n(this,e)};case $a:return function t(){return new n(this,e)}}return function(){return new n(this)}};var u=t+" Iterator";var c=false;var f=e.prototype;var d=f[Fa]||f["@@iterator"]||i&&f[i];var h=!Ba&&d||a(i);var p=t=="Array"?f.entries||d:d;var m,g,v;if(p){m=qt(p.call(new e));if(m!==Object.prototype&&m.next){if(qt(m)!==Na){if(Qt){Qt(m,Na)}else if(!O(m[Fa])){ft(m,Fa,Va)}}Mr(m,u,true,true)}}if(Ha&&i==Wa&&d&&d.name!==Wa){if(ja){je(f,"name",Wa)}else{c=true;h=function e(){return l(d,this)}}}if(i){g={values:a(Wa),keys:s?h:a(Ua),entries:a($a)};if(o)for(v in g){if(Ba||c||!(v in f)){ft(f,v,g[v])}}else $t({target:t,proto:true,forced:Ba||c},g)}if(f[Fa]!==h){ft(f,Fa,h,{name:i})}Mn[t]=h;return g};var za="Array Iterator";var Xa=it.set;var qa=it.getterFor(za);var Ka=Ga(Array,"Array",(function(e,t){Xa(this,{type:za,target:T(e),index:0,kind:t})}),(function(){var e=qa(this);var t=e.target;var n=e.kind;var r=e.index++;if(!t||r>=t.length){e.target=undefined;return{value:undefined,done:true}}if(n=="keys")return{value:r,done:false};if(n=="values")return{value:t[r],done:false};return{value:[r,t[r]],done:false}}),"values");Mn.Arguments=Mn.Array;lr("keys");lr("values");lr("entries");var Ya=ye("iterator");var Ja=ye("toStringTag");var Qa=Ka.values;var Za=function(e,t){if(e){if(e[Ya]!==Qa)try{je(e,Ya,Qa)}catch(t){e[Ya]=Qa}if(!e[Ja]){je(e,Ja,t)}if(Aa[t])for(var n in Ka){if(e[n]!==Ka[n])try{je(e,n,Ka[n])}catch(t){e[n]=Ka[n]}}}};for(var el in Aa){Za(i[el]&&i[el].prototype,el)}Za(Ra,"DOMTokenList");var tl=Function.prototype;var nl=tl.apply;var rl=tl.bind;var il=tl.call;var sl=typeof Reflect=="object"&&Reflect.apply||(rl?il.bind(nl):function(){return il.apply(nl,arguments)});var ol=b([].slice);var al=/(?:ipad|iphone|ipod).*applewebkit/i.test(L);var ll=k(i.process)=="process";var ul=i.setImmediate;var cl=i.clearImmediate;var fl=i.process;var dl=i.Dispatch;var hl=i.Function;var pl=i.MessageChannel;var ml=i.String;var gl=0;var vl={};var yl="onreadystatechange";var bl,wl,Sl,kl;try{bl=i.location}catch(e){}var Il=function(e){if(ue(vl,e)){var t=vl[e];delete vl[e];t()}};var El=function(e){return function(){Il(e)}};var Cl=function(e){Il(e.data)};var _l=function(e){i.postMessage(ml(e),bl.protocol+"//"+bl.host)};if(!ul||!cl){ul=function e(t){var n=ol(arguments,1);vl[++gl]=function(){sl(O(t)?t:hl(t),undefined,n)};wl(gl);return gl};cl=function e(t){delete vl[t]};if(ll){wl=function(e){fl.nextTick(El(e))}}else if(dl&&dl.now){wl=function(e){dl.now(El(e))}}else if(pl&&!al){Sl=new pl;kl=Sl.port2;Sl.port1.onmessage=Cl;wl=On(kl.postMessage,kl)}else if(i.addEventListener&&O(i.postMessage)&&!i.importScripts&&bl&&bl.protocol!=="file:"&&!s(_l)){wl=_l;i.addEventListener("message",Cl,false)}else if(yl in Ce("script")){wl=function(e){tn.appendChild(Ce("script"))[yl]=function(){tn.removeChild(this);Il(e)}}}else{wl=function(e){setTimeout(El(e),0)}}}var xl={set:ul,clear:cl};var Tl=!i.setImmediate||!i.clearImmediate;$t({global:true,bind:true,enumerable:true,forced:Tl},{setImmediate:xl.set,clearImmediate:xl.clear});var Ol=/ipad|iphone|ipod/i.test(L)&&i.Pebble!==undefined;var Ml=/web0s(?!.*chrome)/i.test(L);var Dl=Oe.f;var Al=xl.set;var Pl=i.MutationObserver||i.WebKitMutationObserver;var Ll=i.document;var Rl=i.process;var Hl=i.Promise;var jl=Dl(i,"queueMicrotask");var Nl=jl&&jl.value;var Bl,Fl,Ul,Wl,$l,Vl,Gl,zl;if(!Nl){Bl=function(){var e,t;if(ll&&(e=Rl.domain))e.exit();while(Fl){t=Fl.fn;Fl=Fl.next;try{t()}catch(e){if(Fl)Wl();else Ul=undefined;throw e}}Ul=undefined;if(e)e.enter()};if(!al&&!ll&&!Ml&&Pl&&Ll){$l=true;Vl=Ll.createTextNode("");new Pl(Bl).observe(Vl,{characterData:true});Wl=function(){Vl.data=$l=!$l}}else if(!Ol&&Hl&&Hl.resolve){Gl=Hl.resolve(undefined);Gl.constructor=Hl;zl=On(Gl.then,Gl);Wl=function(){zl(Bl)}}else if(ll){Wl=function(){Rl.nextTick(Bl)}}else{Al=On(Al,i);Wl=function(){Al(Bl)}}}var Xl=Nl||function(e){var t={fn:e,next:undefined};if(Ul)Ul.next=t;if(!Fl){Fl=t;Wl()}Ul=t};var ql=i.process;$t({global:true,enumerable:true,noTargetGet:true},{queueMicrotask:function e(t){var n=ll&&ql.domain;Xl(n?n.bind(t):t)}})})(this.window=this.window||{});if(window._main_polyfill_core){console.warn("main.polyfill.core is loaded more than once on this page")}window._main_polyfill_core=true;(function(e){"use strict";function t(e){return Object.prototype.toString.call(e)}var n=Function.prototype.toString.call(Object);var r=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"isString",value:function e(t){return typeof t==="string"}},{key:"isStringFilled",value:function t(n){return e.isString(n)&&n!==""}},{key:"isFunction",value:function e(t){return typeof t==="function"}},{key:"isObject",value:function e(t){return!!t&&(babelHelpers["typeof"](t)==="object"||typeof t==="function")}},{key:"isObjectLike",value:function e(t){return!!t&&babelHelpers["typeof"](t)==="object"}},{key:"isPlainObject",value:function r(i){if(!e.isObjectLike(i)||t(i)!=="[object Object]"){return false}var s=Object.getPrototypeOf(i);if(s===null){return true}var o=s.hasOwnProperty("constructor")&&s.constructor;return typeof o==="function"&&Function.prototype.toString.call(o)===n}},{key:"isBoolean",value:function e(t){return t===true||t===false}},{key:"isNumber",value:function e(t){return!Number.isNaN(t)&&typeof t==="number"}},{key:"isInteger",value:function t(n){return e.isNumber(n)&&n%1===0}},{key:"isFloat",value:function t(n){return e.isNumber(n)&&!e.isInteger(n)}},{key:"isNil",value:function e(t){return t===null||t===undefined}},{key:"isArray",value:function t(n){return!e.isNil(n)&&Array.isArray(n)}},{key:"isArrayFilled",value:function t(n){return e.isArray(n)&&n.length>0}},{key:"isArrayLike",value:function t(n){return!e.isNil(n)&&!e.isFunction(n)&&n.length>-1&&n.length<=Number.MAX_SAFE_INTEGER}},{key:"isDate",value:function n(r){return e.isObjectLike(r)&&t(r)==="[object Date]"}},{key:"isDomNode",value:function t(n){return e.isObjectLike(n)&&!e.isPlainObject(n)&&"nodeType"in n}},{key:"isElementNode",value:function t(n){return e.isDomNode(n)&&n.nodeType===Node.ELEMENT_NODE}},{key:"isTextNode",value:function t(n){return e.isDomNode(n)&&n.nodeType===Node.TEXT_NODE}},{key:"isMap",value:function n(r){return e.isObjectLike(r)&&t(r)==="[object Map]"}},{key:"isSet",value:function n(r){return e.isObjectLike(r)&&t(r)==="[object Set]"}},{key:"isWeakMap",value:function n(r){return e.isObjectLike(r)&&t(r)==="[object WeakMap]"}},{key:"isWeakSet",value:function n(r){return e.isObjectLike(r)&&t(r)==="[object WeakSet]"}},{key:"isPrototype",value:function e(t){return(typeof(t&&t.constructor)==="function"&&t.constructor.prototype||Object.prototype)===t}},{key:"isRegExp",value:function n(r){return e.isObjectLike(r)&&t(r)==="[object RegExp]"}},{key:"isNull",value:function e(t){return t===null}},{key:"isUndefined",value:function e(t){return typeof t==="undefined"}},{key:"isArrayBuffer",value:function n(r){return e.isObjectLike(r)&&t(r)==="[object ArrayBuffer]"}},{key:"isTypedArray",value:function n(r){var i=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)]$/;return e.isObjectLike(r)&&i.test(t(r))}},{key:"isBlob",value:function t(n){return e.isObjectLike(n)&&e.isNumber(n.size)&&e.isString(n.type)&&e.isFunction(n.slice)}},{key:"isFile",value:function t(n){return e.isBlob(n)&&e.isString(n.name)&&(e.isNumber(n.lastModified)||e.isObjectLike(n.lastModifiedDate))}},{key:"isFormData",value:function e(t){return t instanceof FormData}}]);return e}();var i=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getClass",value:function e(t){if(r.isString(t)&&!!t){var n=null;var i=window;var s=t.split(".");for(var o=0;o<s.length;o+=1){var a=s[o];if(!i[a]){return null}i=i[a];n=i}return n}if(r.isFunction(t)){return t}return null}},{key:"namespace",value:function e(t){var n=t.split(".");var i=window.BX;if(n[0]==="BX"){n=n.slice(1)}for(var s=0;s<n.length;s+=1){if(r.isUndefined(i[n[s]])){i[n[s]]={}}i=i[n[s]]}return i}}]);return e}();var s=/[&<>'"]/g;var o=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g;var a={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};var l={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'};var u=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"encode",value:function e(t){if(r.isString(t)){return t.replace(s,(function(e){return a[e]}))}return t}},{key:"decode",value:function e(t){if(r.isString(t)){return t.replace(o,(function(e){return l[e]}))}return t}},{key:"getRandom",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:8;return babelHelpers.toConsumableArray(Array(t)).map((function(){return(~~(Math.random()*36)).toString(36)})).join("")}},{key:"toNumber",value:function e(t){var n=Number.parseFloat(t);if(r.isNumber(n)){return n}return 0}},{key:"toInteger",value:function t(n){return e.toNumber(Number.parseInt(n,10))}},{key:"toBoolean",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var i=r.isString(t)?t.toLowerCase():t;return["true","y","1",1,true].concat(babelHelpers.toConsumableArray(n)).includes(i)}},{key:"toCamelCase",value:function e(t){if(!r.isStringFilled(t)){return t}var n=/[-_\s]+(.)?/g;if(!n.test(t)){return t.match(/^[A-Z]+$/)?t.toLowerCase():t[0].toLowerCase()+t.slice(1)}t=t.toLowerCase();t=t.replace(n,(function(e,t){return t?t.toUpperCase():""}));return t[0].toLowerCase()+t.substr(1)}},{key:"toPascalCase",value:function e(t){if(!r.isStringFilled(t)){return t}return this.capitalize(this.toCamelCase(t))}},{key:"toKebabCase",value:function e(t){if(!r.isStringFilled(t)){return t}var n=t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g);if(!n){return t}return n.map((function(e){return e.toLowerCase()})).join("-")}},{key:"capitalize",value:function e(t){if(!r.isStringFilled(t)){return t}return t[0].toUpperCase()+t.substr(1)}}]);return e}();var c={mousewheel:["DOMMouseScroll"],bxchange:["change","cut","paste","drop","keyup"],animationend:["animationend","oAnimationEnd","webkitAnimationEnd","MSAnimationEnd"],transitionend:["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"],fullscreenchange:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],fullscreenerror:["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","MSFullscreenError"]};var f=function(){function e(){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"registry",new WeakMap)}babelHelpers.createClass(e,[{key:"set",value:function e(t,n,i){var s=this.get(t);if(!r.isSet(s[n])){s[n]=new Set}s[n].add(i);this.registry.set(t,s)}},{key:"get",value:function e(t){return this.registry.get(t)||{}}},{key:"has",value:function e(t,n,r){if(n&&r){return this.registry.has(t)&&this.registry.get(t)[n].has(r)}return this.registry.has(t)}},{key:"delete",value:function e(t,n,i){if(!r.isDomNode(t)){return}if(r.isString(n)&&r.isFunction(i)){var s=this.registry.get(t);if(r.isPlainObject(s)&&r.isSet(s[n])){s[n]["delete"](i)}return}if(r.isString(n)){var o=this.registry.get(t);if(r.isPlainObject(o)&&r.isSet(o[n])){o[n]=new Set}return}this.registry["delete"](t)}}]);return e}();var d=new f;function h(e){var t=false;try{var n=Object.defineProperty({},e,{get:function e(){t=true;return undefined}});window.addEventListener("test",null,n)}catch(e){}return t}function p(e){if(!r.isPlainObject(e)){return e}return Object.keys(e).reduce((function(t,n){if(h(n)){t[n]=e[n]}return t}),{})}function m(e,t,n,i){if(!r.isObject(e)||!r.isFunction(e.addEventListener)){return}var s=p(i);if(t in c){c[t].forEach((function(r){e.addEventListener(r,n,s);d.set(e,t,n)}));return}e.addEventListener(t,n,s);d.set(e,t,n)}function g(e,t,n,i){if(!r.isObject(e)||!r.isFunction(e.removeEventListener)){return}var s=p(i);if(t in c){c[t].forEach((function(t){e.removeEventListener(t,n,s);d["delete"](e,t,n)}));return}e.removeEventListener(t,n,s);d["delete"](e,t,n)}function v(e,t){var n=d.get(e);Object.keys(n).forEach((function(i){n[i].forEach((function(n){if(!r.isString(t)||t===i){g(e,i,n)}}))}))}function y(e,t,n,r){var i=function i(){g(e,t,i,r);n.apply(void 0,arguments)};m(e,t,i,r)}var b=true;function w(){b=true}function S(){b=false}function k(){return b}function I(){if(k()&&r.isObject(window.console)){if(r.isFunction(window.console.log)){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}window.console.log("BX.debug: ",t.length>0?t:t[0]);if(t[0]instanceof Error&&t[0].stack){window.console.log("BX.debug error stack trace",t[0].stack)}}if(r.isFunction(window.console.trace)){console.trace()}}}var E=new Map;var C="main.bitrix.main.controller.loadext.getextensions";function _(e){return new Promise((function(t){BX.ajax.runAction(C,{data:e}).then(t)}))}function x(e,t){if(t.isInternal){e.push(t.JS)}return e}function T(e,t){if(!t.isInternal){e.push(t.JS)}return e}function O(e,t){if(r.isString(t)&&t!==""){e.push(t)}return e}function M(e){if(r.isStringFilled(e)){var t=e.match(/<script type="extension\/settings" \b[^>]*>([\s\S]*?)<\/script>/g);if(r.isArrayFilled(t)){return t.map((function(e){var t=e.match(/data-extension="(.[a-z0-9_.-]+)"/),n=babelHelpers.slicedToArray(t,2),r=n[1];return{extension:r,script:e}}))}}return[]}function D(e){var t=r.isArray(e)?e:[e];if(!t.length){return Promise.resolve()}return new Promise((function(e){BX.load(t,e)}))}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){R(e,t);t.set(e,n)}function R(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var H={loaded:false};var j=new WeakMap;var N=new WeakMap;var B=new WeakMap;var F=new WeakMap;var U=function(){function e(t){babelHelpers.classCallCheck(this,e);L(this,j,{writable:true,value:e.State.LOADING});L(this,N,{writable:true,value:""});L(this,B,{writable:true,value:""});L(this,F,{writable:true,value:null});var n=P(P({},H),t);babelHelpers.classPrivateFieldSet(this,N,n.name);babelHelpers.classPrivateFieldSet(this,B,r.isStringFilled(n.namespace)?n.namespace:"window");if(n.loaded){babelHelpers.classPrivateFieldSet(this,j,e.State.LOADED)}}babelHelpers.createClass(e,[{key:"load",value:function t(){var n=this;if(babelHelpers.classPrivateFieldGet(this,j)===e.State.LOADED&&!babelHelpers.classPrivateFieldGet(this,F)){babelHelpers.classPrivateFieldSet(this,F,Promise.resolve(i.getClass(babelHelpers.classPrivateFieldGet(this,B))))}if(babelHelpers.classPrivateFieldGet(this,F)){return babelHelpers.classPrivateFieldGet(this,F)}babelHelpers.classPrivateFieldSet(this,j,e.State.LOADING);babelHelpers.classPrivateFieldSet(this,F,new Promise((function(t){void _({extension:[babelHelpers.classPrivateFieldGet(n,N)]}).then((function(s){if(!r.isArrayFilled(s.data)){t(window)}var o=s.data.at(0);if(r.isPlainObject(o.config)&&r.isStringFilled(o.config.namespace)){babelHelpers.classPrivateFieldSet(n,B,o.config.namespace)}var a=BX.processHTML(o.html||"");var l=a.SCRIPT.reduce(x,[]);var u=a.SCRIPT.reduce(T,[]);var c=a.STYLE.reduce(O,[]);var f=M(a.HTML);f.forEach((function(e){document.body.insertAdjacentHTML("beforeend",e.script)}));l.forEach((function(e){BX.evalGlobal(e)}));void Promise.all([D(u),D(c)]).then((function(){babelHelpers.classPrivateFieldSet(n,j,e.State.LOADED);if(babelHelpers.classPrivateFieldGet(n,B)){return i.getClass(babelHelpers.classPrivateFieldGet(n,B))}return window})).then((function(e){t(e)}))}))})));return babelHelpers.classPrivateFieldGet(this,F)}}]);return e}();babelHelpers.defineProperty(U,"State",{LOADED:"LOADED",LOADING:"LOADING"});function W(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */W=function t(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function e(t,n,r){return t[n]=r}}function u(e,t,n,i){var s=t&&t.prototype instanceof d?t:d,o=Object.create(s.prototype),a=new C(i||[]);return r(o,"_invoke",{value:S(e,n,a)}),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function h(){}function p(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(_([])));v&&v!==t&&n.call(v,s)&&(m=v);var y=p.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,s,o,a){var l=c(e[r],e,s);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==babelHelpers["typeof"](f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(f).then((function(e){u.value=e,o(u)}),(function(e){return i("throw",e,o,a)}))}a(l.arg)}var s;r(this,"_invoke",{value:function e(n,r){function o(){return new t((function(e,t){i(n,r,e,t)}))}return s=s?s.then(o,o):o()}})}function S(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return x()}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=k(o,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function k(e,t){var n=t.method,r=e.iterator[n];if(undefined===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=undefined,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=c(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,f):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function _(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=undefined,t.done=!0,t};return i.next=i}}return{next:x}}function x(){return{value:undefined,done:!0}}return h.prototype=p,r(y,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:h,configurable:!0}),h.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(w.prototype),l(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new w(u(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(y),l(y,a,"Generator"),l(y,s,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=_,C.prototype={constructor:C,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(E),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var r=this;function i(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=undefined),!!n}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function e(t,r){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var o=s;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=r,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function e(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),f},finish:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var s=i.arg;E(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function e(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=undefined),f}},e}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(){return z.apply(this,arguments)}function z(){z=babelHelpers.asyncToGenerator(W().mark((function e(){var t,n,i,s,o,a=arguments;return W().wrap((function e(l){while(1)switch(l.prev=l.next){case 0:for(t=a.length,n=new Array(t),i=0;i<t;i++){n[i]=a[i]}s=n.flat();o=s.map((function(e){if(E.has(e)){return E.get(e).load()}var t=new U({name:e});E.set(e,t);return t.load()}));return l.abrupt("return",Promise.all(o).then((function(e){return e.reduce((function(e,t){if(r.isObject(t)){return V(V({},e),t)}return e}),{})})));case 4:case"end":return l.stop()}}),e)})));return z.apply(this,arguments)}var X=["[object Object]","[object Array]","[object RegExp]","[object Arguments]","[object Date]","[object Error]","[object Map]","[object Set]","[object ArrayBuffer]","[object DataView]","[object Float32Array]","[object Float64Array]","[object Int8Array]","[object Int16Array]","[object Int32Array]","[object Uint8Array]","[object Uint16Array]","[object Uint32Array]","[object Uint8ClampedArray]"];function q(e){var n=r.isObjectLike(e)&&X.includes(t(e));return n||r.isDomNode(e)}function K(e,t){if(t.has(e)){return t.get(e)}if(q(e)){if(r.isArray(e)){var n=Array.from(e);t.set(e,n);e.forEach((function(e,r){n[r]=K(e,t)}));return t.get(e)}if(r.isDomNode(e)){return e.cloneNode(true)}if(r.isMap(e)){var i=new Map;t.set(e,i);e.forEach((function(e,n){i.set(K(n,t),K(e,t))}));return i}if(r.isSet(e)){var s=new Set;t.set(e,s);e.forEach((function(e){s.add(K(e,t))}));return s}if(r.isDate(e)){return new Date(e)}if(r.isRegExp(e)){var o=/\w*$/;var a=o.exec(e);var l=new RegExp(e.source);if(a&&r.isArray(a)){l=new RegExp(e.source,a[0])}l.lastIndex=e.lastIndex;return l}var u=Object.getPrototypeOf(e);var c=Object.assign(Object.create(u),e);t.set(e,c);Object.keys(e).forEach((function(n){c[n]=K(e[n],t)}));return c}return e}function Y(e){return K(e,new WeakMap)}function J(e,t){return Object.entries(t).reduce((function(e,t){var n=babelHelpers.slicedToArray(t,2),i=n[0],s=n[1];if(!r.isDomNode(e[i])&&r.isObjectLike(e[i])&&r.isObjectLike(s)){e[i]=J(e[i],s);return e}e[i]=s;return e}),e)}function Q(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return function(n,i){var s=e[0];var o=t[0]||"asc";if(r.isUndefined(s)){return 0}var a=n[s];var l=i[s];if(r.isString(a)&&r.isString(l)){a=a.toLowerCase();l=l.toLowerCase()}if(a<l){return o==="asc"?-1:1}if(a>l){return o==="asc"?1:-1}return Q(e.slice(1),t.slice(1))(n,i)}}function Z(e){if(!E.has(e.name)){E.set(e.name,new U(e))}}var ee=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"debounce",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var s;return function e(){var o=this;for(var a=arguments.length,l=new Array(a),u=0;u<a;u++){l[u]=arguments[u]}if(r.isNumber(s)){clearTimeout(s)}s=setTimeout((function(){t.apply(i||o,l)}),n)}}},{key:"throttle",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var i=0;var s;return function e(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++){a[l]=arguments[l]}s=true;if(!i){var u=function e(){if(s){t.apply(r||this,a);s=false;i=setTimeout(e,n)}else{i=null}};u()}}}},{key:"html",value:function e(t,n){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(r.isNil(n)&&r.isDomNode(t)){return t.innerHTML}var s=BX.processHTML(n);var o=s.STYLE.reduce(O,[]);var a=s.SCRIPT.reduce(T,[]);var l=s.SCRIPT.reduce(x,[]);if(r.isDomNode(t)){if(i.htmlFirst||!a.length&&!o.length){if(i.useAdjacentHTML){t.insertAdjacentHTML("beforeend",s.HTML)}else{t.innerHTML=s.HTML}}}return Promise.all([D(a),D(o)]).then((function(){if(r.isDomNode(t)&&(a.length>0||o.length>0)){if(i.useAdjacentHTML){t.insertAdjacentHTML("beforeend",s.HTML)}else{t.innerHTML=s.HTML}}l.forEach((function(e){return BX.evalGlobal(e)}));if(r.isFunction(i.callback)){i.callback()}}))}},{key:"merge",value:function e(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++){n[i]=arguments[i]}if(r.isArray(n[0])){n.unshift([])}else if(r.isObject(n[0])){n.unshift({})}return n.reduce((function(e,t){return J(e,t)}),n[0])}},{key:"orderBy",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var i=Q(n,r);return Object.values(t).sort(i)}},{key:"destroy",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"Object is destroyed";if(r.isObject(t)){var i=function e(){throw new Error(n)};var s=Object.keys(t);var o=function(){var e=Object.getPrototypeOf(t);if(r.isObject(e)){return Object.getOwnPropertyNames(e)}return[]}();var a=babelHelpers.toConsumableArray(new Set([].concat(s,babelHelpers.toConsumableArray(o))));a.filter((function(e){var n=Object.getOwnPropertyDescriptor(t,e);return!/__(.+)__/.test(e)&&(!r.isObject(n)||n.configurable===true)})).forEach((function(e){Object.defineProperty(t,e,{get:i,set:i,configurable:false})}));Object.setPrototypeOf(t,null)}}}]);return e}();babelHelpers.defineProperty(ee,"debug",I);babelHelpers.defineProperty(ee,"loadExtension",G);babelHelpers.defineProperty(ee,"registerExtension",Z);babelHelpers.defineProperty(ee,"clone",Y);var te=Symbol["for"]("BX.BaseError.isError");var ne=function(){function e(t,n,r){babelHelpers.classCallCheck(this,e);this[te]=true;this.message="";this.code=null;this.customData=null;this.setMessage(t);this.setCode(n);this.setCustomData(r)}babelHelpers.createClass(e,[{key:"getMessage",value:function e(){return this.message}},{key:"setMessage",value:function e(t){if(r.isString(t)){this.message=t}return this}},{key:"getCode",value:function e(){return this.code}},{key:"setCode",value:function e(t){if(r.isStringFilled(t)||t===null){this.code=t}return this}},{key:"getCustomData",value:function e(){return this.customData}},{key:"setCustomData",value:function e(t){if(!r.isUndefined(t)){this.customData=t}return this}},{key:"toString",value:function e(){var t=this.getCode();var n=this.getMessage();if(!r.isStringFilled(t)&&!r.isStringFilled(n)){return""}else if(!r.isStringFilled(t)){return"Error: ".concat(n)}else if(!r.isStringFilled(n)){return t}else{return"".concat(t,": ").concat(n)}}}],[{key:"isError",value:function e(t){return r.isObject(t)&&t[te]===true}}]);return e}();var re=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{data:{}};babelHelpers.classCallCheck(this,e);this.type="";this.data=null;this.target=null;this.compatData=null;this.defaultPrevented=false;this.immediatePropagationStopped=false;this.errors=[];this.setData(t.data);this.setCompatData(t.compatData)}babelHelpers.createClass(e,[{key:"getType",value:function e(){return this.type}},{key:"setType",value:function e(t){if(r.isStringFilled(t)){this.type=t}return this}},{key:"getData",value:function e(){return this.data}},{key:"setData",value:function e(t){if(!r.isUndefined(t)){this.data=t}return this}},{key:"getCompatData",value:function e(){return this.compatData}},{key:"setCompatData",value:function e(t){if(r.isArrayLike(t)){this.compatData=t}return this}},{key:"setTarget",value:function e(t){this.target=t;return this}},{key:"getTarget",value:function e(){return this.target}},{key:"getErrors",value:function e(){return this.errors}},{key:"setError",value:function e(t){if(ne.isError(t)){this.errors.push(t)}}},{key:"preventDefault",value:function e(){this.defaultPrevented=true}},{key:"isDefaultPrevented",value:function e(){return this.defaultPrevented}},{key:"stopImmediatePropagation",value:function e(){this.immediatePropagationStopped=true}},{key:"isImmediatePropagationStopped",value:function e(){return this.immediatePropagationStopped}}],[{key:"create",value:function e(t){return new this(t)}}]);return e}();var ie=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);this.defaultMaxListeners=r.isNumber(t.defaultMaxListeners)?t.defaultMaxListeners:10;this.eventStore=new WeakMap}babelHelpers.createClass(e,[{key:"add",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.getRecordScheme();if(r.isNumber(n.maxListeners)){i.maxListeners=n.maxListeners}this.eventStore.set(t,i);return i}},{key:"get",value:function e(t){return this.eventStore.get(t)}},{key:"getOrAdd",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return this.get(t)||this.add(t,n)}},{key:"delete",value:function e(t){this.eventStore["delete"](t)}},{key:"getRecordScheme",value:function e(){return{eventsMap:new Map,onceMap:new Map,maxListeners:this.getDefaultMaxListeners(),eventsMaxListeners:new Map}}},{key:"getDefaultMaxListeners",value:function e(){return this.defaultMaxListeners}}]);return e}();var se=function(){function e(){babelHelpers.classCallCheck(this,e);this.warnings=new Map;this.printDelayed=ee.debounce(this.print.bind(this),500)}babelHelpers.createClass(e,[{key:"add",value:function e(t,n,i){var s=this.warnings.get(t);if(!s){s=Object.create(null);this.warnings.set(t,s)}if(!s[n]){s[n]={}}s[n].size=i.size;if(!r.isArray(s[n].errors)){s[n].errors=[]}s[n].errors.push(new Error)}},{key:"print",value:function e(){this.warnings.forEach((function(e){for(var t in e){console.groupCollapsed("Possible BX.Event.EventEmitter memory leak detected. "+e[t].size+' "'+t+'" listeners added. '+"Use emitter.setMaxListeners() to increase limit.");console.dir(e[t].errors);console.groupEnd()}}));this.clear()}},{key:"clear",value:function e(){this.warnings.clear()}},{key:"printDelayed",value:function e(){}}]);return e}();var oe=new ie({defaultMaxListeners:10});var ae=new se;var le=new Map;var ue={GLOBAL_TARGET:"GLOBAL_TARGET"};oe.add(ue,{maxListeners:25});var ce=Symbol["for"]("BX.Event.EventEmitter.isEmitter");var fe=Symbol("namespaceProperty");var de=Symbol("targetProperty");var he=function(){function e(){babelHelpers.classCallCheck(this,e);this[de]=null;this[fe]=null;this[ce]=true;var t=this;if(Object.getPrototypeOf(this)===e.prototype&&arguments.length>0){if(!r.isObject(arguments.length<=0?undefined:arguments[0])){throw new TypeError('The "target" argument must be an object.')}t=arguments.length<=0?undefined:arguments[0];this.setEventNamespace(arguments.length<=1?undefined:arguments[1])}this[de]=t}babelHelpers.createClass(e,[{key:"setEventNamespace",value:function e(t){if(r.isStringFilled(t)){this[fe]=t}}},{key:"getEventNamespace",value:function e(){return this[fe]}},{key:"subscribe",value:function t(n,r){e.subscribe(this,n,r);return this}},{key:"subscribeFromOptions",value:function t(n,i,s){var o=this;if(r.isArrayFilled(n)){n.forEach((function(e){o.subscribeFromOptions(e)}));return}if(!r.isPlainObject(n)){return}i=r.isPlainObject(i)?e.normalizeAliases(i):{};Object.keys(n).forEach((function(t){var r=e.normalizeListener(n[t]);t=e.normalizeEventName(t);if(i[t]){var a=i[t].eventName;e.subscribe(o,a,r,{compatMode:s!==false})}else{e.subscribe(o,t,r,{compatMode:s===true})}}))}},{key:"subscribeOnce",value:function t(n,r){e.subscribeOnce(this,n,r);return this}},{key:"unsubscribe",value:function t(n,r){e.unsubscribe(this,n,r);return this}},{key:"unsubscribeAll",value:function t(n){e.unsubscribeAll(this,n)}},{key:"emit",value:function t(n,r){if(this.getEventNamespace()===null){console.warn("The instance of BX.Event.EventEmitter is supposed to have an event namespace. "+"Use emitter.setEventNamespace() to make events more unique.")}e.emit(this,n,r);return this}},{key:"emitAsync",value:function t(n,r){if(this.getEventNamespace()===null){console.warn("The instance of BX.Event.EventEmitter is supposed to have an event namespace. "+"Use emitter.setEventNamespace() to make events more unique.")}return e.emitAsync(this,n,r)}},{key:"setMaxListeners",value:function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}e.setMaxListeners.apply(e,[this].concat(r));return this}},{key:"getMaxListeners",value:function t(n){return e.getMaxListeners(this,n)}},{key:"incrementMaxListeners",value:function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}return e.incrementMaxListeners.apply(e,[this].concat(r))}},{key:"decrementMaxListeners",value:function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}return e.decrementMaxListeners.apply(e,[this].concat(r))}},{key:"getListeners",value:function t(n){return e.getListeners(this,n)}},{key:"getFullEventName",value:function t(n){if(!r.isStringFilled(n)){throw new TypeError('The "eventName" argument must be a string.')}return e.makeFullEventName(this.getEventNamespace(),n)}}],[{key:"makeObservable",value:function t(n,i){if(!r.isObject(n)){throw new TypeError('The "target" argument must be an object.')}if(!r.isStringFilled(i)){throw new TypeError('The "namespace" must be an non-empty string.')}if(e.isEventEmitter(n)){throw new TypeError('The "target" is an event emitter already.')}var s=Object.getPrototypeOf(n);var o=new e;o.setEventNamespace(i);Object.setPrototypeOf(o,s);Object.setPrototypeOf(n,o);Object.getOwnPropertyNames(e.prototype).forEach((function(t){if(["constructor"].includes(t)){return}o[t]=function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++){i[s]=arguments[s]}return e.prototype[t].apply(n,i)}}))}},{key:"subscribe",value:function e(t,n,i,s){if(r.isString(t)){s=i;i=n;n=t;t=this.GLOBAL_TARGET}if(!r.isObject(t)){throw new TypeError('The "target" argument must be an object.')}n=this.normalizeEventName(n);if(!r.isStringFilled(n)){throw new TypeError('The "eventName" argument must be a string.')}i=this.normalizeListener(i);s=r.isPlainObject(s)?s:{};var o=this.resolveEventName(n,t,s.useGlobalNaming===true);var a=oe.getOrAdd(t),l=a.eventsMap,u=a.onceMap;var c=u.get(o);var f=l.get(o);if(f&&f.has(i)||c&&c.has(i)){console.error('You cannot subscribe the same "'.concat(o,'" event listener twice.'))}else{if(f){f.set(i,{listener:i,options:s,sort:this.getNextSequenceValue()})}else{f=new Map([[i,{listener:i,options:s,sort:this.getNextSequenceValue()}]]);l.set(o,f)}}var d=this.getMaxListeners(t,n);if(f.size>d){ae.add(t,o,f);ae.printDelayed()}}},{key:"subscribeOnce",value:function e(t,n,i){var s=this;if(r.isString(t)){i=n;n=t;t=this.GLOBAL_TARGET}if(!r.isObject(t)){throw new TypeError('The "target" argument must be an object.')}n=this.normalizeEventName(n);if(!r.isStringFilled(n)){throw new TypeError('The "eventName" argument must be a string.')}i=this.normalizeListener(i);var o=this.resolveEventName(n,t);var a=oe.getOrAdd(t),l=a.eventsMap,u=a.onceMap;var c=l.get(o);var f=u.get(o);if(c&&c.has(i)||f&&f.has(i)){console.error('You cannot subscribe the same "'.concat(o,'" event listener twice.'))}else{var d=function e(){s.unsubscribe(t,n,e);f["delete"](i);i.apply(void 0,arguments)};if(f){f.set(i,d)}else{f=new Map([[i,d]]);u.set(o,f)}this.subscribe(t,n,d)}}},{key:"unsubscribe",value:function e(t,n,i,s){if(r.isString(t)){i=n;n=t;t=this.GLOBAL_TARGET}n=this.normalizeEventName(n);if(!r.isStringFilled(n)){throw new TypeError('The "eventName" argument must be a string.')}i=this.normalizeListener(i);s=r.isPlainObject(s)?s:{};var o=this.resolveEventName(n,t,s.useGlobalNaming===true);var a=oe.get(t);var l=a&&a.eventsMap.get(o);var u=a&&a.onceMap.get(o);if(l){l["delete"](i)}if(u){var c=u.get(i);if(c){u["delete"](i);l["delete"](c)}}}},{key:"unsubscribeAll",value:function e(t,n,i){if(r.isString(t)){n=t;t=this.GLOBAL_TARGET}if(r.isStringFilled(n)){var s=oe.get(t);if(s){i=r.isPlainObject(i)?i:{};var o=this.resolveEventName(n,t,i.useGlobalNaming===true);s.eventsMap["delete"](o);s.onceMap["delete"](o)}}else if(r.isNil(n)){if(t===this.GLOBAL_TARGET){console.error("You cannot unsubscribe all global listeners.")}else{oe["delete"](t)}}}},{key:"emit",value:function e(t,n,i,s){if(r.isString(t)){s=i;i=n;n=t;t=this.GLOBAL_TARGET}if(!r.isObject(t)){throw new TypeError('The "target" argument must be an object.')}n=this.normalizeEventName(n);if(!r.isStringFilled(n)){throw new TypeError('The "eventName" argument must be a string.')}s=r.isPlainObject(s)?s:{};var o=this.resolveEventName(n,t,s.useGlobalNaming===true);var a=oe.get(this.GLOBAL_TARGET);var l=a&&a.eventsMap.get(o)||new Map;var u=new Set;if(t!==this.GLOBAL_TARGET){var c=oe.get(t);u=c&&c.eventsMap.get(o)||new Map}var f=[].concat(babelHelpers.toConsumableArray(l.values()),babelHelpers.toConsumableArray(u.values()));f.sort((function(e,t){return e.sort-t.sort}));var d=this.prepareEvent(t,o,i);var h=[];for(var p=0;p<f.length;p++){if(d.isImmediatePropagationStopped()){break}var m=f[p],g=m.listener,v=m.options;if(l.has(g)||u.has(g)){var y=void 0;if(v.compatMode){var b=[];var w=d.getCompatData();if(w!==null){b=s.cloneData===true?ee.clone(w):w}else{b=[d]}var S=r.isUndefined(s.thisArg)?t:s.thisArg;y=g.apply(S,b)}else{y=r.isUndefined(s.thisArg)?g(d):g.call(s.thisArg,d)}h.push(y)}}return h}},{key:"emitAsync",value:function e(t,n,i){if(r.isString(t)){i=n;n=t;t=this.GLOBAL_TARGET}return Promise.all(this.emit(t,n,i))}},{key:"prepareEvent",value:function e(t,n,r){var i=r;if(!(r instanceof re)){i=new re;i.setData(r)}i.setTarget(this.isEventEmitter(t)?t[de]:t);i.setType(n);return i}},{key:"getNextSequenceValue",value:function e(){return this.sequenceValue++}},{key:"setMaxListeners",value:function e(){var t=this.GLOBAL_TARGET;var n=null;var i=undefined;for(var s=arguments.length,o=new Array(s),a=0;a<s;a++){o[a]=arguments[a]}if(o.length===1){i=o[0]}else if(o.length===2){if(r.isString(o[0])){n=o[0];i=o[1]}else{t=o[0];i=o[1]}}else if(o.length>=3){t=o[0];n=o[1];i=o[2]}if(!r.isObject(t)){throw new TypeError('The "target" argument must be an object.')}if(n!==null&&!r.isStringFilled(n)){throw new TypeError('The "eventName" argument must be a string.')}if(!r.isNumber(i)||i<0){throw new TypeError('The value of "count" is out of range. It must be a non-negative number. Received '.concat(i,"."))}var l=oe.getOrAdd(t);if(r.isStringFilled(n)){var u=this.resolveEventName(n,t);l.eventsMaxListeners.set(u,i)}else{l.maxListeners=i}}},{key:"getMaxListeners",value:function e(t,n){if(r.isString(t)){n=t;t=this.GLOBAL_TARGET}else if(r.isNil(t)){t=this.GLOBAL_TARGET}if(!r.isObject(t)){throw new TypeError('The "target" argument must be an object.')}var i=oe.get(t);if(i){var s=i.maxListeners;if(r.isStringFilled(n)){var o=this.resolveEventName(n,t);s=i.eventsMaxListeners.get(o)||s}return s}return this.DEFAULT_MAX_LISTENERS}},{key:"addMaxListeners",value:function t(){var n=this.destructMaxListenersArgs.apply(this,arguments),i=babelHelpers.slicedToArray(n,3),s=i[0],o=i[1],a=i[2];var l=Math.max(this.getMaxListeners(s,o)+a,0);if(r.isStringFilled(o)){e.setMaxListeners(s,o,l)}else{e.setMaxListeners(s,l)}return l}},{key:"incrementMaxListeners",value:function e(){var t=this.destructMaxListenersArgs.apply(this,arguments),n=babelHelpers.slicedToArray(t,3),r=n[0],i=n[1],s=n[2];return this.addMaxListeners(r,i,Math.abs(s))}},{key:"decrementMaxListeners",value:function e(){var t=this.destructMaxListenersArgs.apply(this,arguments),n=babelHelpers.slicedToArray(t,3),r=n[0],i=n[1],s=n[2];return this.addMaxListeners(r,i,-Math.abs(s))}},{key:"destructMaxListenersArgs",value:function e(){var t=null;var n=1;var i=this.GLOBAL_TARGET;for(var s=arguments.length,o=new Array(s),a=0;a<s;a++){o[a]=arguments[a]}if(o.length===1){if(r.isNumber(o[0])){n=o[0]}else if(r.isString(o[0])){t=o[0]}else{i=o[0]}}else if(o.length===2){if(r.isString(o[0])){t=o[0];n=o[1]}else if(r.isString(o[1])){i=o[0];t=o[1]}else{i=o[0];n=o[1]}}else if(o.length>=3){i=o[0];t=o[1];n=o[2]}if(!r.isObject(i)){throw new TypeError('The "target" argument must be an object.')}if(t!==null&&!r.isStringFilled(t)){throw new TypeError('The "eventName" argument must be a string.')}if(!r.isNumber(n)){throw new TypeError('The value of "increment" must be a number.')}return[i,t,n]}},{key:"getListeners",value:function e(t,n){if(r.isString(t)){n=t;t=this.GLOBAL_TARGET}if(!r.isObject(t)){throw new TypeError('The "target" argument must be an object.')}n=this.normalizeEventName(n);if(!r.isStringFilled(n)){throw new TypeError('The "eventName" argument must be a string.')}var i=oe.get(t);if(!i){return new Map}var s=this.resolveEventName(n,t);return i.eventsMap.get(s)||new Map}},{key:"registerAliases",value:function t(n){n=this.normalizeAliases(n);Object.keys(n).forEach((function(e){le.set(e,{eventName:n[e].eventName,namespace:n[e].namespace})}));e.mergeEventAliases(n)}},{key:"normalizeAliases",value:function e(t){if(!r.isPlainObject(t)){throw new TypeError('The "aliases" argument must be an object.')}var n=Object.create(null);for(var i in t){if(!r.isStringFilled(i)){throw new TypeError("The alias must be an non-empty string.")}var s=t[i];if(!s||!r.isStringFilled(s.eventName)||!r.isStringFilled(s.namespace)){throw new TypeError('The alias options must set the "eventName" and the "namespace".')}i=this.normalizeEventName(i);n[i]={eventName:s.eventName,namespace:s.namespace}}return n}},{key:"mergeEventAliases",value:function e(t){var n=this;var r=oe.get(this.GLOBAL_TARGET);if(!r){return}Object.keys(t).forEach((function(e){var i=t[e];e=n.normalizeEventName(e);var s=n.makeFullEventName(i.namespace,i.eventName);var o=r.eventsMap.get(e);if(o){var a=r.eventsMap.get(s)||new Map;r.eventsMap.set(s,new Map([].concat(babelHelpers.toConsumableArray(a),babelHelpers.toConsumableArray(o))));r.eventsMap["delete"](e)}var l=r.onceMap.get(e);if(l){var u=r.onceMap.get(s)||new Map;r.onceMap.set(s,new Map([].concat(babelHelpers.toConsumableArray(u),babelHelpers.toConsumableArray(l))));r.onceMap["delete"](e)}var c=r.eventsMaxListeners.get(e);if(c){var f=r.eventsMaxListeners.get(s)||0;r.eventsMaxListeners.set(s,Math.max(f,c));r.eventsMaxListeners["delete"](e)}}))}},{key:"isEventEmitter",value:function e(t){return r.isObject(t)&&t[ce]===true}},{key:"normalizeEventName",value:function e(t){if(!r.isStringFilled(t)){return""}return t.toLowerCase()}},{key:"normalizeListener",value:function e(t){if(r.isString(t)){t=i.getClass(t)}if(!r.isFunction(t)){throw new TypeError('The "listener" argument must be of type Function. Received type '.concat(babelHelpers["typeof"](t),"."))}return t}},{key:"resolveEventName",value:function e(t,n){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;t=this.normalizeEventName(t);if(!r.isStringFilled(t)){return""}if(this.isEventEmitter(n)&&i!==true){if(n.getEventNamespace()!==null&&t.includes(".")){console.warn('Possible the wrong event name "'.concat(t,'".'))}t=n.getFullEventName(t)}else if(le.has(t)){var s=le.get(t),o=s.namespace,a=s.eventName;t=this.makeFullEventName(o,a)}return t}},{key:"makeFullEventName",value:function e(t,n){var i=r.isStringFilled(t)?"".concat(t,":").concat(n):n;return r.isStringFilled(i)?i.toLowerCase():""}}]);return e}();babelHelpers.defineProperty(he,"GLOBAL_TARGET",ue);babelHelpers.defineProperty(he,"DEFAULT_MAX_LISTENERS",oe.getDefaultMaxListeners());babelHelpers.defineProperty(he,"sequenceValue",1);var pe=[];e.isReady=false;function me(t){if(!r.isFunction(t)){return}if(e.isReady){t()}else{pe.push(t)}}y(document,"DOMContentLoaded",(function(){e.isReady=true;pe.forEach((function(e){e()}));pe=[]}));var ge=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(ge,"bind",m);babelHelpers.defineProperty(ge,"bindOnce",y);babelHelpers.defineProperty(ge,"unbind",g);babelHelpers.defineProperty(ge,"unbindAll",v);babelHelpers.defineProperty(ge,"ready",me);babelHelpers.defineProperty(ge,"EventEmitter",he);babelHelpers.defineProperty(ge,"BaseEvent",re);function ve(e){if(r.isPlainObject(e)||r.isArray(e)){return JSON.stringify(e)}return u.encode(u.decode(e))}function ye(e){if(r.isString(e)){var t=u.decode(e);var n;try{n=JSON.parse(t)}catch(e){n=t}if(n===t){if(/^[\d.]+[.]?\d+$/.test(n)){return Number(n)}}if(n==="true"||n==="false"){return Boolean(n)}return n}return e}function be(){var e=document,t=e.documentElement,n=e.body;var r=Math.max(window.pageYOffset||0,t?t.scrollTop:0,n?n.scrollTop:0);var i=Math.max(window.pageXOffset||0,t?t.scrollLeft:0,n?n.scrollLeft:0);return{scrollTop:r,scrollLeft:i}}var we=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"replace",value:function e(t,n){if(r.isDomNode(t)&&r.isDomNode(n)){if(r.isDomNode(t.parentNode)){t.parentNode.replaceChild(n,t)}}}},{key:"remove",value:function e(t){if(r.isDomNode(t)&&r.isDomNode(t.parentNode)){t.parentNode.removeChild(t)}}},{key:"clean",value:function t(n){if(r.isDomNode(n)){while(n.childNodes.length>0){n.removeChild(n.firstChild)}return}if(r.isString(n)){e.clean(document.getElementById(n))}}},{key:"insertBefore",value:function e(t,n){if(r.isDomNode(t)&&r.isDomNode(n)){if(r.isDomNode(n.parentNode)){n.parentNode.insertBefore(t,n)}}}},{key:"insertAfter",value:function e(t,n){if(r.isDomNode(t)&&r.isDomNode(n)){if(r.isDomNode(n.parentNode)){var i=n.parentNode;if(r.isDomNode(n.nextSibling)){i.insertBefore(t,n.nextSibling);return}i.appendChild(t)}}}},{key:"append",value:function e(t,n){if(r.isDomNode(t)&&r.isDomNode(n)){n.appendChild(t)}}},{key:"prepend",value:function t(n,i){if(r.isDomNode(n)&&r.isDomNode(i)){if(r.isDomNode(i.firstChild)){i.insertBefore(n,i.firstChild);return}e.append(n,i)}}},{key:"hasClass",value:function t(n,i){if(r.isElementNode(n)){if(r.isString(i)){var s=i.trim();if(s.length>0){if(s.includes(" ")){return s.split(" ").every((function(t){return e.hasClass(n,t)}))}if("classList"in n){return n.classList.contains(s)}if(r.isObject(n.className)&&r.isString(n.className.baseVal)){return n.getAttribute("class").split(" ").some((function(e){return e===s}))}}}if(r.isArray(i)&&i.length>0){return i.every((function(t){return e.hasClass(n,t)}))}}return false}},{key:"addClass",value:function t(n,i){if(r.isElementNode(n)){if(r.isString(i)){var s=i.trim();if(s.length>0){if(s.includes(" ")){e.addClass(n,s.split(" "));return}if("classList"in n){n.classList.add(s);return}if(r.isObject(n.className)&&r.isString(n.className.baseVal)){if(n.className.baseVal===""){n.className.baseVal=s;return}var o=n.className.baseVal.split(" ");if(!o.includes(s)){o.push(s);n.className.baseVal=o.join(" ").trim();return}}return}}if(r.isArray(i)){i.forEach((function(t){return e.addClass(n,t)}))}}}},{key:"removeClass",value:function t(n,i){if(r.isElementNode(n)){if(r.isString(i)){var s=i.trim();if(s.length>0){if(s.includes(" ")){e.removeClass(n,s.split(" "));return}if("classList"in n){n.classList.remove(s);return}if(r.isObject(n.className)&&r.isString(n.className.baseVal)){var o=n.className.baseVal.split(" ").filter((function(e){return e!==s}));n.className.baseVal=o.join(" ");return}}}if(r.isArray(i)){i.forEach((function(t){return e.removeClass(n,t)}))}}}},{key:"toggleClass",value:function t(n,i){if(r.isElementNode(n)){if(r.isString(i)){var s=i.trim();if(s.length>0){if(s.includes(" ")){e.toggleClass(n,s.split(" "));return}n.classList.toggle(s);return}}if(r.isArray(i)){i.forEach((function(t){return e.toggleClass(n,t)}))}}}},{key:"style",value:function t(n,i,s){if(r.isElementNode(n)){if(r.isNull(i)){n.removeAttribute("style");return n}if(r.isPlainObject(i)){Object.entries(i).forEach((function(t){var r=babelHelpers.slicedToArray(t,2),i=r[0],s=r[1];e.style(n,i,s)}));return n}if(r.isString(i)){if(r.isUndefined(s)&&n.nodeType!==Node.DOCUMENT_NODE){var o=getComputedStyle(n);if(i in o){return o[i]}return o.getPropertyValue(i)}if(r.isNull(s)||s===""||s==="null"){if(String(i).startsWith("--")){n.style.removeProperty(i);return n}n.style[i]="";return n}if(r.isString(s)||r.isNumber(s)){if(String(i).startsWith("--")){n.style.setProperty(i,s);return n}n.style[i]=s;return n}}}return null}},{key:"adjust",value:function t(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!n.nodeType){return null}var s=n;if(n.nodeType===Node.DOCUMENT_NODE){s=n.body}if(r.isPlainObject(i)){if(r.isPlainObject(i.attrs)){Object.keys(i.attrs).forEach((function(e){if(e==="class"||e.toLowerCase()==="classname"){s.className=i.attrs[e];return}if(i.attrs[e]==""){s.removeAttribute(e);return}s.setAttribute(e,i.attrs[e])}))}if(r.isPlainObject(i.style)){e.style(s,i.style)}if(r.isPlainObject(i.props)){Object.keys(i.props).forEach((function(e){s[e]=i.props[e]}))}if(r.isPlainObject(i.events)){Object.keys(i.events).forEach((function(e){ge.bind(s,e,i.events[e])}))}if(r.isPlainObject(i.dataset)){Object.keys(i.dataset).forEach((function(e){s.dataset[e]=i.dataset[e]}))}if(r.isString(i.children)){i.children=[i.children]}if(r.isArray(i.children)&&i.children.length>0){i.children.forEach((function(t){if(r.isDomNode(t)){e.append(t,s)}if(r.isString(t)){s.insertAdjacentHTML("beforeend",t)}}));return s}if("text"in i&&!r.isNil(i.text)){s.innerText=i.text;return s}if("html"in i&&!r.isNil(i.html)){s.innerHTML=i.html}}return s}},{key:"create",value:function t(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:document;var o=n;var a=i;if(r.isObjectLike(n)){a=n;o=n.tag}return e.adjust(s.createElement(o),a)}},{key:"show",value:function e(t){if(r.isDomNode(t)){t.hidden=false}}},{key:"hide",value:function e(t){if(r.isDomNode(t)){t.hidden=true}}},{key:"isShown",value:function e(t){return r.isDomNode(t)&&!t.hidden&&t.style.getPropertyValue("display")!=="none"}},{key:"toggle",value:function t(n){if(r.isDomNode(n)){if(e.isShown(n)){e.hide(n)}else{e.show(n)}}}},{key:"getPosition",value:function e(t){if(r.isDomNode(t)){var n=t.getBoundingClientRect();var i=be(),s=i.scrollLeft,o=i.scrollTop;return new DOMRect(n.left+s,n.top+o,n.width,n.height)}return new DOMRect}},{key:"getRelativePosition",value:function t(n,i){if(r.isDomNode(n)&&r.isDomNode(i)){var s=e.getPosition(n);var o=e.getPosition(i);return new DOMRect(s.left-o.left,s.top-o.top,s.width,s.height)}return new DOMRect}},{key:"attr",value:function t(n,i,s){if(r.isElementNode(n)){if(r.isString(i)){if(!r.isNil(s)){return n.setAttribute(i,ve(s))}if(r.isNull(s)){return n.removeAttribute(i)}return ye(n.getAttribute(i))}if(r.isPlainObject(i)){return Object.entries(i).forEach((function(t){var r=babelHelpers.slicedToArray(t,2),i=r[0],s=r[1];e.attr(n,i,s)}))}}return null}}]);return e}();var Se=navigator.userAgent.toLowerCase();var ke=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"isOpera",value:function e(){return Se.includes("opera")}},{key:"isIE",value:function t(){return"attachEvent"in document&&!e.isOpera()}},{key:"isIE6",value:function e(){return Se.includes("msie 6")}},{key:"isIE7",value:function e(){return Se.includes("msie 7")}},{key:"isIE8",value:function e(){return Se.includes("msie 8")}},{key:"isIE9",value:function e(){return"documentMode"in document&&document.documentMode>=9}},{key:"isIE10",value:function e(){return"documentMode"in document&&document.documentMode>=10}},{key:"isSafari",value:function e(){return Se.includes("safari")&&!Se.includes("chrome")}},{key:"isFirefox",value:function e(){return Se.includes("firefox")}},{key:"isChrome",value:function e(){return Se.includes("chrome")}},{key:"detectIEVersion",value:function t(){if(e.isOpera()||e.isSafari()||e.isFirefox()||e.isChrome()){return-1}var n=-1;if(!!window.MSStream&&!window.ActiveXObject&&"ActiveXObject"in window){n=11}else if(e.isIE10()){n=10}else if(e.isIE9()){n=9}else if(e.isIE()){n=8}if(n===-1||n===8){if(navigator.appName==="Microsoft Internet Explorer"){var i=new RegExp("MSIE ([0-9]+[.0-9]*)");var s=navigator.userAgent.match(i);if(r.isArrayLike(s)&&s.length>0){n=parseFloat(s[1])}}if(navigator.appName==="Netscape"){n=11;var o=new RegExp("Trident/.*rv:([0-9]+[.0-9]*)");if(o.exec(navigator.userAgent)!=null){var a=navigator.userAgent.match(o);if(r.isArrayLike(a)&&a.length>0){n=parseFloat(a[1])}}}}return n}},{key:"isIE11",value:function t(){return e.detectIEVersion()>=11}},{key:"isMac",value:function e(){return Se.includes("macintosh")}},{key:"isWin",value:function e(){return Se.includes("windows")}},{key:"isLinux",value:function t(){return Se.includes("linux")&&!e.isAndroid()}},{key:"isAndroid",value:function e(){return Se.includes("android")}},{key:"isIPad",value:function e(){return Se.includes("ipad;")||this.isMac()&&this.isTouchDevice()}},{key:"isIPhone",value:function e(){return Se.includes("iphone;")}},{key:"isIOS",value:function t(){return e.isIPad()||e.isIPhone()}},{key:"isMobile",value:function t(){return e.isIPhone()||e.isIPad()||e.isAndroid()||Se.includes("mobile")||Se.includes("touch")}},{key:"isRetina",value:function e(){return window.devicePixelRatio&&window.devicePixelRatio>=2}},{key:"isTouchDevice",value:function e(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}},{key:"isDoctype",value:function e(t){var n=t||document;if(n.compatMode){return n.compatMode==="CSS1Compat"}return n.documentElement&&n.documentElement.clientHeight}},{key:"isLocalStorageSupported",value:function e(){try{localStorage.setItem("test","test");localStorage.removeItem("test");return true}catch(e){return false}}},{key:"addGlobalClass",value:function t(n){var i="bx-core";n=r.isElementNode(n)?n:document.documentElement;if(we.hasClass(n,i)){return}if(e.isIOS()){i+=" bx-ios"}else if(e.isWin()){i+=" bx-win"}else if(e.isMac()){i+=" bx-mac"}else if(e.isLinux()){i+=" bx-linux"}else if(e.isAndroid()){i+=" bx-android"}i+=e.isMobile()?" bx-touch":" bx-no-touch";i+=e.isRetina()?" bx-retina":" bx-no-retina";if(/AppleWebKit/.test(navigator.userAgent)){i+=" bx-chrome"}else if(/Opera/.test(navigator.userAgent)){i+=" bx-opera"}else if(e.isFirefox()){i+=" bx-firefox"}we.addClass(n,i)}},{key:"detectAndroidVersion",value:function e(){var t=new RegExp("Android ([0-9]+[.0-9]*)");if(t.exec(navigator.userAgent)!=null){var n=navigator.userAgent.match(t);if(r.isArrayLike(n)&&n.length>0){return parseFloat(n[1])}}return 0}},{key:"isPropertySupported",value:function e(t,n){if(t===""){return false}function r(e){return e.replace(/([A-Z])/g,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}return"-".concat(t[1].toLowerCase())}))}function i(e){var t=/(\\-([a-z]))/g;if(t.test(e)){return e.replace(t,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}return t[2].toUpperCase()}))}return e}var s=t.includes("-")?i(t):t;var o=!!n;var a=s.charAt(0).toUpperCase()+s.slice(1);var l=["Webkit","Moz","O","ms"].join("".concat(a," "));var u="".concat(s," ").concat(l," ").concat(a).split(" ");var c=document.body||document.documentElement;for(var f=0;f<u.length;f+=1){var d=u[f];if(c&&"style"in c&&d in c.style){var h=d.substr(0,d.length-s.length).toLowerCase();var p=d===s?"":"-".concat(h,"-");return o?p+r(s):d}}return false}},{key:"addGlobalFeatures",value:function t(n){if(!r.isArray(n)){return}var i=[];for(var s=0;s<n.length;s+=1){var o=!!e.isPropertySupported(n[s]);i.push("bx-".concat(o?"":"no-").concat(n[s].toLowerCase()))}we.addClass(document.documentElement,i.join(" "))}}]);return e}();function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getList",value:function e(){return document.cookie.split(";").map((function(e){return e.split("=")})).map((function(e){return e.map((function(e){return e.trim()}))})).reduce((function(e,t){var n=babelHelpers.slicedToArray(t,2),r=n[0],i=n[1];e[decodeURIComponent(r)]=decodeURIComponent(i);return e}),{})}},{key:"get",value:function t(n){var r=e.getList();if(n in r){return r[n]}return undefined}},{key:"set",value:function e(t,n){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var s=Ee({expires:""},i);if(r.isNumber(s.expires)){var o=+new Date;var a=s.expires;var l=864e5;s.expires=new Date(o+a*l)}if(r.isDate(s.expires)){s.expires=s.expires.toUTCString()}var u=decodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent);var f=Object.keys(s).reduce((function(e,t){var n=s[t];if(!n){return e}if(n===true){return"".concat(e,"; ").concat(t)}return"".concat(e,"; ").concat(t,"=").concat(n.split(";")[0])}),"");document.cookie="".concat(u,"=").concat(c).concat(f)}},{key:"remove",value:function t(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};e.set(n,"",Ee(Ee({},r),{},{expires:-1}))}}]);return e}();function _e(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new FormData;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(r.isUndefined(e)){return t}if(r.isNull(e)){t.append(n,"")}else if(r.isArray(e)){if(!e.length){var i="".concat(n,"[]");t.append(i,"")}else{e.forEach((function(e,r){var i="".concat(n,"[").concat(r,"]");_e(e,t,i)}))}}else if(r.isDate(e)){t.append(n,e.toISOString())}else if(r.isObject(e)&&!r.isFile(e)&&!r.isBlob(e)){Object.keys(e).forEach((function(i){var s=e[i];var o=i;if(r.isArray(s)){while(o.length>2&&o.lastIndexOf("[]")===o.length-2){o=o.substring(0,o.length-2)}}var a=n?"".concat(n,"[").concat(o,"]"):o;_e(s,t,a)}))}else{t.append(n,e)}return t}var xe=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"convertObjectToFormData",value:function e(t){return _e(t)}}]);return e}();var Te=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(Te,"Cookie",Ce);babelHelpers.defineProperty(Te,"Data",xe);function Oe(e){if(r.isString(e)){if(r.isNil(Oe[e])){he.emit("onBXMessageNotFound",new re({compatData:[e]}));if(r.isNil(Oe[e])){ee.debug("message undefined: ".concat(e));Oe[e]=""}}}if(r.isPlainObject(e)){Object.keys(e).forEach((function(t){Oe[t]=e[t]}))}return Oe[e]}if(!r.isNil(window.BX)&&r.isFunction(window.BX.message)){Object.keys(window.BX.message).forEach((function(e){Oe(babelHelpers.defineProperty({},e,window.BX.message[e]))}))}var Me=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getMessage",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=Oe(t);if(r.isString(i)&&r.isPlainObject(n)){var s=function e(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")};Object.keys(n).forEach((function(e){var t=new RegExp(s(e),"gi");i=i.replace(t,(function(){return r.isNil(n[e])?"":String(n[e])}))}))}return i}},{key:"hasMessage",value:function e(t){return r.isString(t)&&!r.isNil(Oe[t])}},{key:"setMessage",value:function e(t,n){if(r.isString(t)&&r.isString(n)){Oe(babelHelpers.defineProperty({},t,n))}if(r.isObject(t)){Oe(t)}}},{key:"getMessagePlural",value:function e(t,n){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var s="";if(r.isNumber(n)){if(this.hasMessage("".concat(t,"_PLURAL_").concat(this.getPluralForm(n)))){s=this.getMessage("".concat(t,"_PLURAL_").concat(this.getPluralForm(n)),i)}else{s=this.getMessage("".concat(t,"_PLURAL_1"),i)}}else{s=this.getMessage(t,i)}return s}},{key:"getPluralForm",value:function e(t,n){var i;if(!r.isStringFilled(n)){n=Oe("LANGUAGE_ID")}if(t<0){t=-1*t}switch(n){case"ar":i=t!==1?1:0;break;case"br":case"fr":case"tr":i=t>1?1:0;break;case"de":case"en":case"hi":case"it":case"la":i=t!==1?1:0;break;case"ru":case"ua":if(t%10===1&&t%100!==11){i=0}else if(t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)){i=1}else{i=2}break;case"pl":if(t===1){i=0}else if(t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)){i=1}else{i=2}break;case"id":case"ja":case"ms":case"sc":case"tc":case"th":case"vn":i=0;break;default:i=1;break}return i}}]);return e}();var De=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];function Ae(e){return De.includes(e)}var Pe={tag:/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>|{{uid[0-9]+}}/g,comment:/<!--(?!<!)[^\[>].*?-->/g,tagName:/<\/?([^\s]+?)[/\s>]/,attributes:/\s([\w\-_:.]+)\s?\n?=\s?\n?"([^"]+)?"|\s([\w\-_:.]+)\s?\n?=\s?\n?'([^']+)?'|\s([\w\-_:.]+)/g,placeholder:/{{uid[0-9]+}}/g};function Le(e){var t={type:"tag",name:"",svg:false,attrs:{},children:[],voidElement:false};if(e.startsWith("\x3c!--")){var n=e.indexOf("--\x3e");var i="\x3c!--".length;return{type:"comment",content:n!==-1?e.slice(i,n):""}}var s=e.match(Pe.tagName);if(r.isArrayFilled(s)){var o=babelHelpers.slicedToArray(s,2),a=o[1];t.name=a;t.svg=a==="svg";t.voidElement=Ae(a)||e.trim().endsWith("/>")}var l=new RegExp(Pe.attributes);for(;;){var u=l.exec(e);if(!r.isNil(u)){var c=babelHelpers.slicedToArray(u,3),f=c[1],d=c[2];if(!r.isNil(f)){t.attrs[f]=r.isStringFilled(d)?d:""}else{var h=babelHelpers.slicedToArray(u,5),p=h[3],m=h[4];if(!r.isNil(p)){t.attrs[p]=r.isStringFilled(m)?m:""}else{var g=babelHelpers.slicedToArray(u,6),v=g[5];t.attrs[v]=""}}}else{break}}return t}function Re(e){var t=e.replace(/[\n\r\t]$/,"");var n=t.match(Pe.placeholder);return t.split(Pe.placeholder).reduce((function(e,t,i){if(r.isStringFilled(t)){e.push.apply(e,babelHelpers.toConsumableArray(t.split(/\n/).reduce((function(e,t){var n=t.replace(/[\t\r]/g,"");if(r.isStringFilled(n)){e.push({type:"text",content:n})}return e}),[])))}if(n&&n[i]){e.push({type:"placeholder",uid:parseInt(n[i].replace(/{{uid|}}/,""))})}return e}),[])}function He(e,t){var n=[];if(e.indexOf("<")!==0&&!e.startsWith("{{")){var r=e.indexOf("<");n.push.apply(n,babelHelpers.toConsumableArray(Re(r===-1?e:e.slice(0,r))))}var i=[];var s=-1;e=e.replace(Pe.comment,(function(e){s+=1;i.push(e.replace(/^<!--|-->$/g,""));return"\x3c!--{{cUid".concat(s,"}}--\x3e")}));var o=[];var a=-1;var l;e.replace(Pe.tag,(function(r,s){var u=s+r.length;var c=e.charAt(u);var f;if(r.startsWith("\x3c!--")){var d=Le(r,t);d.content=i[r.replace(/<!--{{cUid|}}-->/g,"")];if(a<0){n.push(d);return n}f=o[a];f.children.push(d);return n}if(r.startsWith("{{")){var h=Re(r),p=babelHelpers.slicedToArray(h,1),m=p[0];if(a<0){n.push(m);return n}f=o[a];f.children.push(m);return n}if(!r.startsWith("</")){a++;l=Le(r,t);if(!l.voidElement&&c&&c!=="<"){var g;(g=l.children).push.apply(g,babelHelpers.toConsumableArray(Re(e.slice(u,e.indexOf("<",u)))))}if(a===0){n.push(l)}f=o[a-1];if(f){if(!l.svg){l.svg=f.svg}f.children.push(l)}o[a]=l}if(r.startsWith("</")||l.voidElement){if(a>-1&&(l.voidElement||l.name===r.slice(2,-1))){a--;l=a===-1?n:o[a]}if(c&&c!=="<"){f=a===-1?n:o[a].children;var v=e.indexOf("<",u);var y=e.slice(u,v===-1?undefined:v);if(v>-1&&a+f.length>=0||y!==" "){var b;(b=f).push.apply(b,babelHelpers.toConsumableArray(Re(y)))}}}}));return n}var je=function e(t,n){if(r.isDomNode(t)&&r.isDomNode(n)){if(n.nodeName!=="TEMPLATE"){we.append(t,n)}else{n.content.append(t)}}};function Ne(e){var t=e.node,n=e.parentElement,i=e.substitutions,s=e.refs,o=s===void 0?[]:s;if(t.type==="tag"){var a=function(){if(t.svg){return document.createElementNS("http://www.w3.org/2000/svg",t.name)}return document.createElement(t.name)}();if(Object.hasOwn(t.attrs,"ref")){o.push([t.attrs.ref,a]);delete t.attrs.ref}Object.entries(t.attrs).forEach((function(e){var t=babelHelpers.slicedToArray(e,2),n=t[0],s=t[1];if(n.startsWith("on")&&new RegExp(Pe.placeholder).test(s)){var o=i[parseInt(s.replace(/{{uid|}}/,""))-1];if(r.isFunction(o)){var l=n.endsWith("once")?"bindOnce":"bind";ge[l](a,n.replace(/^on|once$/g,""),o)}else{a.setAttribute(n,o)}}else{if(new RegExp(Pe.placeholder).test(s)){var c=s.split(/{{|}}/).reduce((function(e,t){if(t.startsWith("uid")){var n=i[parseInt(t.replace("uid",""))-1];return"".concat(e).concat(n)}return"".concat(e).concat(t)}),"");a.setAttribute(n,c)}else{a.setAttribute(n,u.decode(s))}}}));t.children.forEach((function(e){var t=Ne({node:e,parentElement:a,substitutions:i,refs:o});if(r.isArray(t)){t.forEach((function(e){je(e,a)}))}else{je(t,a)}}));return a}if(t.type==="comment"){return document.createComment(t.content)}if(t.type==="text"){if(n){if(n.nodeName!=="TEMPLATE"){n.insertAdjacentHTML("beforeend",t.content)}else{n.content.append(t.content)}return}return document.createTextNode(t.content)}if(t.type==="placeholder"){return i[t.uid-1]}}function Be(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++){n[i-1]=arguments[i]}var s=e.reduce((function(e,t,i){if(i>0){var s=n[i-1];if(r.isString(s)||r.isNumber(s)){return"".concat(e).concat(s).concat(t)}return"".concat(e,"{{uid").concat(i,"}}").concat(t)}return e}),e[0]).replace(/^[\r\n\t\s]+/gm,"").replace(/>[\n]+/g,">").replace(/[}][\n]+/g,"}");var o=He(s);if(o.length===1){var a=[];var l=Ne({node:o[0],substitutions:n,refs:a});if(r.isArrayFilled(a)){return Object.fromEntries([["root",l]].concat(a))}return l}if(o.length>1){var u=[];var c=o.map((function(e){return Ne({node:e,substitutions:n,refs:u})}));if(r.isArrayFilled(u)){return Object.fromEntries([["root",c]].concat(u))}return c}return false}function Fe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++){n[i-1]=arguments[i]}return n.reduce((function(t,n,i){var s=i+1;if(!r.isPlainObject(n)&&!r.isArray(n)){return t+n+e[s]}return"".concat(t,"__s").concat(i).concat(e[s])}),e[0]).replace(/[\r\t]/gm,"").split(";\n").map((function(e){return e.replace(/\n/,"")})).reduce((function(e,t){if(t!==""){var r=t.match(/^[\w-. ]+:/);var i=t.split(/^[\w-. ]+:/);var s=r[0].replace(":","").trim();var o=i[1].trim();var a=/^__s\d+/;if(a.test(o)){e[s]=n[o.replace("__s","")];return e}e[s]=o}return e}),{})}var Ue=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"safe",value:function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}return r.reduce((function(e,n,r){return e+u.encode(n)+t[r+1]}),t[0])}},{key:"unsafe",value:function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}return r.reduce((function(e,n,r){return e+u.decode(n)+t[r+1]}),t[0])}},{key:"style",value:function e(t){if(!r.isDomNode(t)){throw new Error("element is not HTMLElement")}return function e(){we.style(t,Fe.apply(void 0,arguments))}}},{key:"message",value:function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}return r.reduce((function(e,n,r){return e+Me.getMessage(n)+t[r+1]}),t[0])}},{key:"attrs",value:function e(t){if(!r.isDomNode(t)){throw new Error("element is not HTMLElement")}return function e(){we.attr(t,Fe.apply(void 0,arguments))}}}]);return e}();babelHelpers.defineProperty(Ue,"render",Be);babelHelpers.defineProperty(Ue,"attr",Ue.attrs);function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ve(e){switch(e){case"index":return function(e,t,n){var i=/\[(\w*)\]$/.exec(e);var s=e.replace(/\[\w*\]$/,"");if(r.isNil(i)){n[s]=t;return}if(r.isUndefined(n[s])){n[s]={}}n[s][i[1]]=t};case"bracket":return function(e,t,n){var i=/(\[\])$/.exec(e);var s=e.replace(/\[\]$/,"");if(r.isNil(i)){n[s]=t;return}if(r.isUndefined(n[s])){n[s]=[t];return}n[s]=[].concat(n[s],t)};default:return function(e,t,n){var r=e.replace(/\[\]$/,"");n[r]=t}}}function Ge(e){if(/^\w+\[([\w]+)\]$/.test(e)){return"index"}if(/^\w+\[\]$/.test(e)){return"bracket"}return"default"}function ze(e){return!String(e).startsWith("__proto__")}function Xe(e){if(!r.isString(e)){return{}}var t=e.trim().replace(/^[?#&]/,"");if(!t){return{}}return $e({},t.split("&").reduce((function(e,t){var n=t.replace(/\+/g," ").split("="),r=babelHelpers.slicedToArray(n,2),i=r[0],s=r[1];if(ze(i)){var o=Ge(i);var a=Ve(o);a(i,s,e)}return e}),Object.create(null)))}var qe=/^((\w+):)?(\/\/((\w+)?(:(\w+))?@)?([^\/\?:]+)(:(\d+))?)?(\/?([^\/\?#][^\?#]*)?)?(\?([^#]+))?(#((?:[\w-?/:@.~!$&'()*+,;=]|%\w{2})*))?/;function Ke(e){var t=e.match(qe);if(r.isArray(t)){var n=Xe(t[14]);return{useShort:/^\/\//.test(e),href:t[0]||"",schema:t[2]||"",host:t[8]||"",port:t[10]||"",path:t[11]||"",query:t[14]||"",queryParams:n,hash:t[16]||"",username:t[5]||"",password:t[7]||"",origin:t[8]||""}}return{}}function Ye(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=Object.keys(e).reduce((function(t,n){if(r.isArray(e[n])){e[n].forEach((function(e){t.push("".concat(n,"[]=").concat(e))}),"")}if(r.isPlainObject(e[n])){Object.keys(e[n]).forEach((function(r){t.push("".concat(n,"[").concat(r,"]=").concat(e[n][r]))}),"")}if(!r.isObject(e[n])&&!r.isArray(e[n])){t.push("".concat(n,"=").concat(e[n]))}return t}),[]).join("&");if(t.length>0){return"?".concat(t)}return t}function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e){if(r.isArray(e)){return e.map((function(e){return String(e)}))}if(r.isPlainObject(e)){return Qe({},e)}return String(e)}function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nt=new WeakMap;var rt=function(){babelHelpers.createClass(e,null,[{key:"addParam",value:function t(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new e(n).setQueryParams(r).toString()}},{key:"removeParam",value:function t(n,i){var s;var o=r.isArray(i)?i:[i];return(s=new e(n)).removeQueryParam.apply(s,babelHelpers.toConsumableArray(o)).toString()}}]);function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";babelHelpers.classCallCheck(this,e);nt.set(this,Ke(t))}babelHelpers.createClass(e,[{key:"getSchema",value:function e(){return nt.get(this).schema}},{key:"setSchema",value:function e(t){nt.get(this).schema=String(t);return this}},{key:"getHost",value:function e(){return nt.get(this).host}},{key:"setHost",value:function e(t){nt.get(this).host=String(t);return this}},{key:"getPort",value:function e(){return nt.get(this).port}},{key:"setPort",value:function e(t){nt.get(this).port=String(t);return this}},{key:"getPath",value:function e(){return nt.get(this).path}},{key:"setPath",value:function e(t){if(!/^\//.test(t)){nt.get(this).path="/".concat(String(t));return this}nt.get(this).path=String(t);return this}},{key:"getQuery",value:function e(){return Ye(nt.get(this).queryParams)}},{key:"getQueryParam",value:function e(t){var n=this.getQueryParams();if(Object.hasOwn(n,t)){return n[t]}return null}},{key:"setQueryParam",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";nt.get(this).queryParams[t]=Ze(n);return this}},{key:"getQueryParams",value:function e(){return tt({},nt.get(this).queryParams)}},{key:"setQueryParams",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=this.getQueryParams();var r=tt(tt({},n),t);Object.keys(r).forEach((function(e){r[e]=Ze(r[e])}));nt.get(this).queryParams=r;return this}},{key:"removeQueryParam",value:function e(){var t=tt({},nt.get(this).queryParams);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}r.forEach((function(e){if(Object.hasOwn(t,e)){delete t[e]}}));nt.get(this).queryParams=t;return this}},{key:"getFragment",value:function e(){return nt.get(this).hash}},{key:"setFragment",value:function e(t){nt.get(this).hash=String(t);return this}},{key:"serialize",value:function e(){var t=tt({},nt.get(this));t.href=this.toString();return t}},{key:"toString",value:function e(){var t=tt({},nt.get(this));var n=t.schema?"".concat(t.schema,"://"):"";if(t.useShort){n="//"}var i=function(){if(r.isString(t.port)&&!["","80"].includes(t.port)){return":".concat(t.port)}return""}();var s=this.getHost();var o=this.getPath();var a=Ye(t.queryParams);var l=t.hash?"#".concat(t.hash):"";return"".concat(s?n:"").concat(s).concat(s?i:"").concat(o).concat(a).concat(l)}}]);return e}();var it=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"isEmail",value:function e(t){var n=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;return n.test(String(t).toLowerCase())}}]);return e}();var st=function(){function e(){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"storage",new Map)}babelHelpers.createClass(e,[{key:"get",value:function e(t,n){if(!this.storage.has(t)){if(r.isFunction(n)){return n()}if(!r.isUndefined(n)){return n}}return this.storage.get(t)}},{key:"set",value:function e(t,n){this.storage.set(t,n)}},{key:"delete",value:function e(t){this.storage["delete"](t)}},{key:"has",value:function e(t){return this.storage.has(t)}},{key:"remember",value:function e(t,n){if(!this.storage.has(t)){if(r.isFunction(n)){this.storage.set(t,n())}else if(!r.isUndefined(n)){this.storage.set(t,n)}}return this.storage.get(t)}},{key:"size",value:function e(){return this.storage.size}},{key:"keys",value:function e(){return babelHelpers.toConsumableArray(this.storage.keys())}},{key:"values",value:function e(){return babelHelpers.toConsumableArray(this.storage.values())}}]);return e}();var ot=function(e){babelHelpers.inherits(t,e);function t(){var e;var n;babelHelpers.classCallCheck(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++){i[s]=arguments[s]}n=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(i)));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"storage",new Map);return n}return t}(st);var at=function(){function e(){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"stackKey","BX.Cache.Storage.LsStorage.stack");babelHelpers.defineProperty(this,"stack",null)}babelHelpers.createClass(e,[{key:"getStack",value:function e(){if(r.isPlainObject(this.stack)){return this.stack}var t=localStorage.getItem(this.stackKey);if(r.isString(t)&&t!==""){var n=JSON.parse(t);if(r.isPlainObject(n)){this.stack=n;return this.stack}}this.stack={};return this.stack}},{key:"saveStack",value:function e(){if(r.isPlainObject(this.stack)){var t=JSON.stringify(this.stack);localStorage.setItem(this.stackKey,t)}}},{key:"get",value:function e(t){var n=this.getStack();return n[t]}},{key:"set",value:function e(t,n){var r=this.getStack();r[t]=n;this.saveStack()}},{key:"delete",value:function e(t){var n=this.getStack();if(t in n){delete n[t]}}},{key:"has",value:function e(t){var n=this.getStack();return t in n}},{key:"keys",value:function e(){var t=this.getStack();return Object.keys(t)}},{key:"values",value:function e(){var t=this.getStack();return Object.values(t)}},{key:"size",get:function e(){var t=this.getStack();return Object.keys(t).length}}]);return e}();var lt=function(e){babelHelpers.inherits(t,e);function t(){var e;var n;babelHelpers.classCallCheck(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++){i[s]=arguments[s]}n=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(i)));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"storage",new at);return n}return t}(st);var ut=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(ut,"BaseCache",st);babelHelpers.defineProperty(ut,"MemoryCache",ot);babelHelpers.defineProperty(ut,"LocalStorageCache",lt);var ct;function ft(e,t){dt(e,t);t.add(e)}function dt(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ht(e,t,n){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return n}var pt=new WeakSet;ct=Symbol.iterator;var mt=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;babelHelpers.classCallCheck(this,e);ft(this,pt);babelHelpers.defineProperty(this,"comparator",null);babelHelpers.defineProperty(this,"items",[]);this.comparator=r.isFunction(t)?t:null}babelHelpers.createClass(e,[{key:"add",value:function e(t){var n=-1;if(this.comparator){n=ht(this,pt,gt).call(this,t);this.items.splice(n,0,t)}else{this.items.push(t)}return n}},{key:"has",value:function e(t){return this.items.includes(t)}},{key:"getIndex",value:function e(t){return this.items.indexOf(t)}},{key:"getByIndex",value:function e(t){if(r.isNumber(t)&&t>=0){var n=this.items[t];return r.isUndefined(n)?null:n}return null}},{key:"getFirst",value:function e(){var t=this.items[0];return r.isUndefined(t)?null:t}},{key:"getLast",value:function e(){var t=this.items[this.count()-1];return r.isUndefined(t)?null:t}},{key:"count",value:function e(){return this.items.length}},{key:"delete",value:function e(t){var n=this.getIndex(t);if(n!==-1){this.items.splice(n,1);return true}return false}},{key:"clear",value:function e(){this.items=[]}},{key:ct,value:function e(){return this.items[Symbol.iterator]()}},{key:"forEach",value:function e(t,n){return this.items.forEach(t,n)}},{key:"getAll",value:function e(){return this.items}},{key:"getComparator",value:function e(){return this.comparator}},{key:"sort",value:function e(){var t=this;var n=this.getComparator();if(n===null){return}var r=this.items.length;var i=new Array(r);for(var s=0;s<r;s++){i[s]=s}i.sort((function(e,r){return n(t.items[e],t.items[r])||e-r}));for(var o=0;o<r;o++){i[o]=this.items[i[o]]}for(var a=0;a<r;a++){this.items[a]=i[a]}}}]);return e}();function gt(e){var t=0;var n=this.items.length;while(t<n){var r=Math.floor((t+n)/2);if(this.comparator(this.items[r],e)>=0){n=r}else{t=r+1}}return t}var vt=function(e){babelHelpers.inherits(t,e);function t(e){var n;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"sort",0);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"alwaysOnTop",false);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"zIndex",0);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"element",null);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"overlay",null);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"overlayGap",-5);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"stack",null);n.setEventNamespace("BX.Main.ZIndexManager.Component");if(!r.isElementNode(e)){throw new Error("ZIndexManager.Component: The argument 'element' must be a DOM element.")}n.element=e;var s=r.isPlainObject(i)?i:{};n.setAlwaysOnTop(s.alwaysOnTop);n.setOverlay(s.overlay);n.setOverlayGap(s.overlayGap);n.subscribeFromOptions(s.events);return n}babelHelpers.createClass(t,[{key:"getSort",value:function e(){return this.sort}},{key:"setSort",value:function e(t){if(r.isNumber(t)){this.sort=t}}},{key:"setStack",value:function e(t){this.stack=t}},{key:"getStack",value:function e(){return this.stack}},{key:"getZIndex",value:function e(){return this.zIndex}},{key:"setZIndex",value:function e(t){var n=this.getZIndex()!==t;this.getElement().style.setProperty("z-index",t,"important");this.zIndex=t;if(this.getOverlay()!==null){this.getOverlay().style.setProperty("z-index",t+this.getOverlayGap(),"important")}if(n){this.emit("onZIndexChange",{component:this})}}},{key:"getAlwaysOnTop",value:function e(){return this.alwaysOnTop}},{key:"setAlwaysOnTop",value:function e(t){if(r.isNumber(t)||r.isBoolean(t)){this.alwaysOnTop=t}}},{key:"getElement",value:function e(){return this.element}},{key:"setOverlay",value:function e(t,n){if(r.isElementNode(t)||t===null){this.overlay=t;this.setOverlayGap(n);if(this.getStack()){this.getStack().sort()}}}},{key:"getOverlay",value:function e(){return this.overlay}},{key:"setOverlayGap",value:function e(t){if(r.isNumber(t)){this.overlayGap=t}}},{key:"getOverlayGap",value:function e(){return this.overlayGap}}]);return t}(he);var yt=function(){function e(t){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"container",null);babelHelpers.defineProperty(this,"components",null);babelHelpers.defineProperty(this,"elements",new WeakMap);babelHelpers.defineProperty(this,"baseIndex",1e3);babelHelpers.defineProperty(this,"baseStep",50);babelHelpers.defineProperty(this,"sortCount",0);if(!r.isDomNode(t)){throw new Error("ZIndexManager.Stack: The 'container' argument must be a DOM element.")}this.container=t;var n=function e(t,n){var r=(t.getAlwaysOnTop()||0)-(n.getAlwaysOnTop()||0);if(!r){r=t.getSort()-n.getSort()}return r};this.components=new mt(n)}babelHelpers.createClass(e,[{key:"getBaseIndex",value:function e(){return this.baseIndex}},{key:"setBaseIndex",value:function e(t){if(r.isNumber(t)&&t>=0){this.baseIndex=t;this.sort()}}},{key:"setBaseStep",value:function e(t){if(r.isNumber(t)&&t>0){this.baseStep=t;this.sort()}}},{key:"getBaseStep",value:function e(){return this.baseStep}},{key:"register",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this.getComponent(t)){console.warn("ZIndexManager: You cannot register the element twice.",t);return this.getComponent(t)}var r=new vt(t,n);r.setStack(this);r.setSort(++this.sortCount);this.elements.set(t,r);this.components.add(r);this.sort();return r}},{key:"unregister",value:function e(t){var n=this.elements.get(t);this.components["delete"](n);this.elements["delete"](t);this.sort()}},{key:"getComponent",value:function e(t){return this.elements.get(t)||null}},{key:"getComponents",value:function e(){return this.components.getAll()}},{key:"getMaxZIndex",value:function e(){var t=this.components.getLast();return t?t.getZIndex():this.baseIndex}},{key:"sort",value:function e(){var t=this;this.components.sort();var n=this.baseIndex;this.components.forEach((function(e){e.setZIndex(n);n+=t.baseStep}))}},{key:"bringToFront",value:function e(t){var n=this.getComponent(t);if(!n){console.error("ZIndexManager: element was not found in the stack.",t);return null}n.setSort(++this.sortCount);this.sort();return n}}]);return e}();function bt(e,t,n){wt(e,t);return n}function wt(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}var St=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"register",value:function t(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=bt(this,e,kt).call(this,n);if(!i){return null}var s=this.getOrAddStack(i);return s.register(n,r)}},{key:"unregister",value:function t(n){var r=bt(this,e,kt).call(this,n);var i=this.getStack(r);if(i){i.unregister(n)}}},{key:"addStack",value:function e(t){var n=new yt(t);this.stacks.set(t,n);return n}},{key:"getStack",value:function e(t){return this.stacks.get(t)||null}},{key:"getOrAddStack",value:function e(t){return this.getStack(t)||this.addStack(t)}},{key:"getComponent",value:function t(n){var r=bt(this,e,kt).call(this,n,true);if(!r){return null}var i=this.getStack(r);return i?i.getComponent(n):null}},{key:"bringToFront",value:function t(n){var r=bt(this,e,kt).call(this,n);var i=this.getStack(r);if(i){return i.bringToFront(n)}return null}}]);return e}();function kt(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!r.isElementNode(e)){if(!t){console.error("ZIndexManager: The argument 'element' must be a DOM element.",e)}return null}else if(!r.isElementNode(e.parentNode)){if(!t){console.error("ZIndexManager: The 'element' doesn't have a parent node.",e)}return null}return e.parentNode}babelHelpers.defineProperty(St,"stacks",new WeakMap);function It(e){if(r.isStringFilled(e)){return e.split(".").reduce((function(e,t){t.split(/\[['"]?(.+?)['"]?\]/g).forEach((function(t){if(r.isStringFilled(t)){e.push(t)}}));return e}),[])}return[]}var Et=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);if(r.isPlainObject(t)){Object.assign(this,t)}}babelHelpers.createClass(e,[{key:"get",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=It(t);return i.reduce((function(e,t){if(!r.isNil(e)&&e!==n){if(!r.isUndefined(e[t])){return e[t]}return n}return e}),this)}}]);return e}();function Ct(e){if(r.isObject(e)){Object.values(e).forEach((function(e){Ct(e)}));return Object.freeze(e)}return e}var _t=new Map;var xt=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getSettings",value:function e(t){if(r.isStringFilled(t)){if(_t.has(t)){return _t.get(t)}var n=document.querySelector('script[data-extension="'.concat(t,'"]'));if(r.isDomNode(n)){var i=function(){try{return new Et(JSON.parse(n.innerHTML))}catch(e){return new Et}}();var s=Ct(i);_t.set(t,s);return s}}return Ct(new Et)}}]);return e}();function Tt(e){if(r.isString(e)){return document.getElementById(e)}return e}function Ot(e){if(r.isElementNode(e)){return e.ownerDocument.parentWindow||e.ownerDocument.defaultView||window}if(r.isDomNode(e)){return e.parentWindow||e.defaultView||window}return window}function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var At=i.getClass,Pt=i.namespace;var Lt=Oe;var Rt=we.replace,Ht=we.remove,jt=we.clean,Nt=we.insertBefore,Bt=we.insertAfter,Ft=we.append,Ut=we.prepend,Wt=we.style,$t=we.adjust,Vt=we.create,Gt=we.isShown;var zt=function e(){we.addClass.apply(we,babelHelpers.toConsumableArray(ee.merge([],Array.from(arguments),[Tt(arguments[0])])))};var Xt=function e(){we.removeClass.apply(we,babelHelpers.toConsumableArray(ee.merge(Array.from(arguments),[Tt(arguments[0])])))};var qt=function e(){return we.hasClass.apply(we,babelHelpers.toConsumableArray(ee.merge(Array.from(arguments),[Tt(arguments[0])])))};var Kt=function e(){we.toggleClass.apply(we,babelHelpers.toConsumableArray(ee.merge(Array.from(arguments),[Tt(arguments[0])])))};var Yt=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=Tt(t);if(r.isDomNode(i)){we.clean(i);if(n){we.remove(i);return i}}return i};var Jt=Te.Cookie.get;var Qt=function e(t,n){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var s=Dt({},i);if(r.isNumber(s.expires)){s.expires/=3600*24}Te.Cookie.set(t,n,s)};var Zt=ge.bind,en=ge.unbind,tn=ge.unbindAll,nn=ge.bindOnce,rn=ge.ready;var sn=b,on=k,an=I;var ln=function e(t){if(t){w()}else{S()}};var un=ee.clone,cn=ee.loadExtension,fn=ee.debounce,dn=ee.throttle,hn=ee.html;var pn=Dt(Dt({},Object.getOwnPropertyNames(r).filter((function(e){return!["name","length","prototype","caller","arguments"].includes(e)})).reduce((function(e,t){e[t]=r[t];return e}),{})),{},{isNotEmptyString:function e(t){return r.isString(t)&&t!==""},isNotEmptyObject:function e(t){return r.isObjectLike(t)&&Object.keys(t).length>0},isMapKey:r.isObject,stringToInt:function e(t){var n=parseInt(t);return!Number.isNaN(n)?n:0}});var mn={IsOpera:ke.isOpera,IsIE:ke.isIE,IsIE6:ke.isIE6,IsIE7:ke.isIE7,IsIE8:ke.isIE8,IsIE9:ke.isIE9,IsIE10:ke.isIE10,IsIE11:ke.isIE11,IsSafari:ke.isSafari,IsFirefox:ke.isFirefox,IsChrome:ke.isChrome,DetectIeVersion:ke.detectIEVersion,IsMac:ke.isMac,IsAndroid:ke.isAndroid,isIPad:ke.isIPad,isIPhone:ke.isIPhone,IsIOS:ke.isIOS,IsMobile:ke.isMobile,isRetina:ke.isRetina,IsDoctype:ke.isDoctype,SupportLocalStorage:ke.isLocalStorageSupported,addGlobalClass:ke.addGlobalClass,DetectAndroidVersion:ke.detectAndroidVersion,isPropertySupported:ke.isPropertySupported,addGlobalFeatures:ke.addGlobalFeatures};var gn=window.BX?window.BX.ajax:function(){};function vn(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:document;return{scrollWidth:e.documentElement.scrollWidth,scrollHeight:e.documentElement.scrollHeight}}function yn(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:document;var t=Ot(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function bn(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:document;var t=Ot(e);return{innerWidth:t.innerWidth,innerHeight:t.innerHeight}}function wn(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:document;return Dt(Dt(Dt({},bn(e)),yn(e)),vn(e))}function Sn(e){return Ot(e)}function kn(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!e){return(new DOMRect).toJSON()}if(e.ownerDocument===document&&!t){var n=e.getBoundingClientRect();var r=document.documentElement;var i=document,s=i.body;return{top:Math.round(n.top+(r.scrollTop||s.scrollTop)),left:Math.round(n.left+(r.scrollLeft||s.scrollLeft)),width:Math.round(n.right-n.left),height:Math.round(n.bottom-n.top),right:Math.round(n.right+(r.scrollLeft||s.scrollLeft)),bottom:Math.round(n.bottom+(r.scrollTop||s.scrollTop))}}var o=0;var a=0;var l=e.offsetWidth;var c=e.offsetHeight;var f=true;for(;e!=null;e=e.offsetParent){if(!f&&t&&BX.is_relative(e)){break}o+=e.offsetLeft;a+=e.offsetTop;if(f){f=false;continue}o+=u.toNumber(we.style(e,"border-left-width"));a+=u.toNumber(we.style(e,"border-top-width"))}return new DOMRect(o,a,l,c).toJSON()}function In(e,t,n){if(r.isString(e)){n=t;t=e;e=he.GLOBAL_TARGET}if(e===window){e=he.GLOBAL_TARGET}if(!r.isObject(e)){console.error('The "eventObject" argument must be an object. Received type '+babelHelpers["typeof"](e)+".");return}if(!r.isStringFilled(t)){console.error('The "eventName" argument must be a string.');return}if(!r.isFunction(n)){console.error('The "eventHandler" argument must be a function. Received type '+babelHelpers["typeof"](n)+".");return}t=t.toLowerCase();he.subscribe(e,t,n,{compatMode:true,useGlobalNaming:true})}function En(e,t,n,i){if(r.isString(e)){i=n;n=t;t=e;e=he.GLOBAL_TARGET}if(!r.isObject(e)||e===window){e=he.GLOBAL_TARGET}if(!n){n=[]}t=t.toLowerCase();var s=new re;s.setData(n);s.setCompatData(n);he.emit(e,t,s,{cloneData:i===true,useGlobalNaming:true})}function Cn(e,t,n){if(r.isString(e)){n=t;t=e;e=he.GLOBAL_TARGET}if(!r.isFunction(n)){console.error('The "eventHandler" argument must be a function. Received type '+babelHelpers["typeof"](n)+".");return}if(e===window){e=he.GLOBAL_TARGET}t=t.toLowerCase();he.unsubscribe(e,t,n,{useGlobalNaming:true})}function _n(e,t){if(r.isString(e)){t=e;e=he.GLOBAL_TARGET}if(e===window){e=he.GLOBAL_TARGET}t=t.toLowerCase();he.unsubscribeAll(e,t,{useGlobalNaming:true})}e.Type=r;e.Reflection=i;e.Text=u;e.Dom=we;e.Browser=ke;e.Event=ge;e.Http=Te;e.Runtime=ee;e.Loc=Me;e.Tag=Ue;e.Uri=rt;e.Validation=it;e.Cache=ut;e.BaseError=ne;e.ZIndexManager=St;e.Extension=xt;e.getClass=At;e.namespace=Pt;e.message=Lt;e.replace=Rt;e.remove=Ht;e.clean=jt;e.insertBefore=Nt;e.insertAfter=Bt;e.append=Ft;e.prepend=Ut;e.style=Wt;e.adjust=$t;e.create=Vt;e.isShown=Gt;e.addClass=zt;e.removeClass=Xt;e.hasClass=qt;e.toggleClass=Kt;e.cleanNode=Yt;e.getCookie=Jt;e.setCookie=Qt;e.bind=Zt;e.unbind=en;e.unbindAll=tn;e.bindOnce=nn;e.ready=rn;e.debugEnableFlag=sn;e.debugStatus=on;e.debug=an;e.debugEnable=ln;e.clone=un;e.loadExt=cn;e.debounce=fn;e.throttle=dn;e.html=hn;e.type=pn;e.browser=mn;e.ajax=gn;e.GetWindowScrollSize=vn;e.GetWindowScrollPos=yn;e.GetWindowInnerSize=bn;e.GetWindowSize=wn;e.GetContext=Sn;e.pos=kn;e.addCustomEvent=In;e.onCustomEvent=En;e.removeCustomEvent=Cn;e.removeAllCustomEvents=_n})(this.BX=this.BX||{})})();(function(){"use strict";try{new window.CustomEvent("bx-test-custom-event",{bubbles:true,cancelable:true})}catch(t){var e=function(e,t){t=t||{};t.bubbles=!!t.bubbles;t.cancelable=!!t.cancelable;var n=document.createEvent("CustomEvent");n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail);var r=n.preventDefault;n.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return true}});r.call(this)};return n};e.prototype=window.Event.prototype;window.CustomEvent=e}})();(function(){if(typeof this.BX!=="undefined"&&typeof this.BX.WidgetVue!=="undefined"){var e="2.6.14";if(this.BX.WidgetVue.version()!==e){console.warn("BX.WidgetVue already loaded. Loaded: "+this.BX.WidgetVue.version()+", Skipped: "+e+". Version differences may cause errors!")}return}(function(e,t,n,r,i){"use strict";function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=function(){function e(t){babelHelpers.classCallCheck(this,e);this._appCounter=0;this._components={};this._mutations={};this._clones={};this._instance=t;this._instance.use(this);this.event=new t;this.events={restClientChange:"RestClient::change",pullClientChange:"PullClient::change"};var r=n.Extension.getSettings("ui.vue");this.localizationMode=r.get("localizationDebug",false)?"development":"production"}babelHelpers.createClass(e,[{key:"create",value:function t(n){e.showNotice("Method Vue.create is deprecated, use BitrixVue.createApp instead.\n"+'If you are using "el" property or .$mount(...) to bind your application, use .mount(...) instead.');return this.createApp(n)}},{key:"createApp",value:function e(s){var a=this;var l={};l.Loc={messages:{},getMessage:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(a.localizationMode==="development"){var i=[t];if(n.Type.isPlainObject(r)){var s=Object.keys(r);if(s.length>0){i=[t," (replacements: ",s.join(", "),")"]}}return i.join("")}var o="";if(!n.Type.isUndefined(this.messages[t])){o=this.messages[t]}else{o=n.Loc.getMessage(t);this.messages[t]=o}if(n.Type.isString(o)&&n.Type.isPlainObject(r)){Object.keys(r).forEach((function(e){var t=new RegExp(e,"gi");o=o.replace(t,(function(){return n.Type.isNil(r[e])?"":String(r[e])}))}))}return o},hasMessage:function e(t){return n.Type.isString(t)&&!n.Type.isNil(this.getMessages()[t])},getMessages:function e(){if(typeof BX.message!=="undefined"){return o(o({},BX.message),this.messages)}return o({},this.messages)},setMessage:function e(t,r){if(n.Type.isString(t)){this.messages[t]=r}if(n.Type.isObject(t)){for(var i in t){if(t.hasOwnProperty(i)){this.messages[i]=t[i]}}}}};l.Application={instance:null,get:function e(){return this.instance},set:function e(t){this.instance=t}};l.Data={data:{},get:function e(t,n){var r;return(r=this.data[t])!==null&&r!==void 0?r:n},set:function e(t,n){this.data[t]=n}};l.eventEmitter=new t.EventEmitter;if(typeof l.eventEmitter.setEventNamespace==="function"){this._appCounter++;l.eventEmitter.setEventNamespace("vue:app:"+this._appCounter)}else{window.BX.Event.EventEmitter.prototype.setEventNamespace=function(){};l.eventEmitter.setEventNamespace=function(){}}l.RestClient={instance:null,get:function e(){var t;return(t=this.instance)!==null&&t!==void 0?t:r.rest},set:function e(t){this.instance=t;l.eventEmitter.emit(a.events.restClientChange)},isCustom:function e(){return this.instance!==null}};l.PullClient={instance:null,get:function e(){var t;return(t=this.instance)!==null&&t!==void 0?t:i.PULL},set:function e(t){this.instance=t;l.eventEmitter.emit(a.events.pullClientChange)},isCustom:function e(){return this.instance!==null}};if(typeof s.mixins==="undefined"){s.mixins=[]}s.mixins.unshift({beforeCreate:function e(){this.$bitrix=l}});var u=new this._instance(s);u.mount=function(e){return this.$mount(e)};return u}},{key:"component",value:function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!n.name){n.name=t}this._components[t]=Object.assign({},n);this._components[t].bitrixOptions={immutable:r.immutable===true,local:r.local===true};if(typeof this._clones[t]!=="undefined"){this._registerCloneComponent(t)}var i=this._getFinalComponentParams(t);if(this.isLocal(t)){return i}return this._instance.component(t,i)}},{key:"localComponent",value:function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return this.component(t,n,o(o({},r),{},{local:true}))}},{key:"getLocalComponent",value:function t(n){if(!this.isComponent(n)){e.showNotice('Component "'+n+'" is not registered yet.');return null}if(!this.isLocal(n)){e.showNotice('You cannot get the component "'+n+'" because it is marked as global.');return null}return this._getFinalComponentParams(n)}},{key:"mutateComponent",value:function t(n,r){var i=this;var s=this.isMutable(n);if(s===false){e.showNotice('You cannot mutate the component "'+n+'" because it is marked as immutable, perhaps cloning the component is fine for you.');return false}if(typeof this._mutations[n]==="undefined"){this._mutations[n]=[]}this._mutations[n].push(r);if(typeof this._components[n]!=="undefined"&&!this.isLocal(n)){this.component(n,this._components[n],this._components[n].bitrixOptions)}return function(){i._mutations[n]=i._mutations[n].filter((function(e){return e!==r}))}}},{key:"cloneComponent",value:function e(t,n,r){if(this.isLocal(n)){var i=this.getLocalComponent(n);i.name=t;this.component(t,i,{immutable:false,local:true});this.mutateComponent(t,r);return true}if(typeof this._clones[n]==="undefined"){this._clones[n]={}}this._clones[n][t]={id:t,sourceId:n,mutations:r};if(typeof this._components[n]!=="undefined"){this._registerCloneComponent(n,t)}return true}},{key:"cloneLocalComponent",value:function e(t,n){if(babelHelpers["typeof"](t)!=="object"){t=this.getLocalComponent(t);if(!t){return null}}return this._applyMutation(this._cloneObjectWithoutDuplicateFunction(t,n),n)}},{key:"isComponent",value:function e(t){return typeof this._components[t]!=="undefined"}},{key:"isMutable",value:function e(t){if(typeof this._components[t]==="undefined"){return undefined}return!this._components[t].bitrixOptions.immutable}},{key:"isLocal",value:function e(t){if(typeof this._components[t]==="undefined"){return undefined}return this._components[t].bitrixOptions.local===true}},{key:"extend",value:function e(t){return this._instance.extend(t)}},{key:"nextTick",value:function e(t,n){return this._instance.nextTick(t,n)}},{key:"set",value:function e(t,n,r){return this._instance.set(t,n,r)}},{key:"delete",value:function e(t,n){return this._instance["delete"](t,n)}},{key:"directive",value:function e(t,n){return this._instance.directive(t,n)}},{key:"filter",value:function e(t,n){return this._instance.filter(t,n)}},{key:"use",value:function e(t){return this._instance.use(t)}},{key:"mixin",value:function e(t){return this._instance.mixin(t)}},{key:"observable",value:function e(t){return this._instance.observable(t)}},{key:"compile",value:function e(t){return this._instance.compile(t)}},{key:"version",value:function e(){return this._instance.version}},{key:"testNode",value:function e(t,n){if(!n||babelHelpers["typeof"](n)!=="object"){return true}var r,i,s;for(r in n){if(!n.hasOwnProperty(r)){continue}switch(r){case"tag":case"tagName":if(typeof n[r]==="string"){if(t.tagName.toUpperCase()!==n[r].toUpperCase()){return false}}else if(n[r]instanceof RegExp){if(!n[r].test(t.tagName)){return false}}break;case"class":case"className":if(typeof n[r]==="string"){if(!t.classList.contains(n[r].trim())){return false}}else if(n[r]instanceof RegExp){if(typeof t.className!=="string"||!n[r].test(t.className)){return false}}break;case"attr":case"attrs":case"attribute":if(typeof n[r]==="string"){if(!t.getAttribute(n[r])){return false}}else if(n[r]&&Object.prototype.toString.call(n[r])==="[object Array]"){for(i=0,s=n[r].length;i<s;i++){if(n[r][i]&&!t.getAttribute(n[r][i])){return false}}}else{for(i in n[r]){if(!n[r].hasOwnProperty(i)){continue}var o=t.getAttribute(i);if(typeof o!=="string"){return false}if(n[r][i]instanceof RegExp){if(!n[r][i].test(o)){return false}}else if(o!==""+n[r][i]){return false}}}break;case"property":case"props":if(typeof n[r]==="string"){if(!t[n[r]]){return false}}else if(n[r]&&Object.prototype.toString.call(n[r])=="[object Array]"){for(i=0,s=n[r].length;i<s;i++){if(n[r][i]&&!t[n[r][i]]){return false}}}else{for(i in n[r]){if(!n[r].hasOwnProperty(i)){continue}if(typeof n[r][i]==="string"){if(t[i]!=n[r][i]){return false}}else if(n[r][i]instanceof RegExp){if(typeof t[i]!=="string"||!n[r][i].test(t[i])){return false}}}}break}}return true}},{key:"getFilteredPhrases",value:function e(t){var r=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var s={};if(!i&&typeof BX.message!=="undefined"){i=BX.message}else if(n.Type.isObject(i)&&n.Type.isObject(i.$Bitrix)){i=i.$Bitrix.Loc.getMessages()}if(Array.isArray(t)){var o=function e(n){if(!i.hasOwnProperty(n)){return"continue"}if(!t.find((function(e){return n.toString().startsWith(e)}))){return"continue"}if(r.localizationMode==="development"){s[n]=n}else{s[n]=i[n]}};for(var a in i){var l=o(a);if(l==="continue")continue}}else{for(var u in i){if(!i.hasOwnProperty(u)){continue}if(!u.startsWith(t)){continue}if(this.localizationMode==="development"){s[u]=u}else{s[u]=i[u]}}}return Object.freeze(s)}},{key:"_getComponentParamsWithMutation",value:function e(t,n){var r=this;if(typeof this._components[t]==="undefined"){return null}var i=Object.assign({},this._components[t]);if(typeof n==="undefined"){return i}n.forEach((function(e){i=r._applyMutation(r._cloneObjectWithoutDuplicateFunction(i,e),e)}));return i}},{key:"_getFinalComponentParams",value:function e(t){var n=this.isMutable(t)?this._mutations[t]:undefined;return this._getComponentParamsWithMutation(t,n)}},{key:"_registerCloneComponent",value:function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=[];if(r){if(typeof this._clones[t][r]!=="undefined"){i.push(this._clones[t][r])}}else{for(var s in this._clones[t]){if(!this._clones[t].hasOwnProperty(s)){continue}i.push(this._clones[t][s])}}i.forEach((function(e){var t=[];if(typeof n._mutations[e.sourceId]!=="undefined"){t=t.concat(n._mutations[e.sourceId])}t.push(e.mutations);var r=n._getComponentParamsWithMutation(e.sourceId,t);if(!r){return false}n.component(e.id,r)}))}},{key:"_cloneObjectWithoutDuplicateFunction",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";var o={};for(var a in t){if(!t.hasOwnProperty(a)){continue}if(n.Type.isString(t[a])){o[a]=t[a]}else if(n.Type.isArray(t[a])){o[a]=[].concat(t[a])}else if(n.Type.isObjectLike(t[a])){if(s==="watch"||s==="props"||s==="directives"){o[a]=t[a]}else if(n.Type.isNull(t[a])){o[a]=null}else if(n.Type.isObjectLike(r[a])){o[a]=this._cloneObjectWithoutDuplicateFunction(t[a],r[a],i+1,a)}else{o[a]=Object.assign({},t[a])}}else if(n.Type.isFunction(t[a])){if(!n.Type.isFunction(r[a])){o[a]=t[a]}else if(i>1){if(s==="watch"){o[a]=t[a]}else{o["parent"+a[0].toUpperCase()+a.substr(1)]=t[a]}}else{if(n.Type.isUndefined(o["methods"])){o["methods"]={}}o["methods"]["parent"+a[0].toUpperCase()+a.substr(1)]=t[a];if(n.Type.isUndefined(t["methods"])){t["methods"]={}}t["methods"]["parent"+a[0].toUpperCase()+a.substr(1)]=t[a]}}else if(!n.Type.isUndefined(t[a])){o[a]=t[a]}}return o}},{key:"_applyMutation",value:function e(){var t=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var o=Object.assign({},r);var a=function e(r){if(!i.hasOwnProperty(r)){return"continue"}if(s===1&&(r==="compilerOptions"||r==="setup")){o[r]=i[r]}else if(s===1&&r==="extends"){o[r]=i[r]}else if(n.Type.isString(i[r])){if(n.Type.isString(o[r])){o[r]=i[r].replace("#PARENT_".concat(r.toUpperCase(),"#"),o[r])}else{o[r]=i[r].replace("#PARENT_".concat(r.toUpperCase(),"#"),"")}}else if(n.Type.isArray(i[r])){if(s===1&&r==="replaceMixins"){o["mixins"]=[].concat(i[r])}else if(s===1&&r==="replaceInject"){o["inject"]=[].concat(i[r])}else if(s===1&&r==="replaceEmits"){o["emits"]=[].concat(i[r])}else if(s===1&&r==="replaceExpose"){o["expose"]=[].concat(i[r])}else if(n.Type.isPlainObject(o[r])){i[r].forEach((function(e){return o[r][e]=null}))}else{o[r]=o[r].concat(i[r])}}else if(n.Type.isObjectLike(i[r])){if(s===1&&r==="props"&&n.Type.isArray(o[r])||s===1&&r==="emits"&&n.Type.isArray(o[r])){var a={};o[r].forEach((function(e){a[e]=null}));o[r]=a}if(s===1&&r==="watch"){for(var l in o[r]){if(!o[r].hasOwnProperty(l)){continue}if(l.includes(".")){continue}if(n.Type.isFunction(o[r][l])||n.Type.isObject(o[r][l])&&n.Type.isFunction(o[r][l]["handler"])){if(n.Type.isUndefined(o["methods"])){o["methods"]={}}var u="parentWatch"+l[0].toUpperCase()+l.substr(1);if(n.Type.isFunction(o[r][l])){o["methods"][u]=o[r][l]}else{o["methods"][u]=o[r][l]["handler"]}}}}if(s===1&&r==="replaceEmits"){o["emits"]=Object.assign({},i[r])}else if(s===1&&(r==="components"||r==="directives")){if(n.Type.isUndefined(o[r])){o[r]={}}for(var c in i[r]){if(!i[r].hasOwnProperty(c)){continue}var f=c[0].toUpperCase()+c.substr(1);f=r==="components"?"Parent"+f:"parent"+f;o[r][f]=Object.assign({},o[r][c]);if(r==="components"){if(n.Type.isUndefined(i[r][c].components)){i[r][c].components={}}i[r][c].components=Object.assign(babelHelpers.defineProperty({},f,o[r][c]),i[r][c].components)}o[r][c]=i[r][c]}}else if(n.Type.isArray(o[r])){for(var d in i[r]){if(!i[r].hasOwnProperty(d)){continue}o[r].push(d)}}else if(n.Type.isObjectLike(o[r])){o[r]=t._applyMutation(o[r],i[r],s+1)}else{o[r]=i[r]}}else{o[r]=i[r]}};for(var l in i){var u=a(l);if(u==="continue")continue}return o}},{key:"install",value:function t(r,i){r.mixin({beforeCreate:function e(){if(typeof this.$root!=="undefined"){this.$bitrix=this.$root.$bitrix}},computed:{$Bitrix:function e(){return this.$root.$bitrix}},mounted:function t(){if(!n.Type.isNil(this.$root.$bitrixApplication)){e.showNotice("Store reference in global variables (like: this.$bitrixApplication) is deprecated, use this.$Bitrix.Data.set(...) instead.")}if(!n.Type.isNil(this.$root.$bitrixController)){e.showNotice("Store reference in global variables (like: this.$bitrixController) is deprecated, use this.$Bitrix.Data.set(...) instead.")}if(!n.Type.isNil(this.$root.$bitrixMessages)){e.showNotice("Store localization in global variable this.$bitrixMessages is deprecated, use this.$Bitrix.Log.setMessage(...) instead.")}if(!n.Type.isNil(this.$root.$bitrixRestClient)){e.showNotice("Working with a Rest-client through an old variable this.$bitrixRestClient is deprecated, use this.$Bitrix.RestClient.get() instead.")}if(!n.Type.isNil(this.$root.$bitrixPullClient)){e.showNotice("Working with a Pull-client through an old variable this.$bitrixPullClient is deprecated, use this.$Bitrix.PullClient.get() instead.")}}})}}],[{key:"showNotice",value:function t(n){if(e.developerMode){console.warn("BitrixVue: "+n)}}}]);return e}();babelHelpers.defineProperty(a,"developerMode",false);
/*!
	 * Vue.js v2.6.14
	 * (c) 2014-2021 Evan You
	 * Released under the MIT License.
	 *
	 * @source: https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.esm.browser.min.js
	 */var l=Object.freeze({});function u(e){return null==e}function c(e){return null!=e}function f(e){return!0===e}function d(e){return"string"==typeof e||"number"==typeof e||"symbol"==babelHelpers["typeof"](e)||"boolean"==typeof e}function h(e){return null!==e&&"object"==babelHelpers["typeof"](e)}var p=Object.prototype.toString;function m(e){return"[object Object]"===p.call(e)}function g(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function v(e){return c(e)&&"function"==typeof e.then&&"function"==typeof e["catch"]}function y(e){return null==e?"":Array.isArray(e)||m(e)&&e.toString===p?JSON.stringify(e,null,2):String(e)}function b(e){var t=parseFloat(e);return isNaN(t)?e:t}function w(e,t){var n=Object.create(null),r=e.split(",");for(var i=0;i<r.length;i++){n[r[i]]=!0}return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}var S=w("slot,component",!0),k=w("key,ref,slot,slot-scope,is");function I(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var E=Object.prototype.hasOwnProperty;function C(e,t){return E.call(e,t)}function _(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}var x=/-(\w)/g,T=_((function(e){return e.replace(x,(function(e,t){return t?t.toUpperCase():""}))})),O=_((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),M=/\B([A-Z])/g,D=_((function(e){return e.replace(M,"-$1").toLowerCase()}));var A=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n};function P(e,t){t=t||0;var n=e.length-t;var r=new Array(n);for(;n--;){r[n]=e[n+t]}return r}function L(e,t){for(var n in t){e[n]=t[n]}return e}function R(e){var t={};for(var n=0;n<e.length;n++){e[n]&&L(t,e[n])}return t}function H(e,t,n){}var j=function e(t,n,r){return!1},N=function e(t){return t};function B(e,t){if(e===t)return!0;var n=h(e),r=h(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var i=Array.isArray(e),s=Array.isArray(t);if(i&&s)return e.length===t.length&&e.every((function(e,n){return B(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(i||s)return!1;{var o=Object.keys(e),a=Object.keys(t);return o.length===a.length&&o.every((function(n){return B(e[n],t[n])}))}}catch(e){return!1}}function F(e,t){for(var n=0;n<e.length;n++){if(B(e[n],t))return n}return-1}function U(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var W="data-server-rendered",$=["component","directive","filter"],V=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"];var G={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:j,isReservedAttr:j,isUnknownElement:j,getTagNamespace:H,parsePlatformTagName:N,mustUseProp:j,async:!0,_lifecycleHooks:V};var z=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function X(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function q(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var K=new RegExp("[^".concat(z.source,".$_\\d]"));var Y="__proto__"in{},J="undefined"!=typeof window,Q="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,Z=Q&&WXEnvironment.platform.toLowerCase(),ee=J&&window.navigator.userAgent.toLowerCase(),te=ee&&/msie|trident/.test(ee),ne=ee&&ee.indexOf("msie 9.0")>0,re=ee&&ee.indexOf("edge/")>0,ie=(ee&&ee.indexOf("android"),ee&&/iphone|ipad|ipod|ios/.test(ee)||"ios"===Z),se=(ee&&/chrome\/\d+/.test(ee),ee&&/phantomjs/.test(ee),ee&&ee.match(/firefox\/(\d+)/)),oe={}.watch;var ae,le=!1;if(J)try{var ue={};Object.defineProperty(ue,"passive",{get:function e(){le=!0}}),window.addEventListener("test-passive",null,ue)}catch(l){}var ce=function e(){return void 0===ae&&(ae=!J&&!Q&&"undefined"!=typeof global&&global.process&&"server"===global.process.env.VUE_ENV),ae},fe=J&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function de(e){return"function"==typeof e&&/native code/.test(e.toString())}var he="undefined"!=typeof Symbol&&de(Symbol)&&"undefined"!=typeof Reflect&&de(Reflect.ownKeys);var pe;pe="undefined"!=typeof Set&&de(Set)?Set:function(){function e(){babelHelpers.classCallCheck(this,e);this.set=Object.create(null)}babelHelpers.createClass(e,[{key:"has",value:function e(t){return!0===this.set[t]}},{key:"add",value:function e(t){this.set[t]=!0}},{key:"clear",value:function e(){this.set=Object.create(null)}}]);return e}();var me=H,ge=0;var ve=function(){function e(){babelHelpers.classCallCheck(this,e);this.id=ge++,this.subs=[]}babelHelpers.createClass(e,[{key:"addSub",value:function e(t){this.subs.push(t)}},{key:"removeSub",value:function e(t){I(this.subs,t)}},{key:"depend",value:function t(){e.target&&e.target.addDep(this)}},{key:"notify",value:function e(){var t=this.subs.slice();for(var n=0,r=t.length;n<r;n++){t[n].update()}}}]);return e}();ve.target=null;var ye=[];function be(e){ye.push(e),ve.target=e}function we(){ye.pop(),ve.target=ye[ye.length-1]}var Se=function(){function e(t,n,r,i,s,o,a,l){babelHelpers.classCallCheck(this,e);this.tag=t,this.data=n,this.children=r,this.text=i,this.elm=s,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=n&&n.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=l,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}babelHelpers.createClass(e,[{key:"child",get:function e(){return this.componentInstance}}]);return e}();var ke=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=new Se;return n.text=t,n.isComment=!0,n};function Ie(e){return new Se(void 0,void 0,void 0,String(e))}function Ee(e){var t=new Se(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var Ce=Array.prototype,_e=Object.create(Ce);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var t=Ce[e];q(_e,e,(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}var s=t.apply(this,r),o=this.__ob__;var a;switch(e){case"push":case"unshift":a=r;break;case"splice":a=r.slice(2)}return a&&o.observeArray(a),o.dep.notify(),s}))}));var xe=Object.getOwnPropertyNames(_e);var Te=!0;function Oe(e){Te=e}var Me=function(){function e(t){babelHelpers.classCallCheck(this,e);var n;this.value=t,this.dep=new ve,this.vmCount=0,q(t,"__ob__",this),Array.isArray(t)?(Y?(n=_e,t.__proto__=n):function(e,t,n){for(var r=0,i=n.length;r<i;r++){var s=n[r];q(e,s,t[s])}}(t,_e,xe),this.observeArray(t)):this.walk(t)}babelHelpers.createClass(e,[{key:"walk",value:function e(t){var n=Object.keys(t);for(var r=0;r<n.length;r++){Ae(t,n[r])}}},{key:"observeArray",value:function e(t){for(var n=0,r=t.length;n<r;n++){De(t[n])}}}]);return e}();function De(e,t){if(!h(e)||e instanceof Se)return;var n;return C(e,"__ob__")&&e.__ob__ instanceof Me?n=e.__ob__:Te&&!ce()&&(Array.isArray(e)||m(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Me(e)),t&&n&&n.vmCount++,n}function Ae(e,t,n,r,i){var s=new ve,o=Object.getOwnPropertyDescriptor(e,t);if(o&&!1===o.configurable)return;var a=o&&o.get,l=o&&o.set;a&&!l||2!==arguments.length||(n=e[t]);var u=!i&&De(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function t(){var r=a?a.call(e):n;return ve.target&&(s.depend(),u&&(u.dep.depend(),Array.isArray(r)&&function e(t){for(var n,r=0,i=t.length;r<i;r++){(n=t[r])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&e(n)}}(r))),r},set:function t(r){var o=a?a.call(e):n;r===o||r!=r&&o!=o||a&&!l||(l?l.call(e,r):n=r,u=!i&&De(r),s.notify())}})}function Pe(e,t,n){if(Array.isArray(e)&&g(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?n:r?(Ae(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function Le(e,t){if(Array.isArray(e)&&g(t))return void e.splice(t,1);var n=e.__ob__;e._isVue||n&&n.vmCount||C(e,t)&&(delete e[t],n&&n.dep.notify())}var Re=G.optionMergeStrategies;function He(e,t){if(!t)return e;var n,r,i;var s=he?Reflect.ownKeys(t):Object.keys(t);for(var o=0;o<s.length;o++){"__ob__"!==(n=s[o])&&(r=e[n],i=t[n],C(e,n)?r!==i&&m(r)&&m(i)&&He(r,i):Pe(e,n,i))}return e}function je(e,t,n){return n?function(){var r="function"==typeof t?t.call(n,n):t,i="function"==typeof e?e.call(n,n):e;return r?He(r,i):i}:t?e?function(){return He("function"==typeof t?t.call(this,this):t,"function"==typeof e?e.call(this,this):e)}:t:e}function Ne(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?function(e){var t=[];for(var n=0;n<e.length;n++){-1===t.indexOf(e[n])&&t.push(e[n])}return t}(n):n}function Be(e,t,n,r){var i=Object.create(e||null);return t?L(i,t):i}Re.data=function(e,t,n){return n?je(e,t,n):t&&"function"!=typeof t?e:je(e,t)},V.forEach((function(e){Re[e]=Ne})),$.forEach((function(e){Re[e+"s"]=Be})),Re.watch=function(e,t,n,r){if(e===oe&&(e=void 0),t===oe&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var i={};L(i,e);for(var s in t){var o=i[s];var a=t[s];o&&!Array.isArray(o)&&(o=[o]),i[s]=o?o.concat(a):Array.isArray(a)?a:[a]}return i},Re.props=Re.methods=Re.inject=Re.computed=function(e,t,n,r){if(!e)return t;var i=Object.create(null);return L(i,e),t&&L(i,t),i},Re.provide=je;var Fe=function e(t,n){return void 0===n?t:n};function Ue(e,t,n){if("function"==typeof t&&(t=t.options),function(e,t){var n=e.props;if(!n)return;var r={};var i,s,o;if(Array.isArray(n))for(i=n.length;i--;){"string"==typeof(s=n[i])&&(r[o=T(s)]={type:null})}else if(m(n))for(var a in n){s=n[a],r[o=T(a)]=m(s)?s:{type:s}}e.props=r}(t),function(e,t){var n=e.inject;if(!n)return;var r=e.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++){r[n[i]]={from:n[i]}}else if(m(n))for(var s in n){var o=n[s];r[s]=m(o)?L({from:s},o):{from:o}}}(t),function(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"==typeof r&&(t[n]={bind:r,update:r})}}(t),!t._base&&(t["extends"]&&(e=Ue(e,t["extends"],n)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++){e=Ue(e,t.mixins[r],n)}var s={};var o;for(o in e){a(o)}for(o in t){C(e,o)||a(o)}function a(r){var i=Re[r]||Fe;s[r]=i(e[r],t[r],n,r)}return s}function We(e,t,n,r){if("string"!=typeof n)return;var i=e[t];if(C(i,n))return i[n];var s=T(n);if(C(i,s))return i[s];var o=O(s);return C(i,o)?i[o]:i[n]||i[s]||i[o]}function $e(e,t,n,r){var i=t[e],s=!C(n,e);var o=n[e];var a=Xe(Boolean,i.type);if(a>-1)if(s&&!C(i,"default"))o=!1;else if(""===o||o===D(e)){var l=Xe(String,i.type);(l<0||a<l)&&(o=!0)}if(void 0===o){o=function(e,t,n){if(!C(t,"default"))return;var r=t["default"];if(e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n])return e._props[n];return"function"==typeof r&&"Function"!==Ge(t.type)?r.call(e):r}(r,i,e);var u=Te;Oe(!0),De(o),Oe(u)}return o}var Ve=/^\s*function (\w+)/;function Ge(e){var t=e&&e.toString().match(Ve);return t?t[1]:""}function ze(e,t){return Ge(e)===Ge(t)}function Xe(e,t){if(!Array.isArray(t))return ze(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++){if(ze(t[n],e))return n}return-1}function qe(e,t,n){be();try{if(t){var r=t;for(;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var s=0;s<i.length;s++){try{if(!1===i[s].call(r,e,t,n))return}catch(e){Ye(e,r,"errorCaptured hook")}}}}Ye(e,t,n)}finally{we()}}function Ke(e,t,n,r,i){var s;try{(s=n?e.apply(t,n):e.call(t))&&!s._isVue&&v(s)&&!s._handled&&(s["catch"]((function(e){return qe(e,r,i+" (Promise/async)")})),s._handled=!0)}catch(e){qe(e,r,i)}return s}function Ye(e,t,n){if(G.errorHandler)try{return G.errorHandler.call(null,e,t,n)}catch(t){t!==e&&Je(t,null,"config.errorHandler")}Je(e,t,n)}function Je(e,t,n){if(!J&&!Q||"undefined"==typeof console)throw e;console.error(e)}var Qe=!1;var Ze=[];var et,tt=!1;function nt(){tt=!1;var e=Ze.slice(0);Ze.length=0;for(var t=0;t<e.length;t++){e[t]()}}if("undefined"!=typeof Promise&&de(Promise)){var rt=Promise.resolve();et=function e(){rt.then(nt),ie&&setTimeout(H)},Qe=!0}else if(te||"undefined"==typeof MutationObserver||!de(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())et="undefined"!=typeof setImmediate&&de(setImmediate)?function(){setImmediate(nt)}:function(){setTimeout(nt,0)};else{var it=1;var st=new MutationObserver(nt),ot=document.createTextNode(String(it));st.observe(ot,{characterData:!0}),et=function e(){it=(it+1)%2,ot.data=String(it)},Qe=!0}function at(e,t){var n;if(Ze.push((function(){if(e)try{e.call(t)}catch(e){qe(e,t,"nextTick")}else n&&n(t)})),tt||(tt=!0,et()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){n=e}))}var lt=new pe;function ut(e){!function e(t,n){var r,i;var s=Array.isArray(t);if(!s&&!h(t)||Object.isFrozen(t)||t instanceof Se)return;if(t.__ob__){var o=t.__ob__.dep.id;if(n.has(o))return;n.add(o)}if(s)for(r=t.length;r--;){e(t[r],n)}else for(i=Object.keys(t),r=i.length;r--;){e(t[i[r]],n)}}(e,lt),lt.clear()}var ct=_((function(e){var t="&"===e.charAt(0),n="~"===(e=t?e.slice(1):e).charAt(0),r="!"===(e=n?e.slice(1):e).charAt(0);return{name:e=r?e.slice(1):e,once:n,capture:r,passive:t}}));function ft(e,t){function n(){var e=n.fns;if(!Array.isArray(e))return Ke(e,null,arguments,t,"v-on handler");{var r=e.slice();for(var i=0;i<r.length;i++){Ke(r[i],null,arguments,t,"v-on handler")}}}return n.fns=e,n}function dt(e,t,n,r,i,s){var o,a,l,c,d;for(o in e){a=l=e[o],c=t[o],d=ct(o),u(l)||(u(c)?(u(l.fns)&&(l=e[o]=ft(l,s)),f(d.once)&&(l=e[o]=i(d.name,l,d.capture)),n(d.name,l,d.capture,d.passive,d.params)):l!==c&&(c.fns=l,e[o]=c))}for(o in t){u(e[o])&&r((d=ct(o)).name,t[o],d.capture)}}function ht(e,t,n){var r;e instanceof Se&&(e=e.data.hook||(e.data.hook={}));var i=e[t];function s(){n.apply(this,arguments),I(r.fns,s)}u(i)?r=ft([s]):c(i.fns)&&f(i.merged)?(r=i).fns.push(s):r=ft([i,s]),r.merged=!0,e[t]=r}function pt(e,t,n,r,i){if(c(t)){if(C(t,n))return e[n]=t[n],i||delete t[n],!0;if(C(t,r))return e[n]=t[r],i||delete t[r],!0}return!1}function mt(e){return d(e)?[Ie(e)]:Array.isArray(e)?function e(t,n){var r=[];var i,s,o,a;for(i=0;i<t.length;i++){u(s=t[i])||"boolean"==typeof s||(o=r.length-1,a=r[o],Array.isArray(s)?s.length>0&&(gt((s=e(s,"".concat(n||"","_").concat(i)))[0])&&gt(a)&&(r[o]=Ie(a.text+s[0].text),s.shift()),r.push.apply(r,s)):d(s)?gt(a)?r[o]=Ie(a.text+s):""!==s&&r.push(Ie(s)):gt(s)&&gt(a)?r[o]=Ie(a.text+s.text):(f(t._isVList)&&c(s.tag)&&u(s.key)&&c(n)&&(s.key="__vlist".concat(n,"_").concat(i,"__")),r.push(s)))}return r}(e):void 0}function gt(e){return c(e)&&c(e.text)&&!1===e.isComment}function vt(e,t){if(e){var n=Object.create(null),r=he?Reflect.ownKeys(e):Object.keys(e);for(var i=0;i<r.length;i++){var s=r[i];if("__ob__"===s)continue;var o=e[s].from;var a=t;for(;a;){if(a._provided&&C(a._provided,o)){n[s]=a._provided[o];break}a=a.$parent}if(!a&&"default"in e[s]){var l=e[s]["default"];n[s]="function"==typeof l?l.call(t):l}}return n}}function yt(e,t){if(!e||!e.length)return{};var n={};for(var r=0,i=e.length;r<i;r++){var s=e[r],o=s.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,s.context!==t&&s.fnContext!==t||!o||null==o.slot)(n["default"]||(n["default"]=[])).push(s);else{var a=o.slot,l=n[a]||(n[a]=[]);"template"===s.tag?l.push.apply(l,s.children||[]):l.push(s)}}for(var u in n){n[u].every(bt)&&delete n[u]}return n}function bt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function wt(e){return e.isComment&&e.asyncFactory}function St(e,t,n){var r;var i=Object.keys(t).length>0,s=e?!!e.$stable:!i,o=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&n&&n!==l&&o===n.$key&&!i&&!n.$hasNormal)return n;r={};for(var a in e){e[a]&&"$"!==a[0]&&(r[a]=kt(t,a,e[a]))}}else r={};for(var u in t){u in r||(r[u]=It(t,u))}return e&&Object.isExtensible(e)&&(e._normalized=r),q(r,"$stable",s),q(r,"$key",o),q(r,"$hasNormal",i),r}function kt(e,t,n){var r=function e(){var t=arguments.length?n.apply(null,arguments):n({}),r=(t=t&&"object"==babelHelpers["typeof"](t)&&!Array.isArray(t)?[t]:mt(t))&&t[0];return t&&(!r||1===t.length&&r.isComment&&!wt(r))?void 0:t};return n.proxy&&Object.defineProperty(e,t,{get:r,enumerable:!0,configurable:!0}),r}function It(e,t){return function(){return e[t]}}function Et(e,t){var n,r,i,s,o;if(Array.isArray(e)||"string"==typeof e)for(n=new Array(e.length),r=0,i=e.length;r<i;r++){n[r]=t(e[r],r)}else if("number"==typeof e)for(n=new Array(e),r=0;r<e;r++){n[r]=t(r+1,r)}else if(h(e))if(he&&e[Symbol.iterator]){n=[];var a=e[Symbol.iterator]();var l=a.next();for(;!l.done;){n.push(t(l.value,n.length)),l=a.next()}}else for(s=Object.keys(e),n=new Array(s.length),r=0,i=s.length;r<i;r++){o=s[r],n[r]=t(e[o],o,r)}return c(n)||(n=[]),n._isVList=!0,n}function Ct(e,t,n,r){var i=this.$scopedSlots[e];var s;i?(n=n||{},r&&(n=L(L({},r),n)),s=i(n)||("function"==typeof t?t():t)):s=this.$slots[e]||("function"==typeof t?t():t);var o=n&&n.slot;return o?this.$createElement("template",{slot:o},s):s}function _t(e){return We(this.$options,"filters",e)||N}function xt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function Tt(e,t,n,r,i){var s=G.keyCodes[t]||n;return i&&r&&!G.keyCodes[t]?xt(i,r):s?xt(s,e):r?D(r)!==t:void 0===e}function Ot(e,t,n,r,i){if(n)if(h(n)){var s;Array.isArray(n)&&(n=R(n));var o=function o(a){if("class"===a||"style"===a||k(a))s=e;else{var l=e.attrs&&e.attrs.type;s=r||G.mustUseProp(t,l,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var u=T(a),c=D(a);if(!(u in s||c in s)&&(s[a]=n[a],i)){(e.on||(e.on={}))["update:".concat(a)]=function(e){n[a]=e}}};for(var a in n){o(a)}}return e}function Mt(e,t){var n=this._staticTrees||(this._staticTrees=[]);var r=n[e];return r&&!t?r:(At(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__".concat(e),!1),r)}function Dt(e,t,n){return At(e,"__once__".concat(t).concat(n?"_".concat(n):""),!0),e}function At(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++){e[r]&&"string"!=typeof e[r]&&Pt(e[r],"".concat(t,"_").concat(r),n)}else Pt(e,t,n)}function Pt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Lt(e,t){if(t)if(m(t)){var n=e.on=e.on?L({},e.on):{};for(var r in t){var i=n[r],s=t[r];n[r]=i?[].concat(i,s):s}}return e}function Rt(e,t,n,r){t=t||{$stable:!n};for(var i=0;i<e.length;i++){var s=e[i];Array.isArray(s)?Rt(s,t,n):s&&(s.proxy&&(s.fn.proxy=!0),t[s.key]=s.fn)}return r&&(t.$key=r),t}function Ht(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"==typeof r&&r&&(e[t[n]]=t[n+1])}return e}function jt(e,t){return"string"==typeof e?t+e:e}function Nt(e){e._o=Dt,e._n=b,e._s=y,e._l=Et,e._t=Ct,e._q=B,e._i=F,e._m=Mt,e._f=_t,e._k=Tt,e._b=Ot,e._v=Ie,e._e=ke,e._u=Rt,e._g=Lt,e._d=Ht,e._p=jt}function Bt(e,t,n,r,i){var s=this;var o=i.options;var a;C(r,"_uid")?(a=Object.create(r))._original=r:(a=r,r=r._original);var u=f(o._compiled),c=!u;this.data=e,this.props=t,this.children=n,this.parent=r,this.listeners=e.on||l,this.injections=vt(o.inject,r),this.slots=function(){return s.$slots||St(e.scopedSlots,s.$slots=yt(n,r)),s.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function t(){return St(e.scopedSlots,this.slots())}}),u&&(this.$options=o,this.$slots=this.slots(),this.$scopedSlots=St(e.scopedSlots,this.$slots)),o._scopeId?this._c=function(e,t,n,i){var s=qt(a,e,t,n,i,c);return s&&!Array.isArray(s)&&(s.fnScopeId=o._scopeId,s.fnContext=r),s}:this._c=function(e,t,n,r){return qt(a,e,t,n,r,c)}}function Ft(e,t,n,r,i){var s=Ee(e);return s.fnContext=n,s.fnOptions=r,t.slot&&((s.data||(s.data={})).slot=t.slot),s}function Ut(e,t){for(var n in t){e[T(n)]=t[n]}}Nt(Bt.prototype);var Wt={init:function e(t,n){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var r=t;Wt.prepatch(r,r)}else{(t.componentInstance=function(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;c(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns);return new e.componentOptions.Ctor(n)}(t,rn)).$mount(n?t.elm:void 0,n)}},prepatch:function e(t,n){var r=n.componentOptions;!function(e,t,n,r,i){var s=r.data.scopedSlots,o=e.$scopedSlots,a=!!(s&&!s.$stable||o!==l&&!o.$stable||s&&e.$scopedSlots.$key!==s.$key||!s&&e.$scopedSlots.$key),u=!!(i||e.$options._renderChildren||a);e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r);if(e.$options._renderChildren=i,e.$attrs=r.data.attrs||l,e.$listeners=n||l,t&&e.$options.props){Oe(!1);var c=e._props,f=e.$options._propKeys||[];for(var d=0;d<f.length;d++){var h=f[d],p=e.$options.props;c[h]=$e(h,p,t,e)}Oe(!0),e.$options.propsData=t}n=n||l;var m=e.$options._parentListeners;e.$options._parentListeners=n,nn(e,n,m),u&&(e.$slots=yt(i,r.context),e.$forceUpdate())}(n.componentInstance=t.componentInstance,r.propsData,r.listeners,n,r.children)},insert:function e(t){var n=t.context,r=t.componentInstance;var i;r._isMounted||(r._isMounted=!0,ln(r,"mounted")),t.data.keepAlive&&(n._isMounted?((i=r)._inactive=!1,cn.push(i)):an(r,!0))},destroy:function e(t){var n=t.componentInstance;n._isDestroyed||(t.data.keepAlive?function e(t,n){if(n&&(t._directInactive=!0,on(t)))return;if(!t._inactive){t._inactive=!0;for(var r=0;r<t.$children.length;r++){e(t.$children[r])}ln(t,"deactivated")}}(n,!0):n.$destroy())}},$t=Object.keys(Wt);function Vt(e,t,n,r,i){if(u(e))return;var s=n.$options._base;if(h(e)&&(e=s.extend(e)),"function"!=typeof e)return;var o;if(u(e.cid)&&void 0===(e=function(e,t){if(f(e.error)&&c(e.errorComp))return e.errorComp;if(c(e.resolved))return e.resolved;var n=Yt;n&&c(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n);if(f(e.loading)&&c(e.loadingComp))return e.loadingComp;if(n&&!c(e.owners)){var r=e.owners=[n];var i=!0,s=null,o=null;n.$on("hook:destroyed",(function(){return I(r,n)}));var a=function e(t){for(var n=0,i=r.length;n<i;n++){r[n].$forceUpdate()}t&&(r.length=0,null!==s&&(clearTimeout(s),s=null),null!==o&&(clearTimeout(o),o=null))},l=U((function(n){e.resolved=Jt(n,t),i?r.length=0:a(!0)})),d=U((function(t){c(e.errorComp)&&(e.error=!0,a(!0))})),p=e(l,d);return h(p)&&(v(p)?u(e.resolved)&&p.then(l,d):v(p.component)&&(p.component.then(l,d),c(p.error)&&(e.errorComp=Jt(p.error,t)),c(p.loading)&&(e.loadingComp=Jt(p.loading,t),0===p.delay?e.loading=!0:s=setTimeout((function(){s=null,u(e.resolved)&&u(e.error)&&(e.loading=!0,a(!1))}),p.delay||200)),c(p.timeout)&&(o=setTimeout((function(){o=null,u(e.resolved)&&d(null)}),p.timeout)))),i=!1,e.loading?e.loadingComp:e.resolved}}(o=e,s)))return function(e,t,n,r,i){var s=ke();return s.asyncFactory=e,s.asyncMeta={data:t,context:n,children:r,tag:i},s}(o,t,n,r,i);t=t||{},Mn(e),c(t.model)&&function(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var i=t.on||(t.on={}),s=i[r],o=t.model.callback;c(s)?(Array.isArray(s)?-1===s.indexOf(o):s!==o)&&(i[r]=[o].concat(s)):i[r]=o}(e.options,t);var a=function(e,t,n){var r=t.options.props;if(u(r))return;var i={},s=e.attrs,o=e.props;if(c(s)||c(o))for(var a in r){var l=D(a);pt(i,o,a,l,!0)||pt(i,s,a,l,!1)}return i}(t,e);if(f(e.options.functional))return function(e,t,n,r,i){var s=e.options,o={},a=s.props;if(c(a))for(var u in a){o[u]=$e(u,a,t||l)}else c(n.attrs)&&Ut(o,n.attrs),c(n.props)&&Ut(o,n.props);var f=new Bt(n,o,i,r,e),d=s.render.call(null,f._c,f);if(d instanceof Se)return Ft(d,n,f.parent,s);if(Array.isArray(d)){var h=mt(d)||[],p=new Array(h.length);for(var m=0;m<h.length;m++){p[m]=Ft(h[m],n,f.parent,s)}return p}}(e,a,t,n,r);var d=t.on;if(t.on=t.nativeOn,f(e.options["abstract"])){var p=t.slot;t={},p&&(t.slot=p)}!function(e){var t=e.hook||(e.hook={});for(var n=0;n<$t.length;n++){var r=$t[n],i=t[r],s=Wt[r];i===s||i&&i._merged||(t[r]=i?Gt(s,i):s)}}(t);var m=e.options.name||i;return new Se("vue-component-".concat(e.cid).concat(m?"-".concat(m):""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:a,listeners:d,tag:i,children:r},o)}function Gt(e,t){var n=function n(r,i){e(r,i),t(r,i)};return n._merged=!0,n}var zt=1,Xt=2;function qt(e,t,n,r,i,s){return(Array.isArray(n)||d(n))&&(i=r,r=n,n=void 0),f(s)&&(i=Xt),function(e,t,n,r,i){if(c(n)&&c(n.__ob__))return ke();c(n)&&c(n.is)&&(t=n.is);if(!t)return ke();Array.isArray(r)&&"function"==typeof r[0]&&((n=n||{}).scopedSlots={default:r[0]},r.length=0);i===Xt?r=mt(r):i===zt&&(r=function(e){for(var t=0;t<e.length;t++){if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e)}return e}(r));var s,o;if("string"==typeof t){var a;o=e.$vnode&&e.$vnode.ns||G.getTagNamespace(t),s=G.isReservedTag(t)?new Se(G.parsePlatformTagName(t),n,r,void 0,void 0,e):n&&n.pre||!c(a=We(e.$options,"components",t))?new Se(t,n,r,void 0,void 0,e):Vt(a,n,e,r,t)}else s=Vt(t,n,e,r);return Array.isArray(s)?s:c(s)?(c(o)&&function e(t,n,r){t.ns=n;"foreignObject"===t.tag&&(n=void 0,r=!0);if(c(t.children))for(var i=0,s=t.children.length;i<s;i++){var o=t.children[i];c(o.tag)&&(u(o.ns)||f(r)&&"svg"!==o.tag)&&e(o,n,r)}}(s,o),c(n)&&function(e){h(e.style)&&ut(e.style);h(e["class"])&&ut(e["class"])}(n),s):ke()}(e,t,n,r,i)}var Kt,Yt=null;function Jt(e,t){return(e.__esModule||he&&"Module"===e[Symbol.toStringTag])&&(e=e["default"]),h(e)?t.extend(e):e}function Qt(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(c(n)&&(c(n.componentOptions)||wt(n)))return n}}function Zt(e,t){Kt.$on(e,t)}function en(e,t){Kt.$off(e,t)}function tn(e,t){var n=Kt;return function r(){null!==t.apply(null,arguments)&&n.$off(e,r)}}function nn(e,t,n){Kt=e,dt(t,n||{},Zt,en,tn,e),Kt=void 0}var rn=null;function sn(e){var t=rn;return rn=e,function(){rn=t}}function on(e){for(;e&&(e=e.$parent);){if(e._inactive)return!0}return!1}function an(e,t){if(t){if(e._directInactive=!1,on(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++){an(e.$children[n])}ln(e,"activated")}}function ln(e,t){be();var n=e.$options[t],r="".concat(t," hook");if(n)for(var i=0,s=n.length;i<s;i++){Ke(n[i],e,null,e,r)}e._hasHookEvent&&e.$emit("hook:"+t),we()}var un=[],cn=[];var fn={},dn=!1,hn=!1,pn=0;var mn=0,gn=Date.now;if(J&&!te){var vn=window.performance;vn&&"function"==typeof vn.now&&gn()>document.createEvent("Event").timeStamp&&(gn=function e(){return vn.now()})}function yn(){var e,t;for(mn=gn(),hn=!0,un.sort((function(e,t){return e.id-t.id})),pn=0;pn<un.length;pn++){(e=un[pn]).before&&e.before(),t=e.id,fn[t]=null,e.run()}var n=cn.slice(),r=un.slice();pn=un.length=cn.length=0,fn={},dn=hn=!1,function(e){for(var t=0;t<e.length;t++){e[t]._inactive=!0,an(e[t],!0)}}(n),function(e){var t=e.length;for(;t--;){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&ln(r,"updated")}}(r),fe&&G.devtools&&fe.emit("flush")}var bn=0;var wn=function(){function e(t,n,r,i,s){babelHelpers.classCallCheck(this,e);this.vm=t,s&&(t._watcher=this),t._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=r,this.id=++bn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new pe,this.newDepIds=new pe,this.expression="","function"==typeof n?this.getter=n:(this.getter=function(e){if(K.test(e))return;var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}(n),this.getter||(this.getter=H)),this.value=this.lazy?void 0:this.get()}babelHelpers.createClass(e,[{key:"get",value:function e(){var t;be(this);var n=this.vm;try{t=this.getter.call(n,n)}catch(t){if(!this.user)throw t;qe(t,n,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&ut(t),we(),this.cleanupDeps()}return t}},{key:"addDep",value:function e(t){var n=t.id;this.newDepIds.has(n)||(this.newDepIds.add(n),this.newDeps.push(t),this.depIds.has(n)||t.addSub(this))}},{key:"cleanupDeps",value:function e(){var t=this.deps.length;for(;t--;){var n=this.deps[t];this.newDepIds.has(n.id)||n.removeSub(this)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0}},{key:"update",value:function e(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var t=e.id;if(null==fn[t]){if(fn[t]=!0,hn){var n=un.length-1;for(;n>pn&&un[n].id>e.id;){n--}un.splice(n+1,0,e)}else un.push(e);dn||(dn=!0,at(yn))}}(this)}},{key:"run",value:function e(){if(this.active){var t=this.get();if(t!==this.value||h(t)||this.deep){var n=this.value;if(this.value=t,this.user){var r='callback for watcher "'.concat(this.expression,'"');Ke(this.cb,this.vm,[t,n],this.vm,r)}else this.cb.call(this.vm,t,n)}}}},{key:"evaluate",value:function e(){this.value=this.get(),this.dirty=!1}},{key:"depend",value:function e(){var t=this.deps.length;for(;t--;){this.deps[t].depend()}}},{key:"teardown",value:function e(){if(this.active){this.vm._isBeingDestroyed||I(this.vm._watchers,this);var t=this.deps.length;for(;t--;){this.deps[t].removeSub(this)}this.active=!1}}}]);return e}();var Sn={enumerable:!0,configurable:!0,get:H,set:H};function kn(e,t,n){Sn.get=function(){return this[t][n]},Sn.set=function(e){this[t][n]=e},Object.defineProperty(e,n,Sn)}function In(e){e._watchers=[];var t=e.$options;t.props&&function(e,t){var n=e.$options.propsData||{},r=e._props={},i=e.$options._propKeys=[];e.$parent&&Oe(!1);for(var s in t){i.push(s);var o=$e(s,t,n,e);Ae(r,s,o),s in e||kn(e,"_props",s)}Oe(!0)}(e,t.props),t.methods&&function(e,t){e.$options.props;for(var n in t){e[n]="function"!=typeof t[n]?H:A(t[n],e)}}(e,t.methods),t.data?function(e){var t=e.$options.data;m(t=e._data="function"==typeof t?function(e,t){be();try{return e.call(t,t)}catch(e){return qe(e,t,"data()"),{}}finally{we()}}(t,e):t||{})||(t={});var n=Object.keys(t),r=e.$options.props;e.$options.methods;var i=n.length;for(;i--;){var s=n[i];r&&C(r,s)||X(s)||kn(e,"_data",s)}De(t,!0)}(e):De(e._data={},!0),t.computed&&function(e,t){var n=e._computedWatchers=Object.create(null),r=ce();for(var i in t){var s=t[i],o="function"==typeof s?s:s.get;r||(n[i]=new wn(e,o||H,H,En)),i in e||Cn(e,i,s)}}(e,t.computed),t.watch&&t.watch!==oe&&function(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++){Tn(e,n,r[i])}else Tn(e,n,r)}}(e,t.watch)}var En={lazy:!0};function Cn(e,t,n){var r=!ce();"function"==typeof n?(Sn.get=r?_n(t):xn(n),Sn.set=H):(Sn.get=n.get?r&&!1!==n.cache?_n(t):xn(n.get):H,Sn.set=n.set||H),Object.defineProperty(e,t,Sn)}function _n(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),ve.target&&t.depend(),t.value}}function xn(e){return function(){return e.call(this,this)}}function Tn(e,t,n,r){return m(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,r)}var On=0;function Mn(e){var t=e.options;if(e["super"]){var n=Mn(e["super"]);if(n!==e.superOptions){e.superOptions=n;var r=function(e){var t;var n=e.options,r=e.sealedOptions;for(var i in n){n[i]!==r[i]&&(t||(t={}),t[i]=n[i])}return t}(e);r&&L(e.extendOptions,r),(t=e.options=Ue(n,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function Dn(e){this._init(e)}function An(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var s=e.name||n.options.name,o=function e(t){this._init(t)};return(o.prototype=Object.create(n.prototype)).constructor=o,o.cid=t++,o.options=Ue(n.options,e),o["super"]=n,o.options.props&&function(e){var t=e.options.props;for(var n in t){kn(e.prototype,"_props",n)}}(o),o.options.computed&&function(e){var t=e.options.computed;for(var n in t){Cn(e.prototype,n,t[n])}}(o),o.extend=n.extend,o.mixin=n.mixin,o.use=n.use,$.forEach((function(e){o[e]=n[e]})),s&&(o.options.components[s]=o),o.superOptions=n.options,o.extendOptions=e,o.sealedOptions=L({},o.options),i[r]=o,o}}function Pn(e){return e&&(e.Ctor.options.name||e.tag)}function Ln(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:(n=e,"[object RegExp]"===p.call(n)&&e.test(t));var n}function Rn(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var s in n){var o=n[s];if(o){var a=o.name;a&&!t(a)&&Hn(n,s,r,i)}}}function Hn(e,t,n,r){var i=e[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[t]=null,I(n,t)}!function(e){e.prototype._init=function(e){var t=this;t._uid=On++,t._isVue=!0,e&&e._isComponent?function(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}(t,e):t.$options=Ue(Mn(t.constructor),e||{},t),t._renderProxy=t,t._self=t,function(e){var t=e.$options;var n=t.parent;if(n&&!t["abstract"]){for(;n.$options["abstract"]&&n.$parent;){n=n.$parent}n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(t),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&nn(e,t)}(t),function(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,r=n&&n.context;e.$slots=yt(t._renderChildren,r),e.$scopedSlots=l,e._c=function(t,n,r,i){return qt(e,t,n,r,i,!1)},e.$createElement=function(t,n,r,i){return qt(e,t,n,r,i,!0)};var i=n&&n.data;Ae(e,"$attrs",i&&i.attrs||l,null,!0),Ae(e,"$listeners",t._parentListeners||l,null,!0)}(t),ln(t,"beforeCreate"),function(e){var t=vt(e.$options.inject,e);t&&(Oe(!1),Object.keys(t).forEach((function(n){Ae(e,n,t[n])})),Oe(!0))}(t),In(t),function(e){var t=e.$options.provide;t&&(e._provided="function"==typeof t?t.call(e):t)}(t),ln(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}(Dn),function(e){var t={get:function e(){return this._data}},n={get:function e(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Pe,e.prototype.$delete=Le,e.prototype.$watch=function(e,t,n){var r=this;if(m(t))return Tn(r,e,t,n);(n=n||{}).user=!0;var i=new wn(r,e,t,n);if(n.immediate){var s='callback for immediate watcher "'.concat(i.expression,'"');be(),Ke(t,r,[i.value],r,s),we()}return function(){i.teardown()}}}(Dn),function(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var i=0,s=e.length;i<s;i++){r.$on(e[i],n)}else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,i=e.length;r<i;r++){n.$off(e[r],t)}return n}var s=n._events[e];if(!s)return n;if(!t)return n._events[e]=null,n;var o,a=s.length;for(;a--;){if((o=s[a])===t||o.fn===t){s.splice(a,1);break}}return n},e.prototype.$emit=function(e){var t=this;var n=t._events[e];if(n){n=n.length>1?P(n):n;var r=P(arguments,1),i='event handler for "'.concat(e,'"');for(var s=0,o=n.length;s<o;s++){Ke(n[s],t,r,t,i)}}return t}}(Dn),function(e){e.prototype._update=function(e,t){var n=this,r=n.$el,i=n._vnode,s=sn(n);n._vnode=e,n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1),s(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(e._isBeingDestroyed)return;ln(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options["abstract"]||I(t.$children,e),e._watcher&&e._watcher.teardown();var n=e._watchers.length;for(;n--;){e._watchers[n].teardown()}e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),ln(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}(Dn),function(e){Nt(e.prototype),e.prototype.$nextTick=function(e){return at(e,this)},e.prototype._render=function(){var e=this,t=e.$options,n=t.render,r=t._parentVnode;var i;r&&(e.$scopedSlots=St(r.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=r;try{Yt=e,i=n.call(e._renderProxy,e.$createElement)}catch(n){qe(n,e,"render"),i=e._vnode}finally{Yt=null}return Array.isArray(i)&&1===i.length&&(i=i[0]),i instanceof Se||(i=ke()),i.parent=r,i}}(Dn);var jn=[String,RegExp,Array];var Nn={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:jn,exclude:jn,max:[String,Number]},methods:{cacheVNode:function e(){var t=this.cache,n=this.keys,r=this.vnodeToCache,i=this.keyToCache;if(r){var s=r.tag,o=r.componentInstance,a=r.componentOptions;t[i]={name:Pn(a),tag:s,componentInstance:o},n.push(i),this.max&&n.length>parseInt(this.max)&&Hn(t,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function e(){this.cache=Object.create(null),this.keys=[]},destroyed:function e(){for(var t in this.cache){Hn(this.cache,t,this.keys)}},mounted:function e(){var t=this;this.cacheVNode(),this.$watch("include",(function(e){Rn(t,(function(t){return Ln(e,t)}))})),this.$watch("exclude",(function(e){Rn(t,(function(t){return!Ln(e,t)}))}))},updated:function e(){this.cacheVNode()},render:function e(){var t=this.$slots["default"],n=Qt(t),r=n&&n.componentOptions;if(r){var i=Pn(r),s=this.include,o=this.exclude;if(s&&(!i||!Ln(s,i))||o&&i&&Ln(o,i))return n;var a=this.cache,l=this.keys,u=null==n.key?r.Ctor.cid+(r.tag?"::".concat(r.tag):""):n.key;a[u]?(n.componentInstance=a[u].componentInstance,I(l,u),l.push(u)):(this.vnodeToCache=n,this.keyToCache=u),n.data.keepAlive=!0}return n||t&&t[0]}}};!function(e){var t={get:function e(){return G}};Object.defineProperty(e,"config",t),e.util={warn:me,extend:L,mergeOptions:Ue,defineReactive:Ae},e.set=Pe,e["delete"]=Le,e.nextTick=at,e.observable=function(e){return De(e),e},e.options=Object.create(null),$.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,L(e.options.components,Nn),function(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=P(arguments,1);return n.unshift(this),"function"==typeof e.install?e.install.apply(e,n):"function"==typeof e&&e.apply(null,n),t.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=Ue(this.options,e),this}}(e),An(e),function(e){$.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&m(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"==typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}(e)}(Dn),Object.defineProperty(Dn.prototype,"$isServer",{get:ce}),Object.defineProperty(Dn.prototype,"$ssrContext",{get:function e(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Dn,"FunctionalRenderContext",{value:Bt}),Dn.version="2.6.14";var Bn=w("style,class"),Fn=w("input,textarea,option,select,progress"),Un=function e(t,n,r){return"value"===r&&Fn(t)&&"button"!==n||"selected"===r&&"option"===t||"checked"===r&&"input"===t||"muted"===r&&"video"===t},Wn=w("contenteditable,draggable,spellcheck"),$n=w("events,caret,typing,plaintext-only"),Vn=function e(t,n){return Kn(n)||"false"===n?"false":"contenteditable"===t&&$n(n)?n:"true"},Gn=w("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),zn="http://www.w3.org/1999/xlink",Xn=function e(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},qn=function e(t){return Xn(t)?t.slice(6,t.length):""},Kn=function e(t){return null==t||!1===t};function Yn(e){var t=e.data,n=e,r=e;for(;c(r.componentInstance);){(r=r.componentInstance._vnode)&&r.data&&(t=Jn(r.data,t))}for(;c(n=n.parent);){n&&n.data&&(t=Jn(t,n.data))}return function(e,t){if(c(e)||c(t))return Qn(e,Zn(t));return""}(t.staticClass,t["class"])}function Jn(e,t){return{staticClass:Qn(e.staticClass,t.staticClass),class:c(e["class"])?[e["class"],t["class"]]:t["class"]}}function Qn(e,t){return e?t?e+" "+t:e:t||""}function Zn(e){return Array.isArray(e)?function(e){var t,n="";for(var r=0,i=e.length;r<i;r++){c(t=Zn(e[r]))&&""!==t&&(n&&(n+=" "),n+=t)}return n}(e):h(e)?function(e){var t="";for(var n in e){e[n]&&(t&&(t+=" "),t+=n)}return t}(e):"string"==typeof e?e:""}var er={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},tr=w("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),nr=w("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),rr=function e(t){return tr(t)||nr(t)};function ir(e){return nr(e)?"svg":"math"===e?"math":void 0}var sr=Object.create(null);var or=w("text,number,password,search,email,tel,url");function ar(e){if("string"==typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}var lr=Object.freeze({createElement:function e(t,n){var r=document.createElement(t);return"select"!==t?r:(n.data&&n.data.attrs&&void 0!==n.data.attrs.multiple&&r.setAttribute("multiple","multiple"),r)},createElementNS:function e(t,n){return document.createElementNS(er[t],n)},createTextNode:function e(t){return document.createTextNode(t)},createComment:function e(t){return document.createComment(t)},insertBefore:function e(t,n,r){t.insertBefore(n,r)},removeChild:function e(t,n){t.removeChild(n)},appendChild:function e(t,n){t.appendChild(n)},parentNode:function e(t){return t.parentNode},nextSibling:function e(t){return t.nextSibling},tagName:function e(t){return t.tagName},setTextContent:function e(t,n){t.textContent=n},setStyleScope:function e(t,n){t.setAttribute(n,"")}}),ur={create:function e(t,n){cr(n)},update:function e(t,n){t.data.ref!==n.data.ref&&(cr(t,!0),cr(n))},destroy:function e(t){cr(t,!0)}};function cr(e,t){var n=e.data.ref;if(!c(n))return;var r=e.context,i=e.componentInstance||e.elm,s=r.$refs;t?Array.isArray(s[n])?I(s[n],i):s[n]===i&&(s[n]=void 0):e.data.refInFor?Array.isArray(s[n])?s[n].indexOf(i)<0&&s[n].push(i):s[n]=[i]:s[n]=i}var fr=new Se("",{},[]),dr=["create","activate","update","remove","destroy"];function hr(e,t){return e.key===t.key&&e.asyncFactory===t.asyncFactory&&(e.tag===t.tag&&e.isComment===t.isComment&&c(e.data)===c(t.data)&&function(e,t){if("input"!==e.tag)return!0;var n;var r=c(n=e.data)&&c(n=n.attrs)&&n.type,i=c(n=t.data)&&c(n=n.attrs)&&n.type;return r===i||or(r)&&or(i)}(e,t)||f(e.isAsyncPlaceholder)&&u(t.asyncFactory.error))}function pr(e,t,n){var r,i;var s={};for(r=t;r<=n;++r){c(i=e[r].key)&&(s[i]=r)}return s}var mr={create:gr,update:gr,destroy:function e(t){gr(t,fr)}};function gr(e,t){(e.data.directives||t.data.directives)&&function(e,t){var n=e===fr,r=t===fr,i=yr(e.data.directives,e.context),s=yr(t.data.directives,t.context),o=[],a=[];var l,u,c;for(l in s){u=i[l],c=s[l],u?(c.oldValue=u.value,c.oldArg=u.arg,wr(c,"update",t,e),c.def&&c.def.componentUpdated&&a.push(c)):(wr(c,"bind",t,e),c.def&&c.def.inserted&&o.push(c))}if(o.length){var f=function n(){for(var r=0;r<o.length;r++){wr(o[r],"inserted",t,e)}};n?ht(t,"insert",f):f()}a.length&&ht(t,"postpatch",(function(){for(var n=0;n<a.length;n++){wr(a[n],"componentUpdated",t,e)}}));if(!n)for(l in i){s[l]||wr(i[l],"unbind",e,e,r)}}(e,t)}var vr=Object.create(null);function yr(e,t){var n=Object.create(null);if(!e)return n;var r,i;for(r=0;r<e.length;r++){(i=e[r]).modifiers||(i.modifiers=vr),n[br(i)]=i,i.def=We(t.$options,"directives",i.name)}return n}function br(e){return e.rawName||"".concat(e.name,".").concat(Object.keys(e.modifiers||{}).join("."))}function wr(e,t,n,r,i){var s=e.def&&e.def[t];if(s)try{s(n.elm,e,n,r,i)}catch(r){qe(r,n.context,"directive ".concat(e.name," ").concat(t," hook"))}}var Sr=[ur,mr];function kr(e,t){var n=t.componentOptions;if(c(n)&&!1===n.Ctor.options.inheritAttrs)return;if(u(e.data.attrs)&&u(t.data.attrs))return;var r,i,s;var o=t.elm,a=e.data.attrs||{};var l=t.data.attrs||{};for(r in c(l.__ob__)&&(l=t.data.attrs=L({},l)),l){i=l[r],(s=a[r])!==i&&Ir(o,r,i,t.data.pre)}for(r in(te||re)&&l.value!==a.value&&Ir(o,"value",l.value),a){u(l[r])&&(Xn(r)?o.removeAttributeNS(zn,qn(r)):Wn(r)||o.removeAttribute(r))}}function Ir(e,t,n,r){r||e.tagName.indexOf("-")>-1?Er(e,t,n):Gn(t)?Kn(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Wn(t)?e.setAttribute(t,Vn(t,n)):Xn(t)?Kn(n)?e.removeAttributeNS(zn,qn(t)):e.setAttributeNS(zn,t,n):Er(e,t,n)}function Er(e,t,n){if(Kn(n))e.removeAttribute(t);else{if(te&&!ne&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var r=function t(n){n.stopImmediatePropagation(),e.removeEventListener("input",t)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}var Cr={create:kr,update:kr};function _r(e,t){var n=t.elm,r=t.data,i=e.data;if(u(r.staticClass)&&u(r["class"])&&(u(i)||u(i.staticClass)&&u(i["class"])))return;var s=Yn(t);var o=n._transitionClasses;c(o)&&(s=Qn(s,Zn(o))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}var xr={create:_r,update:_r};var Tr=/[\w).+\-_$\]]/;function Or(e){var t,n,r,i,s,o=!1,a=!1,l=!1,u=!1,c=0,f=0,d=0,h=0;for(r=0;r<e.length;r++){if(n=t,t=e.charCodeAt(r),o)39===t&&92!==n&&(o=!1);else if(a)34===t&&92!==n&&(a=!1);else if(l)96===t&&92!==n&&(l=!1);else if(u)47===t&&92!==n&&(u=!1);else if(124!==t||124===e.charCodeAt(r+1)||124===e.charCodeAt(r-1)||c||f||d){switch(t){case 34:a=!0;break;case 39:o=!0;break;case 96:l=!0;break;case 40:d++;break;case 41:d--;break;case 91:f++;break;case 93:f--;break;case 123:c++;break;case 125:c--}if(47===t){var p=void 0,m=r-1;for(;m>=0&&" "===(p=e.charAt(m));m--){}p&&Tr.test(p)||(u=!0)}}else void 0===i?(h=r+1,i=e.slice(0,r).trim()):g()}function g(){(s||(s=[])).push(e.slice(h,r).trim()),h=r+1}if(void 0===i?i=e.slice(0,r).trim():0!==h&&g(),s)for(r=0;r<s.length;r++){i=Mr(i,s[r])}return i}function Mr(e,t){var n=t.indexOf("(");if(n<0)return'_f("'.concat(t,'")(').concat(e,")");{var r=t.slice(0,n),i=t.slice(n+1);return'_f("'.concat(r,'")(').concat(e).concat(")"!==i?","+i:i)}}function Dr(e,t){console.error("[Vue compiler]: ".concat(e))}function Ar(e,t){return e?e.map((function(e){return e[t]})).filter((function(e){return e})):[]}function Pr(e,t,n,r,i){(e.props||(e.props=[])).push(Wr({name:t,value:n,dynamic:i},r)),e.plain=!1}function Lr(e,t,n,r,i){(i?e.dynamicAttrs||(e.dynamicAttrs=[]):e.attrs||(e.attrs=[])).push(Wr({name:t,value:n,dynamic:i},r)),e.plain=!1}function Rr(e,t,n,r){e.attrsMap[t]=n,e.attrsList.push(Wr({name:t,value:n},r))}function Hr(e,t,n,r,i,s,o,a){(e.directives||(e.directives=[])).push(Wr({name:t,rawName:n,value:r,arg:i,isDynamicArg:s,modifiers:o},a)),e.plain=!1}function jr(e,t,n){return n?"_p(".concat(t,',"').concat(e,'")'):e+t}function Nr(e,t,n,r,i,s,o,a){var u;(r=r||l).right?a?t="(".concat(t,")==='click'?'contextmenu':(").concat(t,")"):"click"===t&&(t="contextmenu",delete r.right):r.middle&&(a?t="(".concat(t,")==='click'?'mouseup':(").concat(t,")"):"click"===t&&(t="mouseup")),r.capture&&(delete r.capture,t=jr("!",t,a)),r.once&&(delete r.once,t=jr("~",t,a)),r.passive&&(delete r.passive,t=jr("&",t,a)),r["native"]?(delete r["native"],u=e.nativeEvents||(e.nativeEvents={})):u=e.events||(e.events={});var c=Wr({value:n.trim(),dynamic:a},o);r!==l&&(c.modifiers=r);var f=u[t];Array.isArray(f)?i?f.unshift(c):f.push(c):u[t]=f?i?[c,f]:[f,c]:c,e.plain=!1}function Br(e,t,n){var r=Fr(e,":"+t)||Fr(e,"v-bind:"+t);if(null!=r)return Or(r);if(!1!==n){var i=Fr(e,t);if(null!=i)return JSON.stringify(i)}}function Fr(e,t,n){var r;if(null!=(r=e.attrsMap[t])){var i=e.attrsList;for(var s=0,o=i.length;s<o;s++){if(i[s].name===t){i.splice(s,1);break}}}return n&&delete e.attrsMap[t],r}function Ur(e,t){var n=e.attrsList;for(var r=0,i=n.length;r<i;r++){var s=n[r];if(t.test(s.name))return n.splice(r,1),s}}function Wr(e,t){return t&&(null!=t.start&&(e.start=t.start),null!=t.end&&(e.end=t.end)),e}function $r(e,t,n){var r=n||{},i=r.number,s=r.trim;var o="$$v";s&&(o="(typeof $$v === 'string'? $$v.trim(): $$v)"),i&&(o="_n(".concat(o,")"));var a=Vr(t,o);e.model={value:"(".concat(t,")"),expression:JSON.stringify(t),callback:"function ($$v) {".concat(a,"}")}}function Vr(e,t){var n=function(e){if(e=e.trim(),Gr=e.length,e.indexOf("[")<0||e.lastIndexOf("]")<Gr-1)return(qr=e.lastIndexOf("."))>-1?{exp:e.slice(0,qr),key:'"'+e.slice(qr+1)+'"'}:{exp:e,key:null};zr=e,qr=Kr=Yr=0;for(;!Qr();){Zr(Xr=Jr())?ti(Xr):91===Xr&&ei(Xr)}return{exp:e.slice(0,Kr),key:e.slice(Kr+1,Yr)}}(e);return null===n.key?"".concat(e,"=").concat(t):"$set(".concat(n.exp,", ").concat(n.key,", ").concat(t,")")}var Gr,zr,Xr,qr,Kr,Yr;function Jr(){return zr.charCodeAt(++qr)}function Qr(){return qr>=Gr}function Zr(e){return 34===e||39===e}function ei(e){var t=1;for(Kr=qr;!Qr();){if(Zr(e=Jr()))ti(e);else if(91===e&&t++,93===e&&t--,0===t){Yr=qr;break}}}function ti(e){var t=e;for(;!Qr()&&(e=Jr())!==t;){}}var ni="__r",ri="__c";var ii;function si(e,t,n){var r=ii;return function i(){null!==t.apply(null,arguments)&&li(e,i,n,r)}}var oi=Qe&&!(se&&Number(se[1])<=53);function ai(e,t,n,r){if(oi){var i=mn,s=t;t=s._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return s.apply(this,arguments)}}ii.addEventListener(e,t,le?{capture:n,passive:r}:n)}function li(e,t,n,r){(r||ii).removeEventListener(e,t._wrapper||t,n)}function ui(e,t){if(u(e.data.on)&&u(t.data.on))return;var n=t.data.on||{},r=e.data.on||{};ii=t.elm,function(e){if(c(e[ni])){var t=te?"change":"input";e[t]=[].concat(e[ni],e[t]||[]),delete e[ni]}c(e[ri])&&(e.change=[].concat(e[ri],e.change||[]),delete e[ri])}(n),dt(n,r,ai,li,si,t.context),ii=void 0}var ci={create:ui,update:ui};var fi;function di(e,t){if(u(e.data.domProps)&&u(t.data.domProps))return;var n,r;var i=t.elm,s=e.data.domProps||{};var o=t.data.domProps||{};for(n in c(o.__ob__)&&(o=t.data.domProps=L({},o)),s){n in o||(i[n]="")}for(n in o){if(r=o[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),r===s[n])continue;1===i.childNodes.length&&i.removeChild(i.childNodes[0])}if("value"===n&&"PROGRESS"!==i.tagName){i._value=r;var a=u(r)?"":String(r);hi(i,a)&&(i.value=a)}else if("innerHTML"===n&&nr(i.tagName)&&u(i.innerHTML)){(fi=fi||document.createElement("div")).innerHTML="<svg>".concat(r,"</svg>");var l=fi.firstChild;for(;i.firstChild;){i.removeChild(i.firstChild)}for(;l.firstChild;){i.appendChild(l.firstChild)}}else if(r!==s[n])try{i[n]=r}catch(e){}}}function hi(e,t){return!e.composing&&("OPTION"===e.tagName||function(e,t){var n=!0;try{n=document.activeElement!==e}catch(e){}return n&&e.value!==t}(e,t)||function(e,t){var n=e.value,r=e._vModifiers;if(c(r)){if(r.number)return b(n)!==b(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}(e,t))}var pi={create:di,update:di};var mi=_((function(e){var t={},n=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var r=e.split(n);r.length>1&&(t[r[0].trim()]=r[1].trim())}})),t}));function gi(e){var t=vi(e.style);return e.staticStyle?L(e.staticStyle,t):t}function vi(e){return Array.isArray(e)?R(e):"string"==typeof e?mi(e):e}var yi=/^--/,bi=/\s*!important$/,wi=function e(t,n,r){if(yi.test(n))t.style.setProperty(n,r);else if(bi.test(r))t.style.setProperty(D(n),r.replace(bi,""),"important");else{var i=Ii(n);if(Array.isArray(r))for(var s=0,o=r.length;s<o;s++){t.style[i]=r[s]}else t.style[i]=r}},Si=["Webkit","Moz","ms"];var ki;var Ii=_((function(e){if(ki=ki||document.createElement("div").style,"filter"!==(e=T(e))&&e in ki)return e;var t=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0;n<Si.length;n++){var r=Si[n]+t;if(r in ki)return r}}));function Ei(e,t){var n=t.data,r=e.data;if(u(n.staticStyle)&&u(n.style)&&u(r.staticStyle)&&u(r.style))return;var i,s;var o=t.elm,a=r.staticStyle,l=r.normalizedStyle||r.style||{},f=a||l,d=vi(t.data.style)||{};t.data.normalizedStyle=c(d.__ob__)?L({},d):d;var h=function(e,t){var n={};var r;if(t){var i=e;for(;i.componentInstance;){(i=i.componentInstance._vnode)&&i.data&&(r=gi(i.data))&&L(n,r)}}(r=gi(e.data))&&L(n,r);var s=e;for(;s=s.parent;){s.data&&(r=gi(s.data))&&L(n,r)}return n}(t,!0);for(s in f){u(h[s])&&wi(o,s,"")}for(s in h){(i=h[s])!==f[s]&&wi(o,s,null==i?"":i)}}var Ci={create:Ei,update:Ei};var _i=/\s+/;function xi(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(_i).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" ".concat(e.getAttribute("class")||""," ");n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function Ti(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(_i).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" ".concat(e.getAttribute("class")||""," ");var r=" "+t+" ";for(;n.indexOf(r)>=0;){n=n.replace(r," ")}(n=n.trim())?e.setAttribute("class",n):e.removeAttribute("class")}}function Oi(e){if(e){if("object"==babelHelpers["typeof"](e)){var t={};return!1!==e.css&&L(t,Mi(e.name||"v")),L(t,e),t}return"string"==typeof e?Mi(e):void 0}}var Mi=_((function(e){return{enterClass:"".concat(e,"-enter"),enterToClass:"".concat(e,"-enter-to"),enterActiveClass:"".concat(e,"-enter-active"),leaveClass:"".concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-to"),leaveActiveClass:"".concat(e,"-leave-active")}})),Di=J&&!ne,Ai="transition",Pi="animation";var Li="transition",Ri="transitionend",Hi="animation",ji="animationend";Di&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Li="WebkitTransition",Ri="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Hi="WebkitAnimation",ji="webkitAnimationEnd"));var Ni=J?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Bi(e){Ni((function(){Ni(e)}))}function Fi(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),xi(e,t))}function Ui(e,t){e._transitionClasses&&I(e._transitionClasses,t),Ti(e,t)}function Wi(e,t,n){var r=Vi(e,t),i=r.type,s=r.timeout,o=r.propCount;if(!i)return n();var a=i===Ai?Ri:ji;var l=0;var u=function t(){e.removeEventListener(a,c),n()},c=function t(n){n.target===e&&++l>=o&&u()};setTimeout((function(){l<o&&u()}),s+1),e.addEventListener(a,c)}var $i=/\b(transform|all)(,|$)/;function Vi(e,t){var n=window.getComputedStyle(e),r=(n[Li+"Delay"]||"").split(", "),i=(n[Li+"Duration"]||"").split(", "),s=Gi(r,i),o=(n[Hi+"Delay"]||"").split(", "),a=(n[Hi+"Duration"]||"").split(", "),l=Gi(o,a);var u,c=0,f=0;return t===Ai?s>0&&(u=Ai,c=s,f=i.length):t===Pi?l>0&&(u=Pi,c=l,f=a.length):f=(u=(c=Math.max(s,l))>0?s>l?Ai:Pi:null)?u===Ai?i.length:a.length:0,{type:u,timeout:c,propCount:f,hasTransform:u===Ai&&$i.test(n[Li+"Property"])}}function Gi(e,t){for(;e.length<t.length;){e=e.concat(e)}return Math.max.apply(null,t.map((function(t,n){return zi(t)+zi(e[n])})))}function zi(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Xi(e,t){var n=e.elm;c(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=Oi(e.data.transition);if(u(r))return;if(c(n._enterCb)||1!==n.nodeType)return;var i=r.css,s=r.type,o=r.enterClass,a=r.enterToClass,l=r.enterActiveClass,f=r.appearClass,d=r.appearToClass,p=r.appearActiveClass,m=r.beforeEnter,g=r.enter,v=r.afterEnter,y=r.enterCancelled,w=r.beforeAppear,S=r.appear,k=r.afterAppear,I=r.appearCancelled,E=r.duration;var C=rn,_=rn.$vnode;for(;_&&_.parent;){C=_.context,_=_.parent}var x=!C._isMounted||!e.isRootInsert;if(x&&!S&&""!==S)return;var T=x&&f?f:o,O=x&&p?p:l,M=x&&d?d:a,D=x&&w||m,A=x&&"function"==typeof S?S:g,P=x&&k||v,L=x&&I||y,R=b(h(E)?E.enter:E),H=!1!==i&&!ne,j=Yi(A),N=n._enterCb=U((function(){H&&(Ui(n,M),Ui(n,O)),N.cancelled?(H&&Ui(n,T),L&&L(n)):P&&P(n),n._enterCb=null}));e.data.show||ht(e,"insert",(function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),A&&A(n,N)})),D&&D(n),H&&(Fi(n,T),Fi(n,O),Bi((function(){Ui(n,T),N.cancelled||(Fi(n,M),j||(Ki(R)?setTimeout(N,R):Wi(n,s,N)))}))),e.data.show&&(t&&t(),A&&A(n,N)),H||j||N()}function qi(e,t){var n=e.elm;c(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=Oi(e.data.transition);if(u(r)||1!==n.nodeType)return t();if(c(n._leaveCb))return;var i=r.css,s=r.type,o=r.leaveClass,a=r.leaveToClass,l=r.leaveActiveClass,f=r.beforeLeave,d=r.leave,p=r.afterLeave,m=r.leaveCancelled,g=r.delayLeave,v=r.duration,y=!1!==i&&!ne,w=Yi(d),S=b(h(v)?v.leave:v),k=n._leaveCb=U((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),y&&(Ui(n,a),Ui(n,l)),k.cancelled?(y&&Ui(n,o),m&&m(n)):(t(),p&&p(n)),n._leaveCb=null}));function I(){k.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),f&&f(n),y&&(Fi(n,o),Fi(n,l),Bi((function(){Ui(n,o),k.cancelled||(Fi(n,a),w||(Ki(S)?setTimeout(k,S):Wi(n,s,k)))}))),d&&d(n,k),y||w||k())}g?g(I):I()}function Ki(e){return"number"==typeof e&&!isNaN(e)}function Yi(e){if(u(e))return!1;var t=e.fns;return c(t)?Yi(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Ji(e,t){!0!==t.data.show&&Xi(t)}var Qi=function(e){var t,n;var r={},i=e.modules,s=e.nodeOps;for(t=0;t<dr.length;++t){for(r[dr[t]]=[],n=0;n<i.length;++n){c(i[n][dr[t]])&&r[dr[t]].push(i[n][dr[t]])}}function o(e){var t=s.parentNode(e);c(t)&&s.removeChild(t,e)}function a(e,t,n,i,o,a,u){if(c(e.elm)&&c(a)&&(e=a[u]=Ee(e)),e.isRootInsert=!o,function(e,t,n,i){var s=e.data;if(c(s)){var o=c(e.componentInstance)&&s.keepAlive;if(c(s=s.hook)&&c(s=s.init)&&s(e,!1),c(e.componentInstance))return l(e,t),h(n,e.elm,i),f(o)&&function(e,t,n,i){var s,o=e;for(;o.componentInstance;){if(o=o.componentInstance._vnode,c(s=o.data)&&c(s=s.transition)){for(s=0;s<r.activate.length;++s){r.activate[s](fr,o)}t.push(o);break}}h(n,e.elm,i)}(e,t,n,i),!0}}(e,t,n,i))return;var d=e.data,m=e.children,y=e.tag;c(y)?(e.elm=e.ns?s.createElementNS(e.ns,y):s.createElement(y,e),v(e),p(e,m,t),c(d)&&g(e,t),h(n,e.elm,i)):f(e.isComment)?(e.elm=s.createComment(e.text),h(n,e.elm,i)):(e.elm=s.createTextNode(e.text),h(n,e.elm,i))}function l(e,t){c(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,m(e)?(g(e,t),v(e)):(cr(e),t.push(e))}function h(e,t,n){c(e)&&(c(n)?s.parentNode(n)===e&&s.insertBefore(e,t,n):s.appendChild(e,t))}function p(e,t,n){if(Array.isArray(t))for(var r=0;r<t.length;++r){a(t[r],n,e.elm,null,!0,t,r)}else d(e.text)&&s.appendChild(e.elm,s.createTextNode(String(e.text)))}function m(e){for(;e.componentInstance;){e=e.componentInstance._vnode}return c(e.tag)}function g(e,n){for(var i=0;i<r.create.length;++i){r.create[i](fr,e)}c(t=e.data.hook)&&(c(t.create)&&t.create(fr,e),c(t.insert)&&n.push(e))}function v(e){var t;if(c(t=e.fnScopeId))s.setStyleScope(e.elm,t);else{var n=e;for(;n;){c(t=n.context)&&c(t=t.$options._scopeId)&&s.setStyleScope(e.elm,t),n=n.parent}}c(t=rn)&&t!==e.context&&t!==e.fnContext&&c(t=t.$options._scopeId)&&s.setStyleScope(e.elm,t)}function y(e,t,n,r,i,s){for(;r<=i;++r){a(n[r],s,e,t,!1,n,r)}}function b(e){var t,n;var i=e.data;if(c(i))for(c(t=i.hook)&&c(t=t.destroy)&&t(e),t=0;t<r.destroy.length;++t){r.destroy[t](e)}if(c(t=e.children))for(n=0;n<e.children.length;++n){b(e.children[n])}}function S(e,t,n){for(;t<=n;++t){var r=e[t];c(r)&&(c(r.tag)?(k(r),b(r)):o(r.elm))}}function k(e,t){if(c(t)||c(e.data)){var n;var i=r.remove.length+1;for(c(t)?t.listeners+=i:t=function(e,t){function n(){0==--n.listeners&&o(e)}return n.listeners=t,n}(e.elm,i),c(n=e.componentInstance)&&c(n=n._vnode)&&c(n.data)&&k(n,t),n=0;n<r.remove.length;++n){r.remove[n](e,t)}c(n=e.data.hook)&&c(n=n.remove)?n(e,t):t()}else o(e.elm)}function I(e,t,n,r){for(var i=n;i<r;i++){var s=t[i];if(c(s)&&hr(e,s))return i}}function E(e,t,n,i,o,l){if(e===t)return;c(t.elm)&&c(i)&&(t=i[o]=Ee(t));var d=t.elm=e.elm;if(f(e.isAsyncPlaceholder))return void(c(t.asyncFactory.resolved)?x(e.elm,t,n):t.isAsyncPlaceholder=!0);if(f(t.isStatic)&&f(e.isStatic)&&t.key===e.key&&(f(t.isCloned)||f(t.isOnce)))return void(t.componentInstance=e.componentInstance);var h;var p=t.data;c(p)&&c(h=p.hook)&&c(h=h.prepatch)&&h(e,t);var g=e.children,v=t.children;if(c(p)&&m(t)){for(h=0;h<r.update.length;++h){r.update[h](e,t)}c(h=p.hook)&&c(h=h.update)&&h(e,t)}u(t.text)?c(g)&&c(v)?g!==v&&function(e,t,n,r,i){var o,l,f,d,h=0,p=0,m=t.length-1,g=t[0],v=t[m],b=n.length-1,w=n[0],k=n[b];var C=!i;for(;h<=m&&p<=b;){u(g)?g=t[++h]:u(v)?v=t[--m]:hr(g,w)?(E(g,w,r,n,p),g=t[++h],w=n[++p]):hr(v,k)?(E(v,k,r,n,b),v=t[--m],k=n[--b]):hr(g,k)?(E(g,k,r,n,b),C&&s.insertBefore(e,g.elm,s.nextSibling(v.elm)),g=t[++h],k=n[--b]):hr(v,w)?(E(v,w,r,n,p),C&&s.insertBefore(e,v.elm,g.elm),v=t[--m],w=n[++p]):(u(o)&&(o=pr(t,h,m)),u(l=c(w.key)?o[w.key]:I(w,t,h,m))?a(w,r,e,g.elm,!1,n,p):hr(f=t[l],w)?(E(f,w,r,n,p),t[l]=void 0,C&&s.insertBefore(e,f.elm,g.elm)):a(w,r,e,g.elm,!1,n,p),w=n[++p])}h>m?y(e,d=u(n[b+1])?null:n[b+1].elm,n,p,b,r):p>b&&S(t,h,m)}(d,g,v,n,l):c(v)?(c(e.text)&&s.setTextContent(d,""),y(d,null,v,0,v.length-1,n)):c(g)?S(g,0,g.length-1):c(e.text)&&s.setTextContent(d,""):e.text!==t.text&&s.setTextContent(d,t.text),c(p)&&c(h=p.hook)&&c(h=h.postpatch)&&h(e,t)}function C(e,t,n){if(f(n)&&c(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r){t[r].data.hook.insert(t[r])}}var _=w("attrs,class,staticClass,staticStyle,key");function x(e,t,n,r){var i;var s=t.tag,o=t.data,a=t.children;if(r=r||o&&o.pre,t.elm=e,f(t.isComment)&&c(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(c(o)&&(c(i=o.hook)&&c(i=i.init)&&i(t,!0),c(i=t.componentInstance)))return l(t,n),!0;if(c(s)){if(c(a))if(e.hasChildNodes()){if(c(i=o)&&c(i=i.domProps)&&c(i=i.innerHTML)){if(i!==e.innerHTML)return!1}else{var u=!0,d=e.firstChild;for(var h=0;h<a.length;h++){if(!d||!x(d,a[h],n,r)){u=!1;break}d=d.nextSibling}if(!u||d)return!1}}else p(t,a,n);if(c(o)){var m=!1;for(var v in o){if(!_(v)){m=!0,g(t,n);break}}!m&&o["class"]&&ut(o["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,i){if(u(t))return void(c(e)&&b(e));var o=!1;var l=[];if(u(e))o=!0,a(t,l);else{var d=c(e.nodeType);if(!d&&hr(e,t))E(e,t,l,null,null,i);else{if(d){if(1===e.nodeType&&e.hasAttribute(W)&&(e.removeAttribute(W),n=!0),f(n)&&x(e,t,l))return C(t,l,!0),e;_=e,e=new Se(s.tagName(_).toLowerCase(),{},[],void 0,_)}var h=e.elm,p=s.parentNode(h);if(a(t,l,h._leaveCb?null:p,s.nextSibling(h)),c(t.parent)){var g=t.parent;var v=m(t);for(;g;){for(var y=0;y<r.destroy.length;++y){r.destroy[y](g)}if(g.elm=t.elm,v){for(var w=0;w<r.create.length;++w){r.create[w](fr,g)}var k=g.data.hook.insert;if(k.merged)for(var I=1;I<k.fns.length;I++){k.fns[I]()}}else cr(g);g=g.parent}}c(p)?S([e],0,0):c(e.tag)&&b(e)}}var _;return C(t,l,o),t.elm}}({nodeOps:lr,modules:[Cr,xr,ci,pi,Ci,J?{create:Ji,activate:Ji,remove:function e(t,n){!0!==t.data.show?qi(t,n):n()}}:{}].concat(Sr)});ne&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&os(e,"input")}));var Zi={inserted:function e(t,n,r,i){"select"===r.tag?(i.elm&&!i.elm._vOptions?ht(r,"postpatch",(function(){Zi.componentUpdated(t,n,r)})):es(t,n,r.context),t._vOptions=[].map.call(t.options,rs)):("textarea"===r.tag||or(t.type))&&(t._vModifiers=n.modifiers,n.modifiers.lazy||(t.addEventListener("compositionstart",is),t.addEventListener("compositionend",ss),t.addEventListener("change",ss),ne&&(t.vmodel=!0)))},componentUpdated:function e(t,n,r){if("select"===r.tag){es(t,n,r.context);var i=t._vOptions,s=t._vOptions=[].map.call(t.options,rs);if(s.some((function(e,t){return!B(e,i[t])}))){(t.multiple?n.value.some((function(e){return ns(e,s)})):n.value!==n.oldValue&&ns(n.value,s))&&os(t,"change")}}}};function es(e,t,n){ts(e,t,n),(te||re)&&setTimeout((function(){ts(e,t,n)}),0)}function ts(e,t,n){var r=t.value,i=e.multiple;if(i&&!Array.isArray(r))return;var s,o;for(var a=0,l=e.options.length;a<l;a++){if(o=e.options[a],i)s=F(r,rs(o))>-1,o.selected!==s&&(o.selected=s);else if(B(rs(o),r))return void(e.selectedIndex!==a&&(e.selectedIndex=a))}i||(e.selectedIndex=-1)}function ns(e,t){return t.every((function(t){return!B(t,e)}))}function rs(e){return"_value"in e?e._value:e.value}function is(e){e.target.composing=!0}function ss(e){e.target.composing&&(e.target.composing=!1,os(e.target,"input"))}function os(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function as(e){return!e.componentInstance||e.data&&e.data.transition?e:as(e.componentInstance._vnode)}var ls={model:Zi,show:{bind:function e(t,n,r){var i=n.value;var s=(r=as(r)).data&&r.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;i&&s?(r.data.show=!0,Xi(r,(function(){t.style.display=o}))):t.style.display=i?o:"none"},update:function e(t,n,r){var i=n.value,s=n.oldValue;if(!i==!s)return;(r=as(r)).data&&r.data.transition?(r.data.show=!0,i?Xi(r,(function(){t.style.display=t.__vOriginalDisplay})):qi(r,(function(){t.style.display="none"}))):t.style.display=i?t.__vOriginalDisplay:"none"},unbind:function e(t,n,r,i,s){s||(t.style.display=t.__vOriginalDisplay)}}};var us={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function cs(e){var t=e&&e.componentOptions;return t&&t.Ctor.options["abstract"]?cs(Qt(t.children)):e}function fs(e){var t={},n=e.$options;for(var r in n.propsData){t[r]=e[r]}var i=n._parentListeners;for(var s in i){t[T(s)]=i[s]}return t}function ds(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}var hs=function e(t){return t.tag||wt(t)},ps=function e(t){return"show"===t.name};var ms={name:"transition",props:us,abstract:!0,render:function e(t){var n=this;var r=this.$slots["default"];if(!r)return;if(!(r=r.filter(hs)).length)return;var i=this.mode,s=r[0];if(function(e){for(;e=e.parent;){if(e.data.transition)return!0}}(this.$vnode))return s;var o=cs(s);if(!o)return s;if(this._leaving)return ds(t,s);var a="__transition-".concat(this._uid,"-");o.key=null==o.key?o.isComment?a+"comment":a+o.tag:d(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var l=(o.data||(o.data={})).transition=fs(this),u=this._vnode,c=cs(u);if(o.data.directives&&o.data.directives.some(ps)&&(o.data.show=!0),c&&c.data&&!function(e,t){return t.key===e.key&&t.tag===e.tag}(o,c)&&!wt(c)&&(!c.componentInstance||!c.componentInstance._vnode.isComment)){var f=c.data.transition=L({},l);if("out-in"===i)return this._leaving=!0,ht(f,"afterLeave",(function(){n._leaving=!1,n.$forceUpdate()})),ds(t,s);if("in-out"===i){if(wt(o))return u;var h;var p=function e(){h()};ht(l,"afterEnter",p),ht(l,"enterCancelled",p),ht(f,"delayLeave",(function(e){h=e}))}}return s}};var gs=L({tag:String,moveClass:String},us);function vs(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function ys(e){e.data.newPos=e.elm.getBoundingClientRect()}function bs(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var s=e.elm.style;s.transform=s.WebkitTransform="translate(".concat(r,"px,").concat(i,"px)"),s.transitionDuration="0s"}}delete gs.mode;var ws={Transition:ms,TransitionGroup:{props:gs,beforeMount:function e(){var t=this;var n=this._update;this._update=function(e,r){var i=sn(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,i(),n.call(t,e,r)}},render:function e(t){var n=this.tag||this.$vnode.data.tag||"span",r=Object.create(null),i=this.prevChildren=this.children,s=this.$slots["default"]||[],o=this.children=[],a=fs(this);for(var l=0;l<s.length;l++){var u=s[l];u.tag&&null!=u.key&&0!==String(u.key).indexOf("__vlist")&&(o.push(u),r[u.key]=u,(u.data||(u.data={})).transition=a)}if(i){var c=[],f=[];for(var d=0;d<i.length;d++){var h=i[d];h.data.transition=a,h.data.pos=h.elm.getBoundingClientRect(),r[h.key]?c.push(h):f.push(h)}this.kept=t(n,null,c),this.removed=f}return t(n,null,o)},updated:function e(){var t=this.prevChildren,n=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,n)&&(t.forEach(vs),t.forEach(ys),t.forEach(bs),this._reflow=document.body.offsetHeight,t.forEach((function(e){if(e.data.moved){var t=e.elm,r=t.style;Fi(t,n),r.transform=r.WebkitTransform=r.transitionDuration="",t.addEventListener(Ri,t._moveCb=function e(r){r&&r.target!==t||r&&!/transform$/.test(r.propertyName)||(t.removeEventListener(Ri,e),t._moveCb=null,Ui(t,n))})}})))},methods:{hasMove:function e(t,n){if(!Di)return!1;if(this._hasMove)return this._hasMove;var r=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(e){Ti(r,e)})),xi(r,n),r.style.display="none",this.$el.appendChild(r);var i=Vi(r);return this.$el.removeChild(r),this._hasMove=i.hasTransform}}}};Dn.config.mustUseProp=Un,Dn.config.isReservedTag=rr,Dn.config.isReservedAttr=Bn,Dn.config.getTagNamespace=ir,Dn.config.isUnknownElement=function(e){if(!J)return!0;if(rr(e))return!1;if(e=e.toLowerCase(),null!=sr[e])return sr[e];var t=document.createElement(e);return e.indexOf("-")>-1?sr[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:sr[e]=/HTMLUnknownElement/.test(t.toString())},L(Dn.options.directives,ls),L(Dn.options.components,ws),Dn.prototype.__patch__=J?Qi:H,Dn.prototype.$mount=function(e,t){return function(e,t,n){var r;return e.$el=t,e.$options.render||(e.$options.render=ke),ln(e,"beforeMount"),r=function t(){e._update(e._render(),n)},new wn(e,r,H,{before:function t(){e._isMounted&&!e._isDestroyed&&ln(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,ln(e,"mounted")),e}(this,e=e&&J?ar(e):void 0,t)},J&&setTimeout((function(){G.devtools&&fe&&fe.emit("init",Dn)}),0);var Ss=/\{\{((?:.|\r?\n)+?)\}\}/g,ks=/[-.*+?^${}()|[\]\/\\]/g,Is=_((function(e){var t=e[0].replace(ks,"\\$&"),n=e[1].replace(ks,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+n,"g")}));var Es={staticKeys:["staticClass"],transformNode:function e(t,n){n.warn;var r=Fr(t,"class");r&&(t.staticClass=JSON.stringify(r));var i=Br(t,"class",!1);i&&(t.classBinding=i)},genData:function e(t){var n="";return t.staticClass&&(n+="staticClass:".concat(t.staticClass,",")),t.classBinding&&(n+="class:".concat(t.classBinding,",")),n}};var Cs={staticKeys:["staticStyle"],transformNode:function e(t,n){n.warn;var r=Fr(t,"style");r&&(t.staticStyle=JSON.stringify(mi(r)));var i=Br(t,"style",!1);i&&(t.styleBinding=i)},genData:function e(t){var n="";return t.staticStyle&&(n+="staticStyle:".concat(t.staticStyle,",")),t.styleBinding&&(n+="style:(".concat(t.styleBinding,"),")),n}};var _s;var xs={decode:function e(t){return(_s=_s||document.createElement("div")).innerHTML=t,_s.textContent}};var Ts=w("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Os=w("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),Ms=w("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),Ds=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,As=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+?\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Ps="[a-zA-Z_][\\-\\.0-9_a-zA-Z".concat(z.source,"]*"),Ls="((?:".concat(Ps,"\\:)?").concat(Ps,")"),Rs=new RegExp("^<".concat(Ls)),Hs=/^\s*(\/?)>/,js=new RegExp("^<\\/".concat(Ls,"[^>]*>")),Ns=/^<!DOCTYPE [^>]+>/i,Bs=/^<!\--/,Fs=/^<!\[/,Us=w("script,style,textarea",!0),Ws={},$s={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},Vs=/&(?:lt|gt|quot|amp|#39);/g,Gs=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,zs=w("pre,textarea",!0),Xs=function e(t,n){return t&&zs(t)&&"\n"===n[0]};function qs(e,t){var n=t?Gs:Vs;return e.replace(n,(function(e){return $s[e]}))}var Ks=/^@|^v-on:/,Ys=/^v-|^@|^:|^#/,Js=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Qs=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Zs=/^\(|\)$/g,eo=/^\[.*\]$/,to=/:(.*)$/,no=/^:|^\.|^v-bind:/,ro=/\.[^.\]]+(?=[^\]]*$)/g,io=/^v-slot(:|$)|^#/,so=/[\r\n]/,oo=/[ \f\t\r\n]+/g,ao=_(xs.decode),lo="_empty_";var uo,co,fo,ho,po,mo,go,vo;function yo(e,t,n){return{type:1,tag:e,attrsList:t,attrsMap:Co(t),rawAttrsMap:{},parent:n,children:[]}}function bo(e,t){uo=t.warn||Dr,mo=t.isPreTag||j,go=t.mustUseProp||j,vo=t.getTagNamespace||j;t.isReservedTag;fo=Ar(t.modules,"transformNode"),ho=Ar(t.modules,"preTransformNode"),po=Ar(t.modules,"postTransformNode"),co=t.delimiters;var n=[],r=!1!==t.preserveWhitespace,i=t.whitespace;var s,o,a=!1,l=!1;function u(e){if(c(e),a||e.processed||(e=wo(e,t)),n.length||e===s||s["if"]&&(e.elseif||e["else"])&&ko(s,{exp:e.elseif,block:e}),o&&!e.forbidden)if(e.elseif||e["else"])!function(e,t){var n=function(e){var t=e.length;for(;t--;){if(1===e[t].type)return e[t];e.pop()}}(t.children);n&&n["if"]&&ko(n,{exp:e.elseif,block:e})}(e,o);else{if(e.slotScope){var r=e.slotTarget||'"default"';(o.scopedSlots||(o.scopedSlots={}))[r]=e}o.children.push(e),e.parent=o}e.children=e.children.filter((function(e){return!e.slotScope})),c(e),e.pre&&(a=!1),mo(e.tag)&&(l=!1);for(var i=0;i<po.length;i++){po[i](e,t)}}function c(e){if(!l){var t;for(;(t=e.children[e.children.length-1])&&3===t.type&&" "===t.text;){e.children.pop()}}}return function(e,t){var n=[],r=t.expectHTML,i=t.isUnaryTag||j,s=t.canBeLeftOpenTag||j;var o,a,l=0;for(;e;){if(o=e,a&&Us(a)){(function(){var n=0;var r=a.toLowerCase(),i=Ws[r]||(Ws[r]=new RegExp("([\\s\\S]*?)(</"+r+"[^>]*>)","i")),s=e.replace(i,(function(e,i,s){return n=s.length,Us(r)||"noscript"===r||(i=i.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Xs(r,i)&&(i=i.slice(1)),t.chars&&t.chars(i),""}));l+=e.length-s.length,e=s,k(r,l-n,l)})()}else{var u=void 0,c=void 0,f=void 0,d=e.indexOf("<");if(0===d){if(Bs.test(e)){var h=e.indexOf("--\x3e");if(h>=0){t.shouldKeepComment&&t.comment(e.substring(4,h),l,l+h+3),b(h+3);continue}}if(Fs.test(e)){var p=e.indexOf("]>");if(p>=0){b(p+2);continue}}var m=e.match(Ns);if(m){b(m[0].length);continue}var g=e.match(js);if(g){var v=l;b(g[0].length),k(g[1],v,l);continue}var y=w();if(y){S(y),Xs(y.tagName,e)&&b(1);continue}}if(d>=0){for(c=e.slice(d);!(js.test(c)||Rs.test(c)||Bs.test(c)||Fs.test(c)||(f=c.indexOf("<",1))<0);){d+=f,c=e.slice(d)}u=e.substring(0,d)}d<0&&(u=e),u&&b(u.length),t.chars&&u&&t.chars(u,l-u.length,l)}if(e===o){t.chars&&t.chars(e);break}}function b(t){l+=t,e=e.substring(t)}function w(){var t=e.match(Rs);if(t){var n={tagName:t[1],attrs:[],start:l};var r,i;for(b(t[0].length);!(r=e.match(Hs))&&(i=e.match(As)||e.match(Ds));){i.start=l,b(i[0].length),i.end=l,n.attrs.push(i)}if(r)return n.unarySlash=r[1],b(r[0].length),n.end=l,n}}function S(e){var o=e.tagName,l=e.unarySlash;r&&("p"===a&&Ms(o)&&k(a),s(o)&&a===o&&k(o));var u=i(o)||!!l,c=e.attrs.length,f=new Array(c);for(var d=0;d<c;d++){var h=e.attrs[d],p=h[3]||h[4]||h[5]||"",m="a"===o&&"href"===h[1]?t.shouldDecodeNewlinesForHref:t.shouldDecodeNewlines;f[d]={name:h[1],value:qs(p,m)}}u||(n.push({tag:o,lowerCasedTag:o.toLowerCase(),attrs:f,start:e.start,end:e.end}),a=o),t.start&&t.start(o,f,u,e.start,e.end)}function k(e,r,i){var s,o;if(null==r&&(r=l),null==i&&(i=l),e)for(o=e.toLowerCase(),s=n.length-1;s>=0&&n[s].lowerCasedTag!==o;s--){}else s=0;if(s>=0){for(var u=n.length-1;u>=s;u--){t.end&&t.end(n[u].tag,r,i)}n.length=s,a=s&&n[s-1].tag}else"br"===o?t.start&&t.start(e,[],!0,r,i):"p"===o&&(t.start&&t.start(e,[],!1,r,i),t.end&&t.end(e,r,i))}k()}(e,{warn:uo,expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,canBeLeftOpenTag:t.canBeLeftOpenTag,shouldDecodeNewlines:t.shouldDecodeNewlines,shouldDecodeNewlinesForHref:t.shouldDecodeNewlinesForHref,shouldKeepComment:t.comments,outputSourceRange:t.outputSourceRange,start:function e(r,i,c,f,d){var h=o&&o.ns||vo(r);te&&"svg"===h&&(i=function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n];_o.test(r.name)||(r.name=r.name.replace(xo,""),t.push(r))}return t}(i));var p=yo(r,i,o);var m;h&&(p.ns=h),"style"!==(m=p).tag&&("script"!==m.tag||m.attrsMap.type&&"text/javascript"!==m.attrsMap.type)||ce()||(p.forbidden=!0);for(var g=0;g<ho.length;g++){p=ho[g](p,t)||p}a||(!function(e){null!=Fr(e,"v-pre")&&(e.pre=!0)}(p),p.pre&&(a=!0)),mo(p.tag)&&(l=!0),a?function(e){var t=e.attrsList,n=t.length;if(n){var r=e.attrs=new Array(n);for(var i=0;i<n;i++){r[i]={name:t[i].name,value:JSON.stringify(t[i].value)},null!=t[i].start&&(r[i].start=t[i].start,r[i].end=t[i].end)}}else e.pre||(e.plain=!0)}(p):p.processed||(So(p),function(e){var t=Fr(e,"v-if");if(t)e["if"]=t,ko(e,{exp:t,block:e});else{null!=Fr(e,"v-else")&&(e["else"]=!0);var n=Fr(e,"v-else-if");n&&(e.elseif=n)}}(p),function(e){null!=Fr(e,"v-once")&&(e.once=!0)}(p)),s||(s=p),c?u(p):(o=p,n.push(p))},end:function e(t,r,i){var s=n[n.length-1];n.length-=1,o=n[n.length-1],u(s)},chars:function e(t,n,s){if(!o)return;if(te&&"textarea"===o.tag&&o.attrsMap.placeholder===t)return;var u=o.children;var c;if(t=l||t.trim()?"script"===(c=o).tag||"style"===c.tag?t:ao(t):u.length?i?"condense"===i&&so.test(t)?"":" ":r?" ":"":""){var f,d;l||"condense"!==i||(t=t.replace(oo," ")),!a&&" "!==t&&(f=function(e,t){var n=t?Is(t):Ss;if(!n.test(e))return;var r=[],i=[];var s,o,a,l=n.lastIndex=0;for(;s=n.exec(e);){(o=s.index)>l&&(i.push(a=e.slice(l,o)),r.push(JSON.stringify(a)));var u=Or(s[1].trim());r.push("_s(".concat(u,")")),i.push({"@binding":u}),l=o+s[0].length}return l<e.length&&(i.push(a=e.slice(l)),r.push(JSON.stringify(a))),{expression:r.join("+"),tokens:i}}(t,co))?d={type:2,expression:f.expression,tokens:f.tokens,text:t}:" "===t&&u.length&&" "===u[u.length-1].text||(d={type:3,text:t}),d&&u.push(d)}},comment:function e(t,n,r){if(o){var i={type:3,text:t,isComment:!0};o.children.push(i)}}}),s}function wo(e,t){var n;!function(e){var t=Br(e,"key");t&&(e.key=t)}(e),e.plain=!e.key&&!e.scopedSlots&&!e.attrsList.length,function(e){var t=Br(e,"ref");t&&(e.ref=t,e.refInFor=function(e){var t=e;for(;t;){if(void 0!==t["for"])return!0;t=t.parent}return!1}(e))}(e),function(e){var t;"template"===e.tag?(t=Fr(e,"scope"),e.slotScope=t||Fr(e,"slot-scope")):(t=Fr(e,"slot-scope"))&&(e.slotScope=t);var n=Br(e,"slot");n&&(e.slotTarget='""'===n?'"default"':n,e.slotTargetDynamic=!(!e.attrsMap[":slot"]&&!e.attrsMap["v-bind:slot"]),"template"===e.tag||e.slotScope||Lr(e,"slot",n,function(e,t){return e.rawAttrsMap[":"+t]||e.rawAttrsMap["v-bind:"+t]||e.rawAttrsMap[t]}(e,"slot")));if("template"===e.tag){var r=Ur(e,io);if(r){var i=Io(r),s=i.name,o=i.dynamic;e.slotTarget=s,e.slotTargetDynamic=o,e.slotScope=r.value||lo}}else{var a=Ur(e,io);if(a){var l=e.scopedSlots||(e.scopedSlots={}),u=Io(a),c=u.name,f=u.dynamic,d=l[c]=yo("template",[],e);d.slotTarget=c,d.slotTargetDynamic=f,d.children=e.children.filter((function(e){if(!e.slotScope)return e.parent=d,!0})),d.slotScope=a.value||lo,e.children=[],e.plain=!1}}}(e),"slot"===(n=e).tag&&(n.slotName=Br(n,"name")),function(e){var t;(t=Br(e,"is"))&&(e.component=t);null!=Fr(e,"inline-template")&&(e.inlineTemplate=!0)}(e);for(var r=0;r<fo.length;r++){e=fo[r](e,t)||e}return function(e){var t=e.attrsList;var n,r,i,s,o,a,l,u;for(n=0,r=t.length;n<r;n++){if(i=s=t[n].name,o=t[n].value,Ys.test(i)){if(e.hasBindings=!0,(a=Eo(i.replace(Ys,"")))&&(i=i.replace(ro,"")),no.test(i))i=i.replace(no,""),o=Or(o),(u=eo.test(i))&&(i=i.slice(1,-1)),a&&(a.prop&&!u&&"innerHtml"===(i=T(i))&&(i="innerHTML"),a.camel&&!u&&(i=T(i)),a.sync&&(l=Vr(o,"$event"),u?Nr(e,'"update:"+('.concat(i,")"),l,null,!1,0,t[n],!0):(Nr(e,"update:".concat(T(i)),l,null,!1,0,t[n]),D(i)!==T(i)&&Nr(e,"update:".concat(D(i)),l,null,!1,0,t[n])))),a&&a.prop||!e.component&&go(e.tag,e.attrsMap.type,i)?Pr(e,i,o,t[n],u):Lr(e,i,o,t[n],u);else if(Ks.test(i))i=i.replace(Ks,""),(u=eo.test(i))&&(i=i.slice(1,-1)),Nr(e,i,o,a,!1,0,t[n],u);else{var c=(i=i.replace(Ys,"")).match(to);var f=c&&c[1];u=!1,f&&(i=i.slice(0,-(f.length+1)),eo.test(f)&&(f=f.slice(1,-1),u=!0)),Hr(e,i,s,o,f,u,a,t[n])}}else Lr(e,i,JSON.stringify(o),t[n]),!e.component&&"muted"===i&&go(e.tag,e.attrsMap.type,i)&&Pr(e,i,"true",t[n])}}(e),e}function So(e){var t;if(t=Fr(e,"v-for")){var n=function(e){var t=e.match(Js);if(!t)return;var n={};n["for"]=t[2].trim();var r=t[1].trim().replace(Zs,""),i=r.match(Qs);i?(n.alias=r.replace(Qs,"").trim(),n.iterator1=i[1].trim(),i[2]&&(n.iterator2=i[2].trim())):n.alias=r;return n}(t);n&&L(e,n)}}function ko(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function Io(e){var t=e.name.replace(io,"");return t||"#"!==e.name[0]&&(t="default"),eo.test(t)?{name:t.slice(1,-1),dynamic:!0}:{name:'"'.concat(t,'"'),dynamic:!1}}function Eo(e){var t=e.match(ro);if(t){var n={};return t.forEach((function(e){n[e.slice(1)]=!0})),n}}function Co(e){var t={};for(var n=0,r=e.length;n<r;n++){t[e[n].name]=e[n].value}return t}var _o=/^xmlns:NS\d+/,xo=/^NS\d+:/;function To(e){return yo(e.tag,e.attrsList.slice(),e.parent)}var Oo=[Es,Cs,{preTransformNode:function e(t,n){if("input"===t.tag){var r=t.attrsMap;if(!r["v-model"])return;var i;if((r[":type"]||r["v-bind:type"])&&(i=Br(t,"type")),r.type||i||!r["v-bind"]||(i="(".concat(r["v-bind"],").type")),i){var s=Fr(t,"v-if",!0),o=s?"&&(".concat(s,")"):"",a=null!=Fr(t,"v-else",!0),l=Fr(t,"v-else-if",!0),u=To(t);So(u),Rr(u,"type","checkbox"),wo(u,n),u.processed=!0,u["if"]="(".concat(i,")==='checkbox'")+o,ko(u,{exp:u["if"],block:u});var c=To(t);Fr(c,"v-for",!0),Rr(c,"type","radio"),wo(c,n),ko(u,{exp:"(".concat(i,")==='radio'")+o,block:c});var f=To(t);return Fr(f,"v-for",!0),Rr(f,":type",i),wo(f,n),ko(u,{exp:s,block:f}),a?u["else"]=!0:l&&(u.elseif=l),u}}}}];var Mo={expectHTML:!0,modules:Oo,directives:{model:function e(t,n,r){var i=n.value,s=n.modifiers,o=t.tag,a=t.attrsMap.type;if(t.component)return $r(t,i,s),!1;if("select"===o)!function(e,t,n){var r="var $$selectedVal = ".concat('Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;'+"return ".concat(n&&n.number?"_n(val)":"val","})"),";");r="".concat(r," ").concat(Vr(t,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]")),Nr(e,"change",r,null,!0)}(t,i,s);else if("input"===o&&"checkbox"===a)!function(e,t,n){var r=n&&n.number,i=Br(e,"value")||"null",s=Br(e,"true-value")||"true",o=Br(e,"false-value")||"false";Pr(e,"checked","Array.isArray(".concat(t,")")+"?_i(".concat(t,",").concat(i,")>-1")+("true"===s?":(".concat(t,")"):":_q(".concat(t,",").concat(s,")"))),Nr(e,"change","var $$a=".concat(t,",")+"$$el=$event.target,"+"$$c=$$el.checked?(".concat(s,"):(").concat(o,");")+"if(Array.isArray($$a)){"+"var $$v=".concat(r?"_n("+i+")":i,",")+"$$i=_i($$a,$$v);"+"if($$el.checked){$$i<0&&(".concat(Vr(t,"$$a.concat([$$v])"),")}")+"else{$$i>-1&&(".concat(Vr(t,"$$a.slice(0,$$i).concat($$a.slice($$i+1))"),")}")+"}else{".concat(Vr(t,"$$c"),"}"),null,!0)}(t,i,s);else if("input"===o&&"radio"===a)!function(e,t,n){var r=n&&n.number;var i=Br(e,"value")||"null";Pr(e,"checked","_q(".concat(t,",").concat(i=r?"_n(".concat(i,")"):i,")")),Nr(e,"change",Vr(t,i),null,!0)}(t,i,s);else if("input"===o||"textarea"===o)!function(e,t,n){var r=e.attrsMap.type,i=n||{},s=i.lazy,o=i.number,a=i.trim,l=!s&&"range"!==r,u=s?"change":"range"===r?ni:"input";var c="$event.target.value";a&&(c="$event.target.value.trim()"),o&&(c="_n(".concat(c,")"));var f=Vr(t,c);l&&(f="if($event.target.composing)return;".concat(f)),Pr(e,"value","(".concat(t,")")),Nr(e,u,f,null,!0),(a||o)&&Nr(e,"blur","$forceUpdate()")}(t,i,s);else if(!G.isReservedTag(o))return $r(t,i,s),!1;return!0},text:function e(t,n){n.value&&Pr(t,"textContent","_s(".concat(n.value,")"),n)},html:function e(t,n){n.value&&Pr(t,"innerHTML","_s(".concat(n.value,")"),n)}},isPreTag:function e(t){return"pre"===t},isUnaryTag:Ts,mustUseProp:Un,canBeLeftOpenTag:Os,isReservedTag:rr,getTagNamespace:ir,staticKeys:function(e){return e.reduce((function(e,t){return e.concat(t.staticKeys||[])}),[]).join(",")}(Oo)};var Do,Ao;var Po=_((function(e){return w("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(e?","+e:""))}));function Lo(e,t){e&&(Do=Po(t.staticKeys||""),Ao=t.isReservedTag||j,function e(t){t["static"]=function(e){if(2===e.type)return!1;if(3===e.type)return!0;return!(!e.pre&&(e.hasBindings||e["if"]||e["for"]||S(e.tag)||!Ao(e.tag)||function(e){for(;e.parent;){if("template"!==(e=e.parent).tag)return!1;if(e["for"])return!0}return!1}(e)||!Object.keys(e).every(Do)))}(t);if(1===t.type){if(!Ao(t.tag)&&"slot"!==t.tag&&null==t.attrsMap["inline-template"])return;for(var n=0,r=t.children.length;n<r;n++){var i=t.children[n];e(i),i["static"]||(t["static"]=!1)}if(t.ifConditions)for(var s=1,o=t.ifConditions.length;s<o;s++){var a=t.ifConditions[s].block;e(a),a["static"]||(t["static"]=!1)}}}(e),function e(t,n){if(1===t.type){if((t["static"]||t.once)&&(t.staticInFor=n),t["static"]&&t.children.length&&(1!==t.children.length||3!==t.children[0].type))return void(t.staticRoot=!0);if(t.staticRoot=!1,t.children)for(var r=0,i=t.children.length;r<i;r++){e(t.children[r],n||!!t["for"])}if(t.ifConditions)for(var s=1,o=t.ifConditions.length;s<o;s++){e(t.ifConditions[s].block,n)}}}(e,!1))}var Ro=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,Ho=/\([^)]*?\);*$/,jo=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,No={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Bo={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},Fo=function e(t){return"if(".concat(t,")return null;")},Uo={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:Fo("$event.target !== $event.currentTarget"),ctrl:Fo("!$event.ctrlKey"),shift:Fo("!$event.shiftKey"),alt:Fo("!$event.altKey"),meta:Fo("!$event.metaKey"),left:Fo("'button' in $event && $event.button !== 0"),middle:Fo("'button' in $event && $event.button !== 1"),right:Fo("'button' in $event && $event.button !== 2")};function Wo(e,t){var n=t?"nativeOn:":"on:";var r="",i="";for(var s in e){var o=$o(e[s]);e[s]&&e[s].dynamic?i+="".concat(s,",").concat(o,","):r+='"'.concat(s,'":').concat(o,",")}return r="{".concat(r.slice(0,-1),"}"),i?n+"_d(".concat(r,",[").concat(i.slice(0,-1),"])"):n+r}function $o(e){if(!e)return"function(){}";if(Array.isArray(e))return"[".concat(e.map((function(e){return $o(e)})).join(","),"]");var t=jo.test(e.value),n=Ro.test(e.value),r=jo.test(e.value.replace(Ho,""));if(e.modifiers){var i="",s="";var o=[];for(var a in e.modifiers){if(Uo[a])s+=Uo[a],No[a]&&o.push(a);else if("exact"===a){(function(){var t=e.modifiers;s+=Fo(["ctrl","shift","alt","meta"].filter((function(e){return!t[e]})).map((function(e){return"$event.".concat(e,"Key")})).join("||"))})()}else o.push(a)}return o.length&&(i+=function(e){return"if(!$event.type.indexOf('key')&&"+"".concat(e.map(Vo).join("&&"),")return null;")}(o)),s&&(i+=s),"function($event){".concat(i).concat(t?"return ".concat(e.value,".apply(null, arguments)"):n?"return (".concat(e.value,").apply(null, arguments)"):r?"return ".concat(e.value):e.value,"}")}return t||n?e.value:"function($event){".concat(r?"return ".concat(e.value):e.value,"}")}function Vo(e){var t=parseInt(e,10);if(t)return"$event.keyCode!==".concat(t);var n=No[e],r=Bo[e];return"_k($event.keyCode,"+"".concat(JSON.stringify(e),",")+"".concat(JSON.stringify(n),",")+"$event.key,"+"".concat(JSON.stringify(r))+")"}var Go={on:function e(t,n){t.wrapListeners=function(e){return"_g(".concat(e,",").concat(n.value,")")}},bind:function e(t,n){t.wrapData=function(e){return"_b(".concat(e,",'").concat(t.tag,"',").concat(n.value,",").concat(n.modifiers&&n.modifiers.prop?"true":"false").concat(n.modifiers&&n.modifiers.sync?",true":"",")")}},cloak:H};var zo=function e(t){babelHelpers.classCallCheck(this,e);this.options=t,this.warn=t.warn||Dr,this.transforms=Ar(t.modules,"transformCode"),this.dataGenFns=Ar(t.modules,"genData"),this.directives=L(L({},Go),t.directives);var n=t.isReservedTag||j;this.maybeComponent=function(e){return!!e.component||!n(e.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function Xo(e,t){var n=new zo(t);return{render:"with(this){return ".concat(e?"script"===e.tag?"null":qo(e,n):'_c("div")',"}"),staticRenderFns:n.staticRenderFns}}function qo(e,t){if(e.parent&&(e.pre=e.pre||e.parent.pre),e.staticRoot&&!e.staticProcessed)return Ko(e,t);if(e.once&&!e.onceProcessed)return Yo(e,t);if(e["for"]&&!e.forProcessed)return Qo(e,t);if(e["if"]&&!e.ifProcessed)return Jo(e,t);if("template"!==e.tag||e.slotTarget||t.pre){if("slot"===e.tag)return function(e,t){var n=e.slotName||'"default"',r=na(e,t);var i="_t(".concat(n).concat(r?",function(){return ".concat(r,"}"):"");var s=e.attrs||e.dynamicAttrs?sa((e.attrs||[]).concat(e.dynamicAttrs||[]).map((function(e){return{name:T(e.name),value:e.value,dynamic:e.dynamic}}))):null,o=e.attrsMap["v-bind"];!s&&!o||r||(i+=",null");s&&(i+=",".concat(s));o&&(i+="".concat(s?"":",null",",").concat(o));return i+")"}(e,t);{var n;if(e.component)n=function(e,t,n){var r=t.inlineTemplate?null:na(t,n,!0);return"_c(".concat(e,",").concat(Zo(t,n)).concat(r?",".concat(r):"",")")}(e.component,e,t);else{var r;(!e.plain||e.pre&&t.maybeComponent(e))&&(r=Zo(e,t));var i=e.inlineTemplate?null:na(e,t,!0);n="_c('".concat(e.tag,"'").concat(r?",".concat(r):"").concat(i?",".concat(i):"",")")}for(var s=0;s<t.transforms.length;s++){n=t.transforms[s](e,n)}return n}}return na(e,t)||"void 0"}function Ko(e,t){e.staticProcessed=!0;var n=t.pre;return e.pre&&(t.pre=e.pre),t.staticRenderFns.push("with(this){return ".concat(qo(e,t),"}")),t.pre=n,"_m(".concat(t.staticRenderFns.length-1).concat(e.staticInFor?",true":"",")")}function Yo(e,t){if(e.onceProcessed=!0,e["if"]&&!e.ifProcessed)return Jo(e,t);if(e.staticInFor){var n="",r=e.parent;for(;r;){if(r["for"]){n=r.key;break}r=r.parent}return n?"_o(".concat(qo(e,t),",").concat(t.onceId++,",").concat(n,")"):qo(e,t)}return Ko(e,t)}function Jo(e,t,n,r){return e.ifProcessed=!0,function e(t,n,r,i){if(!t.length)return i||"_e()";var s=t.shift();return s.exp?"(".concat(s.exp,")?").concat(o(s.block),":").concat(e(t,n,r,i)):"".concat(o(s.block));function o(e){return r?r(e,n):e.once?Yo(e,n):qo(e,n)}}(e.ifConditions.slice(),t,n,r)}function Qo(e,t,n,r){var i=e["for"],s=e.alias,o=e.iterator1?",".concat(e.iterator1):"",a=e.iterator2?",".concat(e.iterator2):"";return e.forProcessed=!0,"".concat(r||"_l","((").concat(i,"),")+"function(".concat(s).concat(o).concat(a,"){")+"return ".concat((n||qo)(e,t))+"})"}function Zo(e,t){var n="{";var r=function(e,t){var n=e.directives;if(!n)return;var r,i,s,o,a="directives:[",l=!1;for(r=0,i=n.length;r<i;r++){s=n[r],o=!0;var u=t.directives[s.name];u&&(o=!!u(e,s,t.warn)),o&&(l=!0,a+='{name:"'.concat(s.name,'",rawName:"').concat(s.rawName,'"').concat(s.value?",value:(".concat(s.value,"),expression:").concat(JSON.stringify(s.value)):"").concat(s.arg?",arg:".concat(s.isDynamicArg?s.arg:'"'.concat(s.arg,'"')):"").concat(s.modifiers?",modifiers:".concat(JSON.stringify(s.modifiers)):"","},"))}if(l)return a.slice(0,-1)+"]"}(e,t);r&&(n+=r+","),e.key&&(n+="key:".concat(e.key,",")),e.ref&&(n+="ref:".concat(e.ref,",")),e.refInFor&&(n+="refInFor:true,"),e.pre&&(n+="pre:true,"),e.component&&(n+='tag:"'.concat(e.tag,'",'));for(var i=0;i<t.dataGenFns.length;i++){n+=t.dataGenFns[i](e)}if(e.attrs&&(n+="attrs:".concat(sa(e.attrs),",")),e.props&&(n+="domProps:".concat(sa(e.props),",")),e.events&&(n+="".concat(Wo(e.events,!1),",")),e.nativeEvents&&(n+="".concat(Wo(e.nativeEvents,!0),",")),e.slotTarget&&!e.slotScope&&(n+="slot:".concat(e.slotTarget,",")),e.scopedSlots&&(n+="".concat(function(e,t,n){var r=e["for"]||Object.keys(t).some((function(e){var n=t[e];return n.slotTargetDynamic||n["if"]||n["for"]||ea(n)})),i=!!e["if"];if(!r){var s=e.parent;for(;s;){if(s.slotScope&&s.slotScope!==lo||s["for"]){r=!0;break}s["if"]&&(i=!0),s=s.parent}}var o=Object.keys(t).map((function(e){return ta(t[e],n)})).join(",");return"scopedSlots:_u([".concat(o,"]").concat(r?",null,true":"").concat(!r&&i?",null,false,".concat(function(e){var t=5381,n=e.length;for(;n;){t=33*t^e.charCodeAt(--n)}return t>>>0}(o)):"",")")}(e,e.scopedSlots,t),",")),e.model&&(n+="model:{value:".concat(e.model.value,",callback:").concat(e.model.callback,",expression:").concat(e.model.expression,"},")),e.inlineTemplate){var s=function(e,t){var n=e.children[0];if(n&&1===n.type){var r=Xo(n,t.options);return"inlineTemplate:{render:function(){".concat(r.render,"},staticRenderFns:[").concat(r.staticRenderFns.map((function(e){return"function(){".concat(e,"}")})).join(","),"]}")}}(e,t);s&&(n+="".concat(s,","))}return n=n.replace(/,$/,"")+"}",e.dynamicAttrs&&(n="_b(".concat(n,',"').concat(e.tag,'",').concat(sa(e.dynamicAttrs),")")),e.wrapData&&(n=e.wrapData(n)),e.wrapListeners&&(n=e.wrapListeners(n)),n}function ea(e){return 1===e.type&&("slot"===e.tag||e.children.some(ea))}function ta(e,t){var n=e.attrsMap["slot-scope"];if(e["if"]&&!e.ifProcessed&&!n)return Jo(e,t,ta,"null");if(e["for"]&&!e.forProcessed)return Qo(e,t,ta);var r=e.slotScope===lo?"":String(e.slotScope),i="function(".concat(r,"){")+"return ".concat("template"===e.tag?e["if"]&&n?"(".concat(e["if"],")?").concat(na(e,t)||"undefined",":undefined"):na(e,t)||"undefined":qo(e,t),"}"),s=r?"":",proxy:true";return"{key:".concat(e.slotTarget||'"default"',",fn:").concat(i).concat(s,"}")}function na(e,t,n,r,i){var s=e.children;if(s.length){var o=s[0];if(1===s.length&&o["for"]&&"template"!==o.tag&&"slot"!==o.tag){var a=n?t.maybeComponent(o)?",1":",0":"";return"".concat((r||qo)(o,t)).concat(a)}var l=n?function(e,t){var n=0;for(var r=0;r<e.length;r++){var i=e[r];if(1===i.type){if(ra(i)||i.ifConditions&&i.ifConditions.some((function(e){return ra(e.block)}))){n=2;break}(t(i)||i.ifConditions&&i.ifConditions.some((function(e){return t(e.block)})))&&(n=1)}}return n}(s,t.maybeComponent):0,u=i||ia;return"[".concat(s.map((function(e){return u(e,t)})).join(","),"]").concat(l?",".concat(l):"")}}function ra(e){return void 0!==e["for"]||"template"===e.tag||"slot"===e.tag}function ia(e,t){return 1===e.type?qo(e,t):3===e.type&&e.isComment?(r=e,"_e(".concat(JSON.stringify(r.text),")")):"_v(".concat(2===(n=e).type?n.expression:oa(JSON.stringify(n.text)),")");var n,r}function sa(e){var t="",n="";for(var r=0;r<e.length;r++){var i=e[r],s=oa(i.value);i.dynamic?n+="".concat(i.name,",").concat(s,","):t+='"'.concat(i.name,'":').concat(s,",")}return t="{".concat(t.slice(0,-1),"}"),n?"_d(".concat(t,",[").concat(n.slice(0,-1),"])"):t}function oa(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function aa(e,t){try{return new Function(e)}catch(n){return t.push({err:n,code:e}),H}}function la(e){var t=Object.create(null);return function(n,r,i){(r=L({},r)).warn;delete r.warn;var s=r.delimiters?String(r.delimiters)+n:n;if(t[s])return t[s];var o=e(n,r),a={},l=[];return a.render=aa(o.render,l),a.staticRenderFns=o.staticRenderFns.map((function(e){return aa(e,l)})),t[s]=a}}var ua=(ca=function e(t,n){var r=bo(t.trim(),n);!1!==n.optimize&&Lo(r,n);var i=Xo(r,n);return{ast:r,render:i.render,staticRenderFns:i.staticRenderFns}},function(e){function t(t,n){var r=Object.create(e),i=[],s=[];if(n){n.modules&&(r.modules=(e.modules||[]).concat(n.modules)),n.directives&&(r.directives=L(Object.create(e.directives||null),n.directives));for(var o in n){"modules"!==o&&"directives"!==o&&(r[o]=n[o])}}r.warn=function(e,t,n){(n?s:i).push(e)};var a=ca(t.trim(),r);return a.errors=i,a.tips=s,a}return{compile:t,compileToFunctions:la(t)}});var ca;var fa=ua(Mo),da=fa.compile,ha=fa.compileToFunctions;var pa;function ma(e){return(pa=pa||document.createElement("div")).innerHTML=e?'<a href="\n"/>':'<div a="\n"/>',pa.innerHTML.indexOf("&#10;")>0}var ga=!!J&&ma(!1),va=!!J&&ma(!0),ya=_((function(e){var t=ar(e);return t&&t.innerHTML})),ba=Dn.prototype.$mount;Dn.prototype.$mount=function(e,t){if((e=e&&ar(e))===document.body||e===document.documentElement)return this;var n=this.$options;if(!n.render){var r=n.template;if(r){if("string"==typeof r)"#"===r.charAt(0)&&(r=ya(r));else{if(!r.nodeType)return this;r=r.innerHTML}}else e&&(r=function(e){if(e.outerHTML)return e.outerHTML;{var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}}(e));if(r){var i=ha(r,{outputSourceRange:!1,shouldDecodeNewlines:ga,shouldDecodeNewlinesForHref:va,delimiters:n.delimiters,comments:n.comments},this),s=i.render,o=i.staticRenderFns;n.render=s,n.staticRenderFns=o}}return ba.call(this,e,t)},Dn.compile=ha;var wa=new a(Dn);e.WidgetBitrixVue=wa;e.WidgetVue=wa;e.WidgetVueVendor=Dn;e.WidgetVueVendorV2=Dn})(this.BX=this.BX||{},BX.Event,BX,BX,BX)})();
/*!
 * protobuf.js v6.8.6 (c) 2016, daniel wirtz
 * compiled mon, 26 feb 2018 11:35:34 utc
 * licensed under the bsd-3-clause license
 * see: https://github.com/dcodeio/protobuf.js for details
 *
 * Modify list for integration with Bitrix Framework:
 * - removed integration with RequireJS and AMD package builders;
 */(function(global,undefined){"use strict";(function e(t,n,r){function i(e){var r=n[e];if(!r)t[e][0].call(r=n[e]={exports:{}},i,r,r.exports);return r.exports}var s=global.protobuf=i(r[0])})({1:[function(e,t,n){"use strict";t.exports=r;function r(e,t){var n=new Array(arguments.length-1),r=0,i=2,s=true;while(i<arguments.length)n[r++]=arguments[i++];return new Promise((function i(o,a){n[r]=function e(t){if(s){s=false;if(t)a(t);else{var n=new Array(arguments.length-1),r=0;while(r<n.length)n[r++]=arguments[r];o.apply(null,n)}}};try{e.apply(t||null,n)}catch(e){if(s){s=false;a(e)}}}))}},{}],2:[function(e,t,n){"use strict";var r=n;r.length=function e(t){var n=t.length;if(!n)return 0;var r=0;while(--n%4>1&&t.charAt(n)==="=")++r;return Math.ceil(t.length*3)/4-r};var i=new Array(64);var s=new Array(123);for(var o=0;o<64;)s[i[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;r.encode=function e(t,n,r){var s=null,o=[];var a=0,l=0,u;while(n<r){var c=t[n++];switch(l){case 0:o[a++]=i[c>>2];u=(c&3)<<4;l=1;break;case 1:o[a++]=i[u|c>>4];u=(c&15)<<2;l=2;break;case 2:o[a++]=i[u|c>>6];o[a++]=i[c&63];l=0;break}if(a>8191){(s||(s=[])).push(String.fromCharCode.apply(String,o));a=0}}if(l){o[a++]=i[u];o[a++]=61;if(l===1)o[a++]=61}if(s){if(a)s.push(String.fromCharCode.apply(String,o.slice(0,a)));return s.join("")}return String.fromCharCode.apply(String,o.slice(0,a))};var a="invalid encoding";r.decode=function e(t,n,r){var i=r;var o=0,l;for(var u=0;u<t.length;){var c=t.charCodeAt(u++);if(c===61&&o>1)break;if((c=s[c])===undefined)throw Error(a);switch(o){case 0:l=c;o=1;break;case 1:n[r++]=l<<2|(c&48)>>4;l=c;o=2;break;case 2:n[r++]=(l&15)<<4|(c&60)>>2;l=c;o=3;break;case 3:n[r++]=(l&3)<<6|c;o=0;break}}if(o===1)throw Error(a);return r-i};r.test=function e(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},{}],3:[function(e,t,n){"use strict";t.exports=r;function r(e,t){if(typeof e==="string"){t=e;e=undefined}var n=[];function i(e){if(typeof e!=="string"){var t=s();if(r.verbose)console.log("codegen: "+t);t="return "+t;if(e){var o=Object.keys(e),a=new Array(o.length+1),l=new Array(o.length),u=0;while(u<o.length){a[u]=o[u];l[u]=e[o[u++]]}a[u]=t;return Function.apply(null,a).apply(null,l)}return Function(t)()}var c=new Array(arguments.length-1),f=0;while(f<c.length)c[f]=arguments[++f];f=0;e=e.replace(/%([%dfijs])/g,(function e(t,n){var r=c[f++];switch(n){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"}));if(f!==c.length)throw Error("parameter count mismatch");n.push(e);return i}function s(r){return"function "+(r||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}i.toString=s;return i}r.verbose=false},{}],4:[function(e,t,n){"use strict";t.exports=r;function r(){this._listeners={}}r.prototype.on=function e(t,n,r){(this._listeners[t]||(this._listeners[t]=[])).push({fn:n,ctx:r||this});return this};r.prototype.off=function e(t,n){if(t===undefined)this._listeners={};else{if(n===undefined)this._listeners[t]=[];else{var r=this._listeners[t];for(var i=0;i<r.length;)if(r[i].fn===n)r.splice(i,1);else++i}}return this};r.prototype.emit=function e(t){var n=this._listeners[t];if(n){var r=[],i=1;for(;i<arguments.length;)r.push(arguments[i++]);for(i=0;i<n.length;)n[i].fn.apply(n[i++].ctx,r)}return this}},{}],5:[function(e,t,n){"use strict";t.exports=o;var r=e(1),i=e(7);var s=i("fs");function o(e,t,n){if(typeof t==="function"){n=t;t={}}else if(!t)t={};if(!n)return r(o,this,e,t);if(!t.xhr&&s&&s.readFile)return s.readFile(e,(function r(i,s){return i&&typeof XMLHttpRequest!=="undefined"?o.xhr(e,t,n):i?n(i):n(null,t.binary?s:s.toString("utf8"))}));return o.xhr(e,t,n)}o.xhr=function e(t,n,r){var i=new XMLHttpRequest;i.onreadystatechange=function e(){if(i.readyState!==4)return undefined;if(i.status!==0&&i.status!==200)return r(Error("status "+i.status));if(n.binary){var t=i.response;if(!t){t=[];for(var s=0;s<i.responseText.length;++s)t.push(i.responseText.charCodeAt(s)&255)}return r(null,typeof Uint8Array!=="undefined"?new Uint8Array(t):t)}return r(null,i.responseText)};if(n.binary){if("overrideMimeType"in i)i.overrideMimeType("text/plain; charset=x-user-defined");i.responseType="arraybuffer"}i.open("GET",t);i.send()}},{1:1,7:7}],6:[function(e,t,n){"use strict";t.exports=r(r);function r(e){if(typeof Float32Array!=="undefined")(function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=n[3]===128;function i(e,r,i){t[0]=e;r[i]=n[0];r[i+1]=n[1];r[i+2]=n[2];r[i+3]=n[3]}function s(e,r,i){t[0]=e;r[i]=n[3];r[i+1]=n[2];r[i+2]=n[1];r[i+3]=n[0]}e.writeFloatLE=r?i:s;e.writeFloatBE=r?s:i;function o(e,r){n[0]=e[r];n[1]=e[r+1];n[2]=e[r+2];n[3]=e[r+3];return t[0]}function a(e,r){n[3]=e[r];n[2]=e[r+1];n[1]=e[r+2];n[0]=e[r+3];return t[0]}e.readFloatLE=r?o:a;e.readFloatBE=r?a:o})();else(function(){function t(e,t,n,r){var i=t<0?1:0;if(i)t=-t;if(t===0)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var s=Math.floor(Math.log(t)/Math.LN2),o=Math.round(t*Math.pow(2,-s)*8388608)&8388607;e((i<<31|s+127<<23|o)>>>0,n,r)}}e.writeFloatLE=t.bind(null,i);e.writeFloatBE=t.bind(null,s);function n(e,t,n){var r=e(t,n),i=(r>>31)*2+1,s=r>>>23&255,o=r&8388607;return s===255?o?NaN:i*Infinity:s===0?i*1401298464324817e-60*o:i*Math.pow(2,s-150)*(o+8388608)}e.readFloatLE=n.bind(null,o);e.readFloatBE=n.bind(null,a)})();if(typeof Float64Array!=="undefined")(function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=n[7]===128;function i(e,r,i){t[0]=e;r[i]=n[0];r[i+1]=n[1];r[i+2]=n[2];r[i+3]=n[3];r[i+4]=n[4];r[i+5]=n[5];r[i+6]=n[6];r[i+7]=n[7]}function s(e,r,i){t[0]=e;r[i]=n[7];r[i+1]=n[6];r[i+2]=n[5];r[i+3]=n[4];r[i+4]=n[3];r[i+5]=n[2];r[i+6]=n[1];r[i+7]=n[0]}e.writeDoubleLE=r?i:s;e.writeDoubleBE=r?s:i;function o(e,r){n[0]=e[r];n[1]=e[r+1];n[2]=e[r+2];n[3]=e[r+3];n[4]=e[r+4];n[5]=e[r+5];n[6]=e[r+6];n[7]=e[r+7];return t[0]}function a(e,r){n[7]=e[r];n[6]=e[r+1];n[5]=e[r+2];n[4]=e[r+3];n[3]=e[r+4];n[2]=e[r+5];n[1]=e[r+6];n[0]=e[r+7];return t[0]}e.readDoubleLE=r?o:a;e.readDoubleBE=r?a:o})();else(function(){function t(e,t,n,r,i,s){var o=r<0?1:0;if(o)r=-r;if(r===0){e(0,i,s+t);e(1/r>0?0:2147483648,i,s+n)}else if(isNaN(r)){e(0,i,s+t);e(2146959360,i,s+n)}else if(r>17976931348623157e292){e(0,i,s+t);e((o<<31|2146435072)>>>0,i,s+n)}else{var a;if(r<22250738585072014e-324){a=r/5e-324;e(a>>>0,i,s+t);e((o<<31|a/4294967296)>>>0,i,s+n)}else{var l=Math.floor(Math.log(r)/Math.LN2);if(l===1024)l=1023;a=r*Math.pow(2,-l);e(a*4503599627370496>>>0,i,s+t);e((o<<31|l+1023<<20|a*1048576&1048575)>>>0,i,s+n)}}}e.writeDoubleLE=t.bind(null,i,0,4);e.writeDoubleBE=t.bind(null,s,4,0);function n(e,t,n,r,i){var s=e(r,i+t),o=e(r,i+n);var a=(o>>31)*2+1,l=o>>>20&2047,u=4294967296*(o&1048575)+s;return l===2047?u?NaN:a*Infinity:l===0?a*5e-324*u:a*Math.pow(2,l-1075)*(u+4503599627370496)}e.readDoubleLE=n.bind(null,o,0,4);e.readDoubleBE=n.bind(null,a,4,0)})();return e}function i(e,t,n){t[n]=e&255;t[n+1]=e>>>8&255;t[n+2]=e>>>16&255;t[n+3]=e>>>24}function s(e,t,n){t[n]=e>>>24;t[n+1]=e>>>16&255;t[n+2]=e>>>8&255;t[n+3]=e&255}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}},{}],7:[function(require,module,exports){"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}},{}],8:[function(e,t,n){"use strict";var r=n;var i=r.isAbsolute=function e(t){return/^(?:\/|\w+:)/.test(t)};var s=r.normalize=function e(t){t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var n=t.split("/"),r=i(t),s="";if(r)s=n.shift()+"/";for(var o=0;o<n.length;){if(n[o]===".."){if(o>0&&n[o-1]!=="..")n.splice(--o,2);else if(r)n.splice(o,1);else++o}else if(n[o]===".")n.splice(o,1);else++o}return s+n.join("/")};r.resolve=function e(t,n,r){if(!r)n=s(n);if(i(n))return n;if(!r)t=s(t);return(t=t.replace(/(?:\/|^)[^/]+$/,"")).length?s(t+"/"+n):n}},{}],9:[function(e,t,n){"use strict";t.exports=r;function r(e,t,n){var r=n||8192;var i=r>>>1;var s=null;var o=r;return function n(a){if(a<1||a>i)return e(a);if(o+a>r){s=e(r);o=0}var l=t.call(s,o,o+=a);if(o&7)o=(o|7)+1;return l}}},{}],10:[function(e,t,n){"use strict";var r=n;r.length=function e(t){var n=0,r=0;for(var i=0;i<t.length;++i){r=t.charCodeAt(i);if(r<128)n+=1;else if(r<2048)n+=2;else if((r&64512)===55296&&(t.charCodeAt(i+1)&64512)===56320){++i;n+=4}else n+=3}return n};r.read=function e(t,n,r){var i=r-n;if(i<1)return"";var s=null,o=[],a=0,l;while(n<r){l=t[n++];if(l<128)o[a++]=l;else if(l>191&&l<224)o[a++]=(l&31)<<6|t[n++]&63;else if(l>239&&l<365){l=((l&7)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536;o[a++]=55296+(l>>10);o[a++]=56320+(l&1023)}else o[a++]=(l&15)<<12|(t[n++]&63)<<6|t[n++]&63;if(a>8191){(s||(s=[])).push(String.fromCharCode.apply(String,o));a=0}}if(s){if(a)s.push(String.fromCharCode.apply(String,o.slice(0,a)));return s.join("")}return String.fromCharCode.apply(String,o.slice(0,a))};r.write=function e(t,n,r){var i=r,s,o;for(var a=0;a<t.length;++a){s=t.charCodeAt(a);if(s<128){n[r++]=s}else if(s<2048){n[r++]=s>>6|192;n[r++]=s&63|128}else if((s&64512)===55296&&((o=t.charCodeAt(a+1))&64512)===56320){s=65536+((s&1023)<<10)+(o&1023);++a;n[r++]=s>>18|240;n[r++]=s>>12&63|128;n[r++]=s>>6&63|128;n[r++]=s&63|128}else{n[r++]=s>>12|224;n[r++]=s>>6&63|128;n[r++]=s&63|128}}return r-i}},{}],11:[function(e,t,n){"use strict";t.exports=i;var r=/\/|\./;function i(e,t){if(!r.test(e)){e="google/protobuf/"+e+".proto";t={nested:{google:{nested:{protobuf:{nested:t}}}}}}i[e]=t}i("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var s;i("duration",{Duration:s={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});i("timestamp",{Timestamp:s});i("empty",{Empty:{fields:{}}});i("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});i("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});i("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});i.get=function e(t){return i[t]||null}},{}],12:[function(e,t,n){"use strict";var r=n;var i=e(15),s=e(37);function o(e,t,n,r){if(t.resolvedType){if(t.resolvedType instanceof i){e("switch(d%s){",r);for(var s=t.resolvedType.values,o=Object.keys(s),a=0;a<o.length;++a){if(t.repeated&&s[o[a]]===t.typeDefault)e("default:");e("case%j:",o[a])("case %i:",s[o[a]])("m%s=%j",r,s[o[a]])("break")}e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,n,r)}else{var l=false;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":l=true;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,l)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,l?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r);break}}return e}r.fromObject=function e(t){var n=t.fieldsArray;var r=s.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!n.length)return r("return new this.ctor");r("var m=new this.ctor");for(var a=0;a<n.length;++a){var l=n[a].resolve(),u=s.safeProp(l.name);if(l.map){r("if(d%s){",u)('if(typeof d%s!=="object")',u)("throw TypeError(%j)",l.fullName+": object expected")("m%s={}",u)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",u);o(r,l,a,u+"[ks[i]]")("}")("}")}else if(l.repeated){r("if(d%s){",u)("if(!Array.isArray(d%s))",u)("throw TypeError(%j)",l.fullName+": array expected")("m%s=[]",u)("for(var i=0;i<d%s.length;++i){",u);o(r,l,a,u+"[i]")("}")("}")}else{if(!(l.resolvedType instanceof i))r("if(d%s!=null){",u);o(r,l,a,u);if(!(l.resolvedType instanceof i))r("}")}}return r("return m")};function a(e,t,n,r){if(t.resolvedType){if(t.resolvedType instanceof i)e("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,n,r,r);else e("d%s=types[%i].toObject(m%s,o)",r,n,r)}else{var s=false;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":s=true;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,s?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r);break}}return e}r.toObject=function e(t){var n=t.fieldsArray.slice().sort(s.compareFieldsById);if(!n.length)return s.codegen()("return {}");var r=s.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}");var o=[],l=[],u=[],c=0;for(;c<n.length;++c)if(!n[c].partOf)(n[c].resolve().repeated?o:n[c].map?l:u).push(n[c]);if(o.length){r("if(o.arrays||o.defaults){");for(c=0;c<o.length;++c)r("d%s=[]",s.safeProp(o[c].name));r("}")}if(l.length){r("if(o.objects||o.defaults){");for(c=0;c<l.length;++c)r("d%s={}",s.safeProp(l[c].name));r("}")}if(u.length){r("if(o.defaults){");for(c=0;c<u.length;++c){var f=u[c],d=s.safeProp(f.name);if(f.resolvedType instanceof i)r("d%s=o.enums===String?%j:%j",d,f.resolvedType.valuesById[f.typeDefault],f.typeDefault);else if(f.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",f.typeDefault.low,f.typeDefault.high,f.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,f.typeDefault.toString(),f.typeDefault.toNumber());else if(f.bytes)r("d%s=o.bytes===String?%j:%s",d,String.fromCharCode.apply(String,f.typeDefault),"["+Array.prototype.slice.call(f.typeDefault).join(",")+"]");else r("d%s=%j",d,f.typeDefault)}r("}")}var h=false;for(c=0;c<n.length;++c){var f=n[c],p=t._fieldsArray.indexOf(f),d=s.safeProp(f.name);if(f.map){if(!h){h=true;r("var ks2")}r("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){");a(r,f,p,d+"[ks2[j]]")("}")}else if(f.repeated){r("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d);a(r,f,p,d+"[j]")("}")}else{r("if(m%s!=null&&m.hasOwnProperty(%j)){",d,f.name);a(r,f,p,d);if(f.partOf)r("if(o.oneofs)")("d%s=%j",s.safeProp(f.partOf.name),f.name)}r("}")}return r("return d")}},{15:15,37:37}],13:[function(e,t,n){"use strict";t.exports=a;var r=e(15),i=e(36),s=e(37);function o(e){return"missing required '"+e.name+"'"}function a(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k":""))("while(r.pos<c){")("var t=r.uint32()");if(e.group)t("if((t&7)===4)")("break");t("switch(t>>>3){");var n=0;for(;n<e.fieldsArray.length;++n){var a=e._fieldsArray[n].resolve(),l=a.resolvedType instanceof r?"int32":a.type,u="m"+s.safeProp(a.name);t("case %i:",a.id);if(a.map){t("r.skip().pos++")("if(%s===util.emptyObject)",u)("%s={}",u)("k=r.%s()",a.keyType)("r.pos++");if(i.long[a.keyType]!==undefined){if(i.basic[l]===undefined)t('%s[typeof k==="object"?util.longToHash(k):k]=types[%i].decode(r,r.uint32())',u,n);else t('%s[typeof k==="object"?util.longToHash(k):k]=r.%s()',u,l)}else{if(i.basic[l]===undefined)t("%s[k]=types[%i].decode(r,r.uint32())",u,n);else t("%s[k]=r.%s()",u,l)}}else if(a.repeated){t("if(!(%s&&%s.length))",u,u)("%s=[]",u);if(i.packed[l]!==undefined)t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,l)("}else");if(i.basic[l]===undefined)t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,n);else t("%s.push(r.%s())",u,l)}else if(i.basic[l]===undefined)t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,n);else t("%s=r.%s()",u,l);t("break")}t("default:")("r.skipType(t&7)")("break")("}")("}");for(n=0;n<e._fieldsArray.length;++n){var c=e._fieldsArray[n];if(c.required)t("if(!m.hasOwnProperty(%j))",c.name)("throw util.ProtocolError(%j,{instance:m})",o(c))}return t("return m")}},{15:15,36:36,37:37}],14:[function(e,t,n){"use strict";t.exports=a;var r=e(15),i=e(36),s=e(37);function o(e,t,n,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(t.id<<3|2)>>>0)}function a(e){var t=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()");var n,a;var l=e.fieldsArray.slice().sort(s.compareFieldsById);for(var n=0;n<l.length;++n){var u=l[n].resolve(),c=e._fieldsArray.indexOf(u),f=u.resolvedType instanceof r?"int32":u.type,d=i.basic[f];a="m"+s.safeProp(u.name);if(u.map){t("if(%s!=null&&m.hasOwnProperty(%j)){",a,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",a)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|i.mapKey[u.keyType],u.keyType);if(d===undefined)t("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",c,a);else t(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,f,a);t("}")("}")}else if(u.repeated){t("if(%s!=null&&%s.length){",a,a);if(u.packed&&i.packed[f]!==undefined){t("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",a)("w.%s(%s[i])",f,a)("w.ldelim()")}else{t("for(var i=0;i<%s.length;++i)",a);if(d===undefined)o(t,u,c,a+"[i]");else t("w.uint32(%i).%s(%s[i])",(u.id<<3|d)>>>0,f,a)}t("}")}else{if(u.optional)t("if(%s!=null&&m.hasOwnProperty(%j))",a,u.name);if(d===undefined)o(t,u,c,a);else t("w.uint32(%i).%s(%s)",(u.id<<3|d)>>>0,f,a)}}return t("return w")}},{15:15,36:36,37:37}],15:[function(e,t,n){"use strict";t.exports=o;var r=e(24);((o.prototype=Object.create(r.prototype)).constructor=o).className="Enum";var i=e(23),s=e(37);function o(e,t,n,i,s){r.call(this,e,n);if(t&&typeof t!=="object")throw TypeError("values must be an object");this.valuesById={};this.values=Object.create(this.valuesById);this.comment=i;this.comments=s||{};this.reserved=undefined;if(t)for(var o=Object.keys(t),a=0;a<o.length;++a)if(typeof t[o[a]]==="number")this.valuesById[this.values[o[a]]=t[o[a]]]=o[a]}o.fromJSON=function e(t,n){var r=new o(t,n.values,n.options,n.comment,n.comments);r.reserved=n.reserved;return r};o.prototype.toJSON=function e(t){var n=t?Boolean(t.keepComments):false;return s.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",n?this.comment:undefined,"comments",n?this.comments:undefined])};o.prototype.add=function e(t,n,r){if(!s.isString(t))throw TypeError("name must be a string");if(!s.isInteger(n))throw TypeError("id must be an integer");if(this.values[t]!==undefined)throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(n))throw Error("id "+n+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(this.valuesById[n]!==undefined){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+n+" in "+this);this.values[t]=n}else this.valuesById[this.values[t]=n]=t;this.comments[t]=r||null;return this};o.prototype.remove=function e(t){if(!s.isString(t))throw TypeError("name must be a string");var n=this.values[t];if(n==null)throw Error("name '"+t+"' does not exist in "+this);delete this.valuesById[n];delete this.values[t];delete this.comments[t];return this};o.prototype.isReservedId=function e(t){return i.isReservedId(this.reserved,t)};o.prototype.isReservedName=function e(t){return i.isReservedName(this.reserved,t)}},{23:23,24:24,37:37}],16:[function(e,t,n){"use strict";t.exports=u;var r=e(24);((u.prototype=Object.create(r.prototype)).constructor=u).className="Field";var i=e(15),s=e(36),o=e(37);var a;var l=/^required|optional|repeated$/;u.fromJSON=function e(t,n){return new u(t,n.id,n.type,n.rule,n.extend,n.options,n.comment)};function u(e,t,n,i,a,u,c){if(o.isObject(i)){c=a;u=i;i=a=undefined}else if(o.isObject(a)){c=u;u=a;a=undefined}r.call(this,e,u);if(!o.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!o.isString(n))throw TypeError("type must be a string");if(i!==undefined&&!l.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(a!==undefined&&!o.isString(a))throw TypeError("extend must be a string");this.rule=i&&i!=="optional"?i:undefined;this.type=n;this.id=t;this.extend=a||undefined;this.required=i==="required";this.optional=!this.required;this.repeated=i==="repeated";this.map=false;this.message=null;this.partOf=null;this.typeDefault=null;this.defaultValue=null;this.long=o.Long?s.long[n]!==undefined:false;this.bytes=n==="bytes";this.resolvedType=null;this.extensionField=null;this.declaringField=null;this._packed=null;this.comment=c}Object.defineProperty(u.prototype,"packed",{get:function(){if(this._packed===null)this._packed=this.getOption("packed")!==false;return this._packed}});u.prototype.setOption=function e(t,n,i){if(t==="packed")this._packed=null;return r.prototype.setOption.call(this,t,n,i)};u.prototype.toJSON=function e(t){var n=t?Boolean(t.keepComments):false;return o.toObject(["rule",this.rule!=="optional"&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",n?this.comment:undefined])};u.prototype.resolve=function e(){if(this.resolved)return this;if((this.typeDefault=s.defaults[this.type])===undefined){this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type);if(this.resolvedType instanceof a)this.typeDefault=null;else this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]}if(this.options&&this.options["default"]!=null){this.typeDefault=this.options["default"];if(this.resolvedType instanceof i&&typeof this.typeDefault==="string")this.typeDefault=this.resolvedType.values[this.typeDefault]}if(this.options){if(this.options.packed===true||this.options.packed!==undefined&&this.resolvedType&&!(this.resolvedType instanceof i))delete this.options.packed;if(!Object.keys(this.options).length)this.options=undefined}if(this.long){this.typeDefault=o.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u");if(Object.freeze)Object.freeze(this.typeDefault)}else if(this.bytes&&typeof this.typeDefault==="string"){var t;if(o.base64.test(this.typeDefault))o.base64.decode(this.typeDefault,t=o.newBuffer(o.base64.length(this.typeDefault)),0);else o.utf8.write(this.typeDefault,t=o.newBuffer(o.utf8.length(this.typeDefault)),0);this.typeDefault=t}if(this.map)this.defaultValue=o.emptyObject;else if(this.repeated)this.defaultValue=o.emptyArray;else this.defaultValue=this.typeDefault;if(this.parent instanceof a)this.parent.ctor.prototype[this.name]=this.defaultValue;return r.prototype.resolve.call(this)};u.d=function e(t,n,r,i){if(typeof n==="function")n=o.decorateType(n).name;else if(n&&typeof n==="object")n=o.decorateEnum(n).name;return function e(s,a){o.decorateType(s.constructor).add(new u(a,t,n,r,{default:i}))}};u._configure=function e(t){a=t}},{15:15,24:24,36:36,37:37}],17:[function(e,t,n){"use strict";var r=t.exports=e(18);r.build="light";function i(e,t,n){if(typeof t==="function"){n=t;t=new r.Root}else if(!t)t=new r.Root;return t.load(e,n)}r.load=i;function s(e,t){if(!t)t=new r.Root;return t.loadSync(e)}r.loadSync=s;r.encoder=e(14);r.decoder=e(13);r.verifier=e(40);r.converter=e(12);r.ReflectionObject=e(24);r.Namespace=e(23);r.Root=e(29);r.Enum=e(15);r.Type=e(35);r.Field=e(16);r.OneOf=e(25);r.MapField=e(20);r.Service=e(33);r.Method=e(22);r.Message=e(21);r.wrappers=e(41);r.types=e(36);r.util=e(37);r.ReflectionObject._configure(r.Root);r.Namespace._configure(r.Type,r.Service);r.Root._configure(r.Type);r.Field._configure(r.Type)},{12:12,13:13,14:14,15:15,16:16,18:18,20:20,21:21,22:22,23:23,24:24,25:25,29:29,33:33,35:35,36:36,37:37,40:40,41:41}],18:[function(e,t,n){"use strict";var r=n;r.build="minimal";r.Writer=e(42);r.BufferWriter=e(43);r.Reader=e(27);r.BufferReader=e(28);r.util=e(39);r.rpc=e(31);r.roots=e(30);r.configure=i;function i(){r.Reader._configure(r.BufferReader);r.util._configure()}r.Writer._configure(r.BufferWriter);i()},{27:27,28:28,30:30,31:31,39:39,42:42,43:43}],19:[function(e,t,n){"use strict";var r=t.exports=e(17);r.build="full";r.tokenize=e(34);r.parse=e(26);r.common=e(11);r.Root._configure(r.Type,r.parse,r.common)},{11:11,17:17,26:26,34:34}],20:[function(e,t,n){"use strict";t.exports=o;var r=e(16);((o.prototype=Object.create(r.prototype)).constructor=o).className="MapField";var i=e(36),s=e(37);function o(e,t,n,i,o,a){r.call(this,e,t,i,undefined,undefined,o,a);if(!s.isString(n))throw TypeError("keyType must be a string");this.keyType=n;this.resolvedKeyType=null;this.map=true}o.fromJSON=function e(t,n){return new o(t,n.id,n.keyType,n.type,n.options,n.comment)};o.prototype.toJSON=function e(t){var n=t?Boolean(t.keepComments):false;return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",n?this.comment:undefined])};o.prototype.resolve=function e(){if(this.resolved)return this;if(i.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)};o.d=function e(t,n,r){if(typeof r==="function")r=s.decorateType(r).name;else if(r&&typeof r==="object")r=s.decorateEnum(r).name;return function e(i,a){s.decorateType(i.constructor).add(new o(a,t,n,r))}}},{16:16,36:36,37:37}],21:[function(e,t,n){"use strict";t.exports=i;var r=e(39);function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}i.create=function e(t){return this.$type.create(t)};i.encode=function e(t,n){return this.$type.encode(t,n)};i.encodeDelimited=function e(t,n){return this.$type.encodeDelimited(t,n)};i.decode=function e(t){return this.$type.decode(t)};i.decodeDelimited=function e(t){return this.$type.decodeDelimited(t)};i.verify=function e(t){return this.$type.verify(t)};i.fromObject=function e(t){return this.$type.fromObject(t)};i.toObject=function e(t,n){return this.$type.toObject(t,n)};i.prototype.toJSON=function e(){return this.$type.toObject(this,r.toJSONOptions)}},{39:39}],22:[function(e,t,n){"use strict";t.exports=s;var r=e(24);((s.prototype=Object.create(r.prototype)).constructor=s).className="Method";var i=e(37);function s(e,t,n,s,o,a,l,u){if(i.isObject(o)){l=o;o=a=undefined}else if(i.isObject(a)){l=a;a=undefined}if(!(t===undefined||i.isString(t)))throw TypeError("type must be a string");if(!i.isString(n))throw TypeError("requestType must be a string");if(!i.isString(s))throw TypeError("responseType must be a string");r.call(this,e,l);this.type=t||"rpc";this.requestType=n;this.requestStream=o?true:undefined;this.responseType=s;this.responseStream=a?true:undefined;this.resolvedRequestType=null;this.resolvedResponseType=null;this.comment=u}s.fromJSON=function e(t,n){return new s(t,n.type,n.requestType,n.responseType,n.requestStream,n.responseStream,n.options,n.comment)};s.prototype.toJSON=function e(t){var n=t?Boolean(t.keepComments):false;return i.toObject(["type",this.type!=="rpc"&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",n?this.comment:undefined])};s.prototype.resolve=function e(){if(this.resolved)return this;this.resolvedRequestType=this.parent.lookupType(this.requestType);this.resolvedResponseType=this.parent.lookupType(this.responseType);return r.prototype.resolve.call(this)}},{24:24,37:37}],23:[function(e,t,n){"use strict";t.exports=c;var r=e(24);((c.prototype=Object.create(r.prototype)).constructor=c).className="Namespace";var i=e(15),s=e(16),o=e(37);var a,l;c.fromJSON=function e(t,n){return new c(t,n.options).addJSON(n.nested)};function u(e,t){if(!(e&&e.length))return undefined;var n={};for(var r=0;r<e.length;++r)n[e[r].name]=e[r].toJSON(t);return n}c.arrayToJSON=u;c.isReservedId=function e(t,n){if(t)for(var r=0;r<t.length;++r)if(typeof t[r]!=="string"&&t[r][0]<=n&&t[r][1]>=n)return true;return false};c.isReservedName=function e(t,n){if(t)for(var r=0;r<t.length;++r)if(t[r]===n)return true;return false};function c(e,t){r.call(this,e,t);this.nested=undefined;this._nestedArray=null}function f(e){e._nestedArray=null;return e}Object.defineProperty(c.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=o.toArray(this.nested))}});c.prototype.toJSON=function e(t){return o.toObject(["options",this.options,"nested",u(this.nestedArray,t)])};c.prototype.addJSON=function e(t){var n=this;if(t){for(var r=Object.keys(t),o=0,u;o<r.length;++o){u=t[r[o]];n.add((u.fields!==undefined?a.fromJSON:u.values!==undefined?i.fromJSON:u.methods!==undefined?l.fromJSON:u.id!==undefined?s.fromJSON:c.fromJSON)(r[o],u))}}return this};c.prototype.get=function e(t){return this.nested&&this.nested[t]||null};c.prototype.getEnum=function e(t){if(this.nested&&this.nested[t]instanceof i)return this.nested[t].values;throw Error("no such enum: "+t)};c.prototype.add=function e(t){if(!(t instanceof s&&t.extend!==undefined||t instanceof a||t instanceof i||t instanceof l||t instanceof c))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var n=this.get(t.name);if(n){if(n instanceof c&&t instanceof c&&!(n instanceof a||n instanceof l)){var r=n.nestedArray;for(var o=0;o<r.length;++o)t.add(r[o]);this.remove(n);if(!this.nested)this.nested={};t.setOptions(n.options,true)}else throw Error("duplicate name '"+t.name+"' in "+this)}}this.nested[t.name]=t;t.onAdd(this);return f(this)};c.prototype.remove=function e(t){if(!(t instanceof r))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);delete this.nested[t.name];if(!Object.keys(this.nested).length)this.nested=undefined;t.onRemove(this);return f(this)};c.prototype.define=function e(t,n){if(o.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&t[0]==="")throw Error("path must be relative");var r=this;while(t.length>0){var i=t.shift();if(r.nested&&r.nested[i]){r=r.nested[i];if(!(r instanceof c))throw Error("path conflicts with non-namespace objects")}else r.add(r=new c(i))}if(n)r.addJSON(n);return r};c.prototype.resolveAll=function e(){var t=this.nestedArray,n=0;while(n<t.length)if(t[n]instanceof c)t[n++].resolveAll();else t[n++].resolve();return this.resolve()};c.prototype.lookup=function e(t,n,r){if(typeof n==="boolean"){r=n;n=undefined}else if(n&&!Array.isArray(n))n=[n];if(o.isString(t)&&t.length){if(t===".")return this.root;t=t.split(".")}else if(!t.length)return this;if(t[0]==="")return this.root.lookup(t.slice(1),n);var i=this.get(t[0]);if(i){if(t.length===1){if(!n||n.indexOf(i.constructor)>-1)return i}else if(i instanceof c&&(i=i.lookup(t.slice(1),n,true)))return i}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof c&&(i=this._nestedArray[s].lookup(t,n,true)))return i;if(this.parent===null||r)return null;return this.parent.lookup(t,n)};c.prototype.lookupType=function e(t){var n=this.lookup(t,[a]);if(!n)throw Error("no such type: "+t);return n};c.prototype.lookupEnum=function e(t){var n=this.lookup(t,[i]);if(!n)throw Error("no such Enum '"+t+"' in "+this);return n};c.prototype.lookupTypeOrEnum=function e(t){var n=this.lookup(t,[a,i]);if(!n)throw Error("no such Type or Enum '"+t+"' in "+this);return n};c.prototype.lookupService=function e(t){var n=this.lookup(t,[l]);if(!n)throw Error("no such Service '"+t+"' in "+this);return n};c._configure=function(e,t){a=e;l=t}},{15:15,16:16,24:24,37:37}],24:[function(e,t,n){"use strict";t.exports=s;s.className="ReflectionObject";var r=e(37);var i;function s(e,t){if(!r.isString(e))throw TypeError("name must be a string");if(t&&!r.isObject(t))throw TypeError("options must be an object");this.options=t;this.name=e;this.parent=null;this.resolved=false;this.comment=null;this.filename=null}Object.defineProperties(s.prototype,{root:{get:function(){var e=this;while(e.parent!==null)e=e.parent;return e}},fullName:{get:function(){var e=[this.name],t=this.parent;while(t){e.unshift(t.name);t=t.parent}return e.join(".")}}});s.prototype.toJSON=function e(){throw Error()};s.prototype.onAdd=function e(t){if(this.parent&&this.parent!==t)this.parent.remove(this);this.parent=t;this.resolved=false;var n=t.root;if(n instanceof i)n._handleAdd(this)};s.prototype.onRemove=function e(t){var n=t.root;if(n instanceof i)n._handleRemove(this);this.parent=null;this.resolved=false};s.prototype.resolve=function e(){if(this.resolved)return this;if(this.root instanceof i)this.resolved=true;return this};s.prototype.getOption=function e(t){if(this.options)return this.options[t];return undefined};s.prototype.setOption=function e(t,n,r){if(!r||!this.options||this.options[t]===undefined)(this.options||(this.options={}))[t]=n;return this};s.prototype.setOptions=function e(t,n){if(t)for(var r=Object.keys(t),i=0;i<r.length;++i)this.setOption(r[i],t[r[i]],n);return this};s.prototype.toString=function e(){var t=this.constructor.className,n=this.fullName;if(n.length)return t+" "+n;return t};s._configure=function(e){i=e}},{37:37}],25:[function(e,t,n){"use strict";t.exports=o;var r=e(24);((o.prototype=Object.create(r.prototype)).constructor=o).className="OneOf";var i=e(16),s=e(37);function o(e,t,n,i){if(!Array.isArray(t)){n=t;t=undefined}r.call(this,e,n);if(!(t===undefined||Array.isArray(t)))throw TypeError("fieldNames must be an Array");this.oneof=t||[];this.fieldsArray=[];this.comment=i}o.fromJSON=function e(t,n){return new o(t,n.oneof,n.options,n.comment)};o.prototype.toJSON=function e(t){var n=t?Boolean(t.keepComments):false;return s.toObject(["options",this.options,"oneof",this.oneof,"comment",n?this.comment:undefined])};function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)if(!e.fieldsArray[t].parent)e.parent.add(e.fieldsArray[t])}o.prototype.add=function e(t){if(!(t instanceof i))throw TypeError("field must be a Field");if(t.parent&&t.parent!==this.parent)t.parent.remove(t);this.oneof.push(t.name);this.fieldsArray.push(t);t.partOf=this;a(this);return this};o.prototype.remove=function e(t){if(!(t instanceof i))throw TypeError("field must be a Field");var n=this.fieldsArray.indexOf(t);if(n<0)throw Error(t+" is not a member of "+this);this.fieldsArray.splice(n,1);n=this.oneof.indexOf(t.name);if(n>-1)this.oneof.splice(n,1);t.partOf=null;return this};o.prototype.onAdd=function e(t){r.prototype.onAdd.call(this,t);var n=this;for(var i=0;i<this.oneof.length;++i){var s=t.get(this.oneof[i]);if(s&&!s.partOf){s.partOf=n;n.fieldsArray.push(s)}}a(this)};o.prototype.onRemove=function e(t){for(var n=0,i;n<this.fieldsArray.length;++n)if((i=this.fieldsArray[n]).parent)i.parent.remove(i);r.prototype.onRemove.call(this,t)};o.d=function e(){var t=new Array(arguments.length),n=0;while(n<arguments.length)t[n]=arguments[n++];return function e(n,r){s.decorateType(n.constructor).add(new o(r,t));Object.defineProperty(n,r,{get:s.oneOfGetter(t),set:s.oneOfSetter(t)})}}},{16:16,24:24,37:37}],26:[function(e,t,n){"use strict";t.exports=E;E.filename=null;E.defaults={keepCase:false};var r=e(34),i=e(29),s=e(35),o=e(16),a=e(20),l=e(25),u=e(15),c=e(33),f=e(22),d=e(36),h=e(37);var p=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,g=/^0[x][0-9a-fA-F]+$/,v=/^-?0[x][0-9a-fA-F]+$/,y=/^0[0-7]+$/,b=/^-?0[0-7]+$/,w=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,S=/^[a-zA-Z_][a-zA-Z_0-9]*$/,k=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,I=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function E(e,t,n){if(!(t instanceof i)){n=t;t=new i}if(!n)n=E.defaults;var C=r(e,n.alternateCommentMode||false),_=C.next,x=C.push,T=C.peek,O=C.skip,M=C.cmnt;var D=true,A,P,L,R,H=false;var j=t;var N=n.keepCase?function(e){return e}:h.camelCase;function B(e,t,n){var r=E.filename;if(!n)E.filename=null;return Error("illegal "+(t||"token")+" '"+e+"' ("+(r?r+", ":"")+"line "+C.line+")")}function F(){var e=[],t;do{if((t=_())!=='"'&&t!=="'")throw B(t);e.push(_());O(t);t=T()}while(t==='"'||t==="'");return e.join("")}function U(e){var t=_();switch(t){case"'":case'"':x(t);return F();case"true":case"TRUE":return true;case"false":case"FALSE":return false}try{return $(t,true)}catch(n){if(e&&k.test(t))return t;throw B(t,"value")}}function W(e,t){var n,r;do{if(t&&((n=T())==='"'||n==="'"))e.push(F());else e.push([r=V(_()),O("to",true)?V(_()):r])}while(O(",",true));O(";")}function $(e,t){var n=1;if(e.charAt(0)==="-"){n=-1;e=e.substring(1)}switch(e){case"inf":case"INF":case"Inf":return n*Infinity;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(p.test(e))return n*parseInt(e,10);if(g.test(e))return n*parseInt(e,16);if(y.test(e))return n*parseInt(e,8);if(w.test(e))return n*parseFloat(e);throw B(e,"number",t)}function V(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&e.charAt(0)==="-")throw B(e,"id");if(m.test(e))return parseInt(e,10);if(v.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw B(e,"id")}function G(){if(A!==undefined)throw B("package");A=_();if(!k.test(A))throw B(A,"name");j=j.define(A);O(";")}function z(){var e=T();var t;switch(e){case"weak":t=L||(L=[]);_();break;case"public":_();default:t=P||(P=[]);break}e=F();O(";");t.push(e)}function X(){O("=");R=F();H=R==="proto3";if(!H&&R!=="proto2")throw B(R,"syntax");O(";")}function q(e,t){switch(t){case"option":re(e,t);O(";");return true;case"message":Y(e,t);return true;case"enum":te(e,t);return true;case"service":ae(e,t);return true;case"extend":ue(e,t);return true}return false}function K(e,t,n){var r=C.line;if(e){e.comment=M();e.filename=E.filename}if(O("{",true)){var i;while((i=_())!=="}")t(i);O(";",true)}else{if(n)n();O(";");if(e&&typeof e.comment!=="string")e.comment=M(r)}}function Y(e,t){if(!S.test(t=_()))throw B(t,"type name");var n=new s(t);K(n,(function e(t){if(q(n,t))return;switch(t){case"map":Z(n,t);break;case"required":case"optional":case"repeated":J(n,t);break;case"oneof":ee(n,t);break;case"extensions":W(n.extensions||(n.extensions=[]));break;case"reserved":W(n.reserved||(n.reserved=[]),true);break;default:if(!H||!k.test(t))throw B(t);x(t);J(n,"optional");break}}));e.add(n)}function J(e,t,n){var r=_();if(r==="group"){Q(e,t);return}if(!k.test(r))throw B(r,"type");var i=_();if(!S.test(i))throw B(i,"name");i=N(i);O("=");var s=new o(i,V(_()),r,t,n);K(s,(function e(t){if(t==="option"){re(s,t);O(";")}else throw B(t)}),(function e(){oe(s)}));e.add(s);if(!H&&s.repeated&&(d.packed[r]!==undefined||d.basic[r]===undefined))s.setOption("packed",false,true)}function Q(e,t){var n=_();if(!S.test(n))throw B(n,"name");var r=h.lcFirst(n);if(n===r)n=h.ucFirst(n);O("=");var i=V(_());var a=new s(n);a.group=true;var l=new o(r,i,n,t);l.filename=E.filename;K(a,(function e(t){switch(t){case"option":re(a,t);O(";");break;case"required":case"optional":case"repeated":J(a,t);break;default:throw B(t)}}));e.add(a).add(l)}function Z(e){O("<");var t=_();if(d.mapKey[t]===undefined)throw B(t,"type");O(",");var n=_();if(!k.test(n))throw B(n,"type");O(">");var r=_();if(!S.test(r))throw B(r,"name");O("=");var i=new a(N(r),V(_()),t,n);K(i,(function e(t){if(t==="option"){re(i,t);O(";")}else throw B(t)}),(function e(){oe(i)}));e.add(i)}function ee(e,t){if(!S.test(t=_()))throw B(t,"name");var n=new l(N(t));K(n,(function e(t){if(t==="option"){re(n,t);O(";")}else{x(t);J(n,"optional")}}));e.add(n)}function te(e,t){if(!S.test(t=_()))throw B(t,"name");var n=new u(t);K(n,(function e(t){switch(t){case"option":re(n,t);O(";");break;case"reserved":W(n.reserved||(n.reserved=[]),true);break;default:ne(n,t)}}));e.add(n)}function ne(e,t){if(!S.test(t))throw B(t,"name");O("=");var n=V(_(),true),r={};K(r,(function e(t){if(t==="option"){re(r,t);O(";")}else throw B(t)}),(function e(){oe(r)}));e.add(t,n,r.comment)}function re(e,t){var n=O("(",true);if(!k.test(t=_()))throw B(t,"name");var r=t;if(n){O(")");r="("+r+")";t=T();if(I.test(t)){r+=t;_()}}O("=");ie(e,r)}function ie(e,t){if(O("{",true)){do{if(!S.test(ce=_()))throw B(ce,"name");if(T()==="{")ie(e,t+"."+ce);else{O(":");if(T()==="{")ie(e,t+"."+ce);else se(e,t+"."+ce,U(true))}}while(!O("}",true))}else se(e,t,U(true))}function se(e,t,n){if(e.setOption)e.setOption(t,n)}function oe(e){if(O("[",true)){do{re(e,"option")}while(O(",",true));O("]")}return e}function ae(e,t){if(!S.test(t=_()))throw B(t,"service name");var n=new c(t);K(n,(function e(t){if(q(n,t))return;if(t==="rpc")le(n,t);else throw B(t)}));e.add(n)}function le(e,t){var n=t;if(!S.test(t=_()))throw B(t,"name");var r=t,i,s,o,a;O("(");if(O("stream",true))s=true;if(!k.test(t=_()))throw B(t);i=t;O(")");O("returns");O("(");if(O("stream",true))a=true;if(!k.test(t=_()))throw B(t);o=t;O(")");var l=new f(r,n,i,o,s,a);K(l,(function e(t){if(t==="option"){re(l,t);O(";")}else throw B(t)}));e.add(l)}function ue(e,t){if(!k.test(t=_()))throw B(t,"reference");var n=t;K(null,(function t(r){switch(r){case"required":case"repeated":case"optional":J(e,r,n);break;default:if(!H||!k.test(r))throw B(r);x(r);J(e,"optional",n);break}}))}var ce;while((ce=_())!==null){switch(ce){case"package":if(!D)throw B(ce);G();break;case"import":if(!D)throw B(ce);z();break;case"syntax":if(!D)throw B(ce);X();break;case"option":if(!D)throw B(ce);re(j,ce);O(";");break;default:if(q(j,ce)){D=false;continue}throw B(ce)}}E.filename=null;return{package:A,imports:P,weakImports:L,syntax:R,root:t}}},{15:15,16:16,20:20,22:22,25:25,29:29,33:33,34:34,35:35,36:36,37:37}],27:[function(e,t,n){"use strict";t.exports=l;var r=e(39);var i;var s=r.LongBits,o=r.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e;this.pos=0;this.len=e.length}var u=typeof Uint8Array!=="undefined"?function e(t){if(t instanceof Uint8Array||Array.isArray(t))return new l(t);throw Error("illegal buffer")}:function e(t){if(Array.isArray(t))return new l(t);throw Error("illegal buffer")};l.create=r.Buffer?function e(t){return(l.create=function e(t){return r.Buffer.isBuffer(t)?new i(t):u(t)})(t)}:u;l.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice;l.prototype.uint32=function e(){var t=4294967295;return function e(){t=(this.buf[this.pos]&127)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&127)<<7)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&127)<<14)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&127)<<21)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&15)<<28)>>>0;if(this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len){this.pos=this.len;throw a(this,10)}return t}}();l.prototype.int32=function e(){return this.uint32()|0};l.prototype.sint32=function e(){var t=this.uint32();return t>>>1^-(t&1)|0};function c(){var e=new s(0,0);var t=0;if(this.len-this.pos>4){for(;t<4;++t){e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0;e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0;if(this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw a(this);e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0;return e}if(this.len-this.pos>4){for(;t<5;++t){e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}else{for(;t<5;++t){if(this.pos>=this.len)throw a(this);e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}throw Error("invalid varint encoding")}l.prototype.bool=function e(){return this.uint32()!==0};function f(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}l.prototype.fixed32=function e(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)};l.prototype.sfixed32=function e(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)|0};function d(){if(this.pos+8>this.len)throw a(this,8);return new s(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}l.prototype.float=function e(){if(this.pos+4>this.len)throw a(this,4);var t=r.float.readFloatLE(this.buf,this.pos);this.pos+=4;return t};l.prototype.double=function e(){if(this.pos+8>this.len)throw a(this,4);var t=r.float.readDoubleLE(this.buf,this.pos);this.pos+=8;return t};l.prototype.bytes=function e(){var t=this.uint32(),n=this.pos,r=this.pos+t;if(r>this.len)throw a(this,t);this.pos+=t;if(Array.isArray(this.buf))return this.buf.slice(n,r);return n===r?new this.buf.constructor(0):this._slice.call(this.buf,n,r)};l.prototype.string=function e(){var t=this.bytes();return o.read(t,0,t.length)};l.prototype.skip=function e(t){if(typeof t==="number"){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else{do{if(this.pos>=this.len)throw a(this)}while(this.buf[this.pos++]&128)}return this};l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:do{if((e=this.uint32()&7)===4)break;this.skipType(e)}while(true);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};l._configure=function(e){i=e;var t=r.Long?"toLong":"toNumber";r.merge(l.prototype,{int64:function e(){return c.call(this)[t](false)},uint64:function e(){return c.call(this)[t](true)},sint64:function e(){return c.call(this).zzDecode()[t](false)},fixed64:function e(){return d.call(this)[t](true)},sfixed64:function e(){return d.call(this)[t](false)}})}},{39:39}],28:[function(e,t,n){"use strict";t.exports=s;var r=e(27);(s.prototype=Object.create(r.prototype)).constructor=s;var i=e(39);function s(e){r.call(this,e)}if(i.Buffer)s.prototype._slice=i.Buffer.prototype.slice;s.prototype.string=function e(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len))}},{27:27,39:39}],29:[function(e,t,n){"use strict";t.exports=f;var r=e(23);((f.prototype=Object.create(r.prototype)).constructor=f).className="Root";var i=e(16),s=e(15),o=e(25),a=e(37);var l,u,c;function f(e){r.call(this,"",e);this.deferred=[];this.files=[]}f.fromJSON=function e(t,n){if(!n)n=new f;if(t.options)n.setOptions(t.options);return n.addJSON(t.nested)};f.prototype.resolvePath=a.path.resolve;function d(){}f.prototype.load=function e(t,n,r){if(typeof n==="function"){r=n;n=undefined}var i=this;if(!r)return a.asPromise(e,i,t,n);var s=r===d;function o(e,t){if(!r)return;var n=r;r=null;if(s)throw e;n(e,t)}function l(e,t){try{if(a.isString(t)&&t.charAt(0)==="{")t=JSON.parse(t);if(!a.isString(t))i.setOptions(t.options).addJSON(t.nested);else{u.filename=e;var r=u(t,i,n),l,c=0;if(r.imports)for(;c<r.imports.length;++c)if(l=i.resolvePath(e,r.imports[c]))f(l);if(r.weakImports)for(c=0;c<r.weakImports.length;++c)if(l=i.resolvePath(e,r.weakImports[c]))f(l,true)}}catch(e){o(e)}if(!s&&!h)o(null,i)}function f(e,t){var n=e.lastIndexOf("google/protobuf/");if(n>-1){var u=e.substring(n);if(u in c)e=u}if(i.files.indexOf(e)>-1)return;i.files.push(e);if(e in c){if(s)l(e,c[e]);else{++h;setTimeout((function(){--h;l(e,c[e])}))}return}if(s){var f;try{f=a.fs.readFileSync(e).toString("utf8")}catch(e){if(!t)o(e);return}l(e,f)}else{++h;a.fetch(e,(function(n,s){--h;if(!r)return;if(n){if(!t)o(n);else if(!h)o(null,i);return}l(e,s)}))}}var h=0;if(a.isString(t))t=[t];for(var p=0,m;p<t.length;++p)if(m=i.resolvePath("",t[p]))f(m);if(s)return i;if(!h)o(null,i);return undefined};f.prototype.loadSync=function e(t,n){if(!a.isNode)throw Error("not supported");return this.load(t,n,d)};f.prototype.resolveAll=function e(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var h=/^[A-Z]/;function p(e,t){var n=t.parent.lookup(t.extend);if(n){var r=new i(t.fullName,t.id,t.type,t.rule,undefined,t.options);r.declaringField=t;t.extensionField=r;n.add(r);return true}return false}f.prototype._handleAdd=function e(t){if(t instanceof i){if(t.extend!==undefined&&!t.extensionField)if(!p(this,t))this.deferred.push(t)}else if(t instanceof s){if(h.test(t.name))t.parent[t.name]=t.values}else if(!(t instanceof o)){if(t instanceof l)for(var n=0;n<this.deferred.length;)if(p(this,this.deferred[n]))this.deferred.splice(n,1);else++n;for(var r=0;r<t.nestedArray.length;++r)this._handleAdd(t._nestedArray[r]);if(h.test(t.name))t.parent[t.name]=t}};f.prototype._handleRemove=function e(t){if(t instanceof i){if(t.extend!==undefined){if(t.extensionField){t.extensionField.parent.remove(t.extensionField);t.extensionField=null}else{var n=this.deferred.indexOf(t);if(n>-1)this.deferred.splice(n,1)}}}else if(t instanceof s){if(h.test(t.name))delete t.parent[t.name]}else if(t instanceof r){for(var o=0;o<t.nestedArray.length;++o)this._handleRemove(t._nestedArray[o]);if(h.test(t.name))delete t.parent[t.name]}};f._configure=function(e,t,n){l=e;u=t;c=n}},{15:15,16:16,23:23,25:25,37:37}],30:[function(e,t,n){"use strict";t.exports={}},{}],31:[function(e,t,n){"use strict";var r=n;r.Service=e(32)},{32:32}],32:[function(e,t,n){"use strict";t.exports=i;var r=e(39);(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i;function i(e,t,n){if(typeof e!=="function")throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this);this.rpcImpl=e;this.requestDelimited=Boolean(t);this.responseDelimited=Boolean(n)}i.prototype.rpcCall=function e(t,n,i,s,o){if(!s)throw TypeError("request must be specified");var a=this;if(!o)return r.asPromise(e,a,t,n,i,s);if(!a.rpcImpl){setTimeout((function(){o(Error("already ended"))}),0);return undefined}try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function e(n,r){if(n){a.emit("error",n,t);return o(n)}if(r===null){a.end(true);return undefined}if(!(r instanceof i)){try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(n){a.emit("error",n,t);return o(n)}}a.emit("data",r,t);return o(null,r)}))}catch(e){a.emit("error",e,t);setTimeout((function(){o(e)}),0);return undefined}};i.prototype.end=function e(t){if(this.rpcImpl){if(!t)this.rpcImpl(null,null,null);this.rpcImpl=null;this.emit("end").off()}return this}},{39:39}],33:[function(e,t,n){"use strict";t.exports=a;var r=e(23);((a.prototype=Object.create(r.prototype)).constructor=a).className="Service";var i=e(22),s=e(37),o=e(31);function a(e,t){r.call(this,e,t);this.methods={};this._methodsArray=null}a.fromJSON=function e(t,n){var r=new a(t,n.options);if(n.methods)for(var s=Object.keys(n.methods),o=0;o<s.length;++o)r.add(i.fromJSON(s[o],n.methods[s[o]]));if(n.nested)r.addJSON(n.nested);r.comment=n.comment;return r};a.prototype.toJSON=function e(t){var n=r.prototype.toJSON.call(this,t);var i=t?Boolean(t.keepComments):false;return s.toObject(["options",n&&n.options||undefined,"methods",r.arrayToJSON(this.methodsArray,t)||{},"nested",n&&n.nested||undefined,"comment",i?this.comment:undefined])};Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}});function l(e){e._methodsArray=null;return e}a.prototype.get=function e(t){return this.methods[t]||r.prototype.get.call(this,t)};a.prototype.resolveAll=function e(){var t=this.methodsArray;for(var n=0;n<t.length;++n)t[n].resolve();return r.prototype.resolve.call(this)};a.prototype.add=function e(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof i){this.methods[t.name]=t;t.parent=this;return l(this)}return r.prototype.add.call(this,t)};a.prototype.remove=function e(t){if(t instanceof i){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);delete this.methods[t.name];t.parent=null;return l(this)}return r.prototype.remove.call(this,t)};a.prototype.create=function e(t,n,r){var i=new o.Service(t,n,r);for(var a=0,l;a<this.methodsArray.length;++a){var u=s.lcFirst((l=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");i[u]=s.codegen(["r","c"],s.isReserved(u)?u+"_":u)("return this.rpcCall(m,q,s,r,c)")({m:l,q:l.resolvedRequestType.ctor,s:l.resolvedResponseType.ctor})}return i}},{22:22,23:23,31:31,37:37}],34:[function(e,t,n){"use strict";t.exports=h;var r=/[\s{}=;:[\],'"()<>]/g,i=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,s=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g;var o=/^ *[*/]+ */,a=/^\s*\*?\/*/,l=/\n/g,u=/\s/,c=/\\(.?)/g;var f={0:"\0",r:"\r",n:"\n",t:"\t"};function d(e){return e.replace(c,(function(e,t){switch(t){case"\\":case"":return t;default:return f[t]||""}}))}h.unescape=d;function h(e,t){e=e.toString();var n=0,c=e.length,f=1,h=null,p=null,m=0,g=false;var v=[];var y=null;function b(e){return Error("illegal "+e+" (line "+f+")")}function w(){var t=y==="'"?s:i;t.lastIndex=n-1;var r=t.exec(e);if(!r)throw b("string");n=t.lastIndex;_(y);y=null;return d(r[1])}function S(t){return e.charAt(t)}function k(n,r){h=e.charAt(n++);m=f;g=false;var i;if(t){i=2}else{i=3}var s=n-i,u;do{if(--s<0||(u=e.charAt(s))==="\n"){g=true;break}}while(u===" "||u==="\t");var c=e.substring(n,r).split(l);for(var d=0;d<c.length;++d)c[d]=c[d].replace(t?a:o,"").trim();p=c.join("\n").trim()}function I(t){var n=E(t);var r=e.substring(t,n);var i=/^\s*\/{1,2}/.test(r);return i}function E(e){var t=e;while(t<c&&S(t)!=="\n"){t++}return t}function C(){if(v.length>0)return v.shift();if(y)return w();var i,s,o,a,l;do{if(n===c)return null;i=false;while(u.test(o=S(n))){if(o==="\n")++f;if(++n===c)return null}if(S(n)==="/"){if(++n===c){throw b("comment")}if(S(n)==="/"){if(!t){l=S(a=n+1)==="/";while(S(++n)!=="\n"){if(n===c){return null}}++n;if(l){k(a,n-1)}++f;i=true}else{a=n;l=false;if(I(n)){l=true;do{n=E(n);if(n===c){break}n++}while(I(n))}else{n=Math.min(c,E(n)+1)}if(l){k(a,n)}f++;i=true}}else if((o=S(n))==="*"){a=n+1;l=t||S(a)==="*";do{if(o==="\n"){++f}if(++n===c){throw b("comment")}s=o;o=S(n)}while(s!=="*"||o!=="/");++n;if(l){k(a,n-2)}i=true}else{return"/"}}}while(i);var d=n;r.lastIndex=0;var h=r.test(S(d++));if(!h)while(d<c&&!r.test(S(d)))++d;var p=e.substring(n,n=d);if(p==='"'||p==="'")y=p;return p}function _(e){v.push(e)}function x(){if(!v.length){var e=C();if(e===null)return null;_(e)}return v[0]}function T(e,t){var n=x(),r=n===e;if(r){C();return true}if(!t)throw b("token '"+n+"', '"+e+"' expected");return false}function O(e){var n=null;if(e===undefined){if(m===f-1&&(t||h==="*"||g)){n=p}}else{if(m<e){x()}if(m===e&&!g&&(t||h==="/")){n=p}}return n}return Object.defineProperty({next:C,peek:x,push:_,skip:T,cmnt:O},"line",{get:function(){return f}})}},{}],35:[function(e,t,n){"use strict";t.exports=y;var r=e(23);((y.prototype=Object.create(r.prototype)).constructor=y).className="Type";var i=e(15),s=e(25),o=e(16),a=e(20),l=e(33),u=e(21),c=e(27),f=e(42),d=e(37),h=e(14),p=e(13),m=e(40),g=e(12),v=e(41);function y(e,t){r.call(this,e,t);this.fields={};this.oneofs=undefined;this.extensions=undefined;this.reserved=undefined;this.group=undefined;this._fieldsById=null;this._fieldsArray=null;this._oneofsArray=null;this._ctor=null}Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=y.generateConstructor(this)())},set:function(e){var t=e.prototype;if(!(t instanceof u)){(e.prototype=new u).constructor=e;d.merge(e.prototype,t)}e.$type=e.prototype.$type=this;d.merge(e,u,true);this._ctor=e;var n=0;for(;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var r={};for(n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:d.oneOfGetter(this._oneofsArray[n].oneof),set:d.oneOfSetter(this._oneofsArray[n].oneof)};if(n)Object.defineProperties(e.prototype,r)}}});y.generateConstructor=function e(t){var n=d.codegen(["p"],t.name);for(var r=0,i;r<t.fieldsArray.length;++r)if((i=t._fieldsArray[r]).map)n("this%s={}",d.safeProp(i.name));else if(i.repeated)n("this%s=[]",d.safeProp(i.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function b(e){e._fieldsById=e._fieldsArray=e._oneofsArray=null;delete e.encode;delete e.decode;delete e.verify;return e}y.fromJSON=function e(t,n){var u=new y(t,n.options);u.extensions=n.extensions;u.reserved=n.reserved;var c=Object.keys(n.fields),f=0;for(;f<c.length;++f)u.add((typeof n.fields[c[f]].keyType!=="undefined"?a.fromJSON:o.fromJSON)(c[f],n.fields[c[f]]));if(n.oneofs)for(c=Object.keys(n.oneofs),f=0;f<c.length;++f)u.add(s.fromJSON(c[f],n.oneofs[c[f]]));if(n.nested)for(c=Object.keys(n.nested),f=0;f<c.length;++f){var d=n.nested[c[f]];u.add((d.id!==undefined?o.fromJSON:d.fields!==undefined?y.fromJSON:d.values!==undefined?i.fromJSON:d.methods!==undefined?l.fromJSON:r.fromJSON)(c[f],d))}if(n.extensions&&n.extensions.length)u.extensions=n.extensions;if(n.reserved&&n.reserved.length)u.reserved=n.reserved;if(n.group)u.group=true;if(n.comment)u.comment=n.comment;return u};y.prototype.toJSON=function e(t){var n=r.prototype.toJSON.call(this,t);var i=t?Boolean(t.keepComments):false;return d.toObject(["options",n&&n.options||undefined,"oneofs",r.arrayToJSON(this.oneofsArray,t),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",n&&n.nested||undefined,"comment",i?this.comment:undefined])};y.prototype.resolveAll=function e(){var t=this.fieldsArray,n=0;while(n<t.length)t[n++].resolve();var i=this.oneofsArray;n=0;while(n<i.length)i[n++].resolve();return r.prototype.resolveAll.call(this)};y.prototype.get=function e(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null};y.prototype.add=function e(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof o&&t.extend===undefined){if(this._fieldsById?this._fieldsById[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);if(t.parent)t.parent.remove(t);this.fields[t.name]=t;t.message=this;t.onAdd(this);return b(this)}if(t instanceof s){if(!this.oneofs)this.oneofs={};this.oneofs[t.name]=t;t.onAdd(this);return b(this)}return r.prototype.add.call(this,t)};y.prototype.remove=function e(t){if(t instanceof o&&t.extend===undefined){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);delete this.fields[t.name];t.parent=null;t.onRemove(this);return b(this)}if(t instanceof s){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);delete this.oneofs[t.name];t.parent=null;t.onRemove(this);return b(this)}return r.prototype.remove.call(this,t)};y.prototype.isReservedId=function e(t){return r.isReservedId(this.reserved,t)};y.prototype.isReservedName=function e(t){return r.isReservedName(this.reserved,t)};y.prototype.create=function e(t){return new this.ctor(t)};y.prototype.setup=function e(){var t=this.fullName,n=[];for(var r=0;r<this.fieldsArray.length;++r)n.push(this._fieldsArray[r].resolve().resolvedType);this.encode=h(this)({Writer:f,types:n,util:d});this.decode=p(this)({Reader:c,types:n,util:d});this.verify=m(this)({types:n,util:d});this.fromObject=g.fromObject(this)({types:n,util:d});this.toObject=g.toObject(this)({types:n,util:d});var i=v[t];if(i){var s=Object.create(this);s.fromObject=this.fromObject;this.fromObject=i.fromObject.bind(s);s.toObject=this.toObject;this.toObject=i.toObject.bind(s)}return this};y.prototype.encode=function e(t,n){return this.setup().encode(t,n)};y.prototype.encodeDelimited=function e(t,n){return this.encode(t,n&&n.len?n.fork():n).ldelim()};y.prototype.decode=function e(t,n){return this.setup().decode(t,n)};y.prototype.decodeDelimited=function e(t){if(!(t instanceof c))t=c.create(t);return this.decode(t,t.uint32())};y.prototype.verify=function e(t){return this.setup().verify(t)};y.prototype.fromObject=function e(t){return this.setup().fromObject(t)};y.prototype.toObject=function e(t,n){return this.setup().toObject(t,n)};y.d=function e(t){return function e(n){d.decorateType(n,t)}}},{12:12,13:13,14:14,15:15,16:16,20:20,21:21,23:23,25:25,27:27,33:33,37:37,40:40,41:41,42:42}],36:[function(e,t,n){"use strict";var r=n;var i=e(37);var s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var n=0,r={};t|=0;while(n<e.length)r[s[n+t]]=e[n++];return r}r.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);r.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,false,"",i.emptyArray,null]);r.long=o([0,0,0,1,1],7);r.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2);r.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},{37:37}],37:[function(e,t,n){"use strict";var r=t.exports=e(39);var i=e(30);var s,o;r.codegen=e(3);r.fetch=e(5);r.path=e(8);r.fs=r.inquire("fs");r.toArray=function e(t){if(t){var n=Object.keys(t),r=new Array(n.length),i=0;while(i<n.length)r[i]=t[n[i++]];return r}return[]};r.toObject=function e(t){var n={},r=0;while(r<t.length){var i=t[r++],s=t[r++];if(s!==undefined)n[i]=s}return n};var a=/\\/g,l=/"/g;r.isReserved=function e(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)};r.safeProp=function e(t){if(!/^[$\w_]+$/.test(t)||r.isReserved(t))return'["'+t.replace(a,"\\\\").replace(l,'\\"')+'"]';return"."+t};r.ucFirst=function e(t){return t.charAt(0).toUpperCase()+t.substring(1)};var u=/_([a-z])/g;r.camelCase=function e(t){return t.substring(0,1)+t.substring(1).replace(u,(function(e,t){return t.toUpperCase()}))};r.compareFieldsById=function e(t,n){return t.id-n.id};r.decorateType=function t(n,i){if(n.$type){if(i&&n.$type.name!==i){r.decorateRoot.remove(n.$type);n.$type.name=i;r.decorateRoot.add(n.$type)}return n.$type}if(!s)s=e(35);var o=new s(i||n.name);r.decorateRoot.add(o);o.ctor=n;Object.defineProperty(n,"$type",{value:o,enumerable:false});Object.defineProperty(n.prototype,"$type",{value:o,enumerable:false});return o};var c=0;r.decorateEnum=function t(n){if(n.$type)return n.$type;if(!o)o=e(15);var i=new o("Enum"+c++,n);r.decorateRoot.add(i);Object.defineProperty(n,"$type",{value:i,enumerable:false});return i};Object.defineProperty(r,"decorateRoot",{get:function(){return i["decorated"]||(i["decorated"]=new(e(29)))}})},{15:15,29:29,3:3,30:30,35:35,39:39,5:5,8:8}],38:[function(e,t,n){"use strict";t.exports=i;var r=e(39);function i(e,t){this.lo=e>>>0;this.hi=t>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0};s.zzEncode=s.zzDecode=function(){return this};s.length=function(){return 1};var o=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function e(t){if(t===0)return s;var n=t<0;if(n)t=-t;var r=t>>>0,o=(t-r)/4294967296>>>0;if(n){o=~o>>>0;r=~r>>>0;if(++r>4294967295){r=0;if(++o>4294967295)o=0}}return new i(r,o)};i.from=function e(t){if(typeof t==="number")return i.fromNumber(t);if(r.isString(t)){if(r.Long)t=r.Long.fromString(t);else return i.fromNumber(parseInt(t,10))}return t.low||t.high?new i(t.low>>>0,t.high>>>0):s};i.prototype.toNumber=function e(t){if(!t&&this.hi>>>31){var n=~this.lo+1>>>0,r=~this.hi>>>0;if(!n)r=r+1>>>0;return-(n+r*4294967296)}return this.lo+this.hi*4294967296};i.prototype.toLong=function e(t){return r.Long?new r.Long(this.lo|0,this.hi|0,Boolean(t)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;i.fromHash=function e(t){if(t===o)return s;return new i((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)};i.prototype.toHash=function e(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};i.prototype.zzEncode=function e(){var t=this.hi>>31;this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0;this.lo=(this.lo<<1^t)>>>0;return this};i.prototype.zzDecode=function e(){var t=-(this.lo&1);this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0;this.hi=(this.hi>>>1^t)>>>0;return this};i.prototype.length=function e(){var t=this.lo,n=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return r===0?n===0?t<16384?t<128?1:2:t<2097152?3:4:n<16384?n<128?5:6:n<2097152?7:8:r<128?9:10}},{39:39}],39:[function(e,t,n){"use strict";var r=n;r.asPromise=e(1);r.base64=e(2);r.EventEmitter=e(4);r.float=e(6);r.inquire=e(7);r.utf8=e(10);r.pool=e(9);r.LongBits=e(38);r.emptyArray=Object.freeze?Object.freeze([]):[];r.emptyObject=Object.freeze?Object.freeze({}):{};r.isNode=Boolean(global.process&&global.process.versions&&global.process.versions.node);r.isInteger=Number.isInteger||function e(t){return typeof t==="number"&&isFinite(t)&&Math.floor(t)===t};r.isString=function e(t){return typeof t==="string"||t instanceof String};r.isObject=function e(t){return t&&typeof t==="object"};r.isset=r.isSet=function e(t,n){var r=t[n];if(r!=null&&t.hasOwnProperty(n))return typeof r!=="object"||(Array.isArray(r)?r.length:Object.keys(r).length)>0;return false};r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}();r._Buffer_from=null;r._Buffer_allocUnsafe=null;r.newBuffer=function e(t){return typeof t==="number"?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):typeof Uint8Array==="undefined"?t:new Uint8Array(t)};r.Array=typeof Uint8Array!=="undefined"?Uint8Array:Array;r.Long=global.dcodeIO&&global.dcodeIO.Long||r.inquire("long");r.key2Re=/^true|false|0|1$/;r.key32Re=/^-?(?:0|[1-9][0-9]*)$/;r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;r.longToHash=function e(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash};r.longFromHash=function e(t,n){var i=r.LongBits.fromHash(t);if(r.Long)return r.Long.fromBits(i.lo,i.hi,n);return i.toNumber(Boolean(n))};function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)if(e[r[i]]===undefined||!n)e[r[i]]=t[r[i]];return e}r.merge=i;r.lcFirst=function e(t){return t.charAt(0).toLowerCase()+t.substring(1)};function s(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}});if(Error.captureStackTrace)Error.captureStackTrace(this,t);else Object.defineProperty(this,"stack",{value:(new Error).stack||""});if(n)i(this,n)}(t.prototype=Object.create(Error.prototype)).constructor=t;Object.defineProperty(t.prototype,"name",{get:function(){return e}});t.prototype.toString=function e(){return this.name+": "+this.message};return t}r.newError=s;r.ProtocolError=s("ProtocolError");r.oneOfGetter=function e(t){var n={};for(var r=0;r<t.length;++r)n[t[r]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(n[e[t]]===1&&this[e[t]]!==undefined&&this[e[t]]!==null)return e[t]}};r.oneOfSetter=function e(t){return function(e){for(var n=0;n<t.length;++n)if(t[n]!==e)delete this[t[n]]}};r.toJSONOptions={longs:String,enums:String,bytes:String,json:true};r._configure=function(){var e=r.Buffer;if(!e){r._Buffer_from=r._Buffer_allocUnsafe=null;return}r._Buffer_from=e.from!==Uint8Array.from&&e.from||function t(n,r){return new e(n,r)};r._Buffer_allocUnsafe=e.allocUnsafe||function t(n){return new e(n)}}},{1:1,10:10,2:2,38:38,4:4,6:6,7:7,9:9}],40:[function(e,t,n){"use strict";t.exports=l;var r=e(15),i=e(37);function s(e,t){return e.name+": "+t+(e.repeated&&t!=="array"?"[]":e.map&&t!=="object"?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,n,i){if(t.resolvedType){if(t.resolvedType instanceof r){e("switch(%s){",i)("default:")("return%j",s(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),a=0;a<o.length;++a)e("case %i:",t.resolvedType.values[o[a]]);e("break")("}")}else{e("{")("var e=types[%i].verify(%s);",n,i)("if(e)")("return%j+e",t.name+".")("}")}}else{switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",s(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",s(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",s(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",s(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",s(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",s(t,"buffer"));break}}return e}function a(e,t,n){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",n)("return%j",s(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",n)("return%j",s(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",n)("return%j",s(t,"boolean key"));break}return e}function l(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected");var n=e.oneofsArray,r={};if(n.length)t("var p={}");for(var l=0;l<e.fieldsArray.length;++l){var u=e._fieldsArray[l].resolve(),c="m"+i.safeProp(u.name);if(u.optional)t("if(%s!=null&&m.hasOwnProperty(%j)){",c,u.name);if(u.map){t("if(!util.isObject(%s))",c)("return%j",s(u,"object"))("var k=Object.keys(%s)",c)("for(var i=0;i<k.length;++i){");a(t,u,"k[i]");o(t,u,l,c+"[k[i]]")("}")}else if(u.repeated){t("if(!Array.isArray(%s))",c)("return%j",s(u,"array"))("for(var i=0;i<%s.length;++i){",c);o(t,u,l,c+"[i]")("}")}else{if(u.partOf){var f=i.safeProp(u.partOf.name);if(r[u.partOf.name]===1)t("if(p%s===1)",f)("return%j",u.partOf.name+": multiple values");r[u.partOf.name]=1;t("p%s=1",f)}o(t,u,l,c)}if(u.optional)t("}")}return t("return null")}},{15:15,37:37}],41:[function(e,t,n){"use strict";var r=n;var i=e(21);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=this.lookup(e["@type"]);if(t){var n=e["@type"].charAt(0)==="."?e["@type"].substr(1):e["@type"];return this.create({type_url:"/"+n,value:t.encode(t.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){if(t&&t.json&&e.type_url&&e.value){var n=e.type_url.substring(e.type_url.lastIndexOf("/")+1);var r=this.lookup(n);if(r)e=r.decode(e.value)}if(!(e instanceof this.ctor)&&e instanceof i){var s=e.$type.toObject(e,t);s["@type"]=e.$type.fullName;return s}return this.toObject(e,t)}}},{21:21}],42:[function(e,t,n){"use strict";t.exports=f;var r=e(39);var i;var s=r.LongBits,o=r.base64,a=r.utf8;function l(e,t,n){this.fn=e;this.len=t;this.next=undefined;this.val=n}function u(){}function c(e){this.head=e.head;this.tail=e.tail;this.len=e.len;this.next=e.states}function f(){this.len=0;this.head=new l(u,0,0);this.tail=this.head;this.states=null}f.create=r.Buffer?function e(){return(f.create=function e(){return new i})()}:function e(){return new f};f.alloc=function e(t){return new r.Array(t)};if(r.Array!==Array)f.alloc=r.pool(f.alloc,r.Array.prototype.subarray);f.prototype._push=function e(t,n,r){this.tail=this.tail.next=new l(t,n,r);this.len+=n;return this};function d(e,t,n){t[n]=e&255}function h(e,t,n){while(e>127){t[n++]=e&127|128;e>>>=7}t[n]=e}function p(e,t){this.len=e;this.next=undefined;this.val=t}p.prototype=Object.create(l.prototype);p.prototype.fn=h;f.prototype.uint32=function e(t){this.len+=(this.tail=this.tail.next=new p((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len;return this};f.prototype.int32=function e(t){return t<0?this._push(m,10,s.fromNumber(t)):this.uint32(t)};f.prototype.sint32=function e(t){return this.uint32((t<<1^t>>31)>>>0)};function m(e,t,n){while(e.hi){t[n++]=e.lo&127|128;e.lo=(e.lo>>>7|e.hi<<25)>>>0;e.hi>>>=7}while(e.lo>127){t[n++]=e.lo&127|128;e.lo=e.lo>>>7}t[n++]=e.lo}f.prototype.uint64=function e(t){var n=s.from(t);return this._push(m,n.length(),n)};f.prototype.int64=f.prototype.uint64;f.prototype.sint64=function e(t){var n=s.from(t).zzEncode();return this._push(m,n.length(),n)};f.prototype.bool=function e(t){return this._push(d,1,t?1:0)};function g(e,t,n){t[n]=e&255;t[n+1]=e>>>8&255;t[n+2]=e>>>16&255;t[n+3]=e>>>24}f.prototype.fixed32=function e(t){return this._push(g,4,t>>>0)};f.prototype.sfixed32=f.prototype.fixed32;f.prototype.fixed64=function e(t){var n=s.from(t);return this._push(g,4,n.lo)._push(g,4,n.hi)};f.prototype.sfixed64=f.prototype.fixed64;f.prototype.float=function e(t){return this._push(r.float.writeFloatLE,4,t)};f.prototype.double=function e(t){return this._push(r.float.writeDoubleLE,8,t)};var v=r.Array.prototype.set?function e(t,n,r){n.set(t,r)}:function e(t,n,r){for(var i=0;i<t.length;++i)n[r+i]=t[i]};f.prototype.bytes=function e(t){var n=t.length>>>0;if(!n)return this._push(d,1,0);if(r.isString(t)){var i=f.alloc(n=o.length(t));o.decode(t,i,0);t=i}return this.uint32(n)._push(v,n,t)};f.prototype.string=function e(t){var n=a.length(t);return n?this.uint32(n)._push(a.write,n,t):this._push(d,1,0)};f.prototype.fork=function e(){this.states=new c(this);this.head=this.tail=new l(u,0,0);this.len=0;return this};f.prototype.reset=function e(){if(this.states){this.head=this.states.head;this.tail=this.states.tail;this.len=this.states.len;this.states=this.states.next}else{this.head=this.tail=new l(u,0,0);this.len=0}return this};f.prototype.ldelim=function e(){var t=this.head,n=this.tail,r=this.len;this.reset().uint32(r);if(r){this.tail.next=t.next;this.tail=n;this.len+=r}return this};f.prototype.finish=function e(){var t=this.head.next,n=this.constructor.alloc(this.len),r=0;while(t){t.fn(t.val,n,r);r+=t.len;t=t.next}return n};f._configure=function(e){i=e}},{39:39}],43:[function(e,t,n){"use strict";t.exports=o;var r=e(42);(o.prototype=Object.create(r.prototype)).constructor=o;var i=e(39);var s=i.Buffer;function o(){r.call(this)}o.alloc=function e(t){return(o.alloc=i._Buffer_allocUnsafe)(t)};var a=s&&s.prototype instanceof Uint8Array&&s.prototype.set.name==="set"?function e(t,n,r){n.set(t,r)}:function e(t,n,r){if(t.copy)t.copy(n,r,0,t.length);else for(var i=0;i<t.length;)n[r++]=t[i++]};o.prototype.bytes=function e(t){if(i.isString(t))t=i._Buffer_from(t,"base64");var n=t.length>>>0;this.uint32(n);if(n)this._push(a,n,t);return this};function l(e,t,n){if(e.length<40)i.utf8.write(e,t,n);else t.utf8Write(e,n)}o.prototype.string=function e(t){var n=s.byteLength(t);this.uint32(n);if(n)this._push(l,n,t);return this}},{39:39,42:42}]},{},[19])})(typeof window==="object"&&window||typeof self==="object"&&self||this);(function(e){"use strict";var t=e.Reader,n=e.Writer,r=e.util;var i=e.roots["push-server"]||(e.roots["push-server"]={});i.RequestBatch=function(){function e(e){this.requests=[];if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.prototype.requests=r.emptyArray;e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();if(t.requests!=null&&t.requests.length)for(var s=0;s<t.requests.length;++s)i.Request.encode(t.requests[s],r.uint32(10).fork()).ldelim();return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.RequestBatch;while(n.pos<s){var a=n.uint32();switch(a>>>3){case 1:if(!(o.requests&&o.requests.length))o.requests=[];o.requests.push(i.Request.decode(n,n.uint32()));break;default:n.skipType(a&7);break}}return o};return e}();i.Request=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.prototype.incomingMessages=null;e.prototype.channelStats=null;e.prototype.serverStats=null;var s;Object.defineProperty(e.prototype,"command",{get:r.oneOfGetter(s=["incomingMessages","channelStats","serverStats"]),set:r.oneOfSetter(s)});e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();if(t.incomingMessages!=null&&t.hasOwnProperty("incomingMessages"))i.IncomingMessagesRequest.encode(t.incomingMessages,r.uint32(10).fork()).ldelim();if(t.channelStats!=null&&t.hasOwnProperty("channelStats"))i.ChannelStatsRequest.encode(t.channelStats,r.uint32(18).fork()).ldelim();if(t.serverStats!=null&&t.hasOwnProperty("serverStats"))i.ServerStatsRequest.encode(t.serverStats,r.uint32(26).fork()).ldelim();return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.Request;while(n.pos<s){var a=n.uint32();switch(a>>>3){case 1:o.incomingMessages=i.IncomingMessagesRequest.decode(n,n.uint32());break;case 2:o.channelStats=i.ChannelStatsRequest.decode(n,n.uint32());break;case 3:o.serverStats=i.ServerStatsRequest.decode(n,n.uint32());break;default:n.skipType(a&7);break}}return o};return e}();i.IncomingMessagesRequest=function(){function e(e){this.messages=[];if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.prototype.messages=r.emptyArray;e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();if(t.messages!=null&&t.messages.length)for(var s=0;s<t.messages.length;++s)i.IncomingMessage.encode(t.messages[s],r.uint32(10).fork()).ldelim();return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.IncomingMessagesRequest;while(n.pos<s){var a=n.uint32();switch(a>>>3){case 1:if(!(o.messages&&o.messages.length))o.messages=[];o.messages.push(i.IncomingMessage.decode(n,n.uint32()));break;default:n.skipType(a&7);break}}return o};return e}();i.IncomingMessage=function(){function e(e){this.receivers=[];if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.prototype.receivers=r.emptyArray;e.prototype.sender=null;e.prototype.body="";e.prototype.expiry=0;e.prototype.type="";e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();if(t.receivers!=null&&t.receivers.length)for(var s=0;s<t.receivers.length;++s)i.Receiver.encode(t.receivers[s],r.uint32(10).fork()).ldelim();if(t.sender!=null&&t.hasOwnProperty("sender"))i.Sender.encode(t.sender,r.uint32(18).fork()).ldelim();if(t.body!=null&&t.hasOwnProperty("body"))r.uint32(26).string(t.body);if(t.expiry!=null&&t.hasOwnProperty("expiry"))r.uint32(32).uint32(t.expiry);if(t.type!=null&&t.hasOwnProperty("type"))r.uint32(42).string(t.type);return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.IncomingMessage;while(n.pos<s){var a=n.uint32();switch(a>>>3){case 1:if(!(o.receivers&&o.receivers.length))o.receivers=[];o.receivers.push(i.Receiver.decode(n,n.uint32()));break;case 2:o.sender=i.Sender.decode(n,n.uint32());break;case 3:o.body=n.string();break;case 4:o.expiry=n.uint32();break;case 5:o.type=n.string();break;default:n.skipType(a&7);break}}return o};return e}();i.ChannelStatsRequest=function(){function e(e){this.channels=[];if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.prototype.channels=r.emptyArray;e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();if(t.channels!=null&&t.channels.length)for(var s=0;s<t.channels.length;++s)i.ChannelId.encode(t.channels[s],r.uint32(10).fork()).ldelim();return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.ChannelStatsRequest;while(n.pos<s){var a=n.uint32();switch(a>>>3){case 1:if(!(o.channels&&o.channels.length))o.channels=[];o.channels.push(i.ChannelId.decode(n,n.uint32()));break;default:n.skipType(a&7);break}}return o};return e}();i.ChannelId=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.prototype.id=r.newBuffer([]);e.prototype.isPrivate=false;e.prototype.signature=r.newBuffer([]);e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();if(t.id!=null&&t.hasOwnProperty("id"))r.uint32(10).bytes(t.id);if(t.isPrivate!=null&&t.hasOwnProperty("isPrivate"))r.uint32(16).bool(t.isPrivate);if(t.signature!=null&&t.hasOwnProperty("signature"))r.uint32(26).bytes(t.signature);return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.ChannelId;while(n.pos<s){var a=n.uint32();switch(a>>>3){case 1:o.id=n.bytes();break;case 2:o.isPrivate=n.bool();break;case 3:o.signature=n.bytes();break;default:n.skipType(a&7);break}}return o};return e}();i.ServerStatsRequest=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.ServerStatsRequest;while(n.pos<s){var a=n.uint32();switch(a>>>3){default:n.skipType(a&7);break}}return o};return e}();i.Sender=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.prototype.type=0;e.prototype.id=r.newBuffer([]);e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();if(t.type!=null&&t.hasOwnProperty("type"))r.uint32(8).int32(t.type);if(t.id!=null&&t.hasOwnProperty("id"))r.uint32(18).bytes(t.id);return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.Sender;while(n.pos<s){var a=n.uint32();switch(a>>>3){case 1:o.type=n.int32();break;case 2:o.id=n.bytes();break;default:n.skipType(a&7);break}}return o};return e}();i.SenderType=function(){var e={},t=Object.create(e);t[e[0]="UNKNOWN"]=0;t[e[1]="CLIENT"]=1;t[e[2]="BACKEND"]=2;return t}();i.Receiver=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.prototype.id=r.newBuffer([]);e.prototype.isPrivate=false;e.prototype.signature=r.newBuffer([]);e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();if(t.id!=null&&t.hasOwnProperty("id"))r.uint32(10).bytes(t.id);if(t.isPrivate!=null&&t.hasOwnProperty("isPrivate"))r.uint32(16).bool(t.isPrivate);if(t.signature!=null&&t.hasOwnProperty("signature"))r.uint32(26).bytes(t.signature);return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.Receiver;while(n.pos<s){var a=n.uint32();switch(a>>>3){case 1:o.id=n.bytes();break;case 2:o.isPrivate=n.bool();break;case 3:o.signature=n.bytes();break;default:n.skipType(a&7);break}}return o};return e}();i.ResponseBatch=function(){function e(e){this.responses=[];if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.prototype.responses=r.emptyArray;e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();if(t.responses!=null&&t.responses.length)for(var s=0;s<t.responses.length;++s)i.Response.encode(t.responses[s],r.uint32(10).fork()).ldelim();return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.ResponseBatch;while(n.pos<s){var a=n.uint32();switch(a>>>3){case 1:if(!(o.responses&&o.responses.length))o.responses=[];o.responses.push(i.Response.decode(n,n.uint32()));break;default:n.skipType(a&7);break}}return o};return e}();i.Response=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.prototype.outgoingMessages=null;e.prototype.channelStats=null;e.prototype.serverStats=null;var s;Object.defineProperty(e.prototype,"command",{get:r.oneOfGetter(s=["outgoingMessages","channelStats","serverStats"]),set:r.oneOfSetter(s)});e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();if(t.outgoingMessages!=null&&t.hasOwnProperty("outgoingMessages"))i.OutgoingMessagesResponse.encode(t.outgoingMessages,r.uint32(10).fork()).ldelim();if(t.channelStats!=null&&t.hasOwnProperty("channelStats"))i.ChannelStatsResponse.encode(t.channelStats,r.uint32(18).fork()).ldelim();if(t.serverStats!=null&&t.hasOwnProperty("serverStats"))i.JsonResponse.encode(t.serverStats,r.uint32(26).fork()).ldelim();return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.Response;while(n.pos<s){var a=n.uint32();switch(a>>>3){case 1:o.outgoingMessages=i.OutgoingMessagesResponse.decode(n,n.uint32());break;case 2:o.channelStats=i.ChannelStatsResponse.decode(n,n.uint32());break;case 3:o.serverStats=i.JsonResponse.decode(n,n.uint32());break;default:n.skipType(a&7);break}}return o};return e}();i.OutgoingMessagesResponse=function(){function e(e){this.messages=[];if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.prototype.messages=r.emptyArray;e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();if(t.messages!=null&&t.messages.length)for(var s=0;s<t.messages.length;++s)i.OutgoingMessage.encode(t.messages[s],r.uint32(10).fork()).ldelim();return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.OutgoingMessagesResponse;while(n.pos<s){var a=n.uint32();switch(a>>>3){case 1:if(!(o.messages&&o.messages.length))o.messages=[];o.messages.push(i.OutgoingMessage.decode(n,n.uint32()));break;default:n.skipType(a&7);break}}return o};return e}();i.OutgoingMessage=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.prototype.id=r.newBuffer([]);e.prototype.body="";e.prototype.expiry=0;e.prototype.created=0;e.prototype.sender=null;e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();if(t.id!=null&&t.hasOwnProperty("id"))r.uint32(10).bytes(t.id);if(t.body!=null&&t.hasOwnProperty("body"))r.uint32(18).string(t.body);if(t.expiry!=null&&t.hasOwnProperty("expiry"))r.uint32(24).uint32(t.expiry);if(t.created!=null&&t.hasOwnProperty("created"))r.uint32(37).fixed32(t.created);if(t.sender!=null&&t.hasOwnProperty("sender"))i.Sender.encode(t.sender,r.uint32(42).fork()).ldelim();return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.OutgoingMessage;while(n.pos<s){var a=n.uint32();switch(a>>>3){case 1:o.id=n.bytes();break;case 2:o.body=n.string();break;case 3:o.expiry=n.uint32();break;case 4:o.created=n.fixed32();break;case 5:o.sender=i.Sender.decode(n,n.uint32());break;default:n.skipType(a&7);break}}return o};return e}();i.ChannelStatsResponse=function(){function e(e){this.channels=[];if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.prototype.channels=r.emptyArray;e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();if(t.channels!=null&&t.channels.length)for(var s=0;s<t.channels.length;++s)i.ChannelStats.encode(t.channels[s],r.uint32(10).fork()).ldelim();return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.ChannelStatsResponse;while(n.pos<s){var a=n.uint32();switch(a>>>3){case 1:if(!(o.channels&&o.channels.length))o.channels=[];o.channels.push(i.ChannelStats.decode(n,n.uint32()));break;default:n.skipType(a&7);break}}return o};return e}();i.ChannelStats=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.prototype.id=r.newBuffer([]);e.prototype.isPrivate=false;e.prototype.isOnline=false;e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();if(t.id!=null&&t.hasOwnProperty("id"))r.uint32(10).bytes(t.id);if(t.isPrivate!=null&&t.hasOwnProperty("isPrivate"))r.uint32(16).bool(t.isPrivate);if(t.isOnline!=null&&t.hasOwnProperty("isOnline"))r.uint32(24).bool(t.isOnline);return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.ChannelStats;while(n.pos<s){var a=n.uint32();switch(a>>>3){case 1:o.id=n.bytes();break;case 2:o.isPrivate=n.bool();break;case 3:o.isOnline=n.bool();break;default:n.skipType(a&7);break}}return o};return e}();i.JsonResponse=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)if(e[t[n]]!=null)this[t[n]]=e[t[n]]}e.prototype.json="";e.create=function t(n){return new e(n)};e.encode=function e(t,r){if(!r)r=n.create();if(t.json!=null&&t.hasOwnProperty("json"))r.uint32(10).string(t.json);return r};e.decode=function e(n,r){if(!(n instanceof t))n=t.create(n);var s=r===undefined?n.len:n.pos+r,o=new i.JsonResponse;while(n.pos<s){var a=n.uint32();switch(a>>>3){case 1:o.json=n.string();break;default:n.skipType(a&7);break}}return o};return e}();return i})(typeof window==="object"&&typeof window.protobuf==="object"&&window.protobuf||typeof self==="object"&&typeof self.protobuf==="object"&&self.protobuf||typeof protobuf==="object"&&protobuf);(function(e){if(!e.BX){e.BX={}}var t=e.BX;t.Promise=function(e,t){this.state=null;this.value=null;this.reason=null;this.next=null;this.ctx=t||this;this.onFulfilled=[];this.onRejected=[]};t.Promise.prototype.fulfill=function(e){this.checkState();this.value=e;this.state=true;this.execute()};t.Promise.prototype.reject=function(e){this.checkState();this.reason=e;this.state=false;this.execute()};t.Promise.prototype.then=function(e,n){if(typeof e=="function"||e instanceof Function){this.onFulfilled.push(e)}if(typeof n=="function"||n instanceof Function){this.onRejected.push(n)}if(this.next===null){this.next=new t.Promise(null,this.ctx)}if(this.state!==null){this.execute()}return this.next};t.Promise.prototype.catch=function(e){if(typeof e=="function"||e instanceof Function){this.onRejected.push(e)}if(this.next===null){this.next=new t.Promise(null,this.ctx)}if(this.state!==null){this.execute()}return this.next};t.Promise.prototype.setAutoResolve=function(e,t){this.timer=setTimeout(function(){if(this.state===null){this[e?"fulfill":"reject"]()}}.bind(this),t||15)};t.Promise.prototype.cancelAutoResolve=function(){clearTimeout(this.timer)};t.Promise.prototype.resolve=function(e){var t=this;if(this===e){this.reject(new TypeError("Promise cannot fulfill or reject itself"))}else if(e&&e.toString()==="[object BX.Promise]"){e.then((function(e){t.fulfill(e)}),(function(e){t.reject(e)}))}else{this.fulfill(e)}};t.Promise.prototype.toString=function(){return"[object BX.Promise]"};t.Promise.prototype.execute=function(){if(this.state===null){return}var n=undefined;var r=undefined;var i=undefined;var s;if(this.state===true){if(this.onFulfilled.length){try{for(s=0;s<this.onFulfilled.length;s++){i=this.onFulfilled[s].apply(this.ctx,[this.value]);if(typeof i!="undefined"){n=i}}}catch(n){if("console"in e){console.dir(n)}if(typeof t.debug!=="undefined"){t.debug(n)}r=n}}else{n=this.value}}else if(this.state===false){if(this.onRejected.length){try{for(s=0;s<this.onRejected.length;s++){i=this.onRejected[s].apply(this.ctx,[this.reason]);if(typeof i!="undefined"){n=i}}}catch(n){if("console"in e){console.dir(n)}if(typeof t.debug!=="undefined"){t.debug(n)}r=n}}else{r=this.reason}}if(this.next!==null){if(typeof r!="undefined"){this.next.reject(r)}else if(typeof n!="undefined"){this.next.resolve(n)}}};t.Promise.prototype.checkState=function(){if(this.state!==null){throw new Error("You can not do fulfill() or reject() multiple times")}}})(window);"use strict";(function(){if(!window.BX){window.BX={}}else if(window.BX.RestClient){return}var e=window.BX;e.RestClient=function(e){e=e||{};this.endpoint=e.endpoint||"/rest";this.queryParams=e.queryParams||"";this.cors=e.cors===true};e.RestClient.prototype.callMethod=function(e,t,n,i,s){return r({method:e,data:t,callback:n,sendCallback:i,logTag:s,endpoint:this.endpoint,queryParams:this.queryParams,cors:this.cors})};e.RestClient.prototype.callBatch=function(e,t,i,s,o){var a=n.isArray(e)?[]:{};var l=0;var u=function(e){r.batch(e,t,i,s,this.endpoint,this.queryParams,this.cors,o)}.bind(this);for(var c in e){var f=null,d=null;if(!!e[c]&&e.hasOwnProperty(c)){if(n.isArray(e[c])){f=e[c][0];d=e[c][1]}else if(!!e[c].method){f=e[c].method;d=e[c].params}if(!!f){l++;a[c]=[f,d]}}}if(l>0){var h=function(e){return function(t){a[e]=a[e][0]+"?"+t;if(--l<=0)u(a)}};for(var p in a){if(a.hasOwnProperty(p)){r.prepareData(a[p][1],"",h(p))}}}};e.RestClient.prototype.setEndpoint=function(e){this.endpoint=e};e.RestClient.prototype.enableCorsRequest=function(e){this.cors=e===true};e.RestClient.prototype.setQueryParams=function(e){this.queryParams=e};if(typeof e.namespace!=="undefined"){var t=new e.RestClient;if(typeof e.rest=="undefined"){e.rest={}}e.rest.callMethod=function(e,n,r,i,s){return t.callMethod(e,n,r,i,s)};e.rest.callBatch=function(e,n,r,i,s){return t.callBatch(e,n,r,i,s)}}var n={isArray:function(e){return e&&Object.prototype.toString.call(e)=="[object Array]"},isFunction:function(e){return e===null?false:typeof e=="function"||e instanceof Function},isString:function(e){return e===""?true:e?typeof e=="string"||e instanceof String:false},isDomNode:function(e){return e&&typeof e=="object"&&"nodeType"in e},isDate:function(e){return e&&Object.prototype.toString.call(e)=="[object Date]"},buildQueryString:function(e){var t="";for(var n in e){if(!e.hasOwnProperty(n)){continue}var r=e[n];if(this.isArray(r)){r.forEach((function(e,r){t+=encodeURIComponent(n+"["+r+"]")+"="+encodeURIComponent(e)+"&"}))}else{t+=encodeURIComponent(n)+"="+encodeURIComponent(r)+"&"}}if(t.length>0){t=t.substr(0,t.length-1)}return t},clone:function(e,t){var n,r,i;if(t!==false)t=true;if(e===null)return null;if(this.isDomNode(e)){n=e.cloneNode(t)}else if(typeof e=="object"){if(this.isArray(e)){n=[];for(r=0,i=e.length;r<i;r++){if(typeof e[r]=="object"&&t)n[r]=this.clone(e[r],t);else n[r]=e[r]}}else{n={};if(e.constructor){if(this.isDate(e))n=new Date(e);else n=new e.constructor}for(r in e){if(typeof e[r]=="object"&&t)n[r]=this.clone(e[r],t);else n[r]=e[r]}}}else{n=e}return n}};var r=function(t){var s=!!t.callback&&n.isFunction(t.callback);var o=typeof e.Promise==="undefined"||s?null:new e.Promise;var a=t.sendCallback||function(){};var l=t.withoutRestoringCsrf||false;var u=t.loginAttempt||0;var c=r.xhr();var f=t.endpoint+"/"+r.escape(t.method)+".json"+(t.logTag?"?logTag="+t.logTag:"");c.open("POST",f);c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");if(t.cors){c.withCredentials=true}var d=false;c.onprogress=function(){};c.ontimeout=function(){};c.timeout=0;c.onload=function(){if(d)return;c.onload=function(){};var n=r.isSuccess(c);var a=c.status;if(n){var f=c.responseText;if(f.length>0){try{f=JSON.parse(f)}catch(e){n=false}}if(a==401){if(f.extended_error==="user_not_authorized"&&u===0){if(f.sessid){console.warn("BX.rest: csrf-token has expired, replace to a new token");e.message({bitrix_sessid:f.sessid})}if("BXDesktopSystem"in window){console.warn("BX.rest: you are not authorized, trying to log in");t.loginAttempt=1;BXDesktopSystem.Login({success:function(){console.warn("BX.rest: successfully logged in, repeating request");if(!s){t.callback=function(e){if(e.error()){o.reject(e)}else{o.fulfill(e)}}}r(t)}});return true}}else if(f.sessid&&!l){e.message({bitrix_sessid:f.sessid});console.warn("BX.rest: your csrf-token has expired, send query with a new token");t.withoutRestoringCsrf=true;if(!s){t.callback=function(e){if(e.error()){o.reject(e)}else{o.fulfill(e)}}}r(t);return true}}else if(a==0){f={result:{},error:"ERROR_NETWORK",error_description:"A network error occurred while the request was being executed."}}else{if(a==200){if(f.length<=0){f={result:{},error:"BLANK_ANSWER",error_description:"Empty answer with correct http code, network error possible."}}}else if(f.length<=0){f={result:{},error:"BLANK_ANSWER_WITH_ERROR_CODE",error_description:"Empty answer with error http code: "+a}}}}c=null;if(n){var h=new i(f,t,a);if(s){t.callback.apply(window,[h])}else{if(h.error()){o.reject(h)}else{o.fulfill(h)}}}else{var h=new i({error:"ERROR_UNEXPECTED_ANSWER",error_description:"Server returned an unexpected response.",ex:{}},t,0);if(s){t.callback.apply(window,[h])}else{o.reject(h)}}};c.onerror=function(e){var n=new i({error:"ERROR_NETWORK",error_description:"A network error occurred while the request was being executed.",ex:e},t,0);if(s){t.callback.apply(window,[n])}else{o.reject(n)}};var h="";if(t.queryParams){h=n.buildQueryString(t.queryParams)}else if(typeof e.bitrix_sessid!=="undefined"){h="sessid="+e.bitrix_sessid()}if(typeof t.start!=="undefined"){h+="&start="+parseInt(t.start)}if(!!t.data){r.prepareData(t.data,"",(function(e){h+="&"+e;c.send(h);a(c)}))}else{c.send(h);a(c)}return s||!o?c:o};r.batch=function(e,t,s,o,a,l,u,c){return r({method:"batch",data:{halt:!!s?1:0,cmd:e},callback:function(r,s,o){if(!t){return false}var c=r.error();var f=r.data();var d=n.isArray(e)?[]:{};for(var h in e){if(!!e[h]&&e.hasOwnProperty(h)){if(n.isString(e[h])){var p=e[h].split("?")}else{p=[n.isArray(e[h])?e[h][0]:e[h].method,n.isArray(e[h])?e[h][1]:e[h].data]}if(f&&typeof f.result!=="undefined"&&(typeof f.result[h]!=="undefined"||typeof f.result_error[h]!=="undefined")){d[h]=new i({result:typeof f.result[h]!=="undefined"?f.result[h]:{},error:f.result_error[h]||undefined,total:f.result_total[h],time:f.result_time[h],next:f.result_next[h]},{method:p[0],data:p[1],callback:t,endpoint:a,queryParams:l,cors:u},r.status)}else if(c){d[h]=new i({result:{},error:c.ex,total:0},{method:p[0],data:p[1],callback:t,endpoint:a,queryParams:l,cors:u},r.status)}}}t.apply(window,[d])},sendCallback:o,endpoint:a,queryParams:l,cors:u,logTag:c})};r.xhr=function(){return new XMLHttpRequest};r.escape=function(e){return encodeURIComponent(e)};r.prepareData=function(e,t,i){var s="",o=[];if(n.isString(e)||e===null){i.call(document,e||"")}else{for(var l in e){if(!e.hasOwnProperty(l)){continue}var u=r.escape(l);if(t)u=t+"["+u+"]";if(typeof e[l]==="object"){if(n.isArray(e[l])&&e[l].length<=0){continue}o.push([u,e[l]])}else{if(s.length>0){s+="&"}if(typeof e[l]==="boolean"){s+=u+"="+(e[l]?1:0)}else{s+=u+"="+r.escape(e[l])}}}var c=o.length;if(c>0){var f=function(e){s+=(!!e?"&":"")+e;if(--c<=0){i.call(document,s)}};var d=c;for(var l=0;l<d;l++){if(n.isDomNode(o[l][1])){if(o[l][1].tagName.toUpperCase()==="INPUT"&&o[l][1].type==="file"){if(a.canUse()){a(o[l][1],function(e){return function(t){if(n.isArray(t)&&t.length>0){f(e+"[0]="+r.escape(t[0])+"&"+e+"[1]="+r.escape(t[1]))}else{f(e+"=")}}}(o[l][0]))}}else if(typeof o[l][1].value!=="undefined"){f(o[l][0]+"="+r.escape(o[l][1].value))}else{f("")}}else if(n.isDate(o[l][1])){f(o[l][0]+"="+r.escape(o[l][1].toJSON()))}else if(n.isArray(o[l][1])&&o[l][1].length<=0){f(o[l][0]+"=")}else{r.prepareData(o[l][1],o[l][0],f)}}}else{i.call(document,s)}}};r.isSuccess=function(e){return typeof e.status==="undefined"||e.status>=200&&e.status<300||e.status===304||e.status>=400&&e.status<500||e.status===1223||e.status===0};var i=function(e,t,r){this.answer=e;this.query=n.clone(t);this.status=r;if(typeof this.answer.next!=="undefined"){this.answer.next=parseInt(this.answer.next)}if(typeof this.answer.error!=="undefined"){this.answer.ex=new s(this.status,typeof this.answer.error==="string"?this.answer:this.answer.error)}};i.prototype.data=function(){return this.answer.result};i.prototype.time=function(){return this.answer.time};i.prototype.error=function(){return this.answer.ex};i.prototype.error_description=function(){return this.answer.error_description};i.prototype.more=function(){return!isNaN(this.answer.next)};i.prototype.total=function(){return parseInt(this.answer.total)};i.prototype.next=function(e){if(this.more()){this.query.start=this.answer.next;if(!!e&&n.isFunction(e)){this.query.callback=e}return r(this.query)}return false};var s=function(e,t){this.status=e;this.ex=t};s.prototype.getError=function(){return this.ex};s.prototype.getStatus=function(){return this.status};s.prototype.toString=function(){return this.ex.error+(!!this.ex.error_description?": "+this.ex.error_description:"")+" ("+this.status+")"};var o=function(e){var t=new Uint8Array(e);var n="";if(typeof t.forEach==="function"){t.forEach((function(e){n+=String.fromCharCode(e)}))}else{var r=t.length;for(var i=0;i<r;i+=1){n+=String.fromCharCode(t[i])}}return btoa(n)};var a=function(e,t){if(a.canUse()){var n=e.files,r=0,i=e.multiple?[]:null;for(var s=0,l;l=n[s];s++){var u=new window.FileReader;u.BXFILENAME=n[s].name;u.onload=function(e){e=e||window.event;var n=[this.BXFILENAME,o(e.target.result)];if(i===null)i=n;else i.push(n);if(--r<=0){t(i)}};u.readAsArrayBuffer(l)}r=s;if(r<=0){t(i)}}};a.canUse=function(){return!!window.FileReader}})();(function(){
/**
	 * Bitrix Push & Pull
	 * Pull client
	 *
	 * @package bitrix
	 * @subpackage pull
	 * @copyright 2001-2019 Bitrix
	 */
if(!window.BX){window.BX={}}else if(window.BX.PullClient){return}else if(!window.BX.RestClient){return}const e=window.BX;const t=window.protobuf;const n=19;const r=60;const i=30*60;const s=24*60*60;const o=6e4;const a=10;const l=5e3;const u="bx-pull-session";const c=20;const f={WebSocket:"webSocket",LongPolling:"longPolling"};const d={Online:"online",Offline:"offline",Connecting:"connect"};const h={Unknown:0,Client:1,Backend:2};const p={Server:"server",Client:"client",Online:"online",Status:"status",Revision:"revision"};const m={NORMAL_CLOSURE:1e3,SERVER_DIE:1001,CONFIG_REPLACED:3e3,CHANNEL_EXPIRED:3001,SERVER_RESTARTED:3002,CONFIG_EXPIRED:3003,MANUAL:3004,STUCK:3005,WRONG_CHANNEL_ID:4010};const g={CHANNEL_EXPIRE:"CHANNEL_EXPIRE",CONFIG_EXPIRE:"CONFIG_EXPIRE",SERVER_RESTART:"SERVER_RESTART"};const v={Shared:"shared",Personal:"personal"};const y={api:{},channels:{},publicChannels:{},server:{timeShift:0},clientId:null,jwt:null,exp:0};const b=t.roots["push-server"]["Response"];const w=t.roots["push-server"]["ResponseBatch"];const S=t.roots["push-server"]["Request"];const k=t.roots["push-server"]["RequestBatch"];const I=t.roots["push-server"]["IncomingMessagesRequest"];const E=t.roots["push-server"]["IncomingMessage"];const C=t.roots["push-server"]["Receiver"];const _="2.0";const x="ping";const T="pong";const O=10;const M={Parse:{code:-32700,message:"Parse error"},InvalidRequest:{code:-32600,message:"Invalid Request"},MethodNotFound:{code:-32601,message:"Method not found"},InvalidParams:{code:-32602,message:"Invalid params"},Internal:{code:-32603,message:"Internal error"}};const D={Publish:"publish",GetUsersLastSeen:"getUsersLastSeen",Ping:"ping",ListChannels:"listChannels",SubscribeStatusChange:"subscribeStatusChange",UnsubscribeStatusChange:"unsubscribeStatusChange"};class A{constructor(t){t=t||{};if(t.restApplication){if(typeof t.configGetMethod==="undefined"){t.configGetMethod="pull.application.config.get"}if(typeof t.skipCheckRevision==="undefined"){t.skipCheckRevision=true}if(typeof t.restApplication==="string"){t.siteId=t.restApplication}t.serverEnabled=true}this._status=d.Offline;this.context="master";this.guestMode=t.guestMode?t.guestMode:typeof e.message!=="undefined"&&e.message.pull_guest_mode?e.message.pull_guest_mode==="Y":false;this.guestUserId=t.guestUserId?t.guestUserId:typeof e.message!=="undefined"&&e.message.pull_guest_user_id?parseInt(e.message.pull_guest_user_id,10):0;if(this.guestMode&&this.guestUserId){this.userId=this.guestUserId}else{this.userId=t.userId?t.userId:typeof e.message!=="undefined"&&e.message.USER_ID?e.message.USER_ID:0}this.siteId=t.siteId?t.siteId:typeof e.message!=="undefined"&&e.message.SITE_ID?e.message.SITE_ID:"none";this.restClient=typeof t.restClient!=="undefined"?t.restClient:new e.RestClient(this.getRestClientOptions());this.enabled=typeof t.serverEnabled!=="undefined"?t.serverEnabled==="Y"||t.serverEnabled===true:typeof e.message!=="undefined"&&e.message.pull_server_enabled==="Y";this.unloading=false;this.starting=false;this.debug=false;this.connectionAttempt=0;this.connectionType=f.WebSocket;this.reconnectTimeout=null;this.restartTimeout=null;this.restoreWebSocketTimeout=null;this.configGetMethod=typeof t.configGetMethod!=="string"?"pull.config.get":t.configGetMethod;this.getPublicListMethod=typeof t.getPublicListMethod!=="string"?"pull.channel.public.list":t.getPublicListMethod;this.skipStorageInit=t.skipStorageInit===true;this.skipCheckRevision=t.skipCheckRevision===true;this._subscribers={};this.watchTagsQueue={};this.watchUpdateInterval=174e4;this.watchForceUpdateInterval=5e3;if(typeof t.configTimestamp!=="undefined"){this.configTimestamp=t.configTimestamp}else if(typeof e.message!=="undefined"&&e.message.pull_config_timestamp){this.configTimestamp=e.message.pull_config_timestamp}else{this.configTimestamp=0}this.session={mid:null,tag:null,time:null,history:{},lastMessageIds:[],messageCount:0};this._connectors={webSocket:null,longPolling:null};this.isSecure=document.location.href.indexOf("https")===0;this.config=null;this.storage=null;if(this.userId&&!this.skipStorageInit){this.storage=new N({userId:this.userId,siteId:this.siteId})}this.sharedConfig=new P({onWebSocketBlockChanged:this.onWebSocketBlockChanged.bind(this),storage:this.storage});this.channelManager=new j({restClient:this.restClient,getPublicListMethod:this.getPublicListMethod});this.notificationPopup=null;this.checkInterval=null;this.offlineTimeout=null;this.pingWaitTimeout=null;this.isManualDisconnect=false;this.loggingEnabled=this.sharedConfig.isLoggingEnabled();this.onPingTimeoutHandler=this.onPingTimeout.bind(this);this.userStatusCallbacks={}}get connector(){return this._connectors[this.connectionType]}get status(){return this._status}set status(e){if(this._status===e){return}this._status=e;if(this.offlineTimeout){clearTimeout(this.offlineTimeout);this.offlineTimeout=null}if(e===d.Offline){this.sendPullStatusDelayed(e,l)}else{this.sendPullStatus(e)}}subscribe(e){if(!e){console.error(W.getDateForLog()+": Pull.subscribe: params for subscribe function is invalid. ");return function(){}}if(!W.isPlainObject(e)){return this.attachCommandHandler(e)}e=e||{};e.type=e.type||p.Server;e.command=e.command||null;if(e.type==p.Server||e.type==p.Client){if(typeof this._subscribers[e.type]==="undefined"){this._subscribers[e.type]={}}if(typeof this._subscribers[e.type][e.moduleId]==="undefined"){this._subscribers[e.type][e.moduleId]={callbacks:[],commands:{}}}if(e.command){if(typeof this._subscribers[e.type][e.moduleId]["commands"][e.command]==="undefined"){this._subscribers[e.type][e.moduleId]["commands"][e.command]=[]}this._subscribers[e.type][e.moduleId]["commands"][e.command].push(e.callback);return function(){this._subscribers[e.type][e.moduleId]["commands"][e.command]=this._subscribers[e.type][e.moduleId]["commands"][e.command].filter((t=>t!==e.callback))}.bind(this)}else{this._subscribers[e.type][e.moduleId]["callbacks"].push(e.callback);return function(){this._subscribers[e.type][e.moduleId]["callbacks"]=this._subscribers[e.type][e.moduleId]["callbacks"].filter((t=>t!==e.callback))}.bind(this)}}else{if(typeof this._subscribers[e.type]==="undefined"){this._subscribers[e.type]=[]}this._subscribers[e.type].push(e.callback);return function(){this._subscribers[e.type]=this._subscribers[e.type].filter((t=>t!==e.callback))}.bind(this)}}attachCommandHandler(e){if(typeof e.getModuleId!=="function"||typeof e.getModuleId()!=="string"){console.error(W.getDateForLog()+": Pull.attachCommandHandler: result of handler.getModuleId() is not a string.");return function(){}}let t=p.Server;if(typeof e.getSubscriptionType==="function"){t=e.getSubscriptionType()}return this.subscribe({type:t,moduleId:e.getModuleId(),callback:function(t){let n=null;if(typeof e.getMap==="function"){const r=e.getMap();if(r&&typeof r==="object"){if(typeof r[t.command]==="function"){n=r[t.command].bind(e)}else if(typeof r[t.command]==="string"&&typeof e[r[t.command]]==="function"){n=e[r[t.command]].bind(e)}}}if(!n){const r="handle"+t.command.charAt(0).toUpperCase()+t.command.slice(1);if(typeof e[r]==="function"){n=e[r].bind(e)}}if(n){if(this.debug&&this.context!=="master"){console.warn(W.getDateForLog()+": Pull.attachCommandHandler: receive command",t)}n(t.params,t.extra,t.command)}}.bind(this)})}emit(e){e=e||{};if(e.type==p.Server||e.type==p.Client){if(typeof this._subscribers[e.type]==="undefined"){this._subscribers[e.type]={}}if(typeof this._subscribers[e.type][e.moduleId]==="undefined"){this._subscribers[e.type][e.moduleId]={callbacks:[],commands:{}}}if(this._subscribers[e.type][e.moduleId]["callbacks"].length>0){this._subscribers[e.type][e.moduleId]["callbacks"].forEach((function(t){t(e.data,{type:e.type,moduleId:e.moduleId})}))}if(this._subscribers[e.type][e.moduleId]["commands"][e.data.command]&&this._subscribers[e.type][e.moduleId]["commands"][e.data.command].length>0){this._subscribers[e.type][e.moduleId]["commands"][e.data.command].forEach((function(t){t(e.data.params,e.data.extra,e.data.command,{type:e.type,moduleId:e.moduleId})}))}return true}else{if(typeof this._subscribers[e.type]==="undefined"){this._subscribers[e.type]=[]}if(this._subscribers[e.type].length<=0){return true}this._subscribers[e.type].forEach((function(t){t(e.data,{type:e.type})}));return true}}init(){this._connectors.webSocket=new R({parent:this,onOpen:this.onWebSocketOpen.bind(this),onMessage:this.onIncomingMessage.bind(this),onDisconnect:this.onWebSocketDisconnect.bind(this),onError:this.onWebSocketError.bind(this)});this._connectors.longPolling=new H({parent:this,onOpen:this.onLongPollingOpen.bind(this),onMessage:this.onIncomingMessage.bind(this),onDisconnect:this.onLongPollingDisconnect.bind(this),onError:this.onLongPollingError.bind(this)});this.connectionType=this.isWebSocketAllowed()?f.WebSocket:f.LongPolling;window.addEventListener("beforeunload",this.onBeforeUnload.bind(this));window.addEventListener("offline",this.onOffline.bind(this));window.addEventListener("online",this.onOnline.bind(this));if(e&&e.addCustomEvent){e.addCustomEvent("BXLinkOpened",this.connect.bind(this))}if(e&&e.desktop){e.addCustomEvent("onDesktopReload",(()=>{this.session.mid=null;this.session.tag=null;this.session.time=null}));e.desktop.addCustomEvent("BXLoginSuccess",(()=>this.restart(1e3,"desktop login")))}this.jsonRpcAdapter=new B({connector:this._connectors.webSocket,handlers:{"incoming.message":this.handleRpcIncomingMessage.bind(this)}})}start(t){let n=true;if(this.isConnected()){return Promise.resolve(true)}if(this.starting&&this._startingPromise){return this._startingPromise}if(!this.userId&&typeof e.message!=="undefined"&&e.message.USER_ID){this.userId=e.message.USER_ID;if(!this.storage){this.storage=new N({userId:this.userId,siteId:this.siteId})}}if(this.siteId==="none"&&typeof e.message!=="undefined"&&e.message.SITE_ID){this.siteId=e.message.SITE_ID}let r=false;if(W.isPlainObject(t)){if(typeof t.skipReconnectToLastSession!=="undefined"){r=!!t.skipReconnectToLastSession;delete t.skipReconnectToLastSession}this.config=t;n=false}if(!this.enabled){return Promise.reject({ex:{error:"PULL_DISABLED",error_description:"Push & Pull server is disabled"}})}const i=(new Date).getTime();let s;if(!r&&this.storage){s=this.storage.get(u)}if(W.isPlainObject(s)&&s.hasOwnProperty("ttl")&&s.ttl>=i){this.session.mid=s.mid}this.starting=true;return new Promise(((e,t)=>{this._startingPromise={resolve:e,reject:t};this.loadConfig("client_start").then((r=>{this.setConfig(r,n);this.init();this.updateWatch();this.startCheckConfig();this.connect().then((()=>e(true)),(e=>t(e)))}),(e=>{this.starting=false;this.status=d.Offline;this.stopCheckConfig();console.error(W.getDateForLog()+": Pull: could not read push-server config. ",e);t(e)}))}))}getRestClientOptions(){let e={};if(this.guestMode&&this.guestUserId!==0){e.queryParams={pull_guest_id:this.guestUserId}}return e}setLastMessageId(e){this.session.mid=e}setPublicIds(e){return this.channelManager.setPublicIds(e)}sendMessage(e,t,n,r,i){const s={userList:e,body:{module_id:t,command:n,params:r},expiry:i};if(this.isJsonRpc()){return this.jsonRpcAdapter.executeOutgoingRpcCommand(D.Publish,s)}else{return this.sendMessageBatch([s])}}sendMessageToChannels(e,t,n,r,i){const s={channelList:e,body:{module_id:t,command:n,params:r},expiry:i};if(this.isJsonRpc()){return this.jsonRpcAdapter.executeOutgoingRpcCommand(D.Publish,s)}else{return this.sendMessageBatch([s])}}sendMessageBatch(e){if(!this.isPublishingEnabled()){console.error("Client publishing is not supported or is disabled");return false}if(this.isJsonRpc()){let t=this.jsonRpcAdapter.createPublishRequest(e);return this.connector.send(JSON.stringify(t))}else{let t={};for(let n=0;n<e.length;n++){if(e[n].userList){for(let r=0;r<e[n].userList.length;r++){t[e[n].userList[r]]=true}}}this.channelManager.getPublicIds(Object.keys(t)).then((t=>this.connector.send(this.encodeMessageBatch(e,t))))}}encodeMessageBatch(e,t){let n=[];e.forEach((function(e){const r=e.body;let i;if(e.userList){i=this.createMessageReceivers(e.userList,t)}else{i=[]}if(e.channelList){if(!W.isArray(e.channelList)){throw new Error("messageFields.publicChannels must be an array")}e.channelList.forEach(function(e){let t;let n;if(typeof e==="string"&&e.includes(".")){const r=e.toString().split(".");t=r[0];n=r[1]}else if(typeof e==="object"&&"publicId"in e&&"signature"in e){t=e.publicId;n=e.signature}else{throw new Error("Public channel MUST be either a string, formatted like \"{publicId}.{signature}\" or an object with fields 'publicId' and 'signature'")}i.push(C.create({id:this.encodeId(t),signature:this.encodeId(n)}))}.bind(this))}const s=E.create({receivers:i,body:JSON.stringify(r),expiry:e.expiry||0});n.push(s)}),this);const r=k.create({requests:[{incomingMessages:{messages:n}}]});return k.encode(r).finish()}createMessageReceivers(e,t){let n=[];for(let r=0;r<e.length;r++){let i=e[r];if(!t[i]||!t[i].publicId){throw new Error("Could not determine public id for user "+i)}n.push(C.create({id:this.encodeId(t[i].publicId),signature:this.encodeId(t[i].signature)}))}return n}subscribeUserStatusChange(e,t){if(typeof e!=="number"){throw new Error("userId must be a number")}return new Promise(((n,r)=>{this.jsonRpcAdapter.executeOutgoingRpcCommand(D.SubscribeStatusChange,{userId:e}).then((()=>{if(!this.userStatusCallbacks[e]){this.userStatusCallbacks[e]=[]}if(W.isFunction(t)){this.userStatusCallbacks[e].push(t)}return n()})).catch((e=>r(e)))}))}unsubscribeUserStatusChange(e,t){if(typeof e!=="number"){throw new Error("userId must be a number")}if(this.userStatusCallbacks[e]){this.userStatusCallbacks[e]=this.userStatusCallbacks[e].filter((e=>e!==t));if(this.userStatusCallbacks[e].length===0){return this.jsonRpcAdapter.executeOutgoingRpcCommand(D.UnsubscribeStatusChange,{userId:e})}}return Promise.resolve()}emitUserStatusChange(e,t){if(this.userStatusCallbacks[e]){this.userStatusCallbacks[e].forEach((n=>n({userId:e,isOnline:t})))}}restoreUserStatusSubscription(){for(const e in this.userStatusCallbacks){if(this.userStatusCallbacks.hasOwnProperty(e)&&this.userStatusCallbacks[e].length>0){this.jsonRpcAdapter.executeOutgoingRpcCommand(D.SubscribeStatusChange,{userId:Number(e)})}}}getUsersLastSeen(e){if(!W.isArray(e)||!e.every((e=>typeof e==="number"))){throw new Error("userList must be an array of numbers")}return new Promise(((t,n)=>{this.jsonRpcAdapter.executeOutgoingRpcCommand(D.GetUsersLastSeen,{userList:e}).then((n=>{let r=[];for(let t=0;t<e.length;t++){if(!n.hasOwnProperty(e[t])){r.push(e[t])}}if(r.length===0){return t(n)}const i={userIds:r,sendToQueueSever:true};this.restClient.callMethod("pull.api.user.getLastSeen",i).then((e=>{let r=e.data();for(let e in r){n[e]=r[e]}return t(n)})).catch((e=>{console.error(e)}))}))}))}ping(e){return this.jsonRpcAdapter.executeOutgoingRpcCommand(D.Ping,{},e)}listChannels(){return this.jsonRpcAdapter.executeOutgoingRpcCommand(D.ListChannels,{})}scheduleRestart(e,t,n){clearTimeout(this.restartTimeout);if(!n||n<1){n=Math.ceil(Math.random()*30)+5}this.restartTimeout=setTimeout((()=>this.restart(e,t)),n*1e3)}restart(t,n){if(!t){t=m.NORMAL_CLOSURE}if(!n){n="manual restart"}clearTimeout(this.restartTimeout);console.warn(W.getDateForLog()+": Pull: restarting with code "+t);this.disconnect(t,n);if(this.storage){this.storage.remove("bx-pull-config")}this.config=null;const r=t+"_"+n.replaceAll(" ","_");this.loadConfig(r).then((e=>{this.setConfig(e,true);this.updateWatch();this.startCheckConfig();this.connect().catch((e=>console.error(e)))}),(t=>{console.error(W.getDateForLog()+": Pull: could not read push-server config",t);this.status=d.Offline;clearTimeout(this.reconnectTimeout);if(t.status==401||t.status==403){this.stopCheckConfig();if(e&&e.onCustomEvent){e.onCustomEvent(window,"onPullError",["AUTHORIZE_ERROR"])}}}))}loadConfig(e){if(!this.config){this.config=Object.assign({},y);let e;if(this.storage){e=this.storage.get("bx-pull-config")}if(this.isConfigActual(e)&&this.checkRevision(e.api.revision_web)){return Promise.resolve(e)}else if(this.storage){this.storage.remove("bx-pull-config")}}else if(this.isConfigActual(this.config)&&this.checkRevision(this.config.api.revision_web)){return Promise.resolve(this.config)}else{this.config=Object.assign({},y)}return new Promise(((t,n)=>{this.restClient.callMethod(this.configGetMethod,{CACHE:"N"},undefined,undefined,e).then((e=>{const n=e.data();let r;r=Math.floor((W.getTimestamp()-new Date(n.serverTime).getTime())/1e3);delete n.serverTime;let i=Object.assign({},n);i.server.timeShift=r;t(i)})).catch((e=>{const t=e.error();if(t.getError().error=="AUTHORIZE_ERROR"||t.getError().error=="WRONG_AUTH_TYPE"){t.status=403}n(t)}))}))}isConfigActual(t){if(!W.isPlainObject(t)){return false}if(t.server.config_timestamp<this.configTimestamp){return false}const n=new Date;if(e.type.isNumber(t.exp)&&t.exp>0&&t.exp<n.getTime()/1e3){return false}const r=Object.keys(t.channels).length;if(r===0){return false}for(let e in t.channels){if(!t.channels.hasOwnProperty(e)){continue}const r=t.channels[e];const i=new Date(r.end);if(i<n){return false}}return true}startCheckConfig(){if(this.checkInterval){clearInterval(this.checkInterval)}this.checkInterval=setInterval(this.checkConfig.bind(this),o)}stopCheckConfig(){if(this.checkInterval){clearInterval(this.checkInterval)}this.checkInterval=null}checkConfig(){if(this.isConfigActual(this.config)){if(!this.checkRevision(this.config.api.revision_web)){return false}}else{this.logToConsole("Stale config detected. Restarting");this.restart(m.CONFIG_EXPIRED,"config expired")}}setConfig(e,t){for(let t in e){if(e.hasOwnProperty(t)&&this.config.hasOwnProperty(t)){this.config[t]=e[t]}}if(e.publicChannels){this.setPublicIds(W.objectValues(e.publicChannels))}if(this.storage&&t){try{this.storage.set("bx-pull-config",e)}catch(e){if(localStorage&&localStorage.removeItem){localStorage.removeItem("history")}console.error(W.getDateForLog()+" Pull: Could not cache config in local storage. Error: ",e)}}}isWebSocketSupported(){return typeof window.WebSocket!=="undefined"}isWebSocketAllowed(){if(this.sharedConfig.isWebSocketBlocked()){return false}return this.isWebSocketEnabled()}isWebSocketEnabled(){if(!this.isWebSocketSupported()){return false}return this.config&&this.config.server&&this.config.server.websocket_enabled===true}isPublishingSupported(){return this.getServerVersion()>3}isPublishingEnabled(){if(!this.isPublishingSupported()){return false}return this.config&&this.config.server&&this.config.server.publish_enabled===true}isProtobufSupported(){return this.getServerVersion()==4&&!W.browser.IsIe()}isJsonRpc(){return this.getServerVersion()>=5}isSharedMode(){return this.getServerMode()==v.Shared}disconnect(e,t){if(this.connector){this.isManualDisconnect=true;this.connector.disconnect(e,t)}}stop(e,t){this.disconnect(e,t);this.stopCheckConfig()}reconnect(e,t,n){this.disconnect(e,t);n=n||1;this.scheduleReconnect(n)}restoreWebSocketConnection(){if(this.connectionType==f.WebSocket){return true}this._connectors.webSocket.connect()}scheduleReconnect(e){if(!this.enabled){return false}if(!e){{e=this.getConnectionAttemptDelay(this.connectionAttempt)}}if(this.reconnectTimeout){clearTimeout(this.reconnectTimeout)}this.logToConsole("Pull: scheduling reconnection in "+e+" seconds; attempt # "+this.connectionAttempt);this.reconnectTimeout=setTimeout((()=>{this.connect().catch((e=>{console.error(e)}))}),e*1e3)}scheduleRestoreWebSocketConnection(){this.logToConsole("Pull: scheduling restoration of websocket connection in "+i+" seconds");if(this.restoreWebSocketTimeout){return}this.restoreWebSocketTimeout=setTimeout((()=>{this.restoreWebSocketTimeout=0;this.restoreWebSocketConnection()}),i*1e3)}connect(){if(!this.enabled){return Promise.reject()}if(this.connector.connected){return Promise.resolve()}if(this.reconnectTimeout){clearTimeout(this.reconnectTimeout)}this.status=d.Connecting;this.connectionAttempt++;return new Promise(((e,t)=>{this._connectPromise={resolve:e,reject:t};this.connector.connect()}))}onIncomingMessage(e){if(this.isJsonRpc()){e===x?this.onJsonRpcPing():this.jsonRpcAdapter.parseJsonRpcMessage(e)}else{const t=this.extractMessages(e);this.handleIncomingEvents(t)}}handleRpcIncomingMessage(e){this.session.mid=e.mid;let t=e.body;if(!e.body.extra){t.extra={}}t.extra.sender=e.sender;if("user_params"in e&&W.isPlainObject(e.user_params)){Object.assign(t.params,e.user_params)}if("dictionary"in e&&W.isPlainObject(e.dictionary)){Object.assign(t.params,e.dictionary)}if(this.checkDuplicate(e.mid)){this.addMessageToStat(t);this.trimDuplicates();this.broadcastMessage(t)}this.connector.send(`mack:${e.mid}`);return{}}onJsonRpcPing(){this.updatePingWaitTimeout();this.connector.send(T)}handleIncomingEvents(e){let t=[];if(e.length===0){this.session.mid=null;return}for(let n=0;n<e.length;n++){let r=e[n];this.updateSessionFromEvent(r);if(r.mid&&!this.checkDuplicate(r.mid)){continue}this.addMessageToStat(r.text);t.push(r.text)}this.trimDuplicates();this.broadcastMessages(t)}updateSessionFromEvent(e){this.session.mid=e.mid||null;this.session.tag=e.tag||null;this.session.time=e.time||null}checkDuplicate(e){if(this.session.lastMessageIds.includes(e)){console.warn("Duplicate message "+e+" skipped");return false}else{this.session.lastMessageIds.push(e);return true}}trimDuplicates(){if(this.session.lastMessageIds.length>a){this.session.lastMessageIds=this.session.lastMessageIds.slice(-a)}}addMessageToStat(e){if(!this.session.history[e.module_id]){this.session.history[e.module_id]={}}if(!this.session.history[e.module_id][e.command]){this.session.history[e.module_id][e.command]=0}this.session.history[e.module_id][e.command]++;this.session.messageCount++}extractMessages(e){if(e instanceof ArrayBuffer){return this.extractProtobufMessages(e)}else if(W.isNotEmptyString(e)){return this.extractPlainTextMessages(e)}}extractProtobufMessages(e){let t=[];try{let n=w.decode(new Uint8Array(e));for(let e=0;e<n.responses.length;e++){let r=n.responses[e];if(r.command!="outgoingMessages"){continue}let i=r.outgoingMessages.messages;for(let e=0;e<i.length;e++){const n=i[e];let r;try{r=JSON.parse(n.body)}catch(e){console.error(W.getDateForLog()+": Pull: Could not parse message body",e);continue}if(!r.extra){r.extra={}}r.extra.sender={type:n.sender.type};if(n.sender.id instanceof Uint8Array){r.extra.sender.id=this.decodeId(n.sender.id)}const s={mid:this.decodeId(n.id),text:r};t.push(s)}}}catch(e){console.error(W.getDateForLog()+": Pull: Could not parse message",e)}return t}extractPlainTextMessages(e){let t=[];const n=e.match(/#!NGINXNMS!#(.*?)#!NGINXNME!#/gm);if(n===null){const n="\n========= PULL ERROR ===========\n"+"Error type: parseResponse error parsing message\n"+"\n"+"Data string: "+e+"\n"+"================================\n\n";console.warn(n);return t}for(let e=0;e<n.length;e++){n[e]=n[e].substring(12,n[e].length-12);if(n[e].length<=0){continue}let r;try{r=JSON.parse(n[e])}catch(e){continue}t.push(r)}return t}decodeId(e){if(!(e instanceof Uint8Array)){throw new Error("encodedId should be an instance of Uint8Array")}let t="";for(let n=0;n<e.length;n++){const r=e[n].toString(16);if(r.length===1){t+="0"}t+=r}return t}encodeId(e){if(!e){return new Uint8Array}let t=[];for(let n=0;n<e.length;n+=2){t.push(parseInt(e.substr(n,2),16))}return new Uint8Array(t)}broadcastMessages(e){e.forEach((e=>this.broadcastMessage(e)))}broadcastMessage(t){const n=t.module_id=t.module_id.toLowerCase();const r=t.command;if(!t.extra){t.extra={}}if(t.extra.server_time_unix){t.extra.server_time_ago=(W.getTimestamp()-t.extra.server_time_unix*1e3)/1e3-(this.config.server.timeShift?this.config.server.timeShift:0);t.extra.server_time_ago=t.extra.server_time_ago>0?t.extra.server_time_ago:0}this.logMessage(t);try{if(t.extra.sender&&t.extra.sender.type===h.Client){if(typeof e.onCustomEvent!=="undefined"){e.onCustomEvent(window,"onPullClientEvent-"+n,[r,t.params,t.extra],true);e.onCustomEvent(window,"onPullClientEvent",[n,r,t.params,t.extra],true)}this.emit({type:p.Client,moduleId:n,data:{command:r,params:W.clone(t.params),extra:W.clone(t.extra)}})}else if(n==="pull"){this.handleInternalPullEvent(r,t)}else if(n=="online"){if(t.extra.server_time_ago<240){if(typeof e.onCustomEvent!=="undefined"){e.onCustomEvent(window,"onPullOnlineEvent",[r,t.params,t.extra],true)}this.emit({type:p.Online,data:{command:r,params:W.clone(t.params),extra:W.clone(t.extra)}})}if(r==="userStatusChange"){this.emitUserStatusChange(t.params.user_id,t.params.online)}}else{if(typeof e.onCustomEvent!=="undefined"){e.onCustomEvent(window,"onPullEvent-"+n,[r,t.params,t.extra],true);e.onCustomEvent(window,"onPullEvent",[n,r,t.params,t.extra],true)}this.emit({type:p.Server,moduleId:n,data:{command:r,params:W.clone(t.params),extra:W.clone(t.extra)}})}}catch(n){if(typeof console=="object"){console.warn("\n========= PULL ERROR ===========\n"+"Error type: broadcastMessages execute error\n"+"Error event: ",n,"\n"+"Message: ",t,"\n"+"================================\n");if(typeof e.debug!=="undefined"){e.debug(n)}}}if(t.extra&&t.extra.revision_web){this.checkRevision(t.extra.revision_web)}}logToConsole(e,t){if(this.loggingEnabled||t){console.log(W.getDateForLog()+": "+e)}}logMessage(e){if(!this.debug){return}if(e.extra.sender&&e.extra.sender.type===h.Client){console.info("onPullClientEvent-"+e.module_id,e.command,e.params,e.extra)}else if(e.moduleId=="online"){console.info("onPullOnlineEvent",e.command,e.params,e.extra)}else{console.info("onPullEvent",e.module_id,e.command,e.params,e.extra)}}onLongPollingOpen(){this.unloading=false;this.starting=false;this.connectionAttempt=0;this.isManualDisconnect=false;this.status=d.Online;this.logToConsole("Pull: Long polling connection with push-server opened");if(this.isWebSocketEnabled()){this.scheduleRestoreWebSocketConnection()}if(this._connectPromise){this._connectPromise.resolve()}}onWebSocketBlockChanged(e){const t=e.isWebSocketBlocked;if(t&&this.connectionType===f.WebSocket&&!this.isConnected()){clearTimeout(this.reconnectTimeout);this.connectionAttempt=0;this.connectionType=f.LongPolling;this.scheduleReconnect(1)}else if(!t&&this.connectionType===f.LongPolling){clearTimeout(this.reconnectTimeout);clearTimeout(this.restoreWebSocketTimeout);this.connectionAttempt=0;this.connectionType=f.WebSocket;this.scheduleReconnect(1)}}onWebSocketOpen(){this.unloading=false;this.starting=false;this.connectionAttempt=0;this.isManualDisconnect=false;this.status=d.Online;this.sharedConfig.setWebSocketBlocked(false);this.sharedConfig.setLongPollingBlocked(true);if(this.connectionType==f.LongPolling){this.connectionType=f.WebSocket;this._connectors.longPolling.disconnect()}if(this.restoreWebSocketTimeout){clearTimeout(this.restoreWebSocketTimeout);this.restoreWebSocketTimeout=null}this.logToConsole("Pull: Websocket connection with push-server opened");if(this._connectPromise){this._connectPromise.resolve()}this.restoreUserStatusSubscription()}onWebSocketDisconnect(e){if(this.connectionType===f.WebSocket){this.status=d.Offline}if(!e){e={}}this.logToConsole("Pull: Websocket connection with push-server closed. Code: "+e.code+", reason: "+e.reason,true);if(!this.isManualDisconnect){if(e.code==m.WRONG_CHANNEL_ID){this.scheduleRestart(m.WRONG_CHANNEL_ID,"wrong channel signature")}else{this.scheduleReconnect()}}this.sharedConfig.setLongPollingBlocked(true);this.isManualDisconnect=false;this.clearPingWaitTimeout()}onWebSocketError(e){this.starting=false;if(this.connectionType===f.WebSocket){this.status=d.Offline}console.error(W.getDateForLog()+": Pull: WebSocket connection error",e);this.scheduleReconnect();if(this._connectPromise){this._connectPromise.reject()}this.clearPingWaitTimeout()}onLongPollingDisconnect(e){if(this.connectionType===f.LongPolling){this.status=d.Offline}if(!e){e={}}this.logToConsole("Pull: Long polling connection with push-server closed. Code: "+e.code+", reason: "+e.reason);if(!this.isManualDisconnect){this.scheduleReconnect()}this.isManualDisconnect=false;this.clearPingWaitTimeout()}onLongPollingError(e){this.starting=false;if(this.connectionType===f.LongPolling){this.status=d.Offline}console.error(W.getDateForLog()+": Pull: Long polling connection error",e);this.scheduleReconnect();if(this._connectPromise){this._connectPromise.reject()}this.clearPingWaitTimeout()}isConnected(){return this.connector?this.connector.connected:false}onBeforeUnload(){this.unloading=true;const e=W.clone(this.session);e.ttl=(new Date).getTime()+c*1e3;if(this.storage){try{this.storage.set(u,JSON.stringify(e),c)}catch(e){console.error(W.getDateForLog()+" Pull: Could not save session info in local storage. Error: ",e)}}this.scheduleReconnect(15)}onOffline(){this.disconnect("1000","offline")}onOnline(){this.connect()}handleInternalPullEvent(e,t){switch(e.toUpperCase()){case g.CHANNEL_EXPIRE:{if(t.params.action=="reconnect"){this.config.channels[t.params.channel.type]=t.params.new_channel;this.logToConsole("Pull: new config for "+t.params.channel.type+" channel set:\n",this.config.channels[t.params.channel.type]);this.reconnect(m.CONFIG_REPLACED,"config was replaced")}else{this.restart(m.CHANNEL_EXPIRED,"channel expired received")}break}case g.CONFIG_EXPIRE:{this.restart(m.CONFIG_EXPIRED,"config expired received");break}case g.SERVER_RESTART:{this.reconnect(m.SERVER_RESTARTED,"server was restarted",15);break}default:}}checkRevision(t){if(this.skipCheckRevision){return true}t=parseInt(t);if(t>0&&t!=n){this.enabled=false;if(typeof e.message!=="undefined"){this.showNotification(e.message("PULL_OLD_REVISION"))}this.disconnect(m.NORMAL_CLOSURE,"check_revision");if(typeof e.onCustomEvent!=="undefined"){e.onCustomEvent(window,"onPullRevisionUp",[t,n])}this.emit({type:p.Revision,data:{server:t,client:n}});this.logToConsole("Pull revision changed from "+n+" to "+t+". Reload required");return false}return true}showNotification(t){if(this.notificationPopup||typeof e.PopupWindow==="undefined"){return}this.notificationPopup=new e.PopupWindow("bx-notifier-popup-confirm",null,{zIndex:200,autoHide:false,closeByEsc:false,overlay:true,content:e.create("div",{props:{className:"bx-messenger-confirm"},html:t}),buttons:[new e.PopupWindowButton({text:e.message("JS_CORE_WINDOW_CLOSE"),className:"popup-window-button-decline",events:{click:()=>this.notificationPopup.close()}})],events:{onPopupClose:()=>this.notificationPopup.destroy(),onPopupDestroy:()=>this.notificationPopup=null}});this.notificationPopup.show()}getRevision(){return this.config&&this.config.api?this.config.api.revision_web:null}getServerVersion(){return this.config&&this.config.server?this.config.server.version:0}getServerMode(){return this.config&&this.config.server?this.config.server.mode:null}getConfig(){return this.config}getDebugInfo(){if(!JSON||!JSON.stringify){return false}let e;if(this.config&&this.config.channels){e={ChannelID:this.config.channels.private?this.config.channels.private.id:"n/a",ChannelDie:this.config.channels.private?this.config.channels.private.end:"n/a",ChannelDieShared:"shared"in this.config.channels?this.config.channels.shared.end:"n/a"}}else{e={"Config error":"config is not loaded"}}let t="-";if(this._connectors.webSocket&&this._connectors.webSocket.socket){if(this.isJsonRpc()){t="json-rpc"}else{t=this._connectors.webSocket.socket.url.search("binaryMode=true")!=-1?"protobuf":"text"}}return{UserId:this.userId+(this.userId>0?"":"(guest)"),"Guest userId":this.guestMode&&this.guestUserId!==0?this.guestUserId:"-","Browser online":navigator.onLine?"Y":"N",Connect:this.isConnected()?"Y":"N","Server type":this.isSharedMode()?"cloud":"local","WebSocket supported":this.isWebSocketSupported()?"Y":"N","WebSocket connected":this._connectors.webSocket&&this._connectors.webSocket.connected?"Y":"N","WebSocket mode":t,"Try connect":this.reconnectTimeout?"Y":"N","Try number":this.connectionAttempt,Path:this.connector?this.connector.path:"-",...e,"Last message":this.session.mid>0?this.session.mid:"-","Session history":this.session.history,"Watch tags":this.watchTagsQueue}}enableLogging(e){if(e===undefined){e=true}e=e===true;this.sharedConfig.setLoggingEnabled(e);this.loggingEnabled=e}capturePullEvent(e){if(e===undefined){e=true}this.debug=e}getConnectionPath(e){let t;let r={};switch(e){case f.WebSocket:t=this.isSecure?this.config.server.websocket_secure:this.config.server.websocket;break;case f.LongPolling:t=this.isSecure?this.config.server.long_pooling_secure:this.config.server.long_polling;break;default:throw new Error("Unknown connection type "+e)}if(!W.isNotEmptyString(t)){return false}if(typeof this.config.jwt=="string"&&this.config.jwt!==""){r["token"]=this.config.jwt}else{let e=[];["private","shared"].forEach((t=>{if(typeof this.config.channels[t]!=="undefined"){e.push(this.config.channels[t].id)}}));if(e.length===0){return false}r["CHANNEL_ID"]=e.join("/")}if(this.isJsonRpc()){r.jsonRpc="true"}else if(this.isProtobufSupported()){r.binaryMode="true"}if(this.isSharedMode()){if(!this.config.clientId){throw new Error("Push-server is in shared mode, but clientId is not set")}r.clientId=this.config.clientId}if(this.session.mid){r.mid=this.session.mid}if(this.session.tag){r.tag=this.session.tag}if(this.session.time){r.time=this.session.time}r.revision=n;return t+"?"+W.buildQueryString(r)}getPublicationPath(){const e=this.isSecure?this.config.server.publish_secure:this.config.server.publish;if(!e){return""}let t=[];for(let e in this.config.channels){if(!this.config.channels.hasOwnProperty(e)){continue}t.push(this.config.channels[e].id)}const n={CHANNEL_ID:t.join("/")};return e+"?"+W.buildQueryString(n)}getConnectionAttemptDelay(e){let t;if(e<1){t=.5}else if(e<3){t=15}else if(e<5){t=45}else if(e<10){t=600}else{t=3600}return t+t*Math.random()*.2}sendPullStatusDelayed(e,t){if(this.offlineTimeout){clearTimeout(this.offlineTimeout)}this.offlineTimeout=setTimeout((()=>{this.offlineTimeout=null;this.sendPullStatus(e)}),t)}sendPullStatus(t){if(this.unloading){return}if(typeof e.onCustomEvent!=="undefined"){e.onCustomEvent(window,"onPullStatus",[t])}this.emit({type:p.Status,data:{status:t}})}extendWatch(e,t){if(!e||this.watchTagsQueue[e]){return false}this.watchTagsQueue[e]=true;if(t){this.updateWatch(t)}}updateWatch(e){clearTimeout(this.watchUpdateTimeout);this.watchUpdateTimeout=setTimeout((()=>{const e=Object.keys(this.watchTagsQueue);if(e.length>0){this.restClient.callMethod("pull.watch.extend",{tags:e},(e=>{if(e.error()){this.updateWatch();return false}const t=e.data();for(let e in t){if(t.hasOwnProperty(e)&&!t[e]){this.clearWatch(e)}}this.updateWatch()}))}else{this.updateWatch()}}),e?this.watchForceUpdateInterval:this.watchUpdateInterval)}clearWatch(e){delete this.watchTagsQueue[e]}updatePingWaitTimeout(){clearTimeout(this.pingWaitTimeout);this.pingWaitTimeout=setTimeout(this.onPingTimeoutHandler,O*2*1e3)}clearPingWaitTimeout(){clearTimeout(this.pingWaitTimeout);this.pingWaitTimeout=null}onPingTimeout(){this.pingWaitTimeout=null;if(!this.enabled||!this.isConnected()){return}console.warn("No pings are received in "+O*2+" seconds. Reconnecting");this.disconnect(m.STUCK,"connection stuck");this.scheduleReconnect()}setPrivateVar(){}returnPrivateVar(){}expireConfig(){}updateChannelID(){}tryConnect(){}tryConnectDelay(){}tryConnectSet(){}updateState(){}setUpdateStateStepCount(){}supportWebSocket(){return this.isWebSocketSupported()}isWebSoketConnected(){return this.isConnected()&&this.connectionType==f.WebSocket}getPullServerStatus(){return this.isConnected()}closeConfirm(){if(this.notificationPopup){this.notificationPopup.destroy()}}}class P{constructor(e){e=e||{};this.storage=e.storage||new N;this.ttl=24*60*60;this.lsKeys={websocketBlocked:"bx-pull-websocket-blocked",longPollingBlocked:"bx-pull-longpolling-blocked",loggingEnabled:"bx-pull-logging-enabled"};this.callbacks={onWebSocketBlockChanged:W.isFunction(e.onWebSocketBlockChanged)?e.onWebSocketBlockChanged:function(){}};if(this.storage){window.addEventListener("storage",this.onLocalStorageSet.bind(this))}}onLocalStorageSet(e){if(this.storage.compareKey(e.key,this.lsKeys.websocketBlocked)&&e.newValue!=e.oldValue){this.callbacks.onWebSocketBlockChanged({isWebSocketBlocked:this.isWebSocketBlocked()})}}isWebSocketBlocked(){if(!this.storage){return false}return this.storage.get(this.lsKeys.websocketBlocked,0)>W.getTimestamp()}setWebSocketBlocked(e){if(!this.storage){return false}try{this.storage.set(this.lsKeys.websocketBlocked,e?W.getTimestamp()+this.ttl:0)}catch(e){console.error(W.getDateForLog()+" Pull: Could not save WS_blocked flag in local storage. Error: ",e)}}isLongPollingBlocked(){if(!this.storage){return false}return this.storage.get(this.lsKeys.longPollingBlocked,0)>W.getTimestamp()}setLongPollingBlocked(e){if(!this.storage){return false}try{this.storage.set(this.lsKeys.longPollingBlocked,e?W.getTimestamp()+this.ttl:0)}catch(e){console.error(W.getDateForLog()+" Pull: Could not save LP_blocked flag in local storage. Error: ",e)}}isLoggingEnabled(){if(!this.storage){return false}return this.storage.get(this.lsKeys.loggingEnabled,0)>W.getTimestamp()}setLoggingEnabled(e){if(!this.storage){return false}try{this.storage.set(this.lsKeys.loggingEnabled,e?W.getTimestamp()+this.ttl:0)}catch(e){console.error("LocalStorage error: ",e);return false}}}class L{_connected=false;connectionType="";disconnectCode="";disconnectReason="";constructor(e){this.parent=e.parent;this.callbacks={onOpen:W.isFunction(e.onOpen)?e.onOpen:function(){},onDisconnect:W.isFunction(e.onDisconnect)?e.onDisconnect:function(){},onError:W.isFunction(e.onError)?e.onError:function(){},onMessage:W.isFunction(e.onMessage)?e.onMessage:function(){}}}get connected(){return this._connected}set connected(e){if(e==this._connected){return}this._connected=e;if(this._connected){this.callbacks.onOpen()}else{this.callbacks.onDisconnect({code:this.disconnectCode,reason:this.disconnectReason})}}get path(){return this.parent.getConnectionPath(this.connectionType)}}class R extends L{constructor(e){super(e);this.connectionType=f.WebSocket;this.socket=null;this.onSocketOpenHandler=this.onSocketOpen.bind(this);this.onSocketCloseHandler=this.onSocketClose.bind(this);this.onSocketErrorHandler=this.onSocketError.bind(this);this.onSocketMessageHandler=this.onSocketMessage.bind(this)}connect(){if(this.socket){if(this.socket.readyState===1){return true}else{this.socket.removeEventListener("open",this.onSocketOpenHandler);this.socket.removeEventListener("close",this.onSocketCloseHandler);this.socket.removeEventListener("error",this.onSocketErrorHandler);this.socket.removeEventListener("message",this.onSocketMessageHandler);this.socket.close();this.socket=null}}this.createSocket()}disconnect(e,t){if(this.socket!==null){this.socket.removeEventListener("open",this.onSocketOpenHandler);this.socket.removeEventListener("close",this.onSocketCloseHandler);this.socket.removeEventListener("error",this.onSocketErrorHandler);this.socket.removeEventListener("message",this.onSocketMessageHandler);this.socket.close(e,t)}this.socket=null;this.disconnectCode=e;this.disconnectReason=t;this.connected=false}createSocket(){if(this.socket){throw new Error("Socket already exists")}if(!this.path){throw new Error("Websocket connection path is not defined")}this.socket=new WebSocket(this.path);this.socket.binaryType="arraybuffer";this.socket.addEventListener("open",this.onSocketOpenHandler);this.socket.addEventListener("close",this.onSocketCloseHandler);this.socket.addEventListener("error",this.onSocketErrorHandler);this.socket.addEventListener("message",this.onSocketMessageHandler)}send(e){if(!this.socket||this.socket.readyState!==1){console.error(W.getDateForLog()+": Pull: WebSocket is not connected");return false}this.socket.send(e);return true}onSocketOpen(){this.connected=true}onSocketClose(e){this.socket=null;this.disconnectCode=e.code;this.disconnectReason=e.reason;this.connected=false}onSocketError(e){this.callbacks.onError(e)}onSocketMessage(e){this.callbacks.onMessage(e.data)}destroy(){if(this.socket){this.socket.close();this.socket=null}}}class H extends L{constructor(e){super(e);this.active=false;this.connectionType=f.LongPolling;this.requestTimeout=null;this.failureTimeout=null;this.xhr=this.createXhr();this.requestAborted=false}createXhr(){const e=new XMLHttpRequest;if(this.parent.isProtobufSupported()&&!this.parent.isJsonRpc()){e.responseType="arraybuffer"}e.addEventListener("readystatechange",this.onXhrReadyStateChange.bind(this));return e}connect(){this.active=true;this.performRequest()}disconnect(e,t){this.active=false;if(this.failureTimeout){clearTimeout(this.failureTimeout);this.failureTimeout=null}if(this.requestTimeout){clearTimeout(this.requestTimeout);this.requestTimeout=null}if(this.xhr){this.requestAborted=true;this.xhr.abort()}this.disconnectCode=e;this.disconnectReason=t;this.connected=false}performRequest(){if(!this.active){return}if(!this.path){throw new Error("Long polling connection path is not defined")}if(this.xhr.readyState!==0&&this.xhr.readyState!==4){return}clearTimeout(this.failureTimeout);clearTimeout(this.requestTimeout);this.failureTimeout=setTimeout((()=>{this.connected=true}),5e3);this.requestTimeout=setTimeout(this.onRequestTimeout.bind(this),r*1e3);this.xhr.open("GET",this.path);this.xhr.send()}onRequestTimeout(){this.requestAborted=true;this.xhr.abort();this.performRequest()}onXhrReadyStateChange(){if(this.xhr.readyState===4){if(!this.requestAborted||this.xhr.status==200){this.onResponse(this.xhr.response)}this.requestAborted=false}}send(e){const t=this.parent.getPublicationPath();if(!t){console.error(W.getDateForLog()+": Pull: publication path is empty");return false}let n=new XMLHttpRequest;n.open("POST",t);n.send(e)}onResponse(e){if(this.failureTimeout){clearTimeout(this.failureTimeout);this.failureTimeout=0}if(this.requestTimeout){clearTimeout(this.requestTimeout);this.requestTimeout=0}if(this.xhr.status==200){this.connected=true;if(W.isNotEmptyString(e)||e instanceof ArrayBuffer){this.callbacks.onMessage(e)}else{this.parent.session.mid=null}this.performRequest()}else if(this.xhr.status==304){this.connected=true;if(this.xhr.getResponseHeader("Expires")==="Thu, 01 Jan 1973 11:11:01 GMT"){const e=this.xhr.getResponseHeader("Last-Message-Id");if(W.isNotEmptyString(e)){this.parent.setLastMessageId(e)}}this.performRequest()}else{this.callbacks.onError("Could not connect to the server");this.connected=false}}}class j{constructor(t){this.publicIds={};this.restClient=typeof t.restClient!=="undefined"?t.restClient:e.rest;this.getPublicListMethod=t.getPublicListMethod}getPublicIds(e){const t=new Date;let n={};let r=[];for(let i=0;i<e.length;i++){const s=e[i];if(this.publicIds[s]&&this.publicIds[s]["end"]>t){n[s]=this.publicIds[s]}else{r.push(s)}}if(r.length===0){return Promise.resolve(n)}return new Promise((e=>{this.restClient.callMethod(this.getPublicListMethod,{users:r}).then((t=>{if(t.error()){return e({})}const i=t.data();this.setPublicIds(W.objectValues(i));r.forEach((e=>{n[e]=this.publicIds[e]}));e(n)}))}))}setPublicIds(e){for(let t=0;t<e.length;t++){const n=e[t];const r=n.user_id;this.publicIds[r]={userId:r,publicId:n.public_id,signature:n.signature,start:new Date(n.start),end:new Date(n.end)}}}}class N{constructor(t){t=t||{};this.userId=t.userId?t.userId:typeof e.message!=="undefined"&&e.message.USER_ID?e.message.USER_ID:0;this.siteId=t.siteId?t.siteId:typeof e.message!=="undefined"&&e.message.SITE_ID?e.message.SITE_ID:"none"}set(e,t){if(typeof window.localStorage==="undefined"){return false}if(typeof t!="string"){if(t){t=JSON.stringify(t)}}return window.localStorage.setItem(this.getKey(e),t)}get(e,t){if(typeof window.localStorage==="undefined"){return t||null}const n=window.localStorage.getItem(this.getKey(e));if(n===null){return t||null}return JSON.parse(n)}remove(e){if(typeof window.localStorage==="undefined"){return false}return window.localStorage.removeItem(this.getKey(e))}getKey(e){return"bx-pull-"+this.userId+"-"+this.siteId+"-"+e}compareKey(e,t){return e===this.getKey(t)}}class B{idCounter=0;handlers={};rpcResponseAwaiters=new Map;constructor(e){this.connector=e.connector;if(W.isPlainObject(e.handlers)){for(let t in e.handlers){this.handle(t,e.handlers[t])}}}handle(e,t){this.handlers[e]=t}executeOutgoingRpcCommand(e,t,n){if(!n){n=5}return new Promise(((r,i)=>{const s=this.createRequest(e,t);if(!this.connector.send(JSON.stringify(s))){i(new F("websocket is not connected"))}const o=setTimeout((()=>{this.rpcResponseAwaiters.delete(s.id);i(new U("no response"))}),n*1e3);this.rpcResponseAwaiters.set(s.id,{resolve:r,reject:i,timeout:o})}))}executeOutgoingRpcBatch(e){let t=[];let n=[];e.forEach((({method:e,params:r,id:i})=>{const s=this.createRequest(e,r,i);t.push(s);n.push(new Promise(((e,t)=>this.rpcResponseAwaiters.set(s.id,{resolve:e,reject:t}))))}));this.connector.send(JSON.stringify(t));return n}processRpcResponse(e){if("id"in e&&this.rpcResponseAwaiters.has(e.id)){const t=this.rpcResponseAwaiters.get(e.id);if("result"in e){t.resolve(e.result)}else if("error"in e){t.reject(e.error)}else{t.reject(new Error("wrong response structure"))}clearTimeout(t.timeout);this.rpcResponseAwaiters.delete(e.id)}else{console.error("Received rpc response with unknown id",e)}}parseJsonRpcMessage(e){let t;try{t=JSON.parse(e)}catch(e){console.error(W.getDateForLog()+": Pull: Could not decode json rpc message",e)}if(W.isArray(t)){return this.executeIncomingRpcBatch(t)}else if(W.isJsonRpcRequest(t)){return this.executeIncomingRpcCommand(t)}else if(W.isJsonRpcResponse(t)){return this.processRpcResponse(t)}else{console.error(W.getDateForLog()+": Pull: unknown rpc packet",t)}}executeIncomingRpcCommand({method:e,params:t}){if(e in this.handlers){return this.handlers[e].call(this,t)}return{error:M.MethodNotFound}}executeIncomingRpcBatch(e){let t=[];for(let n of e){if("jsonrpc"in n){if("method"in n){let e=this.executeIncomingRpcCommand(n);if(e){e["jsonrpc"]=_;e["id"]=n["id"];t.push(e)}}else{this.processRpcResponse(n)}}else{console.error(W.getDateForLog()+": Pull: unknown rpc command in batch",n);t.push({jsonrpc:"2.0",error:M.InvalidRequest})}}return t}nextId(){return++this.idCounter}createPublishRequest(e){let t=e.map((e=>this.createRequest("publish",e)));if(t.length===0){return t[0]}return t}createRequest(e,t,n){if(!n){n=this.nextId()}return{jsonrpc:_,method:e,params:t,id:n}}}class F extends Error{constructor(e){super(e);this.name="ErrorNotConnected"}}class U extends Error{constructor(e){super(e);this.name="ErrorTimeout"}}const W={browser:{IsChrome:function(){return navigator.userAgent.toLowerCase().indexOf("chrome")!=-1},IsFirefox:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")!=-1},IsIe:function(){return navigator.userAgent.match(/(Trident\/|MSIE\/)/)!==null}},getTimestamp:function(){return(new Date).getTime()},errorsToString:function(e){if(!this.isArray(e)){return""}else{return e.reduce((function(e,t){if(e!=""){e+="; "}return e+t.code+": "+t.message}),"")}},isString:function(e){return e===""?true:e?typeof e=="string"||e instanceof String:false},isArray:function(e){return e&&Object.prototype.toString.call(e)=="[object Array]"},isFunction:function(e){return e===null?false:typeof e=="function"||e instanceof Function},isDomNode:function(e){return e&&typeof e=="object"&&"nodeType"in e},isDate:function(e){return e&&Object.prototype.toString.call(e)=="[object Date]"},isPlainObject:function(e){if(!e||typeof e!=="object"||e.nodeType){return false}const t=Object.prototype.hasOwnProperty;try{if(e.constructor&&!t.call(e,"constructor")&&!t.call(e.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}let n;for(n in e){}return typeof n==="undefined"||t.call(e,n)},isNotEmptyString:function(e){return this.isString(e)?e.length>0:false},isJsonRpcRequest:function(e){return typeof e==="object"&&e&&"jsonrpc"in e&&W.isNotEmptyString(e.jsonrpc)&&"method"in e&&W.isNotEmptyString(e.method)},isJsonRpcResponse:function(e){return typeof e==="object"&&e&&"jsonrpc"in e&&W.isNotEmptyString(e.jsonrpc)&&"id"in e&&("result"in e||"error"in e)},buildQueryString:function(e){let t="";for(let n in e){if(!e.hasOwnProperty(n)){continue}const r=e[n];if(W.isArray(r)){r.forEach(((e,r)=>{t+=encodeURIComponent(n+"["+r+"]")+"="+encodeURIComponent(e)+"&"}))}else{t+=encodeURIComponent(n)+"="+encodeURIComponent(r)+"&"}}if(t.length>0){t=t.substr(0,t.length-1)}return t},objectValues:function e(t){let n=[];for(let e in t){if(t.hasOwnProperty(e)&&t.propertyIsEnumerable(e)){n.push(t[e])}}return n},clone:function(e,t){let n,r,i;if(t!==false){t=true}if(e===null){return null}if(this.isDomNode(e)){n=e.cloneNode(t)}else if(typeof e=="object"){if(this.isArray(e)){n=[];for(r=0,i=e.length;r<i;r++){if(typeof e[r]=="object"&&t){n[r]=this.clone(e[r],t)}else{n[r]=e[r]}}}else{n={};if(e.constructor){if(this.isDate(e)){n=new Date(e)}else{n=new e.constructor}}for(r in e){if(!e.hasOwnProperty(r)){continue}if(typeof e[r]=="object"&&t){n[r]=this.clone(e[r],t)}else{n[r]=e[r]}}}}else{n=e}return n},getDateForLog:function(){const e=new Date;return e.getFullYear()+"-"+W.lpad(e.getMonth(),2,"0")+"-"+W.lpad(e.getDate(),2,"0")+" "+W.lpad(e.getHours(),2,"0")+":"+W.lpad(e.getMinutes(),2,"0")},lpad:function(e,t,n){e=e.toString();n=n||" ";if(e.length>t){return e}let r="";for(let i=0;i<t-e.length;i++){r+=n}return r+e}};if(typeof e.namespace!=="undefined"&&typeof e.PULL==="undefined"){e.PULL=new A}e.PullClient=A;e.PullClient.PullStatus=d;e.PullClient.SubscriptionType=p;e.PullClient.CloseReasons=m;e.PullClient.StorageManager=N})();(function(e,t,n,r){"use strict";
/**
	 * Bitrix UI
	 * Pull connection status Vue component
	 *
	 * @package bitrix
	 * @subpackage pull
	 * @copyright 2001-2019 Bitrix
	 */n.WidgetBitrixVue.component("bx-pull-component-status",{props:{canReconnect:{default:false}},data:function e(){return{status:r.PullClient.PullStatus.Online,showed:null}},created:function e(){var t=this;this.isMac=navigator.userAgent.toLowerCase().includes("macintosh");this.setStatusTimeout=null;this.hideTimeout=null;this.pullUnSubscribe=function(){};if(this.$Bitrix.PullClient.get()){this.subscribe()}this.$Bitrix.eventEmitter.subscribe(n.WidgetBitrixVue.events.pullClientChange,(function(){return t.subscribe()}))},beforeDestroy:function e(){this.pullUnSubscribe()},methods:{subscribe:function e(){var t=this;this.pullUnSubscribe();this.pullUnSubscribe=this.$Bitrix.PullClient.get().subscribe({type:r.PullClient.SubscriptionType.Status,callback:function e(n){return t.statusChange(n.status)}})},reconnect:function e(){if(this.canReconnect){this.$emit("reconnect")}else{location.reload()}},statusChange:function e(t){var n=this;clearTimeout(this.setStatusTimeout);if(this.status===t){return false}var i=[r.PullClient.PullStatus.Online,r.PullClient.PullStatus.Offline,r.PullClient.PullStatus.Connecting];if(i.indexOf(t)<0){return false}var s=500;if(t===r.PullClient.PullStatus.Connecting){s=5e3}else if(t===r.PullClient.PullStatus.Offline){s=2e3}this.setStatusTimeout=setTimeout((function(){n.status=t;n.showed=true}),s);return true},isMobile:function e(){return navigator.userAgent.toLowerCase().includes("android")||navigator.userAgent.toLowerCase().includes("webos")||navigator.userAgent.toLowerCase().includes("iphone")||navigator.userAgent.toLowerCase().includes("ipad")||navigator.userAgent.toLowerCase().includes("ipod")||navigator.userAgent.toLowerCase().includes("blackberry")||navigator.userAgent.toLowerCase().includes("windows phone")}},watch:{status:function e(){var t=this;clearTimeout(this.hideTimeout);if(this.status===r.PullClient.PullStatus.Online){clearTimeout(this.hideTimeout);this.hideTimeout=setTimeout((function(){return t.showed=false}),4e3)}}},computed:{connectionClass:function e(){var t="";if(this.showed===true){t="bx-pull-status-show"}else if(this.showed===false){t="bx-pull-status-hide"}if(this.status===r.PullClient.PullStatus.Online){t+=" bx-pull-status-online"}else if(this.status===r.PullClient.PullStatus.Offline){t+=" bx-pull-status-offline"}else if(this.status===r.PullClient.PullStatus.Connecting){t+=" bx-pull-status-connecting"}return t},connectionText:function e(){var t="";if(this.status===r.PullClient.PullStatus.Online){t=this.localize.BX_PULL_STATUS_ONLINE}else if(this.status===r.PullClient.PullStatus.Offline){t=this.localize.BX_PULL_STATUS_OFFLINE}else if(this.status===r.PullClient.PullStatus.Connecting){t=this.localize.BX_PULL_STATUS_CONNECTING}return t},button:function e(){var t="";var n="";if(this.canReconnect){n=this.localize.BX_PULL_STATUS_BUTTON_RECONNECT}else{t=this.isMac?"&#8984;+R":"Ctrl+R";n=this.localize.BX_PULL_STATUS_BUTTON_RELOAD}return{title:n,key:t}},localize:function e(){return n.WidgetBitrixVue.getFilteredPhrases("BX_PULL_STATUS_",this)}},template:'\n\t\t<div v-if="!isMobile()" :class="[\'bx-pull-status\', connectionClass]">\n\t\t\t<div class="bx-pull-status-wrap">\n\t\t\t\t<span class="bx-pull-status-text">{{connectionText}}</span>\n\t\t\t\t<span class="bx-pull-status-button" @click="reconnect">\n\t\t\t\t\t<span class="bx-pull-status-button-title">{{button.title}}</span>\n\t\t\t\t\t<span class="bx-pull-status-button-key" v-html="button.key"></span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,BX,BX);
/*!
  * ProgressBar.js v1.1.0
  * (c) 2016 Kimmo Brunfeldt
  * @license MIT
  *
  * GitHub: https://kimmobrunfeldt.github.io/progressbar.js
  */(function(e){if(typeof window.BX==="undefined"){window.BX={}}window.BX.ProgressBarJs=e()})((function(){var e,t,n;return function(){function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){var n=t[o][1][e];return i(n||e)}),c,c.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}return e}()({1:[function(t,n,r){
/*! Shifty 2.8.0 - https://github.com/jeremyckahn/shifty */
!function(t,i){"object"==typeof r&&"object"==typeof n?n.exports=i():"function"==typeof e&&e.amd?e("shifty",[],i):"object"==typeof r?r.shifty=i():t.shifty=i()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";(function(e){n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return w}));var r=n(1);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l="undefined"!=typeof window?window:e,u=l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.oRequestAnimationFrame||l.msRequestAnimationFrame||l.mozCancelRequestAnimationFrame&&l.mozRequestAnimationFrame||setTimeout,c=function(){},f=null,d=null,h=o({},r),p=function(e,t,n,r,i,s,o){var a=e<s?0:(e-s)/i;for(var l in t){var u=o[l],c=u.call?u:h[u],f=n[l];t[l]=f+(r[l]-f)*c(a)}return t},m=function(e,t){var n=e._attachment,r=e._currentState,i=e._delay,s=e._easing,o=e._originalState,a=e._duration,l=e._step,u=e._targetState,c=e._timestamp,f=c+i+a,d=t>f?f:t,h=a-(f-d);d>=f?(l(u,n,h),e.stop(!0)):(e._applyFilter("beforeTween"),d<c+i?(d=1,a=1,c=1):c+=i,p(d,r,o,u,a,c,s),e._applyFilter("afterTween"),l(r,n,h))},g=function(){for(var e=b.now(),t=f;t;){var n=t._next;m(t,e),t=n}},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear",n={},r=s(t);if("string"===r||"function"===r)for(var i in e)n[i]=t;else for(var o in e)n[o]=t[o]||"linear";return n},y=function(e){if(e===f)(f=e._next)?f._previous=null:d=null;else if(e===d)(d=e._previous)?d._next=null:f=null;else{var t=e._previous,n=e._next;t._next=n,n._previous=t}e._previous=e._next=null},b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._currentState=t,this._configured=!1,this._filters=[],this._timestamp=null,this._next=null,this._previous=null,n&&this.setConfig(n)}var t,n,r;return t=e,(n=[{key:"_applyFilter",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,s=this._filters[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var o=i.value[e];o&&o(this)}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}}},{key:"tween",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=this._attachment,r=this._configured;return!t&&r||this.setConfig(t),this._pausedAtTime=null,this._timestamp=e.now(),this._start(this.get(),n),this.resume()}},{key:"setConfig",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.attachment,i=n.delay,s=void 0===i?0:i,a=n.duration,l=void 0===a?500:a,u=n.easing,f=n.from,d=n.promise,h=void 0===d?Promise:d,p=n.start,m=void 0===p?c:p,g=n.step,y=void 0===g?c:g,b=n.to;this._configured=!0,this._attachment=r,this._isPlaying=!1,this._pausedAtTime=null,this._scheduleId=null,this._delay=s,this._start=m,this._step=y,this._duration=l,this._currentState=o({},f||this.get()),this._originalState=this.get(),this._targetState=o({},b||this.get());var w=this._currentState;this._targetState=o({},w,this._targetState),this._easing=v(w,u);var S=e.filters;for(var k in this._filters.length=0,S)S[k].doesApply(this)&&this._filters.push(S[k]);return this._applyFilter("tweenCreated"),this._promise=new h((function(e,n){t._resolve=e,t._reject=n})),this._promise.catch(c),this}},{key:"get",value:function(){return o({},this._currentState)}},{key:"set",value:function(e){this._currentState=e}},{key:"pause",value:function(){if(this._isPlaying)return this._pausedAtTime=e.now(),this._isPlaying=!1,y(this),this}},{key:"resume",value:function(){if(null===this._timestamp)return this.tween();if(this._isPlaying)return this._promise;var t=e.now();return this._pausedAtTime&&(this._timestamp+=t-this._pausedAtTime,this._pausedAtTime=null),this._isPlaying=!0,null===f?(f=this,d=this,function e(){f&&(u.call(l,e,1e3/60),g())}()):(this._previous=d,d._next=this,d=this),this._promise}},{key:"seek",value:function(t){t=Math.max(t,0);var n=e.now();return this._timestamp+t===0?this:(this._timestamp=n-t,this._isPlaying||m(this,n),this)}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._attachment,n=this._currentState,r=this._easing,i=this._originalState,s=this._targetState;if(this._isPlaying)return this._isPlaying=!1,y(this),e?(this._applyFilter("beforeTween"),p(1,n,i,s,1,0,r),this._applyFilter("afterTween"),this._applyFilter("afterTweenEnd"),this._resolve(n,t)):this._reject(n,t),this}},{key:"isPlaying",value:function(){return this._isPlaying}},{key:"setScheduleFunction",value:function(t){e.setScheduleFunction(t)}},{key:"dispose",value:function(){for(var e in this)delete this[e]}}])&&i(t.prototype,n),r&&i(t,r),e}();function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new b,n=t.tween(e);return n.tweenable=t,n}b.setScheduleFunction=function(e){return u=e},b.formulas=h,b.filters={},b.now=Date.now||function(){return+new Date}}).call(this,n(2))},function(e,t,n){"use strict";n.r(t),n.d(t,"linear",(function(){return r})),n.d(t,"easeInQuad",(function(){return i})),n.d(t,"easeOutQuad",(function(){return s})),n.d(t,"easeInOutQuad",(function(){return o})),n.d(t,"easeInCubic",(function(){return a})),n.d(t,"easeOutCubic",(function(){return l})),n.d(t,"easeInOutCubic",(function(){return u})),n.d(t,"easeInQuart",(function(){return c})),n.d(t,"easeOutQuart",(function(){return f})),n.d(t,"easeInOutQuart",(function(){return d})),n.d(t,"easeInQuint",(function(){return h})),n.d(t,"easeOutQuint",(function(){return p})),n.d(t,"easeInOutQuint",(function(){return m})),n.d(t,"easeInSine",(function(){return g})),n.d(t,"easeOutSine",(function(){return v})),n.d(t,"easeInOutSine",(function(){return y})),n.d(t,"easeInExpo",(function(){return b})),n.d(t,"easeOutExpo",(function(){return w})),n.d(t,"easeInOutExpo",(function(){return S})),n.d(t,"easeInCirc",(function(){return k})),n.d(t,"easeOutCirc",(function(){return I})),n.d(t,"easeInOutCirc",(function(){return E})),n.d(t,"easeOutBounce",(function(){return C})),n.d(t,"easeInBack",(function(){return _})),n.d(t,"easeOutBack",(function(){return x})),n.d(t,"easeInOutBack",(function(){return T})),n.d(t,"elastic",(function(){return O})),n.d(t,"swingFromTo",(function(){return M})),n.d(t,"swingFrom",(function(){return D})),n.d(t,"swingTo",(function(){return A})),n.d(t,"bounce",(function(){return P})),n.d(t,"bouncePast",(function(){return L})),n.d(t,"easeFromTo",(function(){return R})),n.d(t,"easeFrom",(function(){return H})),n.d(t,"easeTo",(function(){return j}));
/*!
 * All equations are adapted from Thomas Fuchs'
 * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js).
 *
 * Based on Easing Equations (c) 2003 [Robert
 * Penner](http://www.robertpenner.com/), all rights reserved. This work is
 * [subject to terms](http://www.robertpenner.com/easing_terms_of_use.html).
 */
/*!
 *  TERMS OF USE - EASING EQUATIONS
 *  Open source under the BSD License.
 *  Easing Equations (c) 2003 Robert Penner, all rights reserved.
 */var r=function(e){return e},i=function(e){return Math.pow(e,2)},s=function(e){return-(Math.pow(e-1,2)-1)},o=function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},a=function(e){return Math.pow(e,3)},l=function(e){return Math.pow(e-1,3)+1},u=function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},c=function(e){return Math.pow(e,4)},f=function(e){return-(Math.pow(e-1,4)-1)},d=function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},h=function(e){return Math.pow(e,5)},p=function(e){return Math.pow(e-1,5)+1},m=function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},g=function(e){return 1-Math.cos(e*(Math.PI/2))},v=function(e){return Math.sin(e*(Math.PI/2))},y=function(e){return-.5*(Math.cos(Math.PI*e)-1)},b=function(e){return 0===e?0:Math.pow(2,10*(e-1))},w=function(e){return 1===e?1:1-Math.pow(2,-10*e)},S=function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},k=function(e){return-(Math.sqrt(1-e*e)-1)},I=function(e){return Math.sqrt(1-Math.pow(e-1,2))},E=function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},C=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},_=function(e){var t=1.70158;return e*e*((t+1)*e-t)},x=function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},T=function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},O=function(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},M=function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},D=function(e){var t=1.70158;return e*e*((t+1)*e-t)},A=function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},P=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},L=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?2-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},R=function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},H=function(e){return Math.pow(e,4)},j=function(e){return Math.pow(e,.25)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"doesApply",(function(){return T})),n.d(r,"tweenCreated",(function(){return O})),n.d(r,"beforeTween",(function(){return M})),n.d(r,"afterTween",(function(){return D}));var i,s,o=n(0),a=/(\d|-|\.)/,l=/([^\-0-9.]+)/g,u=/[0-9.-]+/g,c=(i=u.source,s=/,\s*/.source,new RegExp("rgb\\(".concat(i).concat(s).concat(i).concat(s).concat(i,"\\)"),"g")),f=/^.*\(/,d=/#([0-9]|[a-f]){3,6}/gi,h=function(e,t){return e.map((function(e,n){return"_".concat(t,"_").concat(n)}))};function p(e){return parseInt(e,16)}var m=function(e){return"rgb(".concat((t=e,3===(t=t.replace(/#/,"")).length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[p(t.substr(0,2)),p(t.substr(2,2)),p(t.substr(4,2))]).join(","),")");var t},g=function(e,t,n){var r=t.match(e),i=t.replace(e,"VAL");return r&&r.forEach((function(e){return i=i.replace("VAL",n(e))})),i},v=function(e){for(var t in e){var n=e[t];"string"==typeof n&&n.match(d)&&(e[t]=g(d,n,m))}},y=function(e){var t=e.match(u).map(Math.floor),n=e.match(f)[0];return"".concat(n).concat(t.join(","),")")},b=function(e){return e.match(u)},w=function(e){var t,n,r={};for(var i in e){var s=e[i];"string"==typeof s&&(r[i]={formatString:(t=s,n=void 0,n=t.match(l),n?(1===n.length||t.charAt(0).match(a))&&n.unshift(""):n=["",""],n.join("VAL")),chunkNames:h(b(s),i)})}return r},S=function(e,t){var n=function(n){b(e[n]).forEach((function(r,i){return e[t[n].chunkNames[i]]=+r})),delete e[n]};for(var r in t)n(r)},k=function(e,t){var n={};return t.forEach((function(t){n[t]=e[t],delete e[t]})),n},I=function(e,t){return t.map((function(t){return e[t]}))},E=function(e,t){return t.forEach((function(t){return e=e.replace("VAL",+t.toFixed(4))})),e},C=function(e,t){for(var n in t){var r=t[n],i=r.chunkNames,s=r.formatString,o=E(s,I(k(e,i),i));e[n]=g(c,o,y)}},_=function(e,t){var n=function(n){var r=t[n].chunkNames,i=e[n];if("string"==typeof i){var s=i.split(" "),o=s[s.length-1];r.forEach((function(t,n){return e[t]=s[n]||o}))}else r.forEach((function(t){return e[t]=i}));delete e[n]};for(var r in t)n(r)},x=function(e,t){for(var n in t){var r=t[n].chunkNames,i=e[r[0]];e[n]="string"==typeof i?r.map((function(t){var n=e[t];return delete e[t],n})).join(" "):i}},T=function(e){var t=e._currentState;return Object.keys(t).some((function(e){return"string"==typeof t[e]}))};function O(e){var t=e._currentState;[t,e._originalState,e._targetState].forEach(v),e._tokenData=w(t)}function M(e){var t=e._currentState,n=e._originalState,r=e._targetState,i=e._easing,s=e._tokenData;_(i,s),[t,n,r].forEach((function(e){return S(e,s)}))}function D(e){var t=e._currentState,n=e._originalState,r=e._targetState,i=e._easing,s=e._tokenData;[t,n,r].forEach((function(e){return C(e,s)})),x(i,s)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=new o.a,L=o.a.filters,R=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}({},e),a=Object(o.b)(e,r);for(var l in P._filters.length=0,P.set({}),P._currentState=s,P._originalState=e,P._targetState=t,P._easing=a,L)L[l].doesApply(P)&&P._filters.push(L[l]);P._applyFilter("tweenCreated"),P._applyFilter("beforeTween");var u=Object(o.e)(n,s,e,t,1,i,a);return P._applyFilter("afterTween"),u};function H(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");var n=t.get(e);return n.get?n.get.call(e):n.value}var B=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),F.set(this,{writable:!0,value:[]});for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(this.add.bind(this))}var t,n,r;return t=e,(n=[{key:"add",value:function(e){return N(this,F).push(e),e}},{key:"remove",value:function(e){var t=N(this,F).indexOf(e);return~t&&N(this,F).splice(t,1),e}},{key:"empty",value:function(){return this.tweenables.map(this.remove.bind(this))}},{key:"isPlaying",value:function(){return N(this,F).some((function(e){return e.isPlaying()}))}},{key:"play",value:function(){return N(this,F).forEach((function(e){return e.tween()})),this}},{key:"pause",value:function(){return N(this,F).forEach((function(e){return e.pause()})),this}},{key:"resume",value:function(){return N(this,F).forEach((function(e){return e.resume()})),this}},{key:"stop",value:function(e){return N(this,F).forEach((function(t){return t.stop(e)})),this}},{key:"tweenables",get:function(){return H(N(this,F))}},{key:"promises",get:function(){return N(this,F).map((function(e){return e._promise}))}}])&&j(t.prototype,n),r&&j(t,r),e}(),F=new WeakMap;function U(e,t,n,r,i,s){var o=0,a=0,l=0,u=0,c=0,f=0,d=function(e){return((o*e+a)*e+l)*e},h=function(e){return e>=0?e:0-e};return o=1-(l=3*t)-(a=3*(r-t)-l),u=1-(f=3*n)-(c=3*(i-n)-f),function(e,t){return n=function(e,t){var n,r,i,s,u,c,f;for(i=e,c=0;c<8;c++){if(s=d(i)-e,h(s)<t)return i;if(h(u=(3*o*(f=i)+2*a)*f+l)<1e-6)break;i-=s/u}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(s=d(i),h(s-e)<t)return i;e>s?n=i:r=i,i=.5*(r-n)+n}return i}(e,t),((u*n+c)*n+f)*n;var n}(e,function(e){return 1/(200*e)}(s))}var W=function(e,t,n,r,i){var s=function(e,t,n,r){return function(i){return U(i,e,t,n,r,1)}}(t,n,r,i);return s.displayName=e,s.x1=t,s.y1=n,s.x2=r,s.y2=i,o.a.formulas[e]=s},$=function(e){return delete o.a.formulas[e]};n.d(t,"processTweens",(function(){return o.c})),n.d(t,"Tweenable",(function(){return o.a})),n.d(t,"tween",(function(){return o.d})),n.d(t,"interpolate",(function(){return R})),n.d(t,"Scene",(function(){return B})),n.d(t,"setBezierFunction",(function(){return W})),n.d(t,"unsetBezierFunction",(function(){return $})),o.a.filters.token=r}])}))},{}],2:[function(e,t,n){var r=e("./shape");var i=e("./utils");var s=function e(t,n){this._pathTemplate="M 50,50 m 0,-{radius}"+" a {radius},{radius} 0 1 1 0,{2radius}"+" a {radius},{radius} 0 1 1 0,-{2radius}";this.containerAspectRatio=1;r.apply(this,arguments)};s.prototype=new r;s.prototype.constructor=s;s.prototype._pathString=function e(t){var n=t.strokeWidth;if(t.trailWidth&&t.trailWidth>t.strokeWidth){n=t.trailWidth}var r=50-n/2;return i.render(this._pathTemplate,{radius:r,"2radius":r*2})};s.prototype._trailString=function e(t){return this._pathString(t)};t.exports=s},{"./shape":7,"./utils":9}],3:[function(e,t,n){var r=e("./shape");var i=e("./utils");var s=function e(t,n){this._pathTemplate="M 0,{center} L 100,{center}";r.apply(this,arguments)};s.prototype=new r;s.prototype.constructor=s;s.prototype._initializeSvg=function e(t,n){t.setAttribute("viewBox","0 0 100 "+n.strokeWidth);t.setAttribute("preserveAspectRatio","none")};s.prototype._pathString=function e(t){return i.render(this._pathTemplate,{center:t.strokeWidth/2})};s.prototype._trailString=function e(t){return this._pathString(t)};t.exports=s},{"./shape":7,"./utils":9}],4:[function(e,t,n){t.exports={Line:e("./line"),Circle:e("./circle"),SemiCircle:e("./semicircle"),Square:e("./square"),Path:e("./path"),Shape:e("./shape"),utils:e("./utils")}},{"./circle":2,"./line":3,"./path":5,"./semicircle":6,"./shape":7,"./square":8,"./utils":9}],5:[function(e,t,n){var r=e("shifty");var i=e("./utils");var s=r.Tweenable;var o={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"};var a=function e(t,n){if(!(this instanceof e)){throw new Error("Constructor was called without new keyword")}n=i.extend({delay:0,duration:800,easing:"linear",from:{},to:{},step:function(){}},n);var r;if(i.isString(t)){r=document.querySelector(t)}else{r=t}this.path=r;this._opts=n;this._tweenable=null;var s=this.path.getTotalLength();this.path.style.strokeDasharray=s+" "+s;this.set(0)};a.prototype.value=function e(){var t=this._getComputedDashOffset();var n=this.path.getTotalLength();var r=1-t/n;return parseFloat(r.toFixed(6),10)};a.prototype.set=function e(t){this.stop();this.path.style.strokeDashoffset=this._progressToOffset(t);var n=this._opts.step;if(i.isFunction(n)){var r=this._easing(this._opts.easing);var s=this._calculateTo(t,r);var o=this._opts.shape||this;n(s,o,this._opts.attachment)}};a.prototype.stop=function e(){this._stopTween();this.path.style.strokeDashoffset=this._getComputedDashOffset()};a.prototype.animate=function e(t,n,r){n=n||{};if(i.isFunction(n)){r=n;n={}}var o=i.extend({},n);var a=i.extend({},this._opts);n=i.extend(a,n);var l=this._easing(n.easing);var u=this._resolveFromAndTo(t,l,o);this.stop();this.path.getBoundingClientRect();var c=this._getComputedDashOffset();var f=this._progressToOffset(t);var d=this;this._tweenable=new s;this._tweenable.tween({from:i.extend({offset:c},u.from),to:i.extend({offset:f},u.to),duration:n.duration,delay:n.delay,easing:l,step:function(e){d.path.style.strokeDashoffset=e.offset;var t=n.shape||d;n.step(e,t,n.attachment)}}).then((function(e){if(i.isFunction(r)){r()}})).catch((function(e){}))};a.prototype._getComputedDashOffset=function e(){var t=window.getComputedStyle(this.path,null);var n=t.getPropertyValue("stroke-dashoffset");return n?parseFloat(n,10):0};a.prototype._progressToOffset=function e(t){var n=this.path.getTotalLength();return n-t*n};a.prototype._resolveFromAndTo=function e(t,n,r){if(r.from&&r.to){return{from:r.from,to:r.to}}return{from:this._calculateFrom(n),to:this._calculateTo(t,n)}};a.prototype._calculateFrom=function e(t){return r.interpolate(this._opts.from,this._opts.to,this.value(),t)};a.prototype._calculateTo=function e(t,n){return r.interpolate(this._opts.from,this._opts.to,t,n)};a.prototype._stopTween=function e(){if(this._tweenable!==null){this._tweenable.stop();this._tweenable=null}};a.prototype._easing=function e(t){if(o.hasOwnProperty(t)){return o[t]}return t};t.exports=a},{"./utils":9,shifty:1}],6:[function(e,t,n){var r=e("./shape");var i=e("./circle");var s=e("./utils");var o=function e(t,n){this._pathTemplate="M 50,50 m -{radius},0"+" a {radius},{radius} 0 1 1 {2radius},0";this.containerAspectRatio=2;r.apply(this,arguments)};o.prototype=new r;o.prototype.constructor=o;o.prototype._initializeSvg=function e(t,n){t.setAttribute("viewBox","0 0 100 50")};o.prototype._initializeTextContainer=function e(t,n,r){if(t.text.style){r.style.top="auto";r.style.bottom="0";if(t.text.alignToBottom){s.setStyle(r,"transform","translate(-50%, 0)")}else{s.setStyle(r,"transform","translate(-50%, 50%)")}}};o.prototype._pathString=i.prototype._pathString;o.prototype._trailString=i.prototype._trailString;t.exports=o},{"./circle":2,"./shape":7,"./utils":9}],7:[function(e,t,n){var r=e("./path");var i=e("./utils");var s="Object is destroyed";var o=function e(t,n){if(!(this instanceof e)){throw new Error("Constructor was called without new keyword")}if(arguments.length===0){return}this._opts=i.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:true,value:"translate(-50%, -50%)"}},autoStyleContainer:true,alignToBottom:true,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:false},n,true);if(i.isObject(n)&&n.svgStyle!==undefined){this._opts.svgStyle=n.svgStyle}if(i.isObject(n)&&i.isObject(n.text)&&n.text.style!==undefined){this._opts.text.style=n.text.style}var s=this._createSvgView(this._opts);var o;if(i.isString(t)){o=document.querySelector(t)}else{o=t}if(!o){throw new Error("Container does not exist: "+t)}this._container=o;this._container.appendChild(s.svg);if(this._opts.warnings){this._warnContainerAspectRatio(this._container)}if(this._opts.svgStyle){i.setStyles(s.svg,this._opts.svgStyle)}this.svg=s.svg;this.path=s.path;this.trail=s.trail;this.text=null;var a=i.extend({attachment:undefined,shape:this},this._opts);this._progressPath=new r(s.path,a);if(i.isObject(this._opts.text)&&this._opts.text.value!==null){this.setText(this._opts.text.value)}};o.prototype.animate=function e(t,n,r){if(this._progressPath===null){throw new Error(s)}this._progressPath.animate(t,n,r)};o.prototype.stop=function e(){if(this._progressPath===null){throw new Error(s)}if(this._progressPath===undefined){return}this._progressPath.stop()};o.prototype.pause=function e(){if(this._progressPath===null){throw new Error(s)}if(this._progressPath===undefined){return}if(!this._progressPath._tweenable){return}this._progressPath._tweenable.pause()};o.prototype.resume=function e(){if(this._progressPath===null){throw new Error(s)}if(this._progressPath===undefined){return}if(!this._progressPath._tweenable){return}this._progressPath._tweenable.resume()};o.prototype.destroy=function e(){if(this._progressPath===null){throw new Error(s)}this.stop();this.svg.parentNode.removeChild(this.svg);this.svg=null;this.path=null;this.trail=null;this._progressPath=null;if(this.text!==null){this.text.parentNode.removeChild(this.text);this.text=null}};o.prototype.set=function e(t){if(this._progressPath===null){throw new Error(s)}this._progressPath.set(t)};o.prototype.value=function e(){if(this._progressPath===null){throw new Error(s)}if(this._progressPath===undefined){return 0}return this._progressPath.value()};o.prototype.setText=function e(t){if(this._progressPath===null){throw new Error(s)}if(this.text===null){this.text=this._createTextContainer(this._opts,this._container);this._container.appendChild(this.text)}if(i.isObject(t)){i.removeChildren(this.text);this.text.appendChild(t)}else{this.text.innerHTML=t}};o.prototype._createSvgView=function e(t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(n,t);var r=null;if(t.trailColor||t.trailWidth){r=this._createTrail(t);n.appendChild(r)}var i=this._createPath(t);n.appendChild(i);return{svg:n,path:i,trail:r}};o.prototype._initializeSvg=function e(t,n){t.setAttribute("viewBox","0 0 100 100")};o.prototype._createPath=function e(t){var n=this._pathString(t);return this._createPathElement(n,t)};o.prototype._createTrail=function e(t){var n=this._trailString(t);var r=i.extend({},t);if(!r.trailColor){r.trailColor="#eee"}if(!r.trailWidth){r.trailWidth=r.strokeWidth}r.color=r.trailColor;r.strokeWidth=r.trailWidth;r.fill=null;return this._createPathElement(n,r)};o.prototype._createPathElement=function e(t,n){var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d",t);r.setAttribute("stroke",n.color);r.setAttribute("stroke-width",n.strokeWidth);if(n.fill){r.setAttribute("fill",n.fill)}else{r.setAttribute("fill-opacity","0")}return r};o.prototype._createTextContainer=function e(t,n){var r=document.createElement("div");r.className=t.text.className;var s=t.text.style;if(s){if(t.text.autoStyleContainer){n.style.position="relative"}i.setStyles(r,s);if(!s.color){r.style.color=t.color}}this._initializeTextContainer(t,n,r);return r};o.prototype._initializeTextContainer=function(e,t,n){};o.prototype._pathString=function e(t){throw new Error("Override this function for each progress bar")};o.prototype._trailString=function e(t){throw new Error("Override this function for each progress bar")};o.prototype._warnContainerAspectRatio=function e(t){if(!this.containerAspectRatio){return}var n=window.getComputedStyle(t,null);var r=parseFloat(n.getPropertyValue("width"),10);var s=parseFloat(n.getPropertyValue("height"),10);if(!i.floatEquals(this.containerAspectRatio,r/s)){console.warn("Incorrect aspect ratio of container","#"+t.id,"detected:",n.getPropertyValue("width")+"(width)","/",n.getPropertyValue("height")+"(height)","=",r/s);console.warn("Aspect ratio of should be",this.containerAspectRatio)}};t.exports=o},{"./path":5,"./utils":9}],8:[function(e,t,n){var r=e("./shape");var i=e("./utils");var s=function e(t,n){this._pathTemplate="M 0,{halfOfStrokeWidth}"+" L {width},{halfOfStrokeWidth}"+" L {width},{width}"+" L {halfOfStrokeWidth},{width}"+" L {halfOfStrokeWidth},{strokeWidth}";this._trailTemplate="M {startMargin},{halfOfStrokeWidth}"+" L {width},{halfOfStrokeWidth}"+" L {width},{width}"+" L {halfOfStrokeWidth},{width}"+" L {halfOfStrokeWidth},{halfOfStrokeWidth}";r.apply(this,arguments)};s.prototype=new r;s.prototype.constructor=s;s.prototype._pathString=function e(t){var n=100-t.strokeWidth/2;return i.render(this._pathTemplate,{width:n,strokeWidth:t.strokeWidth,halfOfStrokeWidth:t.strokeWidth/2})};s.prototype._trailString=function e(t){var n=100-t.strokeWidth/2;return i.render(this._trailTemplate,{width:n,strokeWidth:t.strokeWidth,halfOfStrokeWidth:t.strokeWidth/2,startMargin:t.strokeWidth/2-t.trailWidth/2})};t.exports=s},{"./shape":7,"./utils":9}],9:[function(e,t,n){var r="Webkit Moz O ms".split(" ");var i=.001;function s(e,t,n){e=e||{};t=t||{};n=n||false;for(var r in t){if(t.hasOwnProperty(r)){var i=e[r];var o=t[r];if(n&&h(i)&&h(o)){e[r]=s(i,o,n)}else{e[r]=o}}}return e}function o(e,t){var n=e;for(var r in t){if(t.hasOwnProperty(r)){var i=t[r];var s="\\{"+r+"\\}";var o=new RegExp(s,"g");n=n.replace(o,i)}}return n}function a(e,t,n){var i=e.style;for(var s=0;s<r.length;++s){var o=r[s];i[o+u(t)]=n}i[t]=n}function l(e,t){p(t,(function(t,n){if(t===null||t===undefined){return}if(h(t)&&t.prefix===true){a(e,n,t.value)}else{e.style[n]=t}}))}function u(e){return e.charAt(0).toUpperCase()+e.slice(1)}function c(e){return typeof e==="string"||e instanceof String}function f(e){return typeof e==="function"}function d(e){return Object.prototype.toString.call(e)==="[object Array]"}function h(e){if(d(e)){return false}var t=typeof e;return t==="object"&&!!e}function p(e,t){for(var n in e){if(e.hasOwnProperty(n)){var r=e[n];t(r,n)}}}function m(e,t){return Math.abs(e-t)<i}function g(e){while(e.firstChild){e.removeChild(e.firstChild)}}t.exports={extend:s,render:o,setStyle:a,setStyles:l,capitalize:u,isString:c,isFunction:f,isObject:h,forEachObject:p,floatEquals:m,removeChildren:g}},{}]},{},[4])(4)}));this.BX=this.BX||{};(function(e){"use strict";var t=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);this.container=t.container;if(this.container&&typeof t.blurElement==="undefined"){t.blurElement=this.container.firstElementChild}this.blurElement=t.blurElement;this.direction=e.direction[t.direction]?t.direction:e.direction.vertical;t.sizes=t.sizes&&babelHelpers["typeof"](t.sizes)==="object"?t.sizes:{};this.sizes={circle:t.sizes.circle?t.sizes.circle:54,progress:t.sizes.progress?t.sizes.progress:4,margin:t.sizes.margin?t.sizes.margin:0};t.labels=t.labels&&babelHelpers["typeof"](t.labels)==="object"?t.labels:{};this.labels={loading:t.labels.loading?t.labels.loading:"",completed:t.labels.completed?t.labels.completed:"",canceled:t.labels.canceled?t.labels.canceled:"",cancelTitle:t.labels.cancelTitle?t.labels.cancelTitle:"",megabyte:t.labels.megabyte?t.labels.megabyte:"MB"};this.cancelCallback=typeof t.cancelCallback==="function"?t.cancelCallback:null;this.destroyCallback=typeof t.destroyCallback==="function"?t.destroyCallback:null;this.icon=e.icon[t.icon]?t.icon:!this.cancelCallback?e.icon.cloud:e.icon.cancel;this.inited=!!this.container;this.destroing=false}babelHelpers.createClass(e,[{key:"start",value:function t(){var n=this;if(!this.inited){return false}clearTimeout(this.timeoutSetIcon);clearTimeout(this.timeout);this.active=true;this.canceled=false;this.cancelCallbackDisabled=false;this.wrapper=document.createElement("div");this.wrapper.classList.add("ui-file-progressbar-loader-wrapper");this.wrapper.innerHTML='\n\t\t\t<div class="ui-file-progressbar-loader">\n\t\t\t\t<div class="ui-file-progressbar-icon"></div>\n\t\t\t\t<div class="ui-file-progressbar-progress ui-file-progressbar-rotating"></div>\n\t\t\t</div>\n\t\t\t<div class="ui-file-progressbar-label">'.concat(this.labels.loading,"</div>\n\t\t");this.processLoader=this.wrapper.getElementsByClassName("ui-file-progressbar-loader")[0];this.processLoaderIcon=this.wrapper.getElementsByClassName("ui-file-progressbar-icon")[0];this.processStatus=this.wrapper.getElementsByClassName("ui-file-progressbar-progress")[0];this.proccesLabel=this.wrapper.getElementsByClassName("ui-file-progressbar-label")[0];if(this.direction===e.direction.horizontal){this.wrapper.classList.add("ui-file-progressbar-loader-horizontal")}this.container.classList.add("ui-file-progressbar-container-relative");this.container.insertBefore(this.wrapper,this.container.firstChild);if(this.blurElement){this.blurElement.classList.add("ui-file-progressbar-item-blurred")}var r="width: ".concat(this.sizes.circle,"px; height: ").concat(this.sizes.circle,"px;");if(this.sizes.margin){r=r+"margin: ".concat(this.sizes.margin,"px;");this.proccesLabel.style="margin: ".concat(this.sizes.margin,"px;")}this.processLoader.style=r;if(this.cancelCallback){this.processLoader.addEventListener("click",(function(e){if(n.cancelCallbackDisabled){return false}n.setProgress(0);if(n.labels.canceled){n.setProgressTitle(n.labels.canceled)}n.canceled=e;n.active=false;clearTimeout(n.timeout);n.timeout=setTimeout((function(){return n.destroy()}),1e3);return true}));if(this.labels.cancelTitle){this.processLoader.title=this.labels.cancelTitle}}if(!this.labels.loading){this.setProgressTitleVisibility(false)}this.setIcon(this.icon,true);this.bar=new BX.ProgressBarJs.Circle(this.processStatus,{easing:"linear",strokeWidth:this.sizes.progress,color:"#ffffff",from:{color:"#ffffff"},to:{color:"#ffffff"},step:function t(r,i){if(i.value()==1){clearTimeout(n.timeout);n.timeout=setTimeout((function(){if(n.labels.completed){n.setProgressTitle(n.labels.completed)}n.setIcon(e.icon.done);clearTimeout(n.timeout);n.timeout=setTimeout((function(){return n.destroy()}),1e3)}),200)}}})}},{key:"setCancelDisable",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;this.cancelCallbackDisabled=!!t;if(this.labels.cancelTitle){this.processLoader.title=this.cancelCallbackDisabled?"":this.labels.cancelTitle}}},{key:"setIcon",value:function t(n){var r=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this.processLoaderIcon.style.transform="scale(0)";clearTimeout(this.timeoutSetIcon);this.timeoutSetIcon=setTimeout((function(){r.processLoaderIcon.classList.remove("ui-file-progressbar-cancel","ui-file-progressbar-done","ui-file-progressbar-cloud","ui-file-progressbar-error");if(n===e.icon.done){r.processLoaderIcon.classList.add("ui-file-progressbar-done");r.processLoaderIcon.style.transform="scale(1)"}else if(n===e.icon.cancel){r.processLoaderIcon.classList.add("ui-file-progressbar-cancel");r.processLoaderIcon.style.transform="scale(1)"}else if(n===e.icon.error){r.processLoaderIcon.classList.add("ui-file-progressbar-error");r.processLoaderIcon.style.transform="scale(1)"}else{r.processLoaderIcon.classList.add("ui-file-progressbar-cloud");r.processLoaderIcon.style.transform="scale(1)"}}),i?0:200);return true}},{key:"setProgress",value:function e(t){if(!this.active||this.canceled){return false}this.bar.animate(t/100,{duration:500})}},{key:"setProgressTitle",value:function e(t){if(!this.proccesLabel){return false}this.proccesLabel.innerHTML=t}},{key:"setProgressTitleVisibility",value:function t(n){if(!this.proccesLabel){return}if(n){if(this.direction===e.direction.horizontal){this.wrapper.classList.add("ui-file-progressbar-loader-horizontal")}this.proccesLabel.style.display="block"}else{if(this.direction===e.direction.horizontal){this.wrapper.classList.remove("ui-file-progressbar-loader-horizontal")}this.proccesLabel.style.display="none"}}},{key:"setByteSent",value:function e(t,n){if(this.canceled){return false}this.setProgressTitle((t/1024/1024).toFixed(2)+" "+this.labels.megabyte+" "+" / "+(n/1024/1024).toFixed(2)+" "+this.labels.megabyte)}},{key:"destroy",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;clearTimeout(this.timeoutSetIcon);clearTimeout(this.timeout);if(this.destroing){return true}this.active=false;this.destroing=true;this.processLoader.style.transform="scale(0)";if(this.proccesLabel){this.proccesLabel.style.transform="scale(0)"}if(this.bar){this.bar.destroy()}if(this.blurElement){this.blurElement.classList.remove("ui-file-progressbar-item-blurred")}if(this.canceled&&!this.cancelCallbackDisabled){if(this.cancelCallback){this.cancelCallback(this.canceled)}this.canceled=false}if(n){this.timeout=setTimeout((function(){return t.destroyFinally()}),400)}else{this.destroyFinally()}}},{key:"destroyFinally",value:function e(){if(this.container){this.container.classList.remove("ui-file-progressbar-container-relative");this.container.removeChild(this.wrapper)}if(this.destroyCallback){this.destroyCallback()}}}]);return e}();t.direction={horizontal:"horizontal",vertical:"vertical"};t.icon={cloud:"cloud",cancel:"cancel",error:"error",done:"done"};e.Uploader=t})(this.BX.ProgressBarJs=this.BX.ProgressBarJs||{});this.BX=this.BX||{};(function(e){"use strict";
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.
	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.
	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var t=function e(){t=Object.assign||function e(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s))t[s]=n[s]}return t};return t.apply(this,arguments)};function n(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++){if(s||!(r in t)){if(!s)s=Array.prototype.slice.call(t,0,r);s[r]=t[r]}}return e.concat(s||Array.prototype.slice.call(t))}var r=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:global;var i=Object.keys;var s=Array.isArray;if(typeof Promise!=="undefined"&&!r.Promise){r.Promise=Promise}function o(e,t){if(babelHelpers["typeof"](t)!=="object")return e;i(t).forEach((function(n){e[n]=t[n]}));return e}var a=Object.getPrototypeOf;var l={}.hasOwnProperty;function u(e,t){return l.call(e,t)}function c(e,t){if(typeof t==="function")t=t(a(e));if(babelHelpers["typeof"](t)!=="object")return;(typeof Reflect==="undefined"?i:Reflect.ownKeys)(t).forEach((function(n){d(e,n,t[n])}))}var f=Object.defineProperty;function d(e,t,n,r){f(e,t,o(n&&u(n,"get")&&typeof n.get==="function"?{get:n.get,set:n.set,configurable:true}:{value:n,configurable:true,writable:true},r))}function h(e){return{from:function t(n){e.prototype=Object.create(n.prototype);d(e.prototype,"constructor",e);return{extend:c.bind(null,e.prototype)}}}}var p=Object.getOwnPropertyDescriptor;function m(e,t){var n=p(e,t);var r;return n||(r=a(e))&&m(r,t)}var g=[].slice;function v(e,t,n){return g.call(e,t,n)}function y(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function w(e){if(r.setImmediate)setImmediate(e);else setTimeout(e,0)}function S(e,t){return e.reduce((function(e,n,r){var i=t(n,r);if(i)e[i[0]]=i[1];return e}),{})}function k(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}function I(e,t){if(u(e,t))return e[t];if(!t)return e;if(typeof t!=="string"){var n=[];for(var r=0,i=t.length;r<i;++r){var s=I(e,t[r]);n.push(s)}return n}var o=t.indexOf(".");if(o!==-1){var a=e[t.substr(0,o)];return a===undefined?undefined:I(a,t.substr(o+1))}return undefined}function E(e,t,n){if(!e||t===undefined)return;if("isFrozen"in Object&&Object.isFrozen(e))return;if(typeof t!=="string"&&"length"in t){b(typeof n!=="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r){E(e,t[r],n[r])}}else{var o=t.indexOf(".");if(o!==-1){var a=t.substr(0,o);var l=t.substr(o+1);if(l===""){if(n===undefined){if(s(e)&&!isNaN(parseInt(a)))e.splice(a,1);else delete e[a]}else e[a]=n}else{var c=e[a];if(!c||!u(e,a))c=e[a]={};E(c,l,n)}}else{if(n===undefined){if(s(e)&&!isNaN(parseInt(t)))e.splice(t,1);else delete e[t]}else e[t]=n}}}function C(e,t){if(typeof t==="string")E(e,t,undefined);else if("length"in t)[].map.call(t,(function(t){E(e,t,undefined)}))}function _(e){var t={};for(var n in e){if(u(e,n))t[n]=e[n]}return t}var x=[].concat;function T(e){return x.apply([],e)}var O="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(T([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return r[e]}));var M=O.map((function(e){return r[e]}));S(O,(function(e){return[e,true]}));var D=null;function A(e){D=typeof WeakMap!=="undefined"&&new WeakMap;var t=P(e);D=null;return t}function P(e){if(!e||babelHelpers["typeof"](e)!=="object")return e;var t=D&&D.get(e);if(t)return t;if(s(e)){t=[];D&&D.set(e,t);for(var n=0,r=e.length;n<r;++n){t.push(P(e[n]))}}else if(M.indexOf(e.constructor)>=0){t=e}else{var i=a(e);t=i===Object.prototype?{}:Object.create(i);D&&D.set(e,t);for(var o in e){if(u(e,o)){t[o]=P(e[o])}}}return t}var L={}.toString;function R(e){return L.call(e).slice(8,-1)}var H=typeof Symbol!=="undefined"?Symbol.iterator:"@@iterator";var j=babelHelpers["typeof"](H)==="symbol"?function(e){var t;return e!=null&&(t=e[H])&&t.apply(e)}:function(){return null};var N={};function B(e){var t,n,r,i;if(arguments.length===1){if(s(e))return e.slice();if(this===N&&typeof e==="string")return[e];if(i=j(e)){n=[];while(r=i.next(),!r.done)n.push(r.value);return n}if(e==null)return[e];t=e.length;if(typeof t==="number"){n=new Array(t);while(t--)n[t]=e[t];return n}return[e]}t=arguments.length;n=new Array(t);while(t--)n[t]=arguments[t];return n}var F=typeof Symbol!=="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return false};var U=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function W(e,t){U=e;$=t}var $=function e(){return true};var V=!new Error("").stack;function G(){if(V)try{throw new Error}catch(e){return e}return new Error}function z(e,t){var n=e.stack;if(!n)return"";t=t||0;if(n.indexOf(e.name)===0)t+=(e.name+e.message).split("\n").length;return n.split("\n").slice(t).filter($).map((function(e){return"\n"+e})).join("")}var X=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var q=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];var K=X.concat(q);var Y={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function J(e,t){this._e=G();this.name=e;this.message=t}h(J).from(Error).extend({stack:{get:function e(){return this._stack||(this._stack=this.name+": "+this.message+z(this._e,2))}},toString:function e(){return this.name+": "+this.message}});function Q(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function Z(e,t,n,r){this._e=G();this.failures=t;this.failedKeys=r;this.successCount=n;this.message=Q(e,t)}h(Z).from(J);function ee(e,t){this._e=G();this.name="BulkError";this.failures=Object.keys(t).map((function(e){return t[e]}));this.failuresByPos=t;this.message=Q(e,t)}h(ee).from(J);var te=K.reduce((function(e,t){return e[t]=t+"Error",e}),{});var ne=J;var re=K.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=G();this.name=n;if(!e){this.message=Y[t]||n;this.inner=null}else if(typeof e==="string"){this.message=""+e+(!r?"":"\n "+r);this.inner=r||null}else if(babelHelpers["typeof"](e)==="object"){this.message=e.name+" "+e.message;this.inner=e}}h(r).from(ne);e[t]=r;return e}),{});re.Syntax=SyntaxError;re.Type=TypeError;re.Range=RangeError;var ie=q.reduce((function(e,t){e[t+"Error"]=re[t];return e}),{});function se(e,t){if(!e||e instanceof J||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ie[e.name])return e;var n=new ie[e.name](t||e.message,e);if("stack"in e){d(n,"stack",{get:function e(){return this.inner.stack}})}return n}var oe=K.reduce((function(e,t){if(["Syntax","Type","Range"].indexOf(t)===-1)e[t+"Error"]=re[t];return e}),{});oe.ModifyError=Z;oe.DexieError=J;oe.BulkError=ee;function ae(){}function le(e){return e}function ue(e,t){if(e==null||e===le)return t;return function(n){return t(e(n))}}function ce(e,t){return function(){e.apply(this,arguments);t.apply(this,arguments)}}function fe(e,t){if(e===ae)return t;return function(){var n=e.apply(this,arguments);if(n!==undefined)arguments[0]=n;var r=this.onsuccess,i=this.onerror;this.onsuccess=null;this.onerror=null;var s=t.apply(this,arguments);if(r)this.onsuccess=this.onsuccess?ce(r,this.onsuccess):r;if(i)this.onerror=this.onerror?ce(i,this.onerror):i;return s!==undefined?s:n}}function de(e,t){if(e===ae)return t;return function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null;t.apply(this,arguments);if(n)this.onsuccess=this.onsuccess?ce(n,this.onsuccess):n;if(r)this.onerror=this.onerror?ce(r,this.onerror):r}}function he(e,t){if(e===ae)return t;return function(n){var r=e.apply(this,arguments);o(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null;this.onerror=null;var a=t.apply(this,arguments);if(i)this.onsuccess=this.onsuccess?ce(i,this.onsuccess):i;if(s)this.onerror=this.onerror?ce(s,this.onerror):s;return r===undefined?a===undefined?undefined:a:o(r,a)}}function pe(e,t){if(e===ae)return t;return function(){if(t.apply(this,arguments)===false)return false;return e.apply(this,arguments)}}function me(e,t){if(e===ae)return t;return function(){var n=e.apply(this,arguments);if(n&&typeof n.then==="function"){var r=this,i=arguments.length,s=new Array(i);while(i--)s[i]=arguments[i];return n.then((function(){return t.apply(r,s)}))}return t.apply(this,arguments)}}var ge={};var ve=100,ye=20,be=100,we=typeof Promise==="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[e,a(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,a(t),e]}(),Se=we[0],ke=we[1],Ie=we[2],Ee=ke&&ke.then;var Ce=Se&&Se.constructor;var _e=!!Ie;var xe=false;var Te=Ie?function(){Ie.then(Je)}:r.setImmediate?setImmediate.bind(null,Je):r.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){Je();e=null})).observe(e,{attributes:true});e.setAttribute("i","1")}:function(){setTimeout(Je,0)};var Oe=function e(t,n){Ne.push([t,n]);if(De){Te();De=false}};var Me=true,De=true,Ae=[],Pe=[],Le=null,Re=le;var He={id:"global",global:true,ref:0,unhandleds:[],onunhandled:Ct,pgp:false,env:{},finalize:function e(){this.unhandleds.forEach((function(e){try{Ct(e[0],e[1])}catch(e){}}))}};var je=He;var Ne=[];var Be=0;var Fe=[];function Ue(e){if(babelHelpers["typeof"](this)!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this.onuncatched=ae;this._lib=false;var t=this._PSD=je;if(U){this._stackHolder=G();this._prev=null;this._numPrev=0}if(typeof e!=="function"){if(e!==ge)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];if(this._state===false)Ge(this,this._value);return}this._state=null;this._value=null;++t.ref;Ve(this,e)}var We={get:function e(){var t=je,n=ct;function r(e,r){var i=this;var s=!t.global&&(t!==je||n!==ct);var o=s&&!pt();var a=new Ue((function(n,a){Xe(i,new $e(kt(e,t,s,o),kt(r,t,s,o),n,a,t))}));U&&Ye(a,this);return a}r.prototype=ge;return r},set:function e(t){d(this,"then",t&&t.prototype===ge?We:{get:function e(){return t},set:We.set})}};c(Ue.prototype,{then:We,_then:function e(t,n){Xe(this,new $e(null,null,t,n,je))},catch:function e(t){if(arguments.length===1)return this.then(null,t);var n=arguments[0],r=arguments[1];return typeof n==="function"?this.then(null,(function(e){return e instanceof n?r(e):it(e)})):this.then(null,(function(e){return e&&e.name===n?r(e):it(e)}))},finally:function e(t){return this.then((function(e){t();return e}),(function(e){t();return it(e)}))},stack:{get:function e(){if(this._stack)return this._stack;try{xe=true;var t=Ke(this,[],ye);var n=t.join("\nFrom previous: ");if(this._state!==null)this._stack=n;return n}finally{xe=false}}},timeout:function e(t,n){var r=this;return t<Infinity?new Ue((function(e,i){var s=setTimeout((function(){return i(new re.Timeout(n))}),t);r.then(e,i)["finally"](clearTimeout.bind(null,s))})):this}});if(typeof Symbol!=="undefined"&&Symbol.toStringTag)d(Ue.prototype,Symbol.toStringTag,"Dexie.Promise");He.env=bt();function $e(e,t,n,r,i){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.resolve=n;this.reject=r;this.psd=i}c(Ue,{all:function e(){var t=B.apply(null,arguments).map(mt);return new Ue((function(e,n){if(t.length===0)e([]);var r=t.length;t.forEach((function(i,s){return Ue.resolve(i).then((function(n){t[s]=n;if(!--r)e(t)}),n)}))}))},resolve:function e(t){if(t instanceof Ue)return t;if(t&&typeof t.then==="function")return new Ue((function(e,n){t.then(e,n)}));var n=new Ue(ge,true,t);Ye(n,Le);return n},reject:it,race:function e(){var t=B.apply(null,arguments).map(mt);return new Ue((function(e,n){t.map((function(t){return Ue.resolve(t).then(e,n)}))}))},PSD:{get:function e(){return je},set:function e(t){return je=t}},totalEchoes:{get:function e(){return ct}},newPSD:dt,usePSD:wt,scheduler:{get:function e(){return Oe},set:function e(t){Oe=t}},rejectionMapper:{get:function e(){return Re},set:function e(t){Re=t}},follow:function e(t,n){return new Ue((function(e,r){return dt((function(e,n){var r=je;r.unhandleds=[];r.onunhandled=n;r.finalize=ce((function(){var t=this;tt((function(){t.unhandleds.length===0?e():n(t.unhandleds[0])}))}),r.finalize);t()}),n,e,r)}))}});if(Ce){if(Ce.allSettled)d(Ue,"allSettled",(function(){var e=B.apply(null,arguments).map(mt);return new Ue((function(t){if(e.length===0)t([]);var n=e.length;var r=new Array(n);e.forEach((function(e,i){return Ue.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))}));if(Ce.any&&typeof AggregateError!=="undefined")d(Ue,"any",(function(){var e=B.apply(null,arguments).map(mt);return new Ue((function(t,n){if(e.length===0)n(new AggregateError([]));var r=e.length;var i=new Array(r);e.forEach((function(e,s){return Ue.resolve(e).then((function(e){return t(e)}),(function(e){i[s]=e;if(!--r)n(new AggregateError(i))}))}))}))}))}function Ve(e,t){try{t((function(t){if(e._state!==null)return;if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Qe();if(t&&typeof t.then==="function"){Ve(e,(function(e,n){t instanceof Ue?t._then(e,n):t.then(e,n)}))}else{e._state=true;e._value=t;ze(e)}if(n)Ze()}),Ge.bind(null,e))}catch(t){Ge(e,t)}}function Ge(e,t){Pe.push(t);if(e._state!==null)return;var n=e._lib&&Qe();t=Re(t);e._state=false;e._value=t;U&&t!==null&&babelHelpers["typeof"](t)==="object"&&!t._promise&&k((function(){var n=m(t,"stack");t._promise=e;d(t,"stack",{get:function r(){return xe?n&&(n.get?n.get.apply(t):n.value):e.stack}})}));nt(e);ze(e);if(n)Ze()}function ze(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n){Xe(e,t[n])}var i=e._PSD;--i.ref||i.finalize();if(Be===0){++Be;Oe((function(){if(--Be===0)et()}),[])}}function Xe(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null){return(e._state?t.resolve:t.reject)(e._value)}++t.psd.ref;++Be;Oe(qe,[n,e,t])}function qe(e,t,n){try{Le=t;var r,i=t._value;if(t._state){r=e(i)}else{if(Pe.length)Pe=[];r=e(i);if(Pe.indexOf(i)===-1)rt(t)}n.resolve(r)}catch(e){n.reject(e)}finally{Le=null;if(--Be===0)et();--n.psd.ref||n.psd.finalize()}}function Ke(e,t,n){if(t.length===n)return t;var r="";if(e._state===false){var i=e._value,s,o;if(i!=null){s=i.name||"Error";o=i.message||i;r=z(i,0)}else{s=i;o=""}t.push(s+(o?": "+o:"")+r)}if(U){r=z(e._stackHolder,2);if(r&&t.indexOf(r)===-1)t.push(r);if(e._prev)Ke(e._prev,t,n)}return t}function Ye(e,t){var n=t?t._numPrev+1:0;if(n<ve){e._prev=t;e._numPrev=n}}function Je(){Qe()&&Ze()}function Qe(){var e=Me;Me=false;De=false;return e}function Ze(){var e,t,n;do{while(Ne.length>0){e=Ne;Ne=[];n=e.length;for(t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}}while(Ne.length>0);Me=true;De=true}function et(){var e=Ae;Ae=[];e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));var t=Fe.slice(0);var n=t.length;while(n)t[--n]()}function tt(e){function t(){e();Fe.splice(Fe.indexOf(t),1)}Fe.push(t);++Be;Oe((function(){if(--Be===0)et()}),[])}function nt(e){if(!Ae.some((function(t){return t._value===e._value})))Ae.push(e)}function rt(e){var t=Ae.length;while(t)if(Ae[--t]._value===e._value){Ae.splice(t,1);return}}function it(e){return new Ue(ge,false,e)}function st(e,t){var n=je;return function(){var r=Qe(),i=je;try{yt(n,true);return e.apply(this,arguments)}catch(e){t&&t(e)}finally{yt(i,false);if(r)Ze()}}}var ot={awaits:0,echoes:0,id:0};var at=0;var lt=[];var ut=0;var ct=0;var ft=0;function dt(e,t,n,r){var i=je,s=Object.create(i);s.parent=i;s.ref=0;s.global=false;s.id=++ft;var a=He.env;s.env=_e?{Promise:Ue,PromiseProp:{value:Ue,configurable:true,writable:true},all:Ue.all,race:Ue.race,allSettled:Ue.allSettled,any:Ue.any,resolve:Ue.resolve,reject:Ue.reject,nthen:It(a.nthen,s),gthen:It(a.gthen,s)}:{};if(t)o(s,t);++i.ref;s.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=wt(s,e,n,r);if(s.ref===0)s.finalize();return l}function ht(){if(!ot.id)ot.id=++at;++ot.awaits;ot.echoes+=be;return ot.id}function pt(){if(!ot.awaits)return false;if(--ot.awaits===0)ot.id=0;ot.echoes=ot.awaits*be;return true}if((""+Ee).indexOf("[native code]")===-1){ht=pt=ae}function mt(e){if(ot.echoes&&e&&e.constructor===Ce){ht();return e.then((function(e){pt();return e}),(function(e){pt();return _t(e)}))}return e}function gt(e){++ct;if(!ot.echoes||--ot.echoes===0){ot.echoes=ot.id=0}lt.push(je);yt(e,true)}function vt(){var e=lt[lt.length-1];lt.pop();yt(e,false)}function yt(e,t){var n=je;if(t?ot.echoes&&(!ut++||e!==je):ut&&(!--ut||e!==je)){St(t?gt.bind(null,e):vt)}if(e===je)return;je=e;if(n===He)He.env=bt();if(_e){var i=He.env.Promise;var s=e.env;ke.then=s.nthen;i.prototype.then=s.gthen;if(n.global||e.global){Object.defineProperty(r,"Promise",s.PromiseProp);i.all=s.all;i.race=s.race;i.resolve=s.resolve;i.reject=s.reject;if(s.allSettled)i.allSettled=s.allSettled;if(s.any)i.any=s.any}}}function bt(){var e=r.Promise||Promise;return _e?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:ke.then,gthen:e.prototype.then}:{}}function wt(e,t,n,r,i){var s=je;try{yt(e,true);return t(n,r,i)}finally{yt(s,false)}}function St(e){Ee.call(Se,e)}function kt(e,t,n,r){return typeof e!=="function"?e:function(){var i=je;if(n)ht();yt(t,true);try{return e.apply(this,arguments)}finally{yt(i,false);if(r)St(pt)}}}function It(e,t){return function(n,r){return e.call(this,kt(n,t),kt(r,t))}}var Et="unhandledrejection";function Ct(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(n!==false)try{var i,s={promise:t,reason:e};if(r.document&&document.createEvent){i=document.createEvent("Event");i.initEvent(Et,true,true);o(i,s)}else if(r.CustomEvent){i=new CustomEvent(Et,{detail:s});o(i,s)}if(i&&r.dispatchEvent){dispatchEvent(i);if(!r.PromiseRejectionEvent&&r.onunhandledrejection)try{r.onunhandledrejection(i)}catch(e){}}if(U&&i&&!i.defaultPrevented){console.warn("Unhandled rejection: "+(e.stack||e))}}catch(e){}}var _t=Ue.reject;function xt(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!je.letThrough&&!e._vip){if(e._state.openComplete){return _t(new re.DatabaseClosed(e._state.dbOpenError))}if(!e._state.isBeingOpened){if(!e._options.autoOpen)return _t(new re.DatabaseClosed);e.open()["catch"](ae)}return e._state.dbReadyPromise.then((function(){return xt(e,t,n,r)}))}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create();e._state.PR1398_maxLoop=3}catch(i){if(i.name===te.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0){console.warn("Dexie: Need to reopen db");e._close();return e.open().then((function(){return xt(e,t,n,r)}))}return _t(i)}return i._promise(t,(function(e,t){return dt((function(){je.trans=i;return r(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}}var Tt="3.2.2";var Ot=String.fromCharCode(65535);var Mt=-Infinity;var Dt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.";var At="String expected.";var Pt=[];var Lt=typeof navigator!=="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent);var Rt=Lt;var Ht=Lt;var jt=function e(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)};var Nt="__dbnames";var Bt="readonly";var Ft="readwrite";function Ut(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Wt={type:3,lower:-Infinity,lowerOpen:false,upper:[[]],upperOpen:false};function $t(e){return typeof e==="string"&&!/\./.test(e)?function(t){if(t[e]===undefined&&e in t){t=A(t);delete t[e]}return t}:function(e){return e}}var Vt=function(){function e(){}e.prototype._trans=function(e,t,n){var r=this._tx||je.trans;var i=this.name;function s(e,n,r){if(!r.schema[i])throw new re.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var o=Qe();try{return r&&r.db===this.db?r===je.trans?r._promise(e,s,n):dt((function(){return r._promise(e,s,n)}),{trans:r,transless:je.transless||je}):xt(this.db,e,[this.name],s)}finally{if(o)Ze()}};e.prototype.get=function(e,t){var n=this;if(e&&e.constructor===Object)return this.where(e).first(t);return this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)};e.prototype.where=function(e){if(typeof e==="string")return new this.db.WhereClause(this,e);if(s(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=i(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==Ot)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));if(!n&&U)console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+t.join("+")+"]"));var r=this.schema.idxByName;var o=this.db._deps.indexedDB;function a(e,t){try{return o.cmp(e,t)===0}catch(e){return false}}var l=t.reduce((function(t,n){var i=t[0],o=t[1];var l=r[n];var u=e[n];return[i||l,i||!l?Ut(o,l&&l.multi?function(e){var t=I(e,n);return s(t)&&t.some((function(e){return a(u,e)}))}:function(e){return a(u,I(e,n))}):o]}),[null,null]),u=l[0],c=l[1];return u?this.where(u.name).equals(e[u.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")};e.prototype.filter=function(e){return this.toCollection().and(e)};e.prototype.count=function(e){return this.toCollection().count(e)};e.prototype.offset=function(e){return this.toCollection().offset(e)};e.prototype.limit=function(e){return this.toCollection().limit(e)};e.prototype.each=function(e){return this.toCollection().each(e)};e.prototype.toArray=function(e){return this.toCollection().toArray(e)};e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,s(e)?"["+e.join("+")+"]":e))};e.prototype.reverse=function(){return this.toCollection().reverse()};e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function t(n){if(!n)return n;var r=Object.create(e.prototype);for(var i in n)if(u(n,i))try{r[i]=n[i]}catch(e){}return r};if(this.schema.readHook){this.hook.reading.unsubscribe(this.schema.readHook)}this.schema.readHook=t;this.hook("reading",t);return e};e.prototype.defineClass=function(){function e(e){o(this,e)}return this.mapToClass(e)};e.prototype.add=function(e,t){var n=this;var r=this.schema.primKey,i=r.auto,s=r.keyPath;var o=e;if(s&&i){o=$t(s)(e)}return this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:t!=null?[t]:null,values:[o]})})).then((function(e){return e.numFailures?Ue.reject(e.failures[0]):e.lastResult})).then((function(t){if(s){try{E(e,s,t)}catch(e){}}return t}))};e.prototype.update=function(e,t){if(babelHelpers["typeof"](e)==="object"&&!s(e)){var n=I(e,this.schema.primKey.keyPath);if(n===undefined)return _t(new re.InvalidArgument("Given object does not contain its primary key"));try{if(typeof t!=="function"){i(t).forEach((function(n){E(e,n,t[n])}))}else{t(e,{value:e,primKey:n})}}catch(e){}return this.where(":id").equals(n).modify(t)}else{return this.where(":id").equals(e).modify(t)}};e.prototype.put=function(e,t){var n=this;var r=this.schema.primKey,i=r.auto,s=r.keyPath;var o=e;if(s&&i){o=$t(s)(e)}return this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[o],keys:t!=null?[t]:null})})).then((function(e){return e.numFailures?Ue.reject(e.failures[0]):e.lastResult})).then((function(t){if(s){try{E(e,s,t)}catch(e){}}return t}))};e.prototype["delete"]=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Ue.reject(e.failures[0]):undefined}))};e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Wt})})).then((function(e){return e.numFailures?Ue.reject(e.failures[0]):undefined}))};e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))};e.prototype.bulkAdd=function(e,t,n){var r=this;var i=Array.isArray(t)?t:undefined;n=n||(i?undefined:t);var s=n?n.allKeys:undefined;return this._trans("readwrite",(function(t){var n=r.schema.primKey,o=n.auto,a=n.keyPath;if(a&&i)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length;var u=a&&o?e.map($t(a)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:u,wantResults:s}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,o=e.failures;var a=s?n:i;if(t===0)return a;throw new ee(r.name+".bulkAdd(): "+t+" of "+l+" operations failed",o)}))}))};e.prototype.bulkPut=function(e,t,n){var r=this;var i=Array.isArray(t)?t:undefined;n=n||(i?undefined:t);var s=n?n.allKeys:undefined;return this._trans("readwrite",(function(t){var n=r.schema.primKey,o=n.auto,a=n.keyPath;if(a&&i)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length;var u=a&&o?e.map($t(a)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:u,wantResults:s}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,o=e.failures;var a=s?n:i;if(t===0)return a;throw new ee(r.name+".bulkPut(): "+t+" of "+l+" operations failed",o)}))}))};e.prototype.bulkDelete=function(e){var t=this;var n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,s=e.failures;if(r===0)return i;throw new ee(t.name+".bulkDelete(): "+r+" of "+n+" operations failed",s)}))};return e}();function Gt(e){var t={};var n=function n(r,i){if(i){var s=arguments.length,o=new Array(s-1);while(--s)o[s-1]=arguments[s];t[r].subscribe.apply(null,o);return e}else if(typeof r==="string"){return t[r]}};n.addEventType=a;for(var r=1,o=arguments.length;r<o;++r){a(arguments[r])}return n;function a(e,r,i){if(babelHelpers["typeof"](e)==="object")return l(e);if(!r)r=pe;if(!i)i=ae;var s={subscribers:[],fire:i,subscribe:function e(t){if(s.subscribers.indexOf(t)===-1){s.subscribers.push(t);s.fire=r(s.fire,t)}},unsubscribe:function e(t){s.subscribers=s.subscribers.filter((function(e){return e!==t}));s.fire=s.subscribers.reduce(r,i)}};t[e]=n[e]=s;return s}function l(e){i(e).forEach((function(t){var n=e[t];if(s(n)){a(t,e[t][0],e[t][1])}else if(n==="asap"){var r=a(t,le,(function e(){var t=arguments.length,n=new Array(t);while(t--)n[t]=arguments[t];r.subscribers.forEach((function(e){w((function t(){e.apply(null,n)}))}))}))}else throw new re.InvalidArgument("Invalid event config")}))}}function zt(e,t){h(t).from({prototype:e});return t}function Xt(e){return zt(Vt.prototype,(function t(n,r,i){this.db=e;this._tx=i;this.name=n;this.schema=r;this.hook=e._allTables[n]?e._allTables[n].hook:Gt(null,{creating:[fe,ae],reading:[ue,le],updating:[he,ae],deleting:[de,ae]})}))}function qt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Kt(e,t){e.filter=Ut(e.filter,t)}function Yt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ut(r(),t())}:t;e.justLimit=n&&!r}function Jt(e,t){e.isMatch=Ut(e.isMatch,t)}function Qt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new re.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Zt(e,t,n){var r=Qt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function en(e,t,n,r){var i=e.replayFilter?Ut(e.filter,e.replayFilter()):e.filter;if(!e.or){return tn(Zt(e,r,n),Ut(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}else{var s={};var o=function e(n,r,o){if(!i||i(r,o,(function(e){return r.stop(e)}),(function(e){return r.fail(e)}))){var a=r.primaryKey;var l=""+a;if(l==="[object ArrayBuffer]")l=""+new Uint8Array(a);if(!u(s,l)){s[l]=true;t(n,r,o)}}};return Promise.all([e.or._iterate(o,n),tn(Zt(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}}function tn(e,t,n,r){var i=r?function(e,t,i){return n(r(e),t,i)}:n;var s=st(i);return e.then((function(e){if(e){return e.start((function(){var n=function t(){return e["continue"]()};if(!t||t(e,(function(e){return n=e}),(function(t){e.stop(t);n=ae}),(function(t){e.fail(t);n=ae})))s(e.value,e,(function(e){return n=e}));n()}))}}))}function nn(e,t){try{var n=on(e);var r=on(t);if(n!==r){if(n==="Array")return 1;if(r==="Array")return-1;if(n==="binary")return 1;if(r==="binary")return-1;if(n==="string")return 1;if(r==="string")return-1;if(n==="Date")return 1;if(r!=="Date")return NaN;return-1}switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":{return sn(an(e),an(t))}case"Array":return rn(e,t)}}catch(e){}return NaN}function rn(e,t){var n=e.length;var r=t.length;var i=n<r?n:r;for(var s=0;s<i;++s){var o=nn(e[s],t[s]);if(o!==0)return o}return n===r?0:n<r?-1:1}function sn(e,t){var n=e.length;var r=t.length;var i=n<r?n:r;for(var s=0;s<i;++s){if(e[s]!==t[s])return e[s]<t[s]?-1:1}return n===r?0:n<r?-1:1}function on(e){var t=babelHelpers["typeof"](e);if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=R(e);return n==="ArrayBuffer"?"binary":n}function an(e){if(e instanceof Uint8Array)return e;if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return new Uint8Array(e)}var ln=function(){function e(){}e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,_t.bind(null,n.error)):n.table._trans("readonly",e).then(t)};e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,_t.bind(null,t.error)):t.table._trans("readwrite",e,"locked")};e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Ut(t.algorithm,e)};e.prototype._iterate=function(e,t){return en(this._ctx,e,t,this._ctx.table.core)};e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);if(e)o(n,e);t._ctx=n;return t};e.prototype.raw=function(){this._ctx.valueMapper=null;return this};e.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return en(t,e,n,t.table.core)}))};e.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx;var r=n.table.core;if(qt(n,true)){return r.count({trans:e,query:{index:Qt(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}))}else{var i=0;return en(n,(function(){++i;return false}),e,r).then((function(){return i}))}})).then(e)};e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function s(e,t){if(t)return s(e[n[t]],t-1);return e[r]}var o=this._ctx.dir==="next"?1:-1;function a(e,t){var n=s(e,i),r=s(t,i);return n<r?-o:n>r?o:0}return this.toArray((function(e){return e.sort(a)})).then(t)};e.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if(n.dir==="next"&&qt(n,true)&&n.limit>0){var r=n.valueMapper;var i=Qt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:true,query:{index:i,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}else{var s=[];return en(n,(function(e){return s.push(e)}),e,n.table.core).then((function(){return s}))}}),e)};e.prototype.offset=function(e){var t=this._ctx;if(e<=0)return this;t.offset+=e;if(qt(t)){Yt(t,(function(){var t=e;return function(e,n){if(t===0)return true;if(t===1){--t;return false}n((function(){e.advance(t);t=0}));return false}}))}else{Yt(t,(function(){var t=e;return function(){return--t<0}}))}return this};e.prototype.limit=function(e){this._ctx.limit=Math.min(this._ctx.limit,e);Yt(this._ctx,(function(){var t=e;return function(e,n,r){if(--t<=0)n(r);return t>=0}}),true);return this};e.prototype.until=function(e,t){Kt(this._ctx,(function(n,r,i){if(e(n.value)){r(i);return t}else{return true}}));return this};e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)};e.prototype.last=function(e){return this.reverse().first(e)};e.prototype.filter=function(e){Kt(this._ctx,(function(t){return e(t.value)}));Jt(this._ctx,e);return this};e.prototype.and=function(e){return this.filter(e)};e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)};e.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";if(this._ondirectionchange)this._ondirectionchange(this._ctx.dir);return this};e.prototype.desc=function(){return this.reverse()};e.prototype.eachKey=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;return this.each((function(t,n){e(n.key,n)}))};e.prototype.eachUniqueKey=function(e){this._ctx.unique="unique";return this.eachKey(e)};e.prototype.eachPrimaryKey=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;return this.each((function(t,n){e(n.primaryKey,n)}))};e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)};e.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&qt(t,true)&&t.limit>0){return this._read((function(e){var n=Qt(t,t.table.core.schema);return t.table.core.query({trans:e,values:false,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){var t=e.result;return t})).then(e)}t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)};e.prototype.uniqueKeys=function(e){this._ctx.unique="unique";return this.keys(e)};e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)};e.prototype.lastKey=function(e){return this.reverse().firstKey(e)};e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};Kt(this._ctx,(function(e){var t=e.primaryKey.toString();var r=u(n,t);n[t]=true;return!r}));return this};e.prototype.modify=function(e){var t=this;var n=this._ctx;return this._write((function(r){var s;if(typeof e==="function"){s=e}else{var o=i(e);var a=o.length;s=function t(n){var r=false;for(var i=0;i<a;++i){var s=o[i],l=e[s];if(I(n,s)!==l){E(n,s,l);r=true}}return r}}var l=n.table.core;var u=l.schema.primaryKey,c=u.outbound,f=u.extractKey;var d=t.db._options.modifyChunkSize||200;var h=[];var p=0;var m=[];var g=function e(t,n){var r=n.failures,s=n.numFailures;p+=t-s;for(var o=0,a=i(r);o<a.length;o++){var l=a[o];h.push(r[l])}};return t.clone().primaryKeys().then((function(t){var i=function i(o){var a=Math.min(d,t.length-o);return l.getMany({trans:r,keys:t.slice(o,o+a),cache:"immutable"}).then((function(u){var h=[];var p=[];var m=c?[]:null;var v=[];for(var y=0;y<a;++y){var b=u[y];var w={value:A(b),primKey:t[o+y]};if(s.call(w,w.value,w)!==false){if(w.value==null){v.push(t[o+y])}else if(!c&&nn(f(b),f(w.value))!==0){v.push(t[o+y]);h.push(w.value)}else{p.push(w.value);if(c)m.push(t[o+y])}}}var S=qt(n)&&n.limit===Infinity&&(typeof e!=="function"||e===un)&&{index:n.index,range:n.range};return Promise.resolve(h.length>0&&l.mutate({trans:r,type:"add",values:h}).then((function(e){for(var t in e.failures){v.splice(parseInt(t),1)}g(h.length,e)}))).then((function(){return(p.length>0||S&&babelHelpers["typeof"](e)==="object")&&l.mutate({trans:r,type:"put",keys:m,values:p,criteria:S,changeSpec:typeof e!=="function"&&e}).then((function(e){return g(p.length,e)}))})).then((function(){return(v.length>0||S&&e===un)&&l.mutate({trans:r,type:"delete",keys:v,criteria:S}).then((function(e){return g(v.length,e)}))})).then((function(){return t.length>o+a&&i(o+d)}))}))};return i(0).then((function(){if(h.length>0)throw new Z("Error modifying one or more objects",h,p,m);return t.length}))}))}))};e.prototype["delete"]=function(){var e=this._ctx,t=e.range;if(qt(e)&&(e.isPrimKey&&!Ht||t.type===3)){return this._write((function(n){var r=e.table.core.schema.primaryKey;var i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures;e.lastResult;e.results;var r=e.numFailures;if(r)throw new Z("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))}))}return this.modify(un)};return e}();var un=function e(t,n){return n.value=null};function cn(e){return zt(ln.prototype,(function t(n,r){this.db=e;var i=Wt,s=null;if(r)try{i=r()}catch(e){s=e}var o=n._ctx;var a=o.table;var l=a.hook.reading.fire;this._ctx={table:a,index:o.index,isPrimKey:!o.index||a.schema.primKey.keyPath&&o.index===a.schema.primKey.name,range:i,keysOnly:false,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:true,isMatch:null,offset:0,limit:Infinity,error:s,or:o.or,valueMapper:l!==le?l:null}}))}function fn(e,t){return e<t?-1:e===t?0:1}function dn(e,t){return e>t?-1:e===t?0:1}function hn(e,t,n){var r=e instanceof Sn?new e.Collection(e):e;r._ctx.error=n?new n(t):new TypeError(t);return r}function pn(e){return new e.Collection(e,(function(){return wn("")})).limit(0)}function mn(e){return e==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function gn(e){return e==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function vn(e,t,n,r,i,s){var o=Math.min(e.length,r.length);var a=-1;for(var l=0;l<o;++l){var u=t[l];if(u!==r[l]){if(i(e[l],n[l])<0)return e.substr(0,l)+n[l]+n.substr(l+1);if(i(e[l],r[l])<0)return e.substr(0,l)+r[l]+n.substr(l+1);if(a>=0)return e.substr(0,a)+t[a]+n.substr(a+1);return null}if(i(e[l],u)<0)a=l}if(o<r.length&&s==="next")return e+n.substr(e.length);if(o<e.length&&s==="prev")return e.substr(0,n.length);return a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function yn(e,t,n,r){var i,s,o,a,l,u,c,f=n.length;if(!n.every((function(e){return typeof e==="string"}))){return hn(e,At)}function d(e){i=mn(e);s=gn(e);o=e==="next"?fn:dn;var t=n.map((function(e){return{lower:s(e),upper:i(e)}})).sort((function(e,t){return o(e.lower,t.lower)}));a=t.map((function(e){return e.upper}));l=t.map((function(e){return e.lower}));u=e;c=e==="next"?"":r}d("next");var h=new e.Collection(e,(function(){return bn(a[0],l[f-1]+r)}));h._ondirectionchange=function(e){d(e)};var p=0;h._addAlgorithm((function(e,n,r){var i=e.key;if(typeof i!=="string")return false;var d=s(i);if(t(d,l,p)){return true}else{var h=null;for(var m=p;m<f;++m){var g=vn(i,d,a[m],l[m],o,u);if(g===null&&h===null)p=m+1;else if(h===null||o(h,g)>0){h=g}}if(h!==null){n((function(){e["continue"](h+c)}))}else{n(r)}return false}}));return h}function bn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function wn(e){return{type:1,lower:e,upper:e}}var Sn=function(){function e(){}Object.defineProperty(e.prototype,"Collection",{get:function e(){return this._ctx.table.db.Collection},enumerable:false,configurable:true});e.prototype.between=function(e,t,n,r){n=n!==false;r=r===true;try{if(this._cmp(e,t)>0||this._cmp(e,t)===0&&(n||r)&&!(n&&r))return pn(this);return new this.Collection(this,(function(){return bn(e,t,!n,!r)}))}catch(e){return hn(this,Dt)}};e.prototype.equals=function(e){if(e==null)return hn(this,Dt);return new this.Collection(this,(function(){return wn(e)}))};e.prototype.above=function(e){if(e==null)return hn(this,Dt);return new this.Collection(this,(function(){return bn(e,undefined,true)}))};e.prototype.aboveOrEqual=function(e){if(e==null)return hn(this,Dt);return new this.Collection(this,(function(){return bn(e,undefined,false)}))};e.prototype.below=function(e){if(e==null)return hn(this,Dt);return new this.Collection(this,(function(){return bn(undefined,e,false,true)}))};e.prototype.belowOrEqual=function(e){if(e==null)return hn(this,Dt);return new this.Collection(this,(function(){return bn(undefined,e)}))};e.prototype.startsWith=function(e){if(typeof e!=="string")return hn(this,At);return this.between(e,e+Ot,true,true)};e.prototype.startsWithIgnoreCase=function(e){if(e==="")return this.startsWith(e);return yn(this,(function(e,t){return e.indexOf(t[0])===0}),[e],Ot)};e.prototype.equalsIgnoreCase=function(e){return yn(this,(function(e,t){return e===t[0]}),[e],"")};e.prototype.anyOfIgnoreCase=function(){var e=B.apply(N,arguments);if(e.length===0)return pn(this);return yn(this,(function(e,t){return t.indexOf(e)!==-1}),e,"")};e.prototype.startsWithAnyOfIgnoreCase=function(){var e=B.apply(N,arguments);if(e.length===0)return pn(this);return yn(this,(function(e,t){return t.some((function(t){return e.indexOf(t)===0}))}),e,Ot)};e.prototype.anyOf=function(){var e=this;var t=B.apply(N,arguments);var n=this._cmp;try{t.sort(n)}catch(e){return hn(this,Dt)}if(t.length===0)return pn(this);var r=new this.Collection(this,(function(){return bn(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n=r==="next"?e._ascending:e._descending;t.sort(n)};var i=0;r._addAlgorithm((function(e,r,s){var o=e.key;while(n(o,t[i])>0){++i;if(i===t.length){r(s);return false}}if(n(o,t[i])===0){return true}else{r((function(){e["continue"](t[i])}));return false}}));return r};e.prototype.notEqual=function(e){return this.inAnyRange([[Mt,e],[e,this.db._maxKey]],{includeLowers:false,includeUppers:false})};e.prototype.noneOf=function(){var e=B.apply(N,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return hn(this,Dt)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[Mt,t]]}),null);t.push([e[e.length-1],this.db._maxKey]);return this.inAnyRange(t,{includeLowers:false,includeUppers:false})};e.prototype.inAnyRange=function(e,t){var n=this;var r=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(e.length===0)return pn(this);if(!e.every((function(e){return e[0]!==undefined&&e[1]!==undefined&&i(e[0],e[1])<=0}))){return hn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument)}var l=!t||t.includeLowers!==false;var u=t&&t.includeUppers===true;function c(e,t){var n=0,i=e.length;for(;n<i;++n){var s=e[n];if(r(t[0],s[1])<0&&r(t[1],s[0])>0){s[0]=o(s[0],t[0]);s[1]=a(s[1],t[1]);break}}if(n===i)e.push(t);return e}var f=i;function d(e,t){return f(e[0],t[0])}var h;try{h=e.reduce(c,[]);h.sort(d)}catch(e){return hn(this,Dt)}var p=0;var m=u?function(e){return i(e,h[p][1])>0}:function(e){return i(e,h[p][1])>=0};var g=l?function(e){return s(e,h[p][0])>0}:function(e){return s(e,h[p][0])>=0};function v(e){return!m(e)&&!g(e)}var y=m;var b=new this.Collection(this,(function(){return bn(h[0][0],h[h.length-1][1],!l,!u)}));b._ondirectionchange=function(e){if(e==="next"){y=m;f=i}else{y=g;f=s}h.sort(d)};b._addAlgorithm((function(e,t,r){var s=e.key;while(y(s)){++p;if(p===h.length){t(r);return false}}if(v(s)){return true}else if(n._cmp(s,h[p][1])===0||n._cmp(s,h[p][0])===0){return false}else{t((function(){if(f===i)e["continue"](h[p][0]);else e["continue"](h[p][1])}));return false}}));return b};e.prototype.startsWithAnyOf=function(){var e=B.apply(N,arguments);if(!e.every((function(e){return typeof e==="string"}))){return hn(this,"startsWithAnyOf() only works with strings")}if(e.length===0)return pn(this);return this.inAnyRange(e.map((function(e){return[e,e+Ot]})))};return e}();function kn(e){return zt(Sn.prototype,(function t(n,r,i){this.db=e;this._ctx={table:n,index:r===":id"?null:r,or:i};var s=e._deps.indexedDB;if(!s)throw new re.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s);this._descending=function(e,t){return s.cmp(t,e)};this._max=function(e,t){return s.cmp(e,t)>0?e:t};this._min=function(e,t){return s.cmp(e,t)<0?e:t};this._IDBKeyRange=e._deps.IDBKeyRange}))}function In(e){return st((function(t){En(t);e(t.target.error);return false}))}function En(e){if(e.stopPropagation)e.stopPropagation();if(e.preventDefault)e.preventDefault()}var Cn="storagemutated";var _n="x-storagemutated-1";var xn=Gt(null,Cn);var Tn=function(){function e(){}e.prototype._lock=function(){b(!je.global);++this._reculock;if(this._reculock===1&&!je.global)je.lockOwnerFor=this;return this};e.prototype._unlock=function(){b(!je.global);if(--this._reculock===0){if(!je.global)je.lockOwnerFor=null;while(this._blockedFuncs.length>0&&!this._locked()){var e=this._blockedFuncs.shift();try{wt(e[1],e[0])}catch(e){}}}return this};e.prototype._locked=function(){return this._reculock&&je.lockOwnerFor!==this};e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb;var r=this.db._state.dbOpenError;b(!this.idbtrans);if(!e&&!n){switch(r&&r.name){case"DatabaseClosedError":throw new re.DatabaseClosed(r);case"MissingAPIError":throw new re.MissingAPI(r.message,r);default:throw new re.OpenFailed(r)}}if(!this.active)throw new re.TransactionInactive;b(this._completion._state===null);e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));e.onerror=st((function(n){En(n);t._reject(e.error)}));e.onabort=st((function(n){En(n);t.active&&t._reject(new re.Abort(e.error));t.active=false;t.on("abort").fire(n)}));e.oncomplete=st((function(){t.active=false;t._resolve();if("mutatedParts"in e){xn.storagemutated.fire(e["mutatedParts"])}}));return this};e.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return _t(new re.ReadOnly("Transaction is readonly"));if(!this.active)return _t(new re.TransactionInactive);if(this._locked()){return new Ue((function(i,s){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,s)},je])}))}else if(n){return dt((function(){var e=new Ue((function(e,n){r._lock();var i=t(e,n,r);if(i&&i.then)i.then(e,n)}));e["finally"]((function(){return r._unlock()}));e._lib=true;return e}))}else{var i=new Ue((function(e,n){var i=t(e,n,r);if(i&&i.then)i.then(e,n)}));i._lib=true;return i}};e.prototype._root=function(){return this.parent?this.parent._root():this};e.prototype.waitFor=function(e){var t=this._root();var n=Ue.resolve(e);if(t._waitingFor){t._waitingFor=t._waitingFor.then((function(){return n}))}else{t._waitingFor=n;t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);(function e(){++t._spinCount;while(t._waitingQueue.length)t._waitingQueue.shift()();if(t._waitingFor)r.get(-Infinity).onsuccess=e})()}var i=t._waitingFor;return new Ue((function(e,r){n.then((function(n){return t._waitingQueue.push(st(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(st(r.bind(null,e)))}))["finally"]((function(){if(t._waitingFor===i){t._waitingFor=null}}))}))};e.prototype.abort=function(){if(this.active){this.active=false;if(this.idbtrans)this.idbtrans.abort();this._reject(new re.Abort)}};e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(u(t,e))return t[e];var n=this.schema[e];if(!n){throw new re.NotFound("Table "+e+" not part of transaction")}var r=new this.db.Table(e,n,this);r.core=this.db.core.table(e);t[e]=r;return r};return e}();function On(e){return zt(Tn.prototype,(function t(n,r,i,s,o){var a=this;this.db=e;this.mode=n;this.storeNames=r;this.schema=i;this.chromeTransactionDurability=s;this.idbtrans=null;this.on=Gt(this,"complete","error","abort");this.parent=o||null;this.active=true;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new Ue((function(e,t){a._resolve=e;a._reject=t}));this._completion.then((function(){a.active=false;a.on.complete.fire()}),(function(e){var t=a.active;a.active=false;a.on.error.fire(e);a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort();return _t(e)}))}))}function Mn(e,t,n,r,i,s,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Dn(t)}}function Dn(e){return typeof e==="string"?e:e?"["+[].join.call(e,"+")+"]":""}function An(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:S(n,(function(e){return[e.name,e]}))}}function Pn(e){return e.length===1?e[0]:e}var Ln=function e(t){try{t.only([[]]);Ln=function e(){return[[]]};return[[]]}catch(e){Ln=function e(){return Ot};return Ot}};function Rn(e){if(e==null){return function(){return undefined}}else if(typeof e==="string"){return Hn(e)}else{return function(t){return I(t,e)}}}function Hn(e){var t=e.split(".");if(t.length===1){return function(t){return t[e]}}else{return function(t){return I(t,e)}}}function jn(e){return[].slice.call(e)}var Nn=0;function Bn(e){return e==null?":id":typeof e==="string"?e:"["+e.join("+")+"]"}function Fn(e,t,n){function r(e,t){var n=jn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement;var r=s(t);var i=t==null;var o={};var a={name:e.name,primaryKey:{name:null,isPrimaryKey:true,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:true,extractKey:Rn(t)},indexes:jn(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,i=e.keyPath;var a=s(i);var l={name:t,compound:a,keyPath:i,unique:n,multiEntry:r,extractKey:Rn(i)};o[Bn(i)]=l;return l})),getIndexByKeyPath:function e(t){return o[Bn(t)]}};o[":id"]=a.primaryKey;if(t!=null){o[Bn(t)]=a.primaryKey}return a}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(e){if(e.type===3)return null;if(e.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen,s=e.upperOpen;var o=n===undefined?r===undefined?null:t.upperBound(r,!!s):r===undefined?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!s);return o}function o(e){var t=e.name;function n(e){var n=e.trans,r=e.type,s=e.keys,o=e.values,a=e.range;return new Promise((function(e,l){e=st(e);var u=n.objectStore(t);var c=u.keyPath==null;var f=r==="put"||r==="add";if(!f&&r!=="delete"&&r!=="deleteRange")throw new Error("Invalid operation type: "+r);var d=(s||o||{length:1}).length;if(s&&o&&s.length!==o.length){throw new Error("Given keys array must have same length as given values array.")}if(d===0)return e({numFailures:0,failures:{},results:[],lastResult:undefined});var h;var p=[];var m=[];var g=0;var v=function e(t){++g;En(t)};if(r==="deleteRange"){if(a.type===4)return e({numFailures:g,failures:m,results:[],lastResult:undefined});if(a.type===3)p.push(h=u.clear());else p.push(h=u["delete"](i(a)))}else{var y=f?c?[o,s]:[o,null]:[s,null],b=y[0],w=y[1];if(f){for(var S=0;S<d;++S){p.push(h=w&&w[S]!==undefined?u[r](b[S],w[S]):u[r](b[S]));h.onerror=v}}else{for(var S=0;S<d;++S){p.push(h=u[r](b[S]));h.onerror=v}}}var k=function t(n){var i=n.target.result;p.forEach((function(e,t){return e.error!=null&&(m[t]=e.error)}));e({numFailures:g,failures:m,results:r==="delete"?s:p.map((function(e){return e.result})),lastResult:i})};h.onerror=function(e){v(e);k(e)};h.onsuccess=k}))}function r(e){var n=e.trans,r=e.values,s=e.query,o=e.reverse,a=e.unique;return new Promise((function(e,l){e=st(e);var u=s.index,c=s.range;var f=n.objectStore(t);var d=u.isPrimaryKey?f:f.index(u.name);var h=o?a?"prevunique":"prev":a?"nextunique":"next";var p=r||!("openKeyCursor"in d)?d.openCursor(i(c),h):d.openKeyCursor(i(c),h);p.onerror=In(l);p.onsuccess=st((function(t){var r=p.result;if(!r){e(null);return}r.___id=++Nn;r.done=false;var i=r["continue"].bind(r);var s=r.continuePrimaryKey;if(s)s=s.bind(r);var o=r.advance.bind(r);var a=function e(){throw new Error("Cursor not started")};var u=function e(){throw new Error("Cursor not stopped")};r.trans=n;r.stop=r["continue"]=r.continuePrimaryKey=r.advance=a;r.fail=st(l);r.next=function(){var e=this;var t=1;return this.start((function(){return t--?e["continue"]():e.stop()})).then((function(){return e}))};r.start=function(e){var t=new Promise((function(e,t){e=st(e);p.onerror=In(t);r.fail=t;r.stop=function(t){r.stop=r["continue"]=r.continuePrimaryKey=r.advance=u;e(t)}}));var n=function t(){if(p.result){try{e()}catch(e){r.fail(e)}}else{r.done=true;r.start=function(){throw new Error("Cursor behind last entry")};r.stop()}};p.onsuccess=st((function(e){p.onsuccess=n;n()}));r["continue"]=i;r.continuePrimaryKey=s;r.advance=o;n();return t};e(r)}),l)}))}function s(e){return function(n){return new Promise((function(r,s){r=st(r);var o=n.trans,a=n.values,l=n.limit,u=n.query;var c=l===Infinity?undefined:l;var f=u.index,d=u.range;var h=o.objectStore(t);var p=f.isPrimaryKey?h:h.index(f.name);var m=i(d);if(l===0)return r({result:[]});if(e){var g=a?p.getAll(m,c):p.getAllKeys(m,c);g.onsuccess=function(e){return r({result:e.target.result})};g.onerror=In(s)}else{var v=0;var y=a||!("openKeyCursor"in p)?p.openCursor(m):p.openKeyCursor(m);var b=[];y.onsuccess=function(e){var t=y.result;if(!t)return r({result:b});b.push(a?t.value:t.primaryKey);if(++v===l)return r({result:b});t["continue"]()};y.onerror=In(s)}}))}}return{name:t,schema:e,mutate:n,getMany:function e(n){var r=n.trans,i=n.keys;return new Promise((function(e,n){e=st(e);var s=r.objectStore(t);var o=i.length;var a=new Array(o);var l=0;var u=0;var c;var f=function t(n){var r=n.target;if((a[r._pos]=r.result)!=null);if(++u===l)e(a)};var d=In(n);for(var h=0;h<o;++h){var p=i[h];if(p!=null){c=s.get(i[h]);c._pos=h;c.onsuccess=f;c.onerror=d;++l}}if(l===0)e(a)}))},get:function e(n){var r=n.trans,i=n.key;return new Promise((function(e,n){e=st(e);var s=r.objectStore(t);var o=s.get(i);o.onsuccess=function(t){return e(t.target.result)};o.onerror=In(n)}))},query:s(u),openCursor:r,count:function e(n){var r=n.query,s=n.trans;var o=r.index,a=r.range;return new Promise((function(e,n){var r=s.objectStore(t);var l=o.isPrimaryKey?r:r.index(o.name);var u=i(a);var c=u?l.count(u):l.count();c.onsuccess=st((function(t){return e(t.target.result)}));c.onerror=In(n)}))}}}var a=r(e,n),l=a.schema,u=a.hasGetAll;var c=l.tables.map((function(e){return o(e)}));var f={};c.forEach((function(e){return f[e.name]=e}));return{stack:"dbcore",transaction:e.transaction.bind(e),table:function e(t){var n=f[t];if(!n)throw new Error("Table '"+t+"' not found");return f[t]},MIN_KEY:-Infinity,MAX_KEY:Ln(t),schema:l}}function Un(e,n){return n.reduce((function(e,n){var r=n.create;return t(t({},e),r(e))}),e)}function Wn(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var s=Un(Fn(t,i,r),e.dbcore);return{dbcore:s}}function $n(e,t){var n=e._novip;var r=t.db;var i=Wn(n._middlewares,r,n._deps,t);n.core=i.dbcore;n.tables.forEach((function(e){var t=e.name;if(n.core.schema.tables.some((function(e){return e.name===t}))){e.core=n.core.table(t);if(n[t]instanceof n.Table){n[t].core=e.core}}}))}function Vn(e,t,n,r){var i=e._novip;n.forEach((function(e){var n=r[e];t.forEach((function(t){var r=m(t,e);if(!r||"value"in r&&r.value===undefined){if(t===i.Transaction.prototype||t instanceof i.Transaction){d(t,e,{get:function t(){return this.table(e)},set:function t(n){f(this,e,{value:n,writable:true,configurable:true,enumerable:true})}})}else{t[e]=new i.Table(e,n)}}}))}))}function Gn(e,t){var n=e._novip;t.forEach((function(e){for(var t in e){if(e[t]instanceof n.Table)delete e[t]}}))}function zn(e,t){return e._cfg.version-t._cfg.version}function Xn(e,t,n,r){var s=e._dbSchema;var o=e._createTransaction("readwrite",e._storeNames,s);o.create(n);o._completion["catch"](r);var a=o._reject.bind(o);var l=je.transless||je;dt((function(){je.trans=o;je.transless=l;if(t===0){i(s).forEach((function(e){Yn(n,e,s[e].primKey,s[e].indexes)}));$n(e,n);Ue.follow((function(){return e.on.populate.fire(o)}))["catch"](a)}else qn(e,t,o,n)["catch"](a)}))}function qn(e,t,n,r){var s=e._novip;var o=[];var a=s._versions;var l=s._dbSchema=er(s,s.idbdb,r);var u=false;var c=a.filter((function(e){return e._cfg.version>=t}));c.forEach((function(e){o.push((function(){var o=l;var a=e._cfg.dbschema;rr(s,o,r);rr(s,a,r);l=s._dbSchema=a;var c=Kn(o,a);c.add.forEach((function(e){Yn(r,e[0],e[1].primKey,e[1].indexes)}));c.change.forEach((function(e){if(e.recreate){throw new re.Upgrade("Not yet support for changing primary key")}else{var t=r.objectStore(e.name);e.add.forEach((function(e){return Zn(t,e)}));e.change.forEach((function(e){t.deleteIndex(e.name);Zn(t,e)}));e.del.forEach((function(e){return t.deleteIndex(e)}))}}));var f=e._cfg.contentUpgrade;if(f&&e._cfg.version>t){$n(s,r);n._memoizedTables={};u=true;var d=_(a);c.del.forEach((function(e){d[e]=o[e]}));Gn(s,[s.Transaction.prototype]);Vn(s,[s.Transaction.prototype],i(d),d);n.schema=d;var h=F(f);if(h){ht()}var p;var m=Ue.follow((function(){p=f(n);if(p){if(h){var e=pt.bind(null,null);p.then(e,e)}}}));return p&&typeof p.then==="function"?Ue.resolve(p):m.then((function(){return p}))}}));o.push((function(t){if(!u||!Rt){var r=e._cfg.dbschema;Qn(r,t)}Gn(s,[s.Transaction.prototype]);Vn(s,[s.Transaction.prototype],s._storeNames,s._dbSchema);n.schema=s._dbSchema}))}));function f(){return o.length?Ue.resolve(o.shift()(n.idbtrans)).then(f):Ue.resolve()}return f().then((function(){Jn(l,r)}))}function Kn(e,t){var n={del:[],add:[],change:[]};var r;for(r in e){if(!t[r])n.del.push(r)}for(r in t){var i=e[r],s=t[r];if(!i){n.add.push([r,s])}else{var o={name:r,def:s,recreate:false,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!==""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!Lt){o.recreate=true;n.change.push(o)}else{var a=i.idxByName;var l=s.idxByName;var u=void 0;for(u in a){if(!l[u])o.del.push(u)}for(u in l){var c=a[u],f=l[u];if(!c)o.add.push(f);else if(c.src!==f.src)o.change.push(f)}if(o.del.length>0||o.add.length>0||o.change.length>0){n.change.push(o)}}}}return n}function Yn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});r.forEach((function(e){return Zn(i,e)}));return i}function Jn(e,t){i(e).forEach((function(n){if(!t.db.objectStoreNames.contains(n)){Yn(t,n,e[n].primKey,e[n].indexes)}}))}function Qn(e,t){[].slice.call(t.db.objectStoreNames).forEach((function(n){return e[n]==null&&t.db.deleteObjectStore(n)}))}function Zn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function er(e,t,n){var r={};var i=v(t.objectStoreNames,0);i.forEach((function(e){var t=n.objectStore(e);var i=t.keyPath;var s=Mn(Dn(i),i||"",false,false,!!t.autoIncrement,i&&typeof i!=="string",true);var o=[];for(var a=0;a<t.indexNames.length;++a){var l=t.index(t.indexNames[a]);i=l.keyPath;var u=Mn(l.name,i,!!l.unique,!!l.multiEntry,false,i&&typeof i!=="string",false);o.push(u)}r[e]=An(e,s,o)}));return r}function tr(e,t,n){var r=e._novip;r.verno=t.version/10;var s=r._dbSchema=er(r,t,n);r._storeNames=v(t.objectStoreNames,0);Vn(r,[r._allTables],i(s),s)}function nr(e,t){var n=er(e,e.idbdb,t);var r=Kn(n,e._dbSchema);return!(r.add.length||r.change.some((function(e){return e.add.length||e.change.length})))}function rr(e,t,n){var i=e._novip;var s=n.db.objectStoreNames;for(var o=0;o<s.length;++o){var a=s[o];var l=n.objectStore(a);i._hasGetAll="getAll"in l;for(var u=0;u<l.indexNames.length;++u){var c=l.indexNames[u];var f=l.index(c).keyPath;var d=typeof f==="string"?f:"["+v(f).join("+")+"]";if(t[a]){var h=t[a].idxByName[d];if(h){h.name=c;delete t[a].idxByName[d];t[a].idxByName[c]=h}}}}if(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604){i._hasGetAll=false}}function ir(e){return e.split(",").map((function(e,t){e=e.trim();var n=e.replace(/([&*]|\+\+)/g,"");var r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Mn(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),s(r),t===0)}))}var sr=function(){function e(){}e.prototype._parseStoresSpec=function(e,t){i(e).forEach((function(n){if(e[n]!==null){var r=ir(e[n]);var i=r.shift();if(i.multi)throw new re.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")}));t[n]=An(n,i,r)}}))};e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?o(this._cfg.storesSource,e):e;var n=t._versions;var r={};var s={};n.forEach((function(e){o(r,e._cfg.storesSource);s=e._cfg.dbschema={};e._parseStoresSpec(r,s)}));t._dbSchema=s;Gn(t,[t._allTables,t,t.Transaction.prototype]);Vn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],i(s),s);t._storeNames=i(s);return this};e.prototype.upgrade=function(e){this._cfg.contentUpgrade=me(this._cfg.contentUpgrade||ae,e);return this};return e}();function or(e){return zt(sr.prototype,(function t(n){this.db=e;this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}function ar(e,t){var n=e["_dbNamesDB"];if(!n){n=e["_dbNamesDB"]=new Nr(Nt,{addons:[],indexedDB:e,IDBKeyRange:t});n.version(1).stores({dbnames:"name"})}return n.table("dbnames")}function lr(e){return e&&typeof e.databases==="function"}function ur(e){var t=e.indexedDB,n=e.IDBKeyRange;return lr(t)?Promise.resolve(t.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==Nt}))})):ar(t,n).toCollection().primaryKeys()}function cr(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!lr(n)&&t!==Nt&&ar(n,r).put({name:t})["catch"](ae)}function fr(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!lr(n)&&t!==Nt&&ar(n,r)["delete"](t)["catch"](ae)}function dr(e){return dt((function(){je.letThrough=true;return e()}))}function hr(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise((function(e){var n=function t(){return indexedDB.databases()["finally"](e)};t=setInterval(n,100);n()}))["finally"]((function(){return clearInterval(t)}))}function pr(e){var t=e._state;var n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?_t(t.dbOpenError):e}));U&&(t.openCanceller._stackHolder=G());t.isBeingOpened=true;t.dbOpenError=null;t.openComplete=false;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new re.DatabaseClosed("db.open() was cancelled")}var s=t.dbReadyResolve,o=null,a=false;return Ue.race([r,(typeof navigator==="undefined"?Ue.resolve():hr()).then((function(){return new Ue((function(r,s){i();if(!n)throw new re.MissingAPI;var l=e.name;var u=t.autoSchema?n.open(l):n.open(l,Math.round(e.verno*10));if(!u)throw new re.MissingAPI;u.onerror=In(s);u.onblocked=st(e._fireOnBlocked);u.onupgradeneeded=st((function(r){o=u.transaction;if(t.autoSchema&&!e._options.allowEmptyDB){u.onerror=En;o.abort();u.result.close();var i=n.deleteDatabase(l);i.onsuccess=i.onerror=st((function(){s(new re.NoSuchDatabase("Database "+l+" doesnt exist"))}))}else{o.onerror=In(s);var c=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;a=c<1;e._novip.idbdb=u.result;Xn(e,c/10,o,s)}}),s);u.onsuccess=st((function(){o=null;var n=e._novip.idbdb=u.result;var i=v(n.objectStoreNames);if(i.length>0)try{var s=n.transaction(Pn(i),"readonly");if(t.autoSchema)tr(e,n,s);else{rr(e,e._dbSchema,s);if(!nr(e,s)){console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")}}$n(e,s)}catch(e){}Pt.push(e);n.onversionchange=st((function(n){t.vcFired=true;e.on("versionchange").fire(n)}));n.onclose=st((function(t){e.on("close").fire(t)}));if(a)cr(e._deps,l);r()}),s)}))}))]).then((function(){i();t.onReadyBeingFired=[];return Ue.resolve(dr((function(){return e.on.ready.fire(e.vip)}))).then((function n(){if(t.onReadyBeingFired.length>0){var r=t.onReadyBeingFired.reduce(me,ae);t.onReadyBeingFired=[];return Ue.resolve(dr((function(){return r(e.vip)}))).then(n)}}))}))["finally"]((function(){t.onReadyBeingFired=null;t.isBeingOpened=false})).then((function(){return e}))["catch"]((function(n){t.dbOpenError=n;try{o&&o.abort()}catch(e){}if(r===t.openCanceller){e._close()}return _t(n)}))["finally"]((function(){t.openComplete=true;s()}))}function mr(e){var t=function t(n){return e.next(n)},n=function t(n){return e["throw"](n)},r=o(t),i=o(n);function o(e){return function(t){var n=e(t),o=n.value;return n.done?o:!o||typeof o.then!=="function"?s(o)?Promise.all(o).then(r,i):r(o):o.then(r,i)}}return o(t)()}function gr(e,t,n){var r=arguments.length;if(r<2)throw new re.InvalidArgument("Too few arguments");var i=new Array(r-1);while(--r)i[r-1]=arguments[r];n=i.pop();var s=T(i);return[e,s,n]}function vr(e,t,n,r,i){return Ue.resolve().then((function(){var s=je.transless||je;var o=e._createTransaction(t,n,e._dbSchema,r);var a={trans:o,transless:s};if(r){o.idbtrans=r.idbtrans}else{try{o.create();e._state.PR1398_maxLoop=3}catch(r){if(r.name===te.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0){console.warn("Dexie: Need to reopen db");e._close();return e.open().then((function(){return vr(e,t,n,null,i)}))}return _t(r)}}var l=F(i);if(l){ht()}var u;var c=Ue.follow((function(){u=i.call(o,o);if(u){if(l){var e=pt.bind(null,null);u.then(e,e)}else if(typeof u.next==="function"&&typeof u["throw"]==="function"){u=mr(u)}}}),a);return(u&&typeof u.then==="function"?Ue.resolve(u).then((function(e){return o.active?e:_t(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):c.then((function(){return u}))).then((function(e){if(r)o._resolve();return o._completion.then((function(){return e}))}))["catch"]((function(e){o._reject(e);return _t(e)}))}))}function yr(e,t,n){var r=s(e)?e.slice():[e];for(var i=0;i<n;++i)r.push(t);return r}function br(e){return t(t({},e),{table:function n(r){var n=e.table(r);var i=n.schema;var s={};var o=[];function a(e,n,r){var i=Bn(e);var l=s[i]=s[i]||[];var u=e==null?0:typeof e==="string"?1:e.length;var c=n>0;var f=t(t({},r),{isVirtual:c,keyTail:n,keyLength:u,extractKey:Rn(e),unique:!c&&r.unique});l.push(f);if(!f.isPrimaryKey){o.push(f)}if(u>1){var d=u===2?e[0]:e.slice(0,u-1);a(d,n+1,r)}l.sort((function(e,t){return e.keyTail-t.keyTail}));return f}var l=a(i.primaryKey.keyPath,0,i.primaryKey);s[":id"]=[l];for(var u=0,c=i.indexes;u<c.length;u++){var f=c[u];a(f.keyPath,0,f)}function d(e){var t=s[Bn(e)];return t&&t[0]}function h(t,n){return{type:t.type===1?2:t.type,lower:yr(t.lower,t.lowerOpen?e.MAX_KEY:e.MIN_KEY,n),lowerOpen:true,upper:yr(t.upper,t.upperOpen?e.MIN_KEY:e.MAX_KEY,n),upperOpen:true}}function p(e){var n=e.query.index;return n.isVirtual?t(t({},e),{query:{index:n,range:h(e.query.range,n.keyTail)}}):e}var m=t(t({},n),{schema:t(t({},i),{primaryKey:l,indexes:o,getIndexByKeyPath:d}),count:function e(t){return n.count(p(t))},query:function e(t){return n.query(p(t))},openCursor:function t(r){var i=r.query.index,s=i.keyTail,o=i.isVirtual,a=i.keyLength;if(!o)return n.openCursor(r);function l(t){function n(n){n!=null?t["continue"](yr(n,r.reverse?e.MAX_KEY:e.MIN_KEY,s)):r.unique?t["continue"](t.key.slice(0,a).concat(r.reverse?e.MIN_KEY:e.MAX_KEY,s)):t["continue"]()}var i=Object.create(t,{continue:{value:n},continuePrimaryKey:{value:function n(r,i){t.continuePrimaryKey(yr(r,e.MAX_KEY,s),i)}},primaryKey:{get:function e(){return t.primaryKey}},key:{get:function e(){var n=t.key;return a===1?n[0]:n.slice(0,a)}},value:{get:function e(){return t.value}}});return i}return n.openCursor(p(r)).then((function(e){return e&&l(e)}))}});return m}})}var wr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:br};function Sr(e,t,n,r){n=n||{};r=r||"";i(e).forEach((function(i){if(!u(t,i)){n[r+i]=undefined}else{var s=e[i],o=t[i];if(babelHelpers["typeof"](s)==="object"&&babelHelpers["typeof"](o)==="object"&&s&&o){var a=R(s);var l=R(o);if(a!==l){n[r+i]=t[i]}else if(a==="Object"){Sr(s,o,n,r+i+".")}else if(s!==o){n[r+i]=t[i]}}else if(s!==o)n[r+i]=t[i]}}));i(t).forEach((function(i){if(!u(e,i)){n[r+i]=t[i]}}));return n}function kr(e,t){if(t.type==="delete")return t.keys;return t.keys||t.values.map(e.extractKey)}var Ir={stack:"dbcore",name:"HooksMiddleware",level:2,create:function e(r){return t(t({},r),{table:function e(i){var s=r.table(i);var o=s.schema.primaryKey;var a=t(t({},s),{mutate:function e(r){var a=je.trans;var l=a.table(i).hook,c=l.deleting,f=l.creating,d=l.updating;switch(r.type){case"add":if(f.fire===ae)break;return a._promise("readwrite",(function(){return h(r)}),true);case"put":if(f.fire===ae&&d.fire===ae)break;return a._promise("readwrite",(function(){return h(r)}),true);case"delete":if(c.fire===ae)break;return a._promise("readwrite",(function(){return h(r)}),true);case"deleteRange":if(c.fire===ae)break;return a._promise("readwrite",(function(){return p(r)}),true)}return s.mutate(r);function h(e){var r=je.trans;var i=e.keys||kr(o,e);if(!i)throw new Error("Keys missing");e=e.type==="add"||e.type==="put"?t(t({},e),{keys:i}):t({},e);if(e.type!=="delete")e.values=n([],e.values,true);if(e.keys)e.keys=n([],e.keys,true);return Er(s,e,i).then((function(t){var n=i.map((function(n,i){var s=t[i];var a={onerror:null,onsuccess:null};if(e.type==="delete"){c.fire.call(a,n,s,r)}else if(e.type==="add"||s===undefined){var l=f.fire.call(a,n,e.values[i],r);if(n==null&&l!=null){n=l;e.keys[i]=n;if(!o.outbound){E(e.values[i],o.keyPath,n)}}}else{var h=Sr(s,e.values[i]);var p=d.fire.call(a,h,n,s,r);if(p){var m=e.values[i];Object.keys(p).forEach((function(e){if(u(m,e)){m[e]=p[e]}else{E(m,e,p[e])}}))}}return a}));return s.mutate(e).then((function(r){var s=r.failures,o=r.results,a=r.numFailures,l=r.lastResult;for(var u=0;u<i.length;++u){var c=o?o[u]:i[u];var f=n[u];if(c==null){f.onerror&&f.onerror(s[u])}else{f.onsuccess&&f.onsuccess(e.type==="put"&&t[u]?e.values[u]:c)}}return{failures:s,results:o,numFailures:a,lastResult:l}}))["catch"]((function(e){n.forEach((function(t){return t.onerror&&t.onerror(e)}));return Promise.reject(e)}))}))}function p(e){return m(e.trans,e.range,1e4)}function m(e,n,r){return s.query({trans:e,values:false,query:{index:o,range:n},limit:r}).then((function(i){var s=i.result;return h({type:"delete",keys:s,trans:e}).then((function(i){if(i.numFailures>0)return Promise.reject(i.failures[0]);if(s.length<r){return{failures:[],numFailures:0,lastResult:undefined}}else{return m(e,t(t({},n),{lower:s[s.length-1],lowerOpen:true}),r)}}))}))}}});return a}})}};function Er(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Cr(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;var r=[];for(var i=0,s=0;i<t.keys.length&&s<e.length;++i){if(nn(t.keys[i],e[s])!==0)continue;r.push(n?A(t.values[i]):t.values[i]);++s}return r.length===e.length?r:null}catch(e){return null}}var _r={stack:"dbcore",level:-1,create:function e(n){return{table:function e(r){var e=n.table(r);return t(t({},e),{getMany:function t(n){if(!n.cache){return e.getMany(n)}var r=Cr(n.keys,n.trans["_cache"],n.cache==="clone");if(r){return Ue.resolve(r)}return e.getMany(n).then((function(e){n.trans["_cache"]={keys:n.keys,values:n.cache==="clone"?A(e):e};return e}))},mutate:function t(n){if(n.type!=="add")n.trans["_cache"]=null;return e.mutate(n)}})}}}};var xr;function Tr(e){return!("from"in e)}var Or=function e(t,n){if(this){o(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0})}else{var r=new e;if(t&&"d"in t){o(r,t)}return r}};c(Or.prototype,(xr={add:function e(t){Dr(this,t);return this},addKey:function e(t){Mr(this,t,t);return this},addKeys:function e(t){var n=this;t.forEach((function(e){return Mr(n,e,e)}));return this}},xr[H]=function(){return Pr(this)},xr));function Mr(e,t,n){var r=nn(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Tr(e))return o(e,{from:t,to:n,d:1});var i=e.l;var s=e.r;if(nn(n,e.from)<0){i?Mr(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null};return Lr(e)}if(nn(t,e.to)>0){s?Mr(s,t,n):e.r={from:t,to:n,d:1,l:null,r:null};return Lr(e)}if(nn(t,e.from)<0){e.from=t;e.l=null;e.d=s?s.d+1:1}if(nn(n,e.to)>0){e.to=n;e.r=null;e.d=e.l?e.l.d+1:1}var a=!e.r;if(i&&!e.l){Dr(e,i)}if(s&&a){Dr(e,s)}}function Dr(e,t){function n(e,t){var r=t.from,i=t.to,s=t.l,o=t.r;Mr(e,r,i);if(s)n(e,s);if(o)n(e,o)}if(!Tr(t))n(e,t)}function Ar(e,t){var n=Pr(t);var r=n.next();if(r.done)return false;var i=r.value;var s=Pr(e);var o=s.next(i.from);var a=o.value;while(!r.done&&!o.done){if(nn(a.from,i.to)<=0&&nn(a.to,i.from)>=0)return true;nn(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(o=s.next(i.from)).value}return false}function Pr(e){var t=Tr(e)?null:{s:0,n:e};return{next:function e(n){var r=arguments.length>0;while(t){switch(t.s){case 0:t.s=1;if(r){while(t.n.l&&nn(n,t.n.from)<0)t={up:t,n:t.n.l,s:1}}else{while(t.n.l)t={up:t,n:t.n.l,s:1}}case 1:t.s=2;if(!r||nn(n,t.n.to)<=0)return{value:t.n,done:false};case 2:if(t.n.r){t.s=3;t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}}return{done:true}}}}function Lr(e){var n,r;var i=(((n=e.r)===null||n===void 0?void 0:n.d)||0)-(((r=e.l)===null||r===void 0?void 0:r.d)||0);var s=i>1?"r":i<-1?"l":"";if(s){var o=s==="r"?"l":"r";var a=t({},e);var l=e[s];e.from=l.from;e.to=l.to;e[s]=l[s];a[s]=l[o];e[o]=a;a.d=Rr(a)}e.d=Rr(e)}function Rr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var Hr={stack:"dbcore",level:0,create:function e(n){var r=n.schema.name;var o=new Or(n.MIN_KEY,n.MAX_KEY);return t(t({},n),{table:function e(a){var e=n.table(a);var l=e.schema;var u=l.primaryKey;var c=u.extractKey,f=u.outbound;var d=t(t({},e),{mutate:function t(n){var i=n.trans;var u=i.mutatedParts||(i.mutatedParts={});var c=function e(t){var n="idb://"+r+"/"+a+"/"+t;return u[n]||(u[n]=new Or)};var f=c("");var d=c(":dels");var h=n.type;var p=n.type==="deleteRange"?[n.range]:n.type==="delete"?[n.keys]:n.values.length<50?[[],n.values]:[],m=p[0],g=p[1];var v=n.trans["_cache"];return e.mutate(n).then((function(e){if(s(m)){if(h!=="delete")m=e.results;f.addKeys(m);var t=Cr(m,v);if(!t&&h!=="add"){d.addKeys(m)}if(t||g){jr(c,l,t,g)}}else if(m){var n={from:m.lower,to:m.upper};d.add(n);f.add(n)}else{f.add(o);d.add(o);l.indexes.forEach((function(e){return c(e.name).add(o)}))}return e}))}});var h=function e(t){var r,i;var s=t.query,o=s.index,a=s.range;return[o,new Or((r=a.lower)!==null&&r!==void 0?r:n.MIN_KEY,(i=a.upper)!==null&&i!==void 0?i:n.MAX_KEY)]};var p={get:function e(t){return[u,new Or(t.key)]},getMany:function e(t){return[u,(new Or).addKeys(t.keys)]},count:h,query:h,openCursor:h};i(p).forEach((function(n){d[n]=function(i){var s=je.subscr;if(s){var l=function e(t){var n="idb://"+r+"/"+a+"/"+t;return s[n]||(s[n]=new Or)};var u=l("");var d=l(":dels");var h=p[n](i),m=h[0],g=h[1];l(m.name||"").add(g);if(!m.isPrimaryKey){if(n==="count"){d.add(o)}else{var v=n==="query"&&f&&i.values&&e.query(t(t({},i),{values:false}));return e[n].apply(this,arguments).then((function(e){if(n==="query"){if(f&&i.values){return v.then((function(t){var n=t.result;u.addKeys(n);return e}))}var t=i.values?e.result.map(c):e.result;if(i.values){u.addKeys(t)}else{d.addKeys(t)}}else if(n==="openCursor"){var r=e;var s=i.values;return r&&Object.create(r,{key:{get:function e(){d.addKey(r.primaryKey);return r.key}},primaryKey:{get:function e(){var t=r.primaryKey;d.addKey(t);return t}},value:{get:function e(){s&&u.addKey(r.primaryKey);return r.value}}})}return e}))}}}return e[n].apply(this,arguments)}}));return d}})}};function jr(e,t,n,r){function i(t){var i=e(t.name||"");function o(e){return e!=null?t.extractKey(e):null}var a=function e(n){return t.multiEntry&&s(n)?n.forEach((function(e){return i.addKey(e)})):i.addKey(n)};(n||r).forEach((function(e,t){var i=n&&o(n[t]);var s=r&&o(r[t]);if(nn(i,s)!==0){if(i!=null)a(i);if(s!=null)a(s)}}))}t.indexes.forEach(i)}var Nr=function(){function e(n,r){var i=this;this._middlewares={};this.verno=0;var s=e.dependencies;this._options=r=t({addons:e.addons,autoOpen:true,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange},r);this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var o=r.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var a={dbOpenError:null,isBeingOpened:false,onReadyBeingFired:null,openComplete:false,dbReadyResolve:ae,dbReadyPromise:null,cancelOpen:ae,openCanceller:null,autoSchema:true,PR1398_maxLoop:3};a.dbReadyPromise=new Ue((function(e){a.dbReadyResolve=e}));a.openCanceller=new Ue((function(e,t){a.cancelOpen=t}));this._state=a;this.name=n;this.on=Gt(this,"populate","blocked","versionchange","close",{ready:[me,ae]});this.on.ready.subscribe=y(this.on.ready.subscribe,(function(t){return function(n,r){e.vip((function(){var e=i._state;if(e.openComplete){if(!e.dbOpenError)Ue.resolve().then(n);if(r)t(n)}else if(e.onReadyBeingFired){e.onReadyBeingFired.push(n);if(r)t(n)}else{t(n);var s=i;if(!r)t((function e(){s.on.ready.unsubscribe(n);s.on.ready.unsubscribe(e)}))}}))}}));this.Collection=cn(this);this.Table=Xt(this);this.Transaction=On(this);this.Version=or(this);this.WhereClause=kn(this);this.on("versionchange",(function(e){if(e.newVersion>0)console.warn("Another connection wants to upgrade database '"+i.name+"'. Closing db now to resume the upgrade.");else console.warn("Another connection wants to delete database '"+i.name+"'. Closing db now to resume the delete request.");i.close()}));this.on("blocked",(function(e){if(!e.newVersion||e.newVersion<e.oldVersion)console.warn("Dexie.delete('"+i.name+"') was blocked");else console.warn("Upgrade '"+i.name+"' blocked by other connection holding version "+e.oldVersion/10)}));this._maxKey=Ln(r.IDBKeyRange);this._createTransaction=function(e,t,n,r){return new i.Transaction(e,t,n,i._options.chromeTransactionDurability,r)};this._fireOnBlocked=function(e){i.on("blocked").fire(e);Pt.filter((function(e){return e.name===i.name&&e!==i&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))};this.use(wr);this.use(Ir);this.use(Hr);this.use(_r);this.vip=Object.create(this,{_vip:{value:true}});o.forEach((function(e){return e(i)}))}e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new re.Type("Given version is not a positive number");e=Math.round(e*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions;var n=t.filter((function(t){return t._cfg.version===e}))[0];if(n)return n;n=new this.Version(e);t.push(n);t.sort(zn);n.stores({});this._state.autoSchema=false;return n};e.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||je.letThrough||this._vip)?e():new Ue((function(e,n){if(t._state.openComplete){return n(new re.DatabaseClosed(t._state.dbOpenError))}if(!t._state.isBeingOpened){if(!t._options.autoOpen){n(new re.DatabaseClosed);return}t.open()["catch"](ae)}t._state.dbReadyPromise.then(e,n)})).then(e)};e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;if(i)this.unuse({stack:t,name:i});var s=this._middlewares[t]||(this._middlewares[t]=[]);s.push({stack:t,create:n,level:r==null?10:r,name:i});s.sort((function(e,t){return e.level-t.level}));return this};e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;if(t&&this._middlewares[t]){this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:n?e.name!==n:false}))}return this};e.prototype.open=function(){return pr(this)};e.prototype._close=function(){var e=this._state;var t=Pt.indexOf(this);if(t>=0)Pt.splice(t,1);if(this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Ue((function(t){e.dbReadyResolve=t}));e.openCanceller=new Ue((function(t,n){e.cancelOpen=n}))};e.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=false;e.dbOpenError=new re.DatabaseClosed;if(e.isBeingOpened)e.cancelOpen(e.dbOpenError)};e.prototype["delete"]=function(){var e=this;var t=arguments.length>0;var n=this._state;return new Ue((function(r,i){var s=function t(){e.close();var n=e._deps.indexedDB.deleteDatabase(e.name);n.onsuccess=st((function(){fr(e._deps,e.name);r()}));n.onerror=In(i);n.onblocked=e._fireOnBlocked};if(t)throw new re.InvalidArgument("Arguments not allowed in db.delete()");if(n.isBeingOpened){n.dbReadyPromise.then(s)}else{s()}}))};e.prototype.backendDB=function(){return this.idbdb};e.prototype.isOpen=function(){return this.idbdb!==null};e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"};e.prototype.hasFailed=function(){return this._state.dbOpenError!==null};e.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(e.prototype,"tables",{get:function e(){var t=this;return i(this._allTables).map((function(e){return t._allTables[e]}))},enumerable:false,configurable:true});e.prototype.transaction=function(){var e=gr.apply(this,arguments);return this._transaction.apply(this,e)};e.prototype._transaction=function(e,t,n){var r=this;var i=je.trans;if(!i||i.db!==this||e.indexOf("!")!==-1)i=null;var s=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var o,a;try{a=t.map((function(e){var t=e instanceof r.Table?e.name:e;if(typeof t!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}));if(e=="r"||e===Bt)o=Bt;else if(e=="rw"||e==Ft)o=Ft;else throw new re.InvalidArgument("Invalid transaction mode: "+e);if(i){if(i.mode===Bt&&o===Ft){if(s){i=null}else throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY")}if(i){a.forEach((function(e){if(i&&i.storeNames.indexOf(e)===-1){if(s){i=null}else throw new re.SubTransaction("Table "+e+" not included in parent transaction.")}}))}if(s&&i&&!i.active){i=null}}}catch(e){return i?i._promise(null,(function(t,n){n(e)})):_t(e)}var l=vr.bind(null,this,o,a,i,n);return i?i._promise(o,l,"lock"):je.trans?wt(je.transless,(function(){return r._whenReady(l)})):this._whenReady(l)};e.prototype.table=function(e){if(!u(this._allTables,e)){throw new re.InvalidTable("Table "+e+" does not exist")}return this._allTables[e]};return e}();var Br=typeof Symbol!=="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable";var Fr=function(){function e(e){this._subscribe=e}e.prototype.subscribe=function(e,t,n){return this._subscribe(!e||typeof e==="function"?{next:e,error:t,complete:n}:e)};e.prototype[Br]=function(){return this};return e}();function Ur(e,t){i(t).forEach((function(n){var r=e[n]||(e[n]=new Or);Dr(r,t[n])}));return e}function Wr(e){return new Fr((function(t){var n=F(e);function r(t){if(n){ht()}var r=function n(){return dt(e,{subscr:t,trans:null})};var i=je.trans?wt(je.transless,r):r();if(n){i.then(pt,pt)}return i}var s=false;var o={};var a={};var l={get closed(){return s},unsubscribe:function e(){s=true;xn.storagemutated.unsubscribe(d)}};t.start&&t.start(l);var u=false,c=false;function f(){return i(a).some((function(e){return o[e]&&Ar(o[e],a[e])}))}var d=function e(t){Ur(o,t);if(f()){h()}};var h=function e(){if(u||s)return;o={};var n={};var i=r(n);if(!c){xn(Cn,d);c=true}u=true;Promise.resolve(i).then((function(r){u=false;if(s)return;if(f()){e()}else{o={};a=n;t.next&&t.next(r)}}),(function(e){u=false;t.error&&t.error(e);l.unsubscribe()}))};h();return l}))}var $r;try{$r={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch(e){$r={indexedDB:null,IDBKeyRange:null}}var Vr=Nr;c(Vr,t(t({},oe),{delete:function e(t){var n=new Vr(t,{addons:[]});return n["delete"]()},exists:function e(t){return new Vr(t,{addons:[]}).open().then((function(e){e.close();return true}))["catch"]("NoSuchDatabaseError",(function(){return false}))},getDatabaseNames:function e(t){try{return ur(Vr.dependencies).then(t)}catch(e){return _t(new re.MissingAPI)}},defineClass:function e(){function t(e){o(this,e)}return t},ignoreTransaction:function e(t){return je.trans?wt(je.transless,t):t()},vip:dr,async:function e(t){return function(){try{var e=mr(t.apply(this,arguments));if(!e||typeof e.then!=="function")return Ue.resolve(e);return e}catch(e){return _t(e)}}},spawn:function e(t,n,r){try{var i=mr(t.apply(r,n||[]));if(!i||typeof i.then!=="function")return Ue.resolve(i);return i}catch(e){return _t(e)}},currentTransaction:{get:function e(){return je.trans||null}},waitFor:function e(t,n){var r=Ue.resolve(typeof t==="function"?Vr.ignoreTransaction(t):t).timeout(n||6e4);return je.trans?je.trans.waitFor(r):r},Promise:Ue,debug:{get:function e(){return U},set:function e(t){W(t,t==="dexie"?function(){return true}:jt)}},derive:h,extend:o,props:c,override:y,Events:Gt,on:xn,liveQuery:Wr,extendObservabilitySet:Ur,getByKeyPath:I,setByKeyPath:E,delByKeyPath:C,shallowClone:_,deepClone:A,getObjectDiff:Sr,cmp:nn,asap:w,minKey:Mt,addons:[],connections:Pt,errnames:te,dependencies:$r,semVer:Tt,version:Tt.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,n*2)}))}));Vr.maxKey=Ln(Vr.dependencies.IDBKeyRange);if(typeof dispatchEvent!=="undefined"&&typeof addEventListener!=="undefined"){xn(Cn,(function(e){if(!zr){var t;if(Lt){t=document.createEvent("CustomEvent");t.initCustomEvent(_n,true,true,e)}else{t=new CustomEvent(_n,{detail:e})}zr=true;dispatchEvent(t);zr=false}}));addEventListener(_n,(function(e){var t=e.detail;if(!zr){Gr(t)}}))}function Gr(e){var t=zr;try{zr=true;xn.storagemutated.fire(e)}finally{zr=t}}var zr=false;if(typeof BroadcastChannel!=="undefined"){var Xr=new BroadcastChannel(_n);xn(Cn,(function(e){if(!zr){Xr.postMessage(e)}}));Xr.onmessage=function(e){if(e.data)Gr(e.data)}}else if(typeof self!=="undefined"&&typeof navigator!=="undefined"){xn(Cn,(function(e){try{if(!zr){if(typeof localStorage!=="undefined"){localStorage.setItem(_n,JSON.stringify({trig:Math.random(),changedParts:e}))}if(babelHelpers["typeof"](self["clients"])==="object"){n([],self["clients"].matchAll({includeUncontrolled:true}),true).forEach((function(t){return t.postMessage({type:_n,changedParts:e})}))}}}catch(e){}}));if(typeof addEventListener!=="undefined"){addEventListener("storage",(function(e){if(e.key===_n){var t=JSON.parse(e.newValue);if(t)Gr(t.changedParts)}}))}var qr=self.document&&navigator.serviceWorker;if(qr){qr.addEventListener("message",Kr)}}function Kr(e){var t=e.data;if(t&&t.type===_n){Gr(t.changedParts)}}Ue.rejectionMapper=se;W(U,jt);window.BX.Dexie=Nr;e.Dexie=Nr;e.liveQuery=Wr;e.RangeSet=Or;e.mergeRanges=Dr;e.rangesOverlap=Ar})(this.BX.Dexie3=this.BX.Dexie3||{});(function(exports){"use strict";
/**
   * [js-md5]{@link https://github.com/emn178/js-md5}
   *
   * @namespace md5
   * @version 0.7.3
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2017
   * @license MIT
   */var md5=function(){var ERROR="input is invalid type";var WINDOW=(typeof window==="undefined"?"undefined":babelHelpers.typeof(window))==="object";var root=WINDOW?window:{};if(root.JS_MD5_NO_WINDOW){WINDOW=false}var WEB_WORKER=!WINDOW&&(typeof self==="undefined"?"undefined":babelHelpers.typeof(self))==="object";var NODE_JS=!root.JS_MD5_NO_NODE_JS&&(typeof process==="undefined"?"undefined":babelHelpers.typeof(process))==="object"&&process.versions&&process.versions.node;if(NODE_JS){root=global}else if(WEB_WORKER){root=self}var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&(typeof module==="undefined"?"undefined":babelHelpers.typeof(module))==="object"&&module.exports;var AMD=typeof define==="function"&&define.amd;var ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer!=="undefined";var HEX_CHARS="0123456789abcdef".split("");var EXTRA=[128,32768,8388608,-2147483648];var SHIFT=[0,8,16,24];var OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"];var BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");var blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer);blocks=new Uint32Array(buffer)}if(root.JS_MD5_NO_NODE_JS||!Array.isArray){Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}if(ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)){ArrayBuffer.isView=function(e){return babelHelpers.typeof(e)==="object"&&e.buffer&&e.buffer.constructor===ArrayBuffer}}var createOutputMethod=function e(t){return function(e){return new Md5(true).update(e)[t]()}};var createMethod=function e(){var t=createOutputMethod("hex");if(NODE_JS){t=nodeWrap(t)}t.create=function(){return new Md5};t.update=function(e){return t.create().update(e)};for(var n=0;n<OUTPUT_TYPES.length;++n){var r=OUTPUT_TYPES[n];t[r]=createOutputMethod(r)}return t};var nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')");var Buffer=eval("require('buffer').Buffer");var nodeMethod=function e(t){if(typeof t==="string"){return crypto.createHash("md5").update(t,"utf8").digest("hex")}else{if(t===null||t===undefined){throw ERROR}else if(t.constructor===ArrayBuffer){t=new Uint8Array(t)}}if(Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer){return crypto.createHash("md5").update(new Buffer(t)).digest("hex")}else{return method(t)}};return nodeMethod};function Md5(e){if(e){blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0;this.blocks=blocks;this.buffer8=buffer8}else{if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t);this.blocks=new Uint32Array(t)}else{this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0;this.finalized=this.hashed=false;this.first=true}Md5.prototype.update=function(e){if(this.finalized){return}var t,n=babelHelpers.typeof(e);if(n!=="string"){if(n==="object"){if(e===null){throw ERROR}else if(ARRAY_BUFFER&&e.constructor===ArrayBuffer){e=new Uint8Array(e)}else if(!Array.isArray(e)){if(!ARRAY_BUFFER||!ArrayBuffer.isView(e)){throw ERROR}}}else{throw ERROR}t=true}var r,i=0,s,o=e.length,a=this.blocks;var l=this.buffer8;while(i<o){if(this.hashed){this.hashed=false;a[0]=a[16];a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0}if(t){if(ARRAY_BUFFER){for(s=this.start;i<o&&s<64;++i){l[s++]=e[i]}}else{for(s=this.start;i<o&&s<64;++i){a[s>>2]|=e[i]<<SHIFT[s++&3]}}}else{if(ARRAY_BUFFER){for(s=this.start;i<o&&s<64;++i){r=e.charCodeAt(i);if(r<128){l[s++]=r}else if(r<2048){l[s++]=192|r>>6;l[s++]=128|r&63}else if(r<55296||r>=57344){l[s++]=224|r>>12;l[s++]=128|r>>6&63;l[s++]=128|r&63}else{r=65536+((r&1023)<<10|e.charCodeAt(++i)&1023);l[s++]=240|r>>18;l[s++]=128|r>>12&63;l[s++]=128|r>>6&63;l[s++]=128|r&63}}}else{for(s=this.start;i<o&&s<64;++i){r=e.charCodeAt(i);if(r<128){a[s>>2]|=r<<SHIFT[s++&3]}else if(r<2048){a[s>>2]|=(192|r>>6)<<SHIFT[s++&3];a[s>>2]|=(128|r&63)<<SHIFT[s++&3]}else if(r<55296||r>=57344){a[s>>2]|=(224|r>>12)<<SHIFT[s++&3];a[s>>2]|=(128|r>>6&63)<<SHIFT[s++&3];a[s>>2]|=(128|r&63)<<SHIFT[s++&3]}else{r=65536+((r&1023)<<10|e.charCodeAt(++i)&1023);a[s>>2]|=(240|r>>18)<<SHIFT[s++&3];a[s>>2]|=(128|r>>12&63)<<SHIFT[s++&3];a[s>>2]|=(128|r>>6&63)<<SHIFT[s++&3];a[s>>2]|=(128|r&63)<<SHIFT[s++&3]}}}}this.lastByteIndex=s;this.bytes+=s-this.start;if(s>=64){this.start=s-64;this.hash();this.hashed=true}else{this.start=s}}if(this.bytes>4294967295){this.hBytes+=this.bytes/4294967296<<0;this.bytes=this.bytes%4294967296}return this};Md5.prototype.finalize=function(){if(this.finalized){return}this.finalized=true;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[t&3];if(t>=56){if(!this.hashed){this.hash()}e[0]=e[16];e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0}e[14]=this.bytes<<3;e[15]=this.hBytes<<3|this.bytes>>>29;this.hash()};Md5.prototype.hash=function(){var e,t,n,r,i,s,o=this.blocks;if(this.first){e=o[0]-680876937;e=(e<<7|e>>>25)-271733879<<0;r=(-1732584194^e&2004318071)+o[1]-117830708;r=(r<<12|r>>>20)+e<<0;n=(-271733879^r&(e^-271733879))+o[2]-1126478375;n=(n<<17|n>>>15)+r<<0;t=(e^n&(r^e))+o[3]-1316259209;t=(t<<22|t>>>10)+n<<0}else{e=this.h0;t=this.h1;n=this.h2;r=this.h3;e+=(r^t&(n^r))+o[0]-680876936;e=(e<<7|e>>>25)+t<<0;r+=(n^e&(t^n))+o[1]-389564586;r=(r<<12|r>>>20)+e<<0;n+=(t^r&(e^t))+o[2]+606105819;n=(n<<17|n>>>15)+r<<0;t+=(e^n&(r^e))+o[3]-1044525330;t=(t<<22|t>>>10)+n<<0}e+=(r^t&(n^r))+o[4]-176418897;e=(e<<7|e>>>25)+t<<0;r+=(n^e&(t^n))+o[5]+1200080426;r=(r<<12|r>>>20)+e<<0;n+=(t^r&(e^t))+o[6]-1473231341;n=(n<<17|n>>>15)+r<<0;t+=(e^n&(r^e))+o[7]-45705983;t=(t<<22|t>>>10)+n<<0;e+=(r^t&(n^r))+o[8]+1770035416;e=(e<<7|e>>>25)+t<<0;r+=(n^e&(t^n))+o[9]-1958414417;r=(r<<12|r>>>20)+e<<0;n+=(t^r&(e^t))+o[10]-42063;n=(n<<17|n>>>15)+r<<0;t+=(e^n&(r^e))+o[11]-1990404162;t=(t<<22|t>>>10)+n<<0;e+=(r^t&(n^r))+o[12]+1804603682;e=(e<<7|e>>>25)+t<<0;r+=(n^e&(t^n))+o[13]-40341101;r=(r<<12|r>>>20)+e<<0;n+=(t^r&(e^t))+o[14]-1502002290;n=(n<<17|n>>>15)+r<<0;t+=(e^n&(r^e))+o[15]+1236535329;t=(t<<22|t>>>10)+n<<0;e+=(n^r&(t^n))+o[1]-165796510;e=(e<<5|e>>>27)+t<<0;r+=(t^n&(e^t))+o[6]-1069501632;r=(r<<9|r>>>23)+e<<0;n+=(e^t&(r^e))+o[11]+643717713;n=(n<<14|n>>>18)+r<<0;t+=(r^e&(n^r))+o[0]-373897302;t=(t<<20|t>>>12)+n<<0;e+=(n^r&(t^n))+o[5]-701558691;e=(e<<5|e>>>27)+t<<0;r+=(t^n&(e^t))+o[10]+38016083;r=(r<<9|r>>>23)+e<<0;n+=(e^t&(r^e))+o[15]-660478335;n=(n<<14|n>>>18)+r<<0;t+=(r^e&(n^r))+o[4]-405537848;t=(t<<20|t>>>12)+n<<0;e+=(n^r&(t^n))+o[9]+568446438;e=(e<<5|e>>>27)+t<<0;r+=(t^n&(e^t))+o[14]-1019803690;r=(r<<9|r>>>23)+e<<0;n+=(e^t&(r^e))+o[3]-187363961;n=(n<<14|n>>>18)+r<<0;t+=(r^e&(n^r))+o[8]+1163531501;t=(t<<20|t>>>12)+n<<0;e+=(n^r&(t^n))+o[13]-1444681467;e=(e<<5|e>>>27)+t<<0;r+=(t^n&(e^t))+o[2]-51403784;r=(r<<9|r>>>23)+e<<0;n+=(e^t&(r^e))+o[7]+1735328473;n=(n<<14|n>>>18)+r<<0;t+=(r^e&(n^r))+o[12]-1926607734;t=(t<<20|t>>>12)+n<<0;i=t^n;e+=(i^r)+o[5]-378558;e=(e<<4|e>>>28)+t<<0;r+=(i^e)+o[8]-2022574463;r=(r<<11|r>>>21)+e<<0;s=r^e;n+=(s^t)+o[11]+1839030562;n=(n<<16|n>>>16)+r<<0;t+=(s^n)+o[14]-35309556;t=(t<<23|t>>>9)+n<<0;i=t^n;e+=(i^r)+o[1]-1530992060;e=(e<<4|e>>>28)+t<<0;r+=(i^e)+o[4]+1272893353;r=(r<<11|r>>>21)+e<<0;s=r^e;n+=(s^t)+o[7]-155497632;n=(n<<16|n>>>16)+r<<0;t+=(s^n)+o[10]-1094730640;t=(t<<23|t>>>9)+n<<0;i=t^n;e+=(i^r)+o[13]+681279174;e=(e<<4|e>>>28)+t<<0;r+=(i^e)+o[0]-358537222;r=(r<<11|r>>>21)+e<<0;s=r^e;n+=(s^t)+o[3]-722521979;n=(n<<16|n>>>16)+r<<0;t+=(s^n)+o[6]+76029189;t=(t<<23|t>>>9)+n<<0;i=t^n;e+=(i^r)+o[9]-640364487;e=(e<<4|e>>>28)+t<<0;r+=(i^e)+o[12]-421815835;r=(r<<11|r>>>21)+e<<0;s=r^e;n+=(s^t)+o[15]+530742520;n=(n<<16|n>>>16)+r<<0;t+=(s^n)+o[2]-995338651;t=(t<<23|t>>>9)+n<<0;e+=(n^(t|~r))+o[0]-198630844;e=(e<<6|e>>>26)+t<<0;r+=(t^(e|~n))+o[7]+1126891415;r=(r<<10|r>>>22)+e<<0;n+=(e^(r|~t))+o[14]-1416354905;n=(n<<15|n>>>17)+r<<0;t+=(r^(n|~e))+o[5]-57434055;t=(t<<21|t>>>11)+n<<0;e+=(n^(t|~r))+o[12]+1700485571;e=(e<<6|e>>>26)+t<<0;r+=(t^(e|~n))+o[3]-1894986606;r=(r<<10|r>>>22)+e<<0;n+=(e^(r|~t))+o[10]-1051523;n=(n<<15|n>>>17)+r<<0;t+=(r^(n|~e))+o[1]-2054922799;t=(t<<21|t>>>11)+n<<0;e+=(n^(t|~r))+o[8]+1873313359;e=(e<<6|e>>>26)+t<<0;r+=(t^(e|~n))+o[15]-30611744;r=(r<<10|r>>>22)+e<<0;n+=(e^(r|~t))+o[6]-1560198380;n=(n<<15|n>>>17)+r<<0;t+=(r^(n|~e))+o[13]+1309151649;t=(t<<21|t>>>11)+n<<0;e+=(n^(t|~r))+o[4]-145523070;e=(e<<6|e>>>26)+t<<0;r+=(t^(e|~n))+o[11]-1120210379;r=(r<<10|r>>>22)+e<<0;n+=(e^(r|~t))+o[2]+718787259;n=(n<<15|n>>>17)+r<<0;t+=(r^(n|~e))+o[9]-343485551;t=(t<<21|t>>>11)+n<<0;if(this.first){this.h0=e+1732584193<<0;this.h1=t-271733879<<0;this.h2=n-1732584194<<0;this.h3=r+271733878<<0;this.first=false}else{this.h0=this.h0+e<<0;this.h1=this.h1+t<<0;this.h2=this.h2+n<<0;this.h3=this.h3+r<<0}};Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]};Md5.prototype.toString=Md5.prototype.hex;Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return[e&255,e>>8&255,e>>16&255,e>>24&255,t&255,t>>8&255,t>>16&255,t>>24&255,n&255,n>>8&255,n>>16&255,n>>24&255,r&255,r>>8&255,r>>16&255,r>>24&255]};Md5.prototype.array=Md5.prototype.digest;Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16);var t=new Uint32Array(e);t[0]=this.h0;t[1]=this.h1;t[2]=this.h2;t[3]=this.h3;return e};Md5.prototype.buffer=Md5.prototype.arrayBuffer;Md5.prototype.base64=function(){var e,t,n,r="",i=this.array();for(var s=0;s<15;){e=i[s++];t=i[s++];n=i[s++];r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[(e<<4|t>>>4)&63]+BASE64_ENCODE_CHAR[(t<<2|n>>>6)&63]+BASE64_ENCODE_CHAR[n&63]}e=i[s];r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"==";return r};return createMethod()}();exports.md5=md5})(this.BX=this.BX||{});(function(){if(typeof this.BX!=="undefined"&&typeof this.BX.WidgetVuex!=="undefined"){var e="3.6.2";if(this.BX.WidgetVuex.version!==e){console.warn("BX.WidgetVuex already loaded. Loaded: "+this.BX.WidgetVuex.version+", Skipped: "+e+". Version differences may cause errors!")}return}(function(e,t,n,r){"use strict";
/**
	 * Bitrix Vuex wrapper
	 * IndexedDB driver for Vuex Builder
	 *
	 * @package bitrix
	 * @subpackage ui
	 * @copyright 2001-2019 Bitrix
	 */var i=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);this.siteId=t.siteId||"default";this.userId=t.userId||0;this.storage=t.storage||"default";this.name=t.name||"";this.code=(window.md5||r.md5)(this.siteId+"/"+this.userId+"/"+this.storage+"/"+this.name);this.db=new n.Dexie("bx-vuex-model");this.db.version(1).stores({data:"code, value"})}babelHelpers.createClass(e,[{key:"get",value:function e(){var t=this;return new Promise((function(e,n){t.db.data.where("code").equals(t.code).first().then((function(t){e(t?t.value:null)}),(function(e){n(e)}))}))}},{key:"set",value:function e(t){var n=this;return new Promise((function(e,r){n.db.data.put({code:n.code,value:t}).then((function(t){e(true)}),(function(e){r(e)}))}))}},{key:"clear",value:function e(){var t=this;return new Promise((function(e,n){t.db.data["delete"](t.code).then((function(t){e(true)}),(function(e){n(e)}))}))}}]);return e}();
/**
	 * Bitrix Vuex wrapper
	 * LocalStorage driver for Vuex Builder
	 *
	 * @package bitrix
	 * @subpackage ui
	 * @copyright 2001-2019 Bitrix
	 */var s=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);this.siteId=t.siteId||"default";this.userId=t.userId||0;this.storage=t.storage||"default";this.name=t.name||"";this.enabled=false;if(typeof window.localStorage!=="undefined"){try{window.localStorage.setItem("__bx_test_ls_feature__","ok");if(window.localStorage.getItem("__bx_test_ls_feature__")==="ok"){window.localStorage.removeItem("__bx_test_ls_feature__");this.enabled=true}}catch(e){}}this.code="bx-vuex-"+(window.md5||r.md5)(this.siteId+"/"+this.userId+"/"+this.storage+"/"+this.name)}babelHelpers.createClass(e,[{key:"get",value:function e(){var t=this;return new Promise((function(e,n){if(!t.enabled){e(null);return true}var r=window.localStorage.getItem(t.code);if(typeof r!=="string"){e(null);return true}try{e(t.prepareValueAfterGet(JSON.parse(r)))}catch(e){n(e)}}))}},{key:"set",value:function e(t){var n=this;return new Promise((function(e,r){if(n.enabled){window.localStorage.setItem(n.code,JSON.stringify(n.prepareValueBeforeSet(t)))}e(true)}))}},{key:"clear",value:function e(){var t=this;return new Promise((function(e,n){if(t.enabled){window.localStorage.removeItem(t.code)}e(true)}))}},{key:"prepareValueAfterGet",value:function e(t){var n=this;if(t instanceof Array){t=t.map((function(e){return n.prepareValueAfterGet(e)}))}else if(t instanceof Date);else if(t&&babelHelpers["typeof"](t)==="object"){for(var r in t){if(t.hasOwnProperty(r)){t[r]=this.prepareValueAfterGet(t[r])}}}else if(typeof t==="string"){if(t.startsWith("#DT#")){t=new Date(t.substring(4))}}return t}},{key:"prepareValueBeforeSet",value:function e(t){var n=this;if(t instanceof Array){t=t.map((function(e){return n.prepareValueBeforeSet(e)}))}else if(t instanceof Date){t="#DT#"+t.toISOString()}else if(t&&babelHelpers["typeof"](t)==="object"){for(var r in t){if(t.hasOwnProperty(r)){t[r]=this.prepareValueBeforeSet(t[r])}}}return t}}]);return e}();
/**
	 * Bitrix Vuex wrapper
	 * BitrixMobile ApplicationStorage driver for Vuex Builder
	 *
	 * @package bitrix
	 * @subpackage ui
	 * @copyright 2001-2019 Bitrix
	 */var o=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);this.siteId=t.siteId||"default";this.userId=t.userId||0;this.storage=t.storage||"default";this.name=t.name||"";this.code=(window.md5||r.md5)(this.siteId+"/"+this.userId+"/"+this.storage+"/"+this.name);if(!this.isJnContext()&&typeof ApplicationStorage==="undefined"){console.error('ApplicationStorage is not defined, load "webcomponent/storage" extension.')}}babelHelpers.createClass(e,[{key:"get",value:function e(){var t=this;return new Promise((function(e,n){if(t.isJnContext()){var r=Application.sharedStorage.get(t.code);e(r?r:null)}else if(typeof ApplicationStorage!=="undefined"){ApplicationStorage.get(t.code,null).then((function(n){return e(t.prepareValueAfterGet(JSON.parse(n)))}))}else{e(null)}}))}},{key:"set",value:function e(t){var n=this;return new Promise((function(e,r){if(n.isJnContext()){Application.sharedStorage().set(n.code,JSON.stringify(n.prepareValueBeforeSet(t)));e()}else if(typeof ApplicationStorage!=="undefined"){ApplicationStorage.set(n.code,JSON.stringify(n.prepareValueBeforeSet(t))).then((function(t){return e()}))}else{e()}}))}},{key:"clear",value:function e(){return this.set(null)}},{key:"isJnContext",value:function e(){return typeof env!=="undefined"}},{key:"prepareValueAfterGet",value:function e(t){var n=this;if(t instanceof Array){t=t.map((function(e){return n.prepareValueAfterGet(e)}))}else if(t instanceof Date);else if(t&&babelHelpers["typeof"](t)==="object"){for(var r in t){if(t.hasOwnProperty(r)){t[r]=this.prepareValueAfterGet(t[r])}}}else if(typeof t==="string"){if(t.startsWith("#DT#")){t=new Date(t.substring(4))}}return t}},{key:"prepareValueBeforeSet",value:function e(t){var n=this;if(t instanceof Array){t=t.map((function(e){return n.prepareValueBeforeSet(e)}))}else if(t instanceof Date){t="#DT#"+t.toISOString()}else if(t&&babelHelpers["typeof"](t)==="object"){for(var r in t){if(t.hasOwnProperty(r)){t[r]=this.prepareValueBeforeSet(t[r])}}}return t}}]);return e}();
/**
	 * Bitrix Vuex wrapper
	 * Interface Vuex model (Vuex builder model)
	 *
	 * @package bitrix
	 * @subpackage ui
	 * @copyright 2001-2019 Bitrix
	 */var a=function(){babelHelpers.createClass(e,[{key:"getName",value:function e(){return""}},{key:"getState",value:function e(){return{}}},{key:"getElementState",value:function e(){return{}}},{key:"getStateSaveException",value:function e(){return undefined}},{key:"getGetters",value:function e(){return{}}},{key:"getActions",value:function e(){return{}}},{key:"getMutations",value:function e(){return{}}},{key:"validate",value:function e(t){return{}}},{key:"setVariables",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!(babelHelpers["typeof"](t)==="object"&&t)){this.logger("error","VuexBuilderModel.setVars: passed variables is not a Object",store);return this}this.variables=t;return this}},{key:"getVariable",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;if(!t){return n}var r=t.toString().split(".");if(r.length===1){return this.variables[r[0]]}var i;var s=Object.assign({},this.variables);for(var o=0;o<r.length;o++){if(typeof s[r[o]]!=="undefined"){s=i=s[r[o]]}else{i=n;break}}return i}},{key:"getNamespace",value:function e(){return this.namespace?this.namespace:this.getName()}},{key:"setNamespace",value:function e(t){this.namespace=t.toString();this.databaseConfig.name=this.namespace;return this}},{key:"useDatabase",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.databaseConfig.active=!!t;var r=this.db===null;if(n.type){this.databaseConfig.type=n.type.toString();r=true}if(n.storage){this.databaseConfig.storage=n.storage.toString()}if(n.siteId){this.databaseConfig.siteId=n.siteId.toString()}if(n.userId){this.databaseConfig.userId=n.userId}if(typeof n.timeout==="number"){this.databaseConfig.timeout=n.timeout}if(!this.databaseConfig.active&&this.db!==null){this.databaseConfig.type=null;r=true}if(r){if(this.databaseConfig.type===u.DatabaseType.indexedDb){this.db=new i(this.databaseConfig)}else if(this.databaseConfig.type===u.DatabaseType.localStorage){this.db=new s(this.databaseConfig)}else if(this.databaseConfig.type===u.DatabaseType.jnSharedStorage){this.db=new o(this.databaseConfig)}else{this.db=null}}return this}},{key:"useNamespace",value:function e(n){if(t.WidgetBitrixVue.developerMode){if(n){console.warn("VuexBuilderModel: Method `useNamespace` is deprecated, please remove this call.")}else{console.error("VuexBuilderModel: Method `useNamespace` is deprecated, using VuexBuilder without namespaces is no longer supported.")}}return this}},{key:"getStore",value:function e(){return this.getModule()}},{key:"getModule",value:function e(){var t=this;return new Promise((function(e,n){var r=t.namespace?t.namespace:t.getName();if(!r){t.logger("error","VuexBuilderModel.getStore: current model can not be run in Vuex modules mode",t.getState());n()}if(t.db){t._getStoreFromDatabase().then((function(n){return e({namespace:r,module:t._createStore(n)})}))}else{e({namespace:r,module:t._createStore(t.getState())})}}))}},{key:"getModuleWithDefaultState",value:function e(){var t=this.namespace?this.namespace:this.getName();if(!t){this.logger("error","VuexBuilderModel.getStore: current model can not be run in Vuex modules mode",this.getState());return null}return{namespace:t,module:this._createStore(this.getState())}}},{key:"getSaveTimeout",value:function e(){return 150}},{key:"getLoadTimeout",value:function e(){return 1e3}},{key:"getLoadedState",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return t}},{key:"saveState",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!this.isSaveAvailable()){return true}this.lastSaveState=n;if(this.saveStateTimeout){this.logger("log","VuexModel.saveState: wait save...",this.getName());return true}this.logger("log","VuexModel.saveState: start saving",this.getName());var r=this.getSaveTimeout();if(typeof this.databaseConfig.timeout==="number"){r=this.databaseConfig.timeout}this.saveStateTimeout=setTimeout((function(){t.logger("log","VuexModel.saveState: saved!",t.getName());var e=t.lastSaveState;if(typeof e==="function"){e=e();if(babelHelpers["typeof"](e)!=="object"||!e){return false}}t.db.set(t.cloneState(e,t.getStateSaveException()));t.lastState=null;t.saveStateTimeout=null}),r);return true}},{key:"clearState",value:function e(){if(this.store){this.store.commit(this.getNamespace()+"/"+"vuexBuilderModelClearState");return true}return this.saveState(this.getState())}},{key:"clearDatabase",value:function e(){if(!this.isSaveAvailable()){return true}this.db.clear();return true}},{key:"isSaveAvailable",value:function e(){return this.db&&this.databaseConfig.active}},{key:"isSaveNeeded",value:function e(t){if(!this.isSaveAvailable()){return false}var n=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!n){return true}for(var r in t){if(!t.hasOwnProperty(r)){continue}if(typeof n[r]==="undefined"){return true}else if(babelHelpers["typeof"](n[r])==="object"&&n[r]){var i=e(t[r],n[r]);if(i){return true}}}return false};return n(t,this.getStateSaveException())}}],[{key:"create",value:function e(){return new this}}]);function e(){babelHelpers.classCallCheck(this,e);this.databaseConfig={type:u.DatabaseType.indexedDb,active:null,storage:"default",name:this.getName(),siteId:"default",userId:0,timeout:null};this.db=null;this.store=null;this.namespace=null;this.variables={}}babelHelpers.createClass(e,[{key:"setStore",value:function e(t){if(!(t instanceof ie.Store)){this.logger("error","VuexBuilderModel.setStore: passed store is not a Vuex.Store",t);return this}this.store=t;return this}},{key:"_getStoreFromDatabase",value:function e(){var t=this;clearTimeout(this.cacheTimeout);return new Promise((function(e){var n=t.getLoadTimeout();if(n!==false&&typeof n==="number"){t.cacheTimeout=setTimeout((function(){t.logger("warn","VuexModel.getStoreFromDatabase: Cache loading timeout",t.getName());e(t.getState())}),n)}else{t.cacheTimeout=null}t.db.get().then((function(n){clearTimeout(t.cacheTimeout);n=t.getLoadedState(n?n:{});var r=t.getState();if(n){r=t._mergeState(r,n)}e(r)}),(function(n){clearTimeout(t.cacheTimeout);e(t.getState())}))}))}},{key:"_mergeState",value:function e(t,n){for(var r in t){if(!t.hasOwnProperty(r)){continue}if(typeof n[r]==="undefined"){n[r]=t[r]}else if(!(n[r]instanceof Array)&&babelHelpers["typeof"](n[r])==="object"&&n[r]&&babelHelpers["typeof"](t[r])==="object"&&t[r]){n[r]=Object.assign({},t[r],n[r])}}return n}},{key:"_createStore",value:function e(t){var n=this;var r={namespaced:true,state:t,getters:this.getGetters(),actions:this.getActions(),mutations:this.getMutations()};r.mutations.vuexBuilderModelClearState=function(e){e=Object.assign(e,n.getState());n.saveState(e)};return r}},{key:"cloneState",value:function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;var i;if(t instanceof Array){i=[].concat(t.map((function(e){return n.cloneState(e)})))}else if(t instanceof Date){i=new Date(t.toISOString())}else if(babelHelpers["typeof"](t)==="object"&&t){i={};for(var s in t){if(!t.hasOwnProperty(s)){continue}if(typeof r==="undefined"||typeof r[s]==="undefined"){i[s]=this.cloneState(t[s])}else if(babelHelpers["typeof"](r[s])==="object"&&r[s]){i[s]=this.cloneState(t[s],r[s])}}}else{i=t}return i}},{key:"logger",value:function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}if(t==="error"){var s;(s=console).error.apply(s,r);return undefined}else if(typeof BX.WidgetVueDevTools==="undefined"){return undefined}if(t==="log"){var o;(o=console).log.apply(o,r)}else if(t==="info"){var a;(a=console).info.apply(a,r)}else if(t==="warn"){var l;(l=console).warn.apply(l,r)}}}],[{key:"convertToArray",value:function e(t){var n=[];for(var r in t){if(t.hasOwnProperty(r)){n.push(t[r])}}return n}}]);return e}();
/**
	 * Bitrix Vuex wrapper
	 * Vuex builder
	 *
	 * @package bitrix
	 * @subpackage ui
	 * @copyright 2001-2019 Bitrix
	 */var l=Object.freeze({indexedDb:"indexedDb",localStorage:"localStorage",jnSharedStorage:"jnSharedStorage"});var u=function(){babelHelpers.createClass(e,null,[{key:"create",value:function e(){if(t.WidgetBitrixVue.developerMode){console.warn("VuexBuilder: Method VuexBuilder.create is deprecated, use VuexBuilder.init instead.")}return new this}},{key:"init",value:function e(t){if(t){if(!(t instanceof ie.Store)){console.warn("VuexBuilder.init: passed store is not a Vuex.Store",t);return new this}}return new this(t)}}]);function e(t){babelHelpers.classCallCheck(this,e);this.models=[];this.databaseConfig={name:null,type:null,siteId:null,userId:null,timeout:null};this.store=t;this.builded=false}babelHelpers.createClass(e,[{key:"addModel",value:function e(t){if(this.builded){return this}if(!(t instanceof a)){console.error("BX.WidgetVuexBuilder.addModel: passed model is not a BX.WidgetVuexBuilderModel",t,name);return this}this.models.push(t);return this}},{key:"addDynamicModel",value:function e(t){var n=this;if(!(t instanceof a)){return new Promise((function(e,n){console.error("BX.WidgetVuexBuilder.addDynamicModel: passed model is not a BX.WidgetVuexBuilderModel",t);n("MODEL_ERROR")}))}if(this.store.hasModule(t.getNamespace())||this.models.find((function(e){return e.getNamespace()===t.getNamespace()}))){return new Promise((function(e,n){console.error("BX.WidgetVuexBuilder.addDynamicModel: model `"+t.getNamespace()+"` was not added because it is already registered.");n("DUPLICATE_MODEL")}))}this.models.push(t);if(this.databaseConfig.active&&t.databaseConfig.active!==false){t.useDatabase(true,this.databaseConfig)}else{t.useDatabase(false)}t.setStore(this.store);var r=t.getModule();return new Promise((function(e,t){r.then((function(t){n.store.registerModule(t.namespace,t.module);e()}),(function(e){console.error("BX.WidgetVuexBuilder.addDynamicModel: storage was not created due to runtime errors.",e?e:"");t("ERROR_IN_MODEL")}))}))}},{key:"removeDynamicModel",value:function e(t){if(!this.builded){console.error("BX.WidgetVuexBuilder.removeDynamicModel: you cannot use the method until builder is built.");return this}if(!this.store.hasModule(t)){console.error("BX.WidgetVuexBuilder.removeDynamicModel: module `"+t+"` not registered.");return this}this.models=this.models.filter((function(e){return e.getNamespace()!==t}));this.store.unregisterModule(t);return this}},{key:"useNamespace",value:function e(n){if(t.WidgetBitrixVue.developerMode){if(n){console.warn("VuexBuilder: Method `useNamespace` is deprecated, please remove this call.")}else{console.error("VuexBuilder: Method `useNamespace` is deprecated, using VuexBuilder without namespaces is no longer supported.")}}return this}},{key:"setDatabaseConfig",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!(babelHelpers["typeof"](t)==="object"&&t)){return this}this.databaseConfig.active=true;this.databaseConfig.storage=t.name;this.databaseConfig.type=t.type||this.databaseConfig.type;this.databaseConfig.siteId=t.siteId||this.databaseConfig.siteId;this.databaseConfig.userId=t.userId||this.databaseConfig.userId;this.databaseConfig.timeout=typeof t.timeout!=="undefined"?t.timeout:this.databaseConfig.timeout;return this}},{key:"clearModelState",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!this.builded){return new Promise((function(e,n){console.error("BX.WidgetVuexBuilder.clearModelState: you cannot use the method until builder is built.");if(typeof t!=="function"){n("BUILDER_NOT_BUILD")}}))}var n=[];this.models.forEach((function(e){n.push(e.clearState())}));return new Promise((function(e,r){Promise.all(n).then((function(n){e(true);if(typeof t==="function"){t(true)}}),(function(e){console.error("BX.WidgetVuexBuilder.clearModelState: storage was not clear due to runtime errors.",e?e:"");if(typeof t!=="function"){r("ERROR_WHILE_CLEARING")}}))}))}},{key:"clearDatabase",value:function e(){if(!this.builded){return new Promise((function(e,t){console.error("BX.WidgetVuexBuilder.clearModelState: you cannot use the method until builder is built.");t("BUILDER_NOT_BUILD")}))}this.models.forEach((function(e){return e.clearDatabase()}));return new Promise((function(e,t){return e(true)}))}},{key:"build",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(this.builded){return this}var r=[];if(!this.store){this.store=ie.createStore()}this.models.forEach((function(e){if(t.databaseConfig.active&&e.databaseConfig.active!==false){e.useDatabase(true,t.databaseConfig)}e.setStore(t.store);r.push(e.getModule())}));return new Promise((function(e,i){Promise.all(r).then((function(r){r.forEach((function(e){t.store.registerModule(e.namespace,e.module)}));var i={store:t.store,models:t.models,builder:t};t.builded=true;if(typeof n==="function"){n(i)}e(i)}),(function(e){console.error("BX.WidgetVuexBuilder.create: storage was not created due to runtime errors.",e?e:"");if(typeof n!=="function"){i("ERROR_IN_MODEL")}}))}))}},{key:"syncBuild",value:function e(){var n=this;if(this.builded){return{store:this.store,models:this.models,builder:this}}if(!this.store){this.store=ie.createStore()}if(this.databaseConfig.active){if(t.WidgetBitrixVue.developerMode){console.error("VuexBuilder: Method `syncBuild` creates storage in synchronous mode, the database does not work in this mode.")}this.databaseConfig.active=false}this.models.forEach((function(e){e.useDatabase(false);e.setStore(n.store);var t=e.getModuleWithDefaultState(),r=t.namespace,i=t.module;n.store.registerModule(r,i)}));this.builded=true;return{store:this.store,models:this.models,builder:this}}}]);return e}();u.DatabaseType=l;
/*!
	 * vuex v3.6.2
	 * (c) 2021 Evan You
	 * @license MIT
	 *
	 * @source: https://cdn.jsdelivr.net/npm/vuex@3.6.2/dist/vuex.esm.browser.js
	 */function c(e){var t=Number(e.version.split(".")[0]);if(t>=2){e.mixin({beforeCreate:r})}else{var n=e.prototype._init;e.prototype._init=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e.init=e.init?[r].concat(e.init):r;n.call(this,e)}}function r(){var e=this.$options;if(e.store){this.$store=typeof e.store==="function"?e.store():e.store}else if(e.parent&&e.parent.$store){this.$store=e.parent.$store}}}var f=typeof window!=="undefined"?window:typeof global!=="undefined"?global:{};var d=f.__VUE_DEVTOOLS_GLOBAL_HOOK__;function h(e){if(!d)return;e._devtoolHook=d;d.emit("vuex:init",e);d.on("vuex:travel-to-state",(function(t){e.replaceState(t)}));e.subscribe((function(e,t){d.emit("vuex:mutation",e,t)}),{prepend:true});e.subscribeAction((function(e,t){d.emit("vuex:action",e,t)}),{prepend:true})}function p(e,t){return e.filter(t)[0]}function m(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(e===null||babelHelpers["typeof"](e)!=="object"){return e}var n=p(t,(function(t){return t.original===e}));if(n){return n.copy}var r=Array.isArray(e)?[]:{};t.push({original:e,copy:r});Object.keys(e).forEach((function(n){r[n]=m(e[n],t)}));return r}function g(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function v(e){return e!==null&&babelHelpers["typeof"](e)==="object"}function y(e){return e&&typeof e.then==="function"}function b(e,t){if(!e)throw new Error("[vuex] ".concat(t))}function w(e,t){return function(){return e(t)}}var S=function(){function e(t,n){babelHelpers.classCallCheck(this,e);this.runtime=n;this._children=Object.create(null);this._rawModule=t;var r=t.state;this.state=(typeof r==="function"?r():r)||{}}babelHelpers.createClass(e,[{key:"addChild",value:function e(t,n){this._children[t]=n}},{key:"removeChild",value:function e(t){delete this._children[t]}},{key:"getChild",value:function e(t){return this._children[t]}},{key:"hasChild",value:function e(t){return t in this._children}},{key:"update",value:function e(t){this._rawModule.namespaced=t.namespaced;if(t.actions){this._rawModule.actions=t.actions}if(t.mutations){this._rawModule.mutations=t.mutations}if(t.getters){this._rawModule.getters=t.getters}}},{key:"forEachChild",value:function e(t){g(this._children,t)}},{key:"forEachGetter",value:function e(t){if(this._rawModule.getters){g(this._rawModule.getters,t)}}},{key:"forEachAction",value:function e(t){if(this._rawModule.actions){g(this._rawModule.actions,t)}}},{key:"forEachMutation",value:function e(t){if(this._rawModule.mutations){g(this._rawModule.mutations,t)}}},{key:"namespaced",get:function e(){return!!this._rawModule.namespaced}}]);return e}();var k=function(){function e(t){babelHelpers.classCallCheck(this,e);this.register([],t,false)}babelHelpers.createClass(e,[{key:"get",value:function e(t){return t.reduce((function(e,t){return e.getChild(t)}),this.root)}},{key:"getNamespace",value:function e(t){var n=this.root;return t.reduce((function(e,t){n=n.getChild(t);return e+(n.namespaced?t+"/":"")}),"")}},{key:"update",value:function e(t){I([],this.root,t)}},{key:"register",value:function e(t,n){var r=this;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;{x(t,n)}var s=new S(n,i);if(t.length===0){this.root=s}else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],s)}if(n.modules){g(n.modules,(function(e,n){r.register(t.concat(n),e,i)}))}}},{key:"unregister",value:function e(t){var n=this.get(t.slice(0,-1));var r=t[t.length-1];var i=n.getChild(r);if(!i){{console.warn("[vuex] trying to unregister module '".concat(r,"', which is ")+"not registered")}return}if(!i.runtime){return}n.removeChild(r)}},{key:"isRegistered",value:function e(t){var n=this.get(t.slice(0,-1));var r=t[t.length-1];if(n){return n.hasChild(r)}return false}}]);return e}();function I(e,t,n){{x(e,n)}t.update(n);if(n.modules){for(var r in n.modules){if(!t.getChild(r)){{console.warn("[vuex] trying to add a new module '".concat(r,"' on hot reloading, ")+"manual reload is needed")}return}I(e.concat(r),t.getChild(r),n.modules[r])}}}var E={assert:function e(t){return typeof t==="function"},expected:"function"};var C={assert:function e(t){return typeof t==="function"||babelHelpers["typeof"](t)==="object"&&typeof t.handler==="function"},expected:'function or object with "handler" function'};var _={getters:E,mutations:E,actions:C};function x(e,t){Object.keys(_).forEach((function(n){if(!t[n])return;var r=_[n];g(t[n],(function(t,i){b(r.assert(t),T(e,n,i,t,r.expected))}))}))}function T(e,t,n,r,i){var s="".concat(t," should be ").concat(i,' but "').concat(t,".").concat(n,'"');if(e.length>0){s+=' in module "'.concat(e.join("."),'"')}s+=" is ".concat(JSON.stringify(r),".");return s}var O=function(){function e(){var n=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);if(!t.WidgetVueVendor&&typeof window!=="undefined"&&window.Vue){W(window.Vue)}{b(t.WidgetVueVendor,"must call Vue.use(Vuex) before creating a store instance.");b(typeof Promise!=="undefined","vuex requires a Promise polyfill in this browser.");b(this instanceof e,"store must be called with the new operator.")}var i=r.plugins,s=i===void 0?[]:i,o=r.strict,a=o===void 0?false:o;this._committing=false;this._actions=Object.create(null);this._actionSubscribers=[];this._mutations=Object.create(null);this._wrappedGetters=Object.create(null);this._modules=new k(r);this._modulesNamespaceMap=Object.create(null);this._subscribers=[];this._watcherVM=new t.WidgetVueVendor;this._makeLocalGettersCache=Object.create(null);var l=this;var u=this.dispatch,c=this.commit;this.dispatch=function e(t,n){return u.call(l,t,n)};this.commit=function e(t,n,r){return c.call(l,t,n,r)};this.strict=a;var f=this._modules.root.state;P(this,f,[],this._modules.root);A(this,f);s.forEach((function(e){return e(n)}));var d=r.devtools!==undefined?r.devtools:t.WidgetVueVendor.config.devtools;if(d){h(this)}}babelHelpers.createClass(e,[{key:"commit",value:function e(t,n,r){var i=this;var s=U(t,n,r),o=s.type,a=s.payload,l=s.options;var u={type:o,payload:a};var c=this._mutations[o];if(!c){{console.error("[vuex] unknown mutation type: ".concat(o))}return}this._withCommit((function(){c.forEach((function e(t){t(a)}))}));this._subscribers.slice().forEach((function(e){return e(u,i.state)}));if(l&&l.silent){console.warn("[vuex] mutation type: ".concat(o,". Silent option has been removed. ")+"Use the filter functionality in the vue-devtools")}}},{key:"dispatch",value:function e(t,n){var r=this;var i=U(t,n),s=i.type,o=i.payload;var a={type:s,payload:o};var l=this._actions[s];if(!l){{console.error("[vuex] unknown action type: ".concat(s))}return}try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(a,r.state)}))}catch(e){{console.warn("[vuex] error in before action subscribers: ");console.error(e)}}var u=l.length>1?Promise.all(l.map((function(e){return e(o)}))):l[0](o);return new Promise((function(e,t){u.then((function(t){try{r._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(a,r.state)}))}catch(e){{console.warn("[vuex] error in after action subscribers: ");console.error(e)}}e(t)}),(function(e){try{r._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(a,r.state,e)}))}catch(e){{console.warn("[vuex] error in error action subscribers: ");console.error(e)}}t(e)}))}))}},{key:"subscribe",value:function e(t,n){return M(t,this._subscribers,n)}},{key:"subscribeAction",value:function e(t,n){var r=typeof t==="function"?{before:t}:t;return M(r,this._actionSubscribers,n)}},{key:"watch",value:function e(t,n,r){var i=this;{b(typeof t==="function","store.watch only accepts a function.")}return this._watcherVM.$watch((function(){return t(i.state,i.getters)}),n,r)}},{key:"replaceState",value:function e(t){var n=this;this._withCommit((function(){n._vm._data.$$state=t}))}},{key:"registerModule",value:function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(typeof t==="string")t=[t];{b(Array.isArray(t),"module path must be a string or an Array.");b(t.length>0,"cannot register the root module by using registerModule.")}this._modules.register(t,n);P(this,this.state,t,this._modules.get(t),r.preserveState);A(this,this.state)}},{key:"unregisterModule",value:function e(n){var r=this;if(typeof n==="string")n=[n];{b(Array.isArray(n),"module path must be a string or an Array.")}this._modules.unregister(n);this._withCommit((function(){var e=F(r.state,n.slice(0,-1));t.WidgetVueVendor["delete"](e,n[n.length-1])}));D(this)}},{key:"hasModule",value:function e(t){if(typeof t==="string")t=[t];{b(Array.isArray(t),"module path must be a string or an Array.")}return this._modules.isRegistered(t)}},{key:"hotUpdate",value:function e(t){this._modules.update(t);D(this,true)}},{key:"_withCommit",value:function e(t){var n=this._committing;this._committing=true;t();this._committing=n}},{key:"state",get:function e(){return this._vm._data.$$state},set:function e(t){{b(false,"use store.replaceState() to explicit replace store state.")}}}]);return e}();function M(e,t,n){if(t.indexOf(e)<0){n&&n.prepend?t.unshift(e):t.push(e)}return function(){var n=t.indexOf(e);if(n>-1){t.splice(n,1)}}}function D(e,t){e._actions=Object.create(null);e._mutations=Object.create(null);e._wrappedGetters=Object.create(null);e._modulesNamespaceMap=Object.create(null);var n=e.state;P(e,n,[],e._modules.root,true);A(e,n,t)}function A(e,n,r){var i=e._vm;e.getters={};e._makeLocalGettersCache=Object.create(null);var s=e._wrappedGetters;var o={};g(s,(function(t,n){o[n]=w(t,e);Object.defineProperty(e.getters,n,{get:function t(){return e._vm[n]},enumerable:true})}));var a=t.WidgetVueVendor.config.silent;t.WidgetVueVendor.config.silent=true;e._vm=new t.WidgetVueVendor({data:{$$state:n},computed:o});t.WidgetVueVendor.config.silent=a;if(e.strict){B(e)}if(i){if(r){e._withCommit((function(){i._data.$$state=null}))}t.WidgetVueVendor.nextTick((function(){return i.$destroy()}))}}function P(e,n,r,i,s){var o=!r.length;var a=e._modules.getNamespace(r);if(i.namespaced){if(e._modulesNamespaceMap[a]&&true){console.error("[vuex] duplicate namespace ".concat(a," for the namespaced module ").concat(r.join("/")))}e._modulesNamespaceMap[a]=i}if(!o&&!s){var l=F(n,r.slice(0,-1));var u=r[r.length-1];e._withCommit((function(){{if(u in l){console.warn('[vuex] state field "'.concat(u,'" was overridden by a module with the same name at "').concat(r.join("."),'"'))}}t.WidgetVueVendor.set(l,u,i.state)}))}var c=i.context=L(e,a,r);i.forEachMutation((function(t,n){var r=a+n;H(e,r,t,c)}));i.forEachAction((function(t,n){var r=t.root?n:a+n;var i=t.handler||t;j(e,r,i,c)}));i.forEachGetter((function(t,n){var r=a+n;N(e,r,t,c)}));i.forEachChild((function(t,i){P(e,n,r.concat(i),t,s)}))}function L(e,t,n){var r=t==="";var i={dispatch:r?e.dispatch:function(n,r,i){var s=U(n,r,i);var o=s.payload,a=s.options;var l=s.type;if(!a||!a.root){l=t+l;if(!e._actions[l]){console.error("[vuex] unknown local action type: ".concat(s.type,", global type: ").concat(l));return}}return e.dispatch(l,o)},commit:r?e.commit:function(n,r,i){var s=U(n,r,i);var o=s.payload,a=s.options;var l=s.type;if(!a||!a.root){l=t+l;if(!e._mutations[l]){console.error("[vuex] unknown local mutation type: ".concat(s.type,", global type: ").concat(l));return}}e.commit(l,o,a)}};Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return R(e,t)}},state:{get:function t(){return F(e.state,n)}}});return i}function R(e,t){if(!e._makeLocalGettersCache[t]){var n={};var r=t.length;Object.keys(e.getters).forEach((function(i){if(i.slice(0,r)!==t)return;var s=i.slice(r);Object.defineProperty(n,s,{get:function t(){return e.getters[i]},enumerable:true})}));e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function H(e,t,n,r){var i=e._mutations[t]||(e._mutations[t]=[]);i.push((function t(i){n.call(e,r.state,i)}))}function j(e,t,n,r){var i=e._actions[t]||(e._actions[t]=[]);i.push((function t(i){var s=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},i);if(!y(s)){s=Promise.resolve(s)}if(e._devtoolHook){return s["catch"]((function(t){e._devtoolHook.emit("vuex:error",t);throw t}))}else{return s}}))}function N(e,t,n,r){if(e._wrappedGetters[t]){{console.error("[vuex] duplicate getter key: ".concat(t))}return}e._wrappedGetters[t]=function e(t){return n(r.state,r.getters,t.state,t.getters)}}function B(e){e._vm.$watch((function(){return this._data.$$state}),(function(){{b(e._committing,"do not mutate vuex store state outside mutation handlers.")}}),{deep:true,sync:true})}function F(e,t){return t.reduce((function(e,t){return e[t]}),e)}function U(e,t,n){if(v(e)&&e.type){n=t;t=e;e=e.type}{b(typeof e==="string","expects string as the type, but found ".concat(babelHelpers["typeof"](e),"."))}return{type:e,payload:t,options:n}}function W(e){c(e)}var $=Y((function(e,t){var n={};if(!K(t)){console.error("[vuex] mapState: mapper parameter must be either an Array or an Object")}q(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function t(){var n=this.$store.state;var r=this.$store.getters;if(e){var s=J(this.$store,"mapState",e);if(!s){return}n=s.context.state;r=s.context.getters}return typeof i==="function"?i.call(this,n,r):n[i]};n[r].vuex=true}));return n}));var V=Y((function(e,t){var n={};if(!K(t)){console.error("[vuex] mapMutations: mapper parameter must be either an Array or an Object")}q(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function t(){var n=this.$store.commit;if(e){var r=J(this.$store,"mapMutations",e);if(!r){return}n=r.context.commit}for(var s=arguments.length,o=new Array(s),a=0;a<s;a++){o[a]=arguments[a]}return typeof i==="function"?i.apply(this,[n].concat(o)):n.apply(this.$store,[i].concat(o))}}));return n}));var G=Y((function(e,t){var n={};if(!K(t)){console.error("[vuex] mapGetters: mapper parameter must be either an Array or an Object")}q(t).forEach((function(t){var r=t.key,i=t.val;i=e+i;n[r]=function t(){if(e&&!J(this.$store,"mapGetters",e)){return}if(!(i in this.$store.getters)){console.error("[vuex] unknown getter: ".concat(i));return}return this.$store.getters[i]};n[r].vuex=true}));return n}));var z=Y((function(e,t){var n={};if(!K(t)){console.error("[vuex] mapActions: mapper parameter must be either an Array or an Object")}q(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function t(){var n=this.$store.dispatch;if(e){var r=J(this.$store,"mapActions",e);if(!r){return}n=r.context.dispatch}for(var s=arguments.length,o=new Array(s),a=0;a<s;a++){o[a]=arguments[a]}return typeof i==="function"?i.apply(this,[n].concat(o)):n.apply(this.$store,[i].concat(o))}}));return n}));var X=function e(t){return{mapState:$.bind(null,t),mapGetters:G.bind(null,t),mapMutations:V.bind(null,t),mapActions:z.bind(null,t)}};function q(e){if(!K(e)){return[]}return Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}}))}function K(e){return Array.isArray(e)||v(e)}function Y(e){return function(t,n){if(typeof t!=="string"){n=t;t=""}else if(t.charAt(t.length-1)!=="/"){t+="/"}return e(t,n)}}function J(e,t,n){var r=e._modulesNamespaceMap[n];if(!r){console.error("[vuex] module namespace not found in ".concat(t,"(): ").concat(n))}return r}function Q(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.collapsed,n=t===void 0?true:t,r=e.filter,i=r===void 0?function(e,t,n){return true}:r,s=e.transformer,o=s===void 0?function(e){return e}:s,a=e.mutationTransformer,l=a===void 0?function(e){return e}:a,u=e.actionFilter,c=u===void 0?function(e,t){return true}:u,f=e.actionTransformer,d=f===void 0?function(e){return e}:f,h=e.logMutations,p=h===void 0?true:h,g=e.logActions,v=g===void 0?true:g,y=e.logger,b=y===void 0?console:y;return function(e){var t=m(e.state);if(typeof b==="undefined"){return}if(p){e.subscribe((function(e,r){var s=m(r);if(i(e,t,s)){var a=te();var u=l(e);var c="mutation ".concat(e.type).concat(a);Z(b,c,n);b.log("%c prev state","color: #9E9E9E; font-weight: bold",o(t));b.log("%c mutation","color: #03A9F4; font-weight: bold",u);b.log("%c next state","color: #4CAF50; font-weight: bold",o(s));ee(b)}t=s}))}if(v){e.subscribeAction((function(e,t){if(c(e,t)){var r=te();var i=d(e);var s="action ".concat(e.type).concat(r);Z(b,s,n);b.log("%c action","color: #03A9F4; font-weight: bold",i);ee(b)}}))}}}function Z(e,t,n){var r=n?e.groupCollapsed:e.group;try{r.call(e,t)}catch(n){e.log(t)}}function ee(e){try{e.groupEnd()}catch(t){e.log("-- log end --")}}function te(){var e=new Date;return" @ ".concat(re(e.getHours(),2),":").concat(re(e.getMinutes(),2),":").concat(re(e.getSeconds(),2),".").concat(re(e.getMilliseconds(),3))}function ne(e,t){return new Array(t+1).join(e)}function re(e,t){return ne("0",t-e.toString().length)+e}var ie={Store:O,install:W,version:"3.6.2",mapState:$,mapMutations:V,mapGetters:G,mapActions:z,createNamespacedHelpers:X,createLogger:Q};ie.store=function(e){return new O(e)};ie.createStore=function(e){return new O(e)};t.WidgetVueVendor.use(ie);e.WidgetVuexBuilder=u;e.WidgetVuexBuilderModel=a;e.WidgetVuex=ie;e.WidgetVuexVendorV3=ie;e.WidgetVuexVendor=ie})(this.BX=this.BX||{},BX,BX.Dexie3,BX)})();this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e){"use strict";function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){babelHelpers.defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function r(e,t,n){i(e,t);t.set(e,n)}function i(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var s=new WeakMap;var o=new WeakMap;var a=new WeakMap;
/**
	 * Bitrix Messenger
	 * Logger class
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var l=function(){function e(){babelHelpers.classCallCheck(this,e);r(this,s,{writable:true,value:{}});r(this,o,{writable:true,value:{}});r(this,a,{writable:true,value:{}});babelHelpers.classPrivateFieldSet(this,s,{desktop:true,log:false,info:false,warn:false,error:true,trace:true});babelHelpers.classPrivateFieldSet(this,o,babelHelpers.classPrivateFieldGet(this,s));this.__load()}babelHelpers.createClass(e,[{key:"setConfig",value:function e(t){for(var n in t){if(t.hasOwnProperty(n)&&typeof babelHelpers.classPrivateFieldGet(this,s)[n]!=="undefined"){babelHelpers.classPrivateFieldGet(this,s)[n]=!!t[n];babelHelpers.classPrivateFieldGet(this,o)[n]=!!t[n]}}this.__load()}},{key:"enable",value:function e(t){if(typeof babelHelpers.classPrivateFieldGet(this,s)[t]==="undefined"){return false}babelHelpers.classPrivateFieldGet(this,s)[t]=true;babelHelpers.classPrivateFieldGet(this,a)[t]=true;this.__save();return true}},{key:"disable",value:function e(t){if(typeof babelHelpers.classPrivateFieldGet(this,s)[t]==="undefined"){return false}babelHelpers.classPrivateFieldGet(this,s)[t]=false;babelHelpers.classPrivateFieldGet(this,a)[t]=false;this.__save();return true}},{key:"isEnabled",value:function e(t){return babelHelpers.classPrivateFieldGet(this,s)[t]===true}},{key:"desktop",value:function e(){if(this.isEnabled("desktop")){var t;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}(t=console).log.apply(t,[].concat(babelHelpers.toConsumableArray(this.__getStyles("desktop")),r))}}},{key:"log",value:function e(){if(this.isEnabled("log")){var t;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}(t=console).log.apply(t,[].concat(babelHelpers.toConsumableArray(this.__getStyles("log")),r))}}},{key:"info",value:function e(){if(this.isEnabled("info")){var t;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}(t=console).info.apply(t,[].concat(babelHelpers.toConsumableArray(this.__getStyles("info")),r))}}},{key:"warn",value:function e(){if(this.isEnabled("warn")){var t;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}(t=console).warn.apply(t,[].concat(babelHelpers.toConsumableArray(this.__getStyles("warn")),r))}}},{key:"error",value:function e(){if(this.isEnabled("error")){var t;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}(t=console).error.apply(t,[].concat(babelHelpers.toConsumableArray(this.__getStyles("error")),r))}}},{key:"trace",value:function e(){if(this.isEnabled("trace")){var t;(t=console).trace.apply(t,arguments)}}},{key:"__save",value:function e(){if(typeof window.localStorage!=="undefined"){try{var t={};for(var n in babelHelpers.classPrivateFieldGet(this,a)){if(babelHelpers.classPrivateFieldGet(this,a).hasOwnProperty(n)&&babelHelpers.classPrivateFieldGet(this,o)[n]!==babelHelpers.classPrivateFieldGet(this,a)[n]){t[n]=!!babelHelpers.classPrivateFieldGet(this,a)[n]}}console.warn(JSON.stringify(t));window.localStorage.setItem("bx-messenger-logger",JSON.stringify(t))}catch(e){}}}},{key:"__load",value:function e(){if(typeof window.localStorage!=="undefined"){try{var t=window.localStorage.getItem("bx-messenger-logger");if(typeof t==="string"){babelHelpers.classPrivateFieldSet(this,a,JSON.parse(t));babelHelpers.classPrivateFieldSet(this,s,n(n({},babelHelpers.classPrivateFieldGet(this,s)),babelHelpers.classPrivateFieldGet(this,a)))}}catch(e){}}}},{key:"__getStyles",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"all";var n={desktop:["%cDESKTOP","color: white; font-style: italic; background-color: #29619b; padding: 0 6px"],log:["%cLOG","color: #2a323b; font-style: italic; background-color: #ccc; padding: 0 6px"],info:["%cINFO","color: #fff; font-style: italic; background-color: #6b7f96; padding: 0 6px"],warn:["%cWARNING","color: white; font-style: italic; padding: 0 6px; border: 1px solid #f0a74f"],error:["%cERROR","color: white; font-style: italic; padding: 0 6px; border: 1px solid #8a3232"]};if(t==="all"){return n}if(n[t]){return n[t]}return[]}},{key:"__getRemoveString",value:function e(){var t=this.__getStyles();var n=[];for(var r in t){if(t.hasOwnProperty(r)){n.push(t[r][1])}}return n}}]);return e}();var u=new l;e.Logger=u})(this.BX.Messenger.Lib=this.BX.Messenger.Lib||{});this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e){"use strict";
/**
	 * Bitrix Messenger
	 * Date constants
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var t=Object.freeze({groupTitle:"groupTitle",message:"message",recentTitle:"recentTitle",recentLinesTitle:"recentLinesTitle",readedTitle:"readedTitle",default:"default",vacationTitle:"vacationTitle"});
/**
	 * Bitrix Messenger
	 * Device constants
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var n=Object.freeze({mobile:"mobile",desktop:"desktop"});var r=Object.freeze({horizontal:"horizontal",portrait:"portrait"});
/**
	 * Bitrix Messenger
	 * Common constants
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var i=Object.freeze({none:"none",add:"delete",update:"update",delete:"delete",set:"set",setAfter:"after",setBefore:"before"});var s=Object.freeze({dialogues:50,messages:100});
/**
	 * Bitrix Messenger
	 * Device constants
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var o=Object.freeze({imMessageAdd:"im.message.add",imMessageUpdate:"im.message.update",imMessageDelete:"im.message.delete",imMessageLike:"im.message.like",imMessageCommand:"im.message.command",imMessageShare:"im.message.share",imChatGet:"im.chat.get",imChatLeave:"im.chat.leave",imChatMute:"im.chat.mute",imChatParentJoin:"im.chat.parent.join",imDialogGet:"im.dialog.get",imDialogMessagesGet:"im.dialog.messages.get",imDialogRead:"im.dialog.read",imDialogUnread:"im.dialog.unread",imDialogWriting:"im.dialog.writing",imUserGet:"im.user.get",imUserListGet:"im.user.list.get",imDiskFolderGet:"im.disk.folder.get",imDiskFileUpload:"disk.folder.uploadfile",imDiskFileCommit:"im.disk.file.commit",mobileBrowserConstGet:"mobile.browser.const.get",imRecentGet:"im.recent.get",imRecentList:"im.recent.list",imCallGetCallLimits:"im.call.getCallLimits",imNotifyGet:"im.notify.get",imNotifySchemaGet:"im.notify.schema.get"});var a=Object.freeze({imChatGet:"im.chat.get",imMessageAdd:"im.message.add",imDialogRead:"im.dialog.read",imDialogMessagesGet:"im.dialog.messages.get",imDialogMessagesGetInit:"im.dialog.messages.get.init",imDialogMessagesGetUnread:"im.dialog.messages.get.unread",imDiskFolderGet:"im.disk.folder.get",imDiskFileUpload:"disk.folder.uploadfile",imDiskFileCommit:"im.disk.file.commit",imUserGet:"im.user.get",imUserListGet:"im.user.list.get",mobileBrowserConstGet:"mobile.browser.const.get",imRecentGet:"im.recent.get",imRecentList:"im.recent.list",imCallGetCallLimits:"im.call.getCallLimits",imNotifyGet:"im.notify.get",imNotifySchemaGet:"im.notify.schema.get"});
/**
	 * Bitrix Messenger
	 * Event names constants
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var l=Object.freeze({dialog:{open:"IM.Dialog:open",newMessage:"EventType.dialog.newMessage",scrollOnStart:"IM.Dialog:scrollOnStart",scrollToBottom:"IM.Dialog:scrollToBottom",readVisibleMessages:"IM.Dialog.readVisibleMessages",requestUnread:"IM.Dialog.requestUnread",readMessage:"IM.Dialog:readMessage",quoteMessage:"IM.Dialog:quoteMessage",clickOnCommand:"IM.Dialog:clickOnCommand",clickOnMention:"IM.Dialog:clickOnMention",clickOnUserName:"IM.Dialog:clickOnUserName",clickOnMessageMenu:"IM.Dialog:clickOnMessageMenu",clickOnMessageRetry:"IM.Dialog:clickOnMessageRetry",doubleClickOnMessage:"IM.Dialog:doubleClickOnMessage",clickOnUploadCancel:"IM.Dialog:clickOnUploadCancel",clickOnReadList:"IM.Dialog:clickOnReadList",setMessageReaction:"IM.Dialog:setMessageReaction",openMessageReactionList:"IM.Dialog:openMessageReactionList",clickOnKeyboardButton:"IM.Dialog:clickOnKeyboardButton",clickOnChatTeaser:"IM.Dialog:clickOnChatTeaser",clickOnDialog:"IM.Dialog:clickOnDialog",quotePanelClose:"IM.Dialog:quotePanelClose",beforeMobileKeyboard:"IM.Dialog:beforeMobileKeyboard",messagesSet:"IM.Dialog:messagesSet"},textarea:{focus:"IM.Textarea:focus",setFocus:"IM.Textarea:setFocus",blur:"IM.Textarea:blur",setBlur:"IM.Textarea:setBlur",keyUp:"IM.Textarea:keyUp",edit:"IM.Textarea:edit",insertText:"IM.Textarea:insertText",sendMessage:"IM.Textarea:sendMessage",fileSelected:"IM.Textarea:fileSelected",startWriting:"IM.Textarea:startWriting",stopWriting:"IM.Textarea:stopWriting",appButtonClick:"IM.Textarea:appButtonClick"},uploader:{addMessageWithFile:"IM.Uploader:addMessageWithFile"},conference:{setPasswordFocus:"IM.Conference:setPasswordFocus",hideSmiles:"IM.Conference:hideSmiles",requestPermissions:"IM.Conference:requestPermissions",waitForStart:"IM.Conference:waitForStart",userRenameFocus:"IM.Conference:userRenameFocus",userRenameBlur:"IM.Conference:userRenameBlur"},notification:{updateState:"IM.Notifications:restoreConnection"},mobile:{textarea:{setText:"IM.Mobile.Textarea:setText",setFocus:"IM.Mobile.Textarea:setFocus"},openUserList:"IM.Mobile:openUserList"}});
/**
	 * Bitrix Messenger
	 * Event names constants
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var u=Object.freeze({private:"private",chat:"chat",open:"open",call:"call",crm:"crm"});var c=Object.freeze({lead:"lead",company:"company",contact:"contact",deal:"deal",none:"none"});var f=Object.freeze({listBody:"bx-im-dialog-list",listItem:"bx-im-dialog-list-item-reference",listItemName:"bx-im-dialog-list-item-name-reference",listItemBody:"bx-im-dialog-list-item-content-reference",listUnreadLoader:"bx-im-dialog-list-unread-loader-reference"});var d=Object.freeze({message:"message",delimiter:"delimiter",group:"group",historyLoader:"historyLoader",unreadLoader:"unreadLoader",button:"button",placeholder:"placeholder"});var h=Object.freeze({loading:"loading",empty:"empty",show:"show"});
/**
	 * Bitrix Messenger
	 * File constants
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var p=Object.freeze({upload:"upload",wait:"wait",done:"done",error:"error"});var m=Object.freeze({image:"image",video:"video",audio:"audio",file:"file"});
/**
	 * Bitrix Messenger
	 * Message constants
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var g=Object.freeze({self:"self",opponent:"opponent",system:"system"});
/**
	 * Bitrix Messenger
	 * Conference constants
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var v=Object.freeze({view:"view",edit:"edit",create:"create"});var y=Object.freeze({preparation:"preparation",call:"call"});var b=Object.freeze({userLimitReached:"userLimitReached",detectIntranetUser:"detectIntranetUser",bitrix24only:"bitrix24only",kickedFromCall:"kickedFromCall",unsupportedBrowser:"unsupportedBrowser",missingMicrophone:"missingMicrophone",unsafeConnection:"unsafeConnection",wrongAlias:"wrongAlias",notStarted:"notStarted",finished:"finished",userLeftCall:"userLeftCall",noSignalFromCamera:"noSignalFromCamera"});var w=Object.freeze({hidden:"hidden",chat:"chat",users:"users",split:"split"});var S=Object.freeze({Idle:"Idle",Busy:"Busy",Calling:"Calling",Unavailable:"Unavailable",Declined:"Declined",Ready:"Ready",Connecting:"Connecting",Connected:"Connected",Failed:"Failed"});
/**
	 * Bitrix Messenger
	 * Recent list constants
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var k={chat:"chat",open:"open",user:"user",notification:"notification"};var I={item:"item",placeholder:"placeholder"};var E={general:"general",pinned:"pinned"};var C={received:"received",delivered:"delivered",error:"error"};var _=Object.freeze({confirm:1,simple:3,placeholder:5});e.DateFormat=t;e.DeviceType=n;e.DeviceOrientation=r;e.MutationType=i;e.StorageLimit=s;e.RestMethod=o;e.RestMethodHandler=a;e.EventType=l;e.DialogType=u;e.DialogCrmType=c;e.DialogReferenceClassName=f;e.DialogTemplateType=d;e.DialogState=h;e.FileStatus=p;e.FileType=m;e.MessageType=g;e.ConferenceFieldState=v;e.ConferenceStateType=y;e.ConferenceErrorCode=b;e.ConferenceRightPanelMode=w;e.ConferenceUserState=S;e.ChatTypes=k;e.TemplateTypes=I;e.RecentSection=E;e.MessageStatus=C;e.NotificationTypesCodes=_})(this.BX.Messenger.Const=this.BX.Messenger.Const||{});this.BX=this.BX||{};(function(e,t){"use strict";function n(e){if(!t.Type.isStringFilled(e)){return""}return e.replace("YYYY","Y").replace("MMMM","F").replace("MM","m").replace("M","M").replace("DD","d").replace("G","g").replace(/GG/i,"G").replace("H","h").replace(/HH/i,"H").replace("MI","i").replace("SS","s").replace("TT","A").replace("T","a")}const r=new t.Cache.MemoryCache;function i(e){return r.remember(`main.date.format.${e}`,(()=>{let r=t.Extension.getSettings("main.date").get(`formats.${e}`);if(t.Type.isStringFilled(r)&&(e==="FORMAT_DATE"||e==="FORMAT_DATETIME")){r=n(r)}return r}))}let s=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"isAmPmMode",value:function e(t){if(t===true){return this._getMessage("AMPM_MODE")}return this._getMessage("AMPM_MODE")!==false}},{key:"convertToUTC",value:function e(n){if(!t.Type.isDate(n)){return null}return new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()))}},{key:"getNewDate",value:function e(t){return new Date(this.getBrowserTimestamp(t))}},{key:"getBrowserTimestamp",value:function e(t){t=parseInt(t,10);const n=new Date(t*1e3).getTimezoneOffset()*60;return(parseInt(t,10)+parseInt(this._getMessage("SERVER_TZ_OFFSET"))+n)*1e3}},{key:"getServerTimestamp",value:function e(t){t=parseInt(t,10);const n=new Date(t).getTimezoneOffset()*60;return Math.round(t/1e3-(parseInt(this._getMessage("SERVER_TZ_OFFSET"),10)+parseInt(n,10)))}},{key:"formatLastActivityDate",value:function e(t,n,r){const i=this.isAmPmMode(true);const s=i===this.AM_PM_MODE.LOWER?"g:i a":i===this.AM_PM_MODE.UPPER?"g:i A":"H:i";const o=[["tomorrow","#01#"+s],["now","#02#"],["todayFuture","#03#"+s],["yesterday","#04#"+s],["-",this.convertBitrixFormat(this._getMessage("FORMAT_DATETIME")).replace(/:s/g,"")],["s60","sago"],["i60","iago"],["H5","Hago"],["H24","#03#"+s],["d31","dago"],["m12>1","mago"],["m12>0","dago"],["","#05#"]];let a=this.format(o,t,n,r);let l=null;if((l=/^#(\d+)#(.*)/.exec(a))!=null){switch(l[1]){case"01":a=this._getMessage("FD_LAST_SEEN_TOMORROW").replace("#TIME#",l[2]);break;case"02":a=this._getMessage("FD_LAST_SEEN_NOW");break;case"03":a=this._getMessage("FD_LAST_SEEN_TODAY").replace("#TIME#",l[2]);break;case"04":a=this._getMessage("FD_LAST_SEEN_YESTERDAY").replace("#TIME#",l[2]);break;case"05":a=this._getMessage("FD_LAST_SEEN_MORE_YEAR");break;default:a=l[2];break}}return a}},{key:"_getMessage",value:function e(n){return t.Loc.getMessage(n)}},{key:"parse",value:function e(n,r,i,s){if(t.Type.isStringFilled(n)){if(!i){i=this._getMessage("FORMAT_DATE")}if(!s){s=this._getMessage("FORMAT_DATETIME")}let e="";for(let t=1;t<=12;t++){e=e+"|"+this._getMessage("MON_"+t)}const t=new RegExp("([0-9]+|[a-z]+"+e+")","ig");const o=n.match(t);let a=i.match(/(DD|MI|MMMM|MM|M|YYYY)/gi);const l=[];const u=[];const c={};if(!o){return null}if(o.length>a.length){a=s.match(/(DD|MI|MMMM|MM|M|YYYY|HH|H|SS|TT|T|GG|G)/gi)}for(let e=0,t=o.length;e<t;e++){if(o[e].trim()!==""){l[l.length]=o[e]}}for(let e=0,t=a.length;e<t;e++){if(a[e].trim()!==""){u[u.length]=a[e]}}let f=u.findIndex((e=>e==="MMMM"));if(f>0){l[f]=this.getMonthIndex(l[f]);u[f]="MM"}else{f=u.findIndex((e=>e==="M"));if(f>0){l[f]=this.getMonthIndex(l[f]);u[f]="MM"}}for(let e=0,t=u.length;e<t;e++){const t=u[e].toUpperCase();c[t]=t==="T"||t==="TT"?l[e]:parseInt(l[e],10)}if(c["DD"]>0&&c["MM"]>0&&c["YYYY"]>0){const e=new Date;if(r){e.setUTCDate(1);e.setUTCFullYear(c["YYYY"]);e.setUTCMonth(c["MM"]-1);e.setUTCDate(c["DD"]);e.setUTCHours(0,0,0,0)}else{e.setDate(1);e.setFullYear(c["YYYY"]);e.setMonth(c["MM"]-1);e.setDate(c["DD"]);e.setHours(0,0,0,0)}if((!isNaN(c["HH"])||!isNaN(c["GG"])||!isNaN(c["H"])||!isNaN(c["G"]))&&!isNaN(c["MI"])){if(!isNaN(c["H"])||!isNaN(c["G"])){const e=(c["T"]||c["TT"]||"am").toUpperCase()==="PM",t=parseInt(c["H"]||c["G"]||0,10);if(e){c["HH"]=t+(t===12?0:12)}else{c["HH"]=t<12?t:0}}else{c["HH"]=parseInt(c["HH"]||c["GG"]||0,10)}if(isNaN(c["SS"])){c["SS"]=0}if(r){e.setUTCHours(c["HH"],c["MI"],c["SS"])}else{e.setHours(c["HH"],c["MI"],c["SS"])}}return e}}return null}},{key:"getMonthIndex",value:function e(t){const n=t.toUpperCase();const r=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];const i=["january","february","march","april","may","june","july","august","september","october","november","december"];for(let e=1;e<=12;e++){if(n===this._getMessage("MON_"+e).toUpperCase()||n===this._getMessage("MONTH_"+e).toUpperCase()||n===r[e-1].toUpperCase()||n===i[e-1].toUpperCase()){return e}}return t}},{key:"format",value:function e(n,r,i,s){const o=t.Type.isDate(r)?new Date(r.getTime()):t.Type.isNumber(r)?new Date(r*1e3):new Date;const a=t.Type.isDate(i)?new Date(i.getTime()):t.Type.isNumber(i)?new Date(i*1e3):new Date;const l=!!s;const u=this;if(t.Type.isArray(n)){return m(n,o,a,l)}else{if(!t.Type.isStringFilled(n)){return""}}const c=(n.match(/{{([^{}]*)}}/g)||[]).map((e=>(e.match(/[^{}]+/)||[""])[0]));if(c.length>0){c.forEach(((e,t)=>{n=n.replace("{{"+e+"}}","{{"+t+"}}")}))}const f=/\\?(sago|iago|isago|Hago|dago|mago|Yago|sdiff|idiff|Hdiff|ddiff|mdiff|Ydiff|sshort|ishort|Hshort|dshort|mhort|Yshort|yesterday|today|tommorow|tomorrow|[a-z])/gi;const d={d:()=>v(o).toString().padStart(2,"0"),D:()=>this._getMessage("DOW_"+I(o)),j:()=>v(o),l:()=>this._getMessage("DAY_OF_WEEK_"+I(o)),N:()=>I(o)||7,S:()=>{if(v(o)%10==1&&v(o)!=11){return"st"}else if(v(o)%10==2&&v(o)!=12){return"nd"}else if(v(o)%10==3&&v(o)!=13){return"rd"}else{return"th"}},w:()=>I(o),z:()=>{const e=new Date(g(o),0,1);const t=new Date(g(o),y(o),v(o));return Math.ceil((t-e)/(24*3600*1e3))},W:()=>{const e=new Date(o.getTime());const t=(I(o)+6)%7;E(e,v(e)-t+3);const n=e.getTime();C(e,0,1);if(I(e)!=4){C(e,0,1+(4-I(e)+7)%7)}const r=1+Math.ceil((n-e)/(7*24*3600*1e3));return r.toString().padStart(2,"0")},F:()=>this._getMessage("MONTH_"+(y(o)+1)+"_S"),f:()=>this._getMessage("MONTH_"+(y(o)+1)),m:()=>(y(o)+1).toString().padStart(2,"0"),M:()=>this._getMessage("MON_"+(y(o)+1)),n:()=>y(o)+1,t:()=>{const e=l?new Date(Date.UTC(g(o),y(o)+1,0)):new Date(g(o),y(o)+1,0);return v(e)},L:()=>{const e=g(o);return e%4==0&&e%100!=0||e%400==0?1:0},o:()=>{const e=new Date(o.getTime());E(e,v(e)-(I(o)+6)%7+3);return g(e)},Y:()=>g(o),y:()=>g(o).toString().slice(2),a:()=>b(o)>11?"pm":"am",A:()=>b(o)>11?"PM":"AM",B:()=>{const e=(o.getUTCHours()+1)%24+o.getUTCMinutes()/60+o.getUTCSeconds()/3600;return Math.floor(e*1e3/24).toString().padStart(3,"0")},g:()=>b(o)%12||12,G:()=>b(o),h:()=>(b(o)%12||12).toString().padStart(2,"0"),H:()=>b(o).toString().padStart(2,"0"),i:()=>w(o).toString().padStart(2,"0"),s:()=>S(o).toString().padStart(2,"0"),u:()=>(k(o)*1e3).toString().padStart(6,"0"),e:()=>{if(l){return"UTC"}return""},I:()=>{if(l){return 0}const e=new Date(g(o),0,1);const t=Date.UTC(g(o),0,1);const n=new Date(g(o),6,0);const r=Date.UTC(g(o),6,0);return 0+(e-t!==n-r)},O:()=>{if(l){return"+0000"}const e=o.getTimezoneOffset();const t=Math.abs(e);return(e>0?"-":"+")+(Math.floor(t/60)*100+t%60).toString().padStart(4,"0")},P:function(){if(l){return"+00:00"}const e=this.O();return e.substr(0,3)+":"+e.substr(3)},Z:()=>{if(l){return 0}return-o.getTimezoneOffset()*60},c:()=>"Y-m-d\\TH:i:sP".replace(f,x),r:()=>"D, d M Y H:i:s O".replace(f,x),U:()=>Math.floor(o.getTime()/1e3),sago:()=>_(T((a-o)/1e3),{0:"FD_SECOND_AGO_0",1:"FD_SECOND_AGO_1","10_20":"FD_SECOND_AGO_10_20",MOD_1:"FD_SECOND_AGO_MOD_1",MOD_2_4:"FD_SECOND_AGO_MOD_2_4",MOD_OTHER:"FD_SECOND_AGO_MOD_OTHER"}),sdiff:()=>_(T((a-o)/1e3),{0:"FD_SECOND_DIFF_0",1:"FD_SECOND_DIFF_1","10_20":"FD_SECOND_DIFF_10_20",MOD_1:"FD_SECOND_DIFF_MOD_1",MOD_2_4:"FD_SECOND_DIFF_MOD_2_4",MOD_OTHER:"FD_SECOND_DIFF_MOD_OTHER"}),sshort:()=>this._getMessage("FD_SECOND_SHORT").replace(/#VALUE#/g,T((a-o)/1e3)),iago:()=>_(T((a-o)/60/1e3),{0:"FD_MINUTE_AGO_0",1:"FD_MINUTE_AGO_1","10_20":"FD_MINUTE_AGO_10_20",MOD_1:"FD_MINUTE_AGO_MOD_1",MOD_2_4:"FD_MINUTE_AGO_MOD_2_4",MOD_OTHER:"FD_MINUTE_AGO_MOD_OTHER"}),idiff:()=>_(T((a-o)/60/1e3),{0:"FD_MINUTE_DIFF_0",1:"FD_MINUTE_DIFF_1","10_20":"FD_MINUTE_DIFF_10_20",MOD_1:"FD_MINUTE_DIFF_MOD_1",MOD_2_4:"FD_MINUTE_DIFF_MOD_2_4",MOD_OTHER:"FD_MINUTE_DIFF_MOD_OTHER"}),isago:()=>{const e=T((a-o)/60/1e3);let t=_(e,{0:"FD_MINUTE_0",1:"FD_MINUTE_1","10_20":"FD_MINUTE_10_20",MOD_1:"FD_MINUTE_MOD_1",MOD_2_4:"FD_MINUTE_MOD_2_4",MOD_OTHER:"FD_MINUTE_MOD_OTHER"});t+=" ";const n=T((a-o)/1e3)-e*60;t+=_(n,{0:"FD_SECOND_AGO_0",1:"FD_SECOND_AGO_1","10_20":"FD_SECOND_AGO_10_20",MOD_1:"FD_SECOND_AGO_MOD_1",MOD_2_4:"FD_SECOND_AGO_MOD_2_4",MOD_OTHER:"FD_SECOND_AGO_MOD_OTHER"});return t},ishort:()=>this._getMessage("FD_MINUTE_SHORT").replace(/#VALUE#/g,T((a-o)/60/1e3)),Hago:()=>_(T((a-o)/60/60/1e3),{0:"FD_HOUR_AGO_0",1:"FD_HOUR_AGO_1","10_20":"FD_HOUR_AGO_10_20",MOD_1:"FD_HOUR_AGO_MOD_1",MOD_2_4:"FD_HOUR_AGO_MOD_2_4",MOD_OTHER:"FD_HOUR_AGO_MOD_OTHER"}),Hdiff:()=>_(T((a-o)/60/60/1e3),{0:"FD_HOUR_DIFF_0",1:"FD_HOUR_DIFF_1","10_20":"FD_HOUR_DIFF_10_20",MOD_1:"FD_HOUR_DIFF_MOD_1",MOD_2_4:"FD_HOUR_DIFF_MOD_2_4",MOD_OTHER:"FD_HOUR_DIFF_MOD_OTHER"}),Hshort:()=>this._getMessage("FD_HOUR_SHORT").replace(/#VALUE#/g,T((a-o)/60/60/1e3)),yesterday:()=>this._getMessage("FD_YESTERDAY"),today:()=>this._getMessage("FD_TODAY"),tommorow:()=>this._getMessage("FD_TOMORROW"),tomorrow:()=>this._getMessage("FD_TOMORROW"),dago:()=>_(T((a-o)/60/60/24/1e3),{0:"FD_DAY_AGO_0",1:"FD_DAY_AGO_1","10_20":"FD_DAY_AGO_10_20",MOD_1:"FD_DAY_AGO_MOD_1",MOD_2_4:"FD_DAY_AGO_MOD_2_4",MOD_OTHER:"FD_DAY_AGO_MOD_OTHER"}),ddiff:()=>_(T((a-o)/60/60/24/1e3),{0:"FD_DAY_DIFF_0",1:"FD_DAY_DIFF_1","10_20":"FD_DAY_DIFF_10_20",MOD_1:"FD_DAY_DIFF_MOD_1",MOD_2_4:"FD_DAY_DIFF_MOD_2_4",MOD_OTHER:"FD_DAY_DIFF_MOD_OTHER"}),dshort:()=>this._getMessage("FD_DAY_SHORT").replace(/#VALUE#/g,T((a-o)/60/60/24/1e3)),mago:()=>_(T((a-o)/60/60/24/31/1e3),{0:"FD_MONTH_AGO_0",1:"FD_MONTH_AGO_1","10_20":"FD_MONTH_AGO_10_20",MOD_1:"FD_MONTH_AGO_MOD_1",MOD_2_4:"FD_MONTH_AGO_MOD_2_4",MOD_OTHER:"FD_MONTH_AGO_MOD_OTHER"}),mdiff:()=>_(T((a-o)/60/60/24/31/1e3),{0:"FD_MONTH_DIFF_0",1:"FD_MONTH_DIFF_1","10_20":"FD_MONTH_DIFF_10_20",MOD_1:"FD_MONTH_DIFF_MOD_1",MOD_2_4:"FD_MONTH_DIFF_MOD_2_4",MOD_OTHER:"FD_MONTH_DIFF_MOD_OTHER"}),mshort:()=>this._getMessage("FD_MONTH_SHORT").replace(/#VALUE#/g,T((a-o)/60/60/24/31/1e3)),Yago:()=>_(T((a-o)/60/60/24/365/1e3),{0:"FD_YEARS_AGO_0",1:"FD_YEARS_AGO_1","10_20":"FD_YEARS_AGO_10_20",MOD_1:"FD_YEARS_AGO_MOD_1",MOD_2_4:"FD_YEARS_AGO_MOD_2_4",MOD_OTHER:"FD_YEARS_AGO_MOD_OTHER"}),Ydiff:()=>_(T((a-o)/60/60/24/365/1e3),{0:"FD_YEARS_DIFF_0",1:"FD_YEARS_DIFF_1","10_20":"FD_YEARS_DIFF_10_20",MOD_1:"FD_YEARS_DIFF_MOD_1",MOD_2_4:"FD_YEARS_DIFF_MOD_2_4",MOD_OTHER:"FD_YEARS_DIFF_MOD_OTHER"}),Yshort:()=>_(T((a-o)/60/60/24/365/1e3),{0:"FD_YEARS_SHORT_0",1:"FD_YEARS_SHORT_1","10_20":"FD_YEARS_SHORT_10_20",MOD_1:"FD_YEARS_SHORT_MOD_1",MOD_2_4:"FD_YEARS_SHORT_MOD_2_4",MOD_OTHER:"FD_YEARS_SHORT_MOD_OTHER"}),x:()=>{const e=this.isAmPmMode(true);const t=e===this.AM_PM_MODE.LOWER?"g:i a":e===this.AM_PM_MODE.UPPER?"g:i A":"H:i";return this.format([["tomorrow","tomorrow, "+t],["-",this.convertBitrixFormat(this._getMessage("FORMAT_DATETIME")).replace(/:s/g,"")],["s","sago"],["i","iago"],["today","today, "+t],["yesterday","yesterday, "+t],["",this.convertBitrixFormat(this._getMessage("FORMAT_DATETIME")).replace(/:s/g,"")]],o,a,l)},X:()=>{const e=this.isAmPmMode(true);const t=e===this.AM_PM_MODE.LOWER?"g:i a":e===this.AM_PM_MODE.UPPER?"g:i A":"H:i";const n=this.format([["tomorrow","tomorrow"],["-",this.convertBitrixFormat(this._getMessage("FORMAT_DATE"))],["today","today"],["yesterday","yesterday"],["",this.convertBitrixFormat(this._getMessage("FORMAT_DATE"))]],o,a,l);const r=this.format([["tomorrow",t],["today",t],["yesterday",t],["",""]],o,a,l);if(r.length>0){return this._getMessage("FD_DAY_AT_TIME").replace(/#DAY#/g,n).replace(/#TIME#/g,r)}else{return n}},Q:()=>{const e=T((a-o)/60/60/24/1e3);if(e==0){return this._getMessage("FD_DAY_DIFF_1").replace(/#VALUE#/g,1)}else{return this.format([["d","ddiff"],["m","mdiff"],["","Ydiff"]],o,a)}}};let h=false;if(n[0]&&n[0]=="^"){h=true;n=n.substr(1)}let p=n.replace(f,x);if(h){p=p.replace(/\s*00:00:00\s*/g,"").replace(/(\d\d:\d\d)(:00)/g,"$1").replace(/(\s*00:00\s*)(?!:)/g,"")}if(c.length>0){c.forEach((function(e,t){p=p.replace("{{"+t+"}}",e)}))}return p;function m(e,t,n,r){const i=T((n-t)/1e3);for(let s=0;s<e.length;s++){const o=e[s][0];const a=e[s][1];let l=null;if(o=="s"){if(i<60){return u.format(a,t,n,r)}}else if((l=/^s(\d+)\>?(\d+)?/.exec(o))!=null){if(l[1]&&l[2]){if(i<l[1]&&i>l[2]){return u.format(a,t,n,r)}}else if(i<l[1]){return u.format(a,t,n,r)}}else if(o=="i"){if(i<60*60){return u.format(a,t,n,r)}}else if((l=/^i(\d+)\>?(\d+)?/.exec(o))!=null){if(l[1]&&l[2]){if(i<l[1]*60&&i>l[2]*60){return u.format(a,t,n,r)}}else if(i<l[1]*60){return u.format(a,t,n,r)}}else if(o=="H"){if(i<24*60*60){return u.format(a,t,n,r)}}else if((l=/^H(\d+)\>?(\d+)?/.exec(o))!=null){if(l[1]&&l[2]){if(i<l[1]*60*60&&i>l[2]*60*60){return u.format(a,t,n,r)}}else if(i<l[1]*60*60){return u.format(a,t,n,r)}}else if(o=="d"){if(i<31*24*60*60){return u.format(a,t,n,r)}}else if((l=/^d(\d+)\>?(\d+)?/.exec(o))!=null){if(l[1]&&l[2]){if(i<l[1]*24*60*60&&i>l[2]*24*60*60){return u.format(a,t,n,r)}}else if(i<l[1]*24*60*60){return u.format(a,t,n,r)}}else if(o=="m"){if(i<365*24*60*60){return u.format(a,t,n,r)}}else if((l=/^m(\d+)\>?(\d+)?/.exec(o))!=null){if(l[1]&&l[2]){if(i<l[1]*31*24*60*60&&i>l[2]*31*24*60*60){return u.format(a,t,n,r)}}else if(i<l[1]*31*24*60*60){return u.format(a,t,n,r)}}else if(o=="now"){if(t.getTime()==n.getTime()){return u.format(a,t,n,r)}}else if(o=="today"){const e=g(n);const i=y(n);const s=v(n);const o=r?new Date(Date.UTC(e,i,s,0,0,0,0)):new Date(e,i,s,0,0,0,0);const l=r?new Date(Date.UTC(e,i,s+1,0,0,0,0)):new Date(e,i,s+1,0,0,0,0);if(t>=o&&t<l){return u.format(a,t,n,r)}}else if(o=="todayFuture"){const e=g(n);const i=y(n);const s=v(n);const o=n.getTime();const l=r?new Date(Date.UTC(e,i,s+1,0,0,0,0)):new Date(e,i,s+1,0,0,0,0);if(t>=o&&t<l){return u.format(a,t,n,r)}}else if(o=="yesterday"){const e=g(n);const i=y(n);const s=v(n);const o=r?new Date(Date.UTC(e,i,s-1,0,0,0,0)):new Date(e,i,s-1,0,0,0,0);const l=r?new Date(Date.UTC(e,i,s,0,0,0,0)):new Date(e,i,s,0,0,0,0);if(t>=o&&t<l){return u.format(a,t,n,r)}}else if(o=="tommorow"||o=="tomorrow"){const e=g(n);const i=y(n);const s=v(n);const o=r?new Date(Date.UTC(e,i,s+1,0,0,0,0)):new Date(e,i,s+1,0,0,0,0);const l=r?new Date(Date.UTC(e,i,s+2,0,0,0,0)):new Date(e,i,s+2,0,0,0,0);if(t>=o&&t<l){return u.format(a,t,n,r)}}else if(o=="-"){if(i<0){return u.format(a,t,n,r)}}}return e.length>0?u.format(e[e.length-1][1],t,n,r):""}function g(e){return l?e.getUTCFullYear():e.getFullYear()}function v(e){return l?e.getUTCDate():e.getDate()}function y(e){return l?e.getUTCMonth():e.getMonth()}function b(e){return l?e.getUTCHours():e.getHours()}function w(e){return l?e.getUTCMinutes():e.getMinutes()}function S(e){return l?e.getUTCSeconds():e.getSeconds()}function k(e){return l?e.getUTCMilliseconds():e.getMilliseconds()}function I(e){return l?e.getUTCDay():e.getDay()}function E(e,t){return l?e.setUTCDate(t):e.setDate(t)}function C(e,t,n){return l?e.setUTCMonth(t,n):e.setMonth(t,n)}function _(e,t){const n=e<100?Math.abs(e):Math.abs(e%100);const r=n%10;let i="";if(n==0){i=u._getMessage(t["0"])}else if(n==1){i=u._getMessage(t["1"])}else if(n>=10&&n<=20){i=u._getMessage(t["10_20"])}else if(r==1){i=u._getMessage(t["MOD_1"])}else if(2<=r&&r<=4){i=u._getMessage(t["MOD_2_4"])}else{i=u._getMessage(t["MOD_OTHER"])}return i.replace(/#VALUE#/g,e)}function x(e,t){if(d[e]){return d[e]()}else{return t}}function T(e){return e>=0?Math.floor(e):Math.ceil(e)}}}]);return e}();babelHelpers.defineProperty(s,"AM_PM_MODE",{UPPER:1,LOWER:2,NONE:false});babelHelpers.defineProperty(s,"convertBitrixFormat",n);babelHelpers.defineProperty(s,"getFormat",i);const o=new t.Cache.MemoryCache;const a={get SERVER_TO_UTC(){return o.remember("SERVER_TO_UTC",(()=>t.Text.toInteger(t.Loc.getMessage("SERVER_TZ_OFFSET"))))},get USER_TO_SERVER(){return o.remember("USER_TO_SERVER",(()=>t.Text.toInteger(t.Loc.getMessage("USER_TZ_OFFSET"))))},get BROWSER_TO_UTC(){return o.remember("BROWSER_TO_UTC",(()=>{const e=t.Text.toInteger((new Date).getTimezoneOffset()*60);return-e}))}};Object.freeze(a);function l(e){if(t.Type.isDate(e)){return c(e)}return t.Text.toInteger(e)}function u(e){return new Date(e*1e3)}function c(e){return Math.floor(e.getTime()/1e3)}let f=a;let d=null;function h(){return f}function p(){var e;return(e=d)!==null&&e!==void 0?e:c(new Date)}let m=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getDate",value:function e(n=null){const r=t.Type.isNumber(n)?n:this.getTimestamp();return u(r)}},{key:"toUserDate",value:function e(t){return u(this.toUser(t))}},{key:"toServerDate",value:function e(t){return u(this.toServer(t))}},{key:"toUser",value:function e(t){return this.toServer(t)+h().USER_TO_SERVER}},{key:"toServer",value:function e(t){return l(t)-h().BROWSER_TO_UTC+h().SERVER_TO_UTC}},{key:"getTimestamp",value:function e(){return p()}}]);return e}();let g=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getDate",value:function e(n=null){if(t.Type.isNumber(n)){const e=h().SERVER_TO_UTC-h().BROWSER_TO_UTC;return u(n+e)}return m.toServerDate(m.getDate())}},{key:"toUserDate",value:function e(t){return u(this.toUser(t))}},{key:"toBrowserDate",value:function e(t){return u(this.toBrowser(t))}},{key:"toUser",value:function e(t){return l(t)+h().USER_TO_SERVER}},{key:"toBrowser",value:function e(t){return l(t)+h().BROWSER_TO_UTC-h().SERVER_TO_UTC}},{key:"getTimestamp",value:function e(){return m.toServer(m.getTimestamp())}}]);return e}();function v(e,t,n){b(e,t);y(n,"get");return w(e,n)}function y(e,t){if(e===undefined){throw new TypeError("attempted to "+t+" private static field before its declaration")}}function b(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}function w(e,t){if(t.get){return t.get.call(e)}return t.value}let S=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getDate",value:function n(r=null){if(t.Type.isNumber(r)){return u(r+v(this,e,I))}return u(this.getTimestamp())}},{key:"toBrowserDate",value:function e(t){return u(this.toBrowser(t))}},{key:"toServerDate",value:function e(t){return u(this.toServer(t))}},{key:"toUTCTimestamp",value:function t(n){return l(n)-v(this,e,I)}},{key:"toBrowser",value:function e(t){return l(t)+h().BROWSER_TO_UTC-h().SERVER_TO_UTC-h().USER_TO_SERVER}},{key:"toServer",value:function e(t){return l(t)-h().USER_TO_SERVER}},{key:"getTimestamp",value:function e(){return m.toUser(m.getTimestamp())}}]);return e}();function k(){const e=h().SERVER_TO_UTC+h().USER_TO_SERVER;return e-h().BROWSER_TO_UTC}var I={get:k,set:void 0};const E=s;const C=Object.freeze({Offset:a,BrowserTime:m,UserTime:S,ServerTime:g});e.DateTimeFormat=s;e.Date=E;e.Timezone=C})(this.BX.Main=this.BX.Main||{},BX);this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e,t,n){"use strict";
/**
	 * Bitrix Messenger
	 * Utils
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var r={browser:{isSafari:function e(){if(this.isChrome()){return false}if(!navigator.userAgent.toLowerCase().includes("safari")){return false}return!this.isSafariBased()},isSafariBased:function e(){if(!navigator.userAgent.toLowerCase().includes("applewebkit")){return false}return navigator.userAgent.toLowerCase().includes("yabrowser")||navigator.userAgent.toLowerCase().includes("yaapp_ios_browser")||navigator.userAgent.toLowerCase().includes("crios")},isChrome:function e(){return navigator.userAgent.toLowerCase().includes("chrome")},isFirefox:function e(){return navigator.userAgent.toLowerCase().includes("firefox")},isIe:function e(){return navigator.userAgent.match(/(Trident\/|MSIE\/)/)!==null},findParent:function e(t,n){var r=n instanceof HTMLElement;if(!n||typeof n!=="string"&&!r){return null}for(;t&&t!==document;t=t.parentNode){if(typeof n==="string"){if(t.classList.contains(n)){return t}}else if(r){if(t===n){return t}}}return null}},platform:{isMac:function e(){return navigator.userAgent.toLowerCase().includes("macintosh")},isLinux:function e(){return navigator.userAgent.toLowerCase().includes("linux")},isWindows:function e(){return navigator.userAgent.toLowerCase().includes("windows")||!this.isMac()&&!this.isLinux()},isBitrixMobile:function e(){return navigator.userAgent.toLowerCase().includes("bitrixmobile")},isBitrixDesktop:function e(){return navigator.userAgent.toLowerCase().includes("bitrixdesktop")},getDesktopVersion:function e(){if(typeof this.getDesktopVersionStatic!=="undefined"){return this.getDesktopVersionStatic}if(typeof BXDesktopSystem==="undefined"){return 0}var t=BXDesktopSystem.GetProperty("versionParts");this.getDesktopVersionStatic=t[3];return this.getDesktopVersionStatic},isDesktopFeatureEnabled:function e(t){if(typeof BXDesktopSystem==="undefined"){return false}if(typeof BXDesktopSystem.FeatureEnabled!=="function"){return false}return!!BXDesktopSystem.FeatureEnabled(t)},isMobile:function e(){return this.isAndroid()||this.isIos()||this.isBitrixMobile()},isIos:function e(){return navigator.userAgent.toLowerCase().includes("iphone")||navigator.userAgent.toLowerCase().includes("ipad")},getIosVersion:function e(){if(!this.isIos()){return null}var t=navigator.userAgent.toLowerCase().match(/(iphone|ipad)(.+)(OS\s([0-9]+)([_.]([0-9]+))?)/i);if(!t||!t[4]){return null}return parseFloat(t[4]+"."+(t[6]?t[6]:0))},isAndroid:function e(){return navigator.userAgent.toLowerCase().includes("android")},openNewPage:function e(t){if(!t){return false}if(this.isBitrixMobile()){if(typeof BX.MobileTools!=="undefined"){var n=BX.MobileTools.resolveOpenFunction(t);if(n){n();return true}}app.openNewPage(t)}else{window.open(t,"_blank")}return true}},device:{isDesktop:function e(){return!this.isMobile()},isMobile:function e(){if(typeof this.isMobileStatic!=="undefined"){return this.isMobileStatic}this.isMobileStatic=navigator.userAgent.toLowerCase().includes("android")||navigator.userAgent.toLowerCase().includes("webos")||navigator.userAgent.toLowerCase().includes("iphone")||navigator.userAgent.toLowerCase().includes("ipad")||navigator.userAgent.toLowerCase().includes("ipod")||navigator.userAgent.toLowerCase().includes("blackberry")||navigator.userAgent.toLowerCase().includes("windows phone");return this.isMobileStatic},orientationHorizontal:"horizontal",orientationPortrait:"portrait",getOrientation:function e(){if(!this.isMobile()){return this.orientationHorizontal}return Math.abs(window.orientation)===0?this.orientationPortrait:this.orientationHorizontal}},types:{isString:function e(t){return t===""?true:t?typeof t=="string"||t instanceof String:false},isArray:function e(t){return t&&Object.prototype.toString.call(t)=="[object Array]"},isFunction:function e(t){return t===null?false:typeof t=="function"||t instanceof Function},isDomNode:function e(t){return t&&babelHelpers["typeof"](t)=="object"&&"nodeType"in t},isDate:function e(t){return t&&Object.prototype.toString.call(t)=="[object Date]"},isPlainObject:function e(t){if(!t||babelHelpers["typeof"](t)!=="object"||t.nodeType){return false}var n=Object.prototype.hasOwnProperty;try{if(t.constructor&&!n.call(t,"constructor")&&!n.call(t.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}var r;return typeof r==="undefined"||n.call(t,r)},isUuidV4:function e(t){if(!this.isString(t)){return false}var n=new RegExp(/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i);return t.search(n)===0}},dialog:{getChatIdByDialogId:function e(t){if(!this.isChatId(t)){return 0}return parseInt(t.toString().substr(4))},isChatId:function e(t){return t.toString().startsWith("chat")},isEmptyDialogId:function e(t){if(!t){return true}if(typeof t==="string"){if(t==="chat0"||t==="0"){return true}}return false}},text:{quote:function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(typeof t!=="string"){return t.toString()}if(!i){i=BX.message}t=t.replace(/\[USER=([0-9]{1,})](.*?)\[\/USER]/gi,(function(e,t,n){return n}));t=t.replace(/\[CHAT=(imol\|)?([0-9]{1,})](.*?)[\/CHAT]/gi,(function(e,t,n,r){return r}));t=t.replace(/\[CALL(?:=(.+?))?](.+?)?\[\/CALL]/gi,(function(e,t,n){return n?n:t}));t=t.replace(/\[ATTACH=([0-9]{1,})]/gi,(function(e,t,n){return t===1e4?"":"["+i["IM_UTILS_TEXT_ATTACH"]+"] "}));t=t.replace(/\[RATING=([1-5]{1})]/gi,(function(e,t){return"["+i.IM_F_RATING+"] "}));t=t.replace(/&nbsp;/gi," ");t=t.replace(/\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D([\s\S]*?)\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D/gim,"["+i["IM_UTILS_TEXT_QUOTE"]+"]");t=t.replace(/^(>>(.*)\n)/gi,"["+i["IM_UTILS_TEXT_QUOTE"]+"]\n");if(n&&n.FILE_ID&&n.FILE_ID.length>0){var s=[];n.FILE_ID.forEach((function(e){if(r[e].type==="image"){s.push(i["IM_UTILS_TEXT_IMAGE"])}else if(r[e].type==="audio"){s.push(i["IM_UTILS_TEXT_AUDIO"])}else if(r[e].type==="video"){s.push(i["IM_UTILS_TEXT_VIDEO"])}else{s.push(r[e].name)}}));if(s.length<=0){s.push(i["IM_UTILS_TEXT_FILE"])}t=s.join("\n")+t}else if(n&&n.ATTACH&&n.ATTACH.length>0){t="["+i["IM_UTILS_TEXT_ATTACH"]+"]\n"+t}if(t.length<=0){t=i["IM_UTILS_TEXT_DELETED"]}return t.trim()},purify:function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(typeof t!=="string"){return t.toString()}if(!i){i=BX.message}t=t.trim();if(t.startsWith("/me")){t=t.substr(4)}else if(t.startsWith("/loud")){t=t.substr(6)}t=t.replace(/<br><br \/>/gi,"<br />");t=t.replace(/<br \/><br>/gi,"<br />");var s=[];t=t.replace(/\[CODE\](<br \/>)?([\s\S]*?)\[\/CODE\]/gi,(function(e,t,n){var r=s.length;s.push(n);return"####REPLACEMENT_CODE_"+r+"####"}));t=t.replace(/\[PUT(?:=(?:.+?))?\](?:.+?)?\[\/PUT]/gi,(function(e){return e.replace(/\[PUT(?:=(.+))?\](.+?)?\[\/PUT]/gi,(function(e,t,n){return n?n:t}))}));t=t.replace(/\[SEND(?:=(?:.+?))?\](?:.+?)?\[\/SEND]/gi,(function(e){return e.replace(/\[SEND(?:=(.+))?\](.+?)?\[\/SEND]/gi,(function(e,t,n){return n?n:t}))}));t=t.replace(/\[b]([^[]*(?:\[(?!b]|\/b])[^[]*)*)\[\/b]/gi,(function(e,t){return t}));t=t.replace(/\[u]([^[]*(?:\[(?!u]|\/u])[^[]*)*)\[\/u]/gi,(function(e,t){return t}));t=t.replace(/\[i]([^[]*(?:\[(?!i]|\/i])[^[]*)*)\[\/i]/gi,(function(e,t){return t}));t=t.replace(/\[url\]([\s\S]*?)\[\/url\]/gi,"$1");t=t.replace(/\[RATING=([1-5]{1})]/gi,(function(){return"["+i["IM_UTILS_TEXT_RATING"]+"] "}));t=t.replace(/\[ATTACH=([0-9]{1,})]/gi,(function(){return"["+i["IM_UTILS_TEXT_ATTACH"]+"] "}));t=t.replace(/\[USER=([0-9]+)( REPLACE)?](.*?)\[\/USER]/gi,"$3");t=t.replace(/\[CHAT=([0-9]{1,})](.*?)\[\/CHAT]/gi,"$2");t=t.replace(/\[context=(chat\d+|\d+:\d+)\/(\d+)\]([\s\S]*?)\[\/context\]/gi,(function(e,t,n,r){return r}));t=t.replace(/\[SEND(?:=(?:.+?))?\](.+?)?\[\/SEND]/gi,"$1");t=t.replace(/\[PUT(?:=(?:.+?))?\](.+?)?\[\/PUT]/gi,"$1");t=t.replace(/\[CALL=(.*?)](.*?)\[\/CALL\]/gi,"$2");t=t.replace(/\[PCH=([0-9]{1,})](.*?)\[\/PCH]/gi,"$2");t=t.replace(/\[size=(\d+)\]([\s\S]*?)\[\/size\]/gi,"$2");t=t.replace(/\[color=#([0-9a-f]{3}|[0-9a-f]{6})\]([\s\S]*?)\[\/color\]/gi,"$2");t=t.replace(/<img.*?data-code="([^"]*)".*?>/gi,"$1");t=t.replace(/<span.*?title="([^"]*)".*?>.*?<\/span>/gi,"($1)");t=t.replace(/<img.*?title="([^"]*)".*?>/gi,"($1)");t=t.replace(/\[ATTACH=([0-9]{1,})]/gi,(function(e,t,n){return t===1e4?"":"["+i["IM_UTILS_TEXT_ATTACH"]+"] "}));t=t.replace(/<s>([^"]*)<\/s>/gi," ");t=t.replace(/\[s]([^"]*)\[\/s]/gi," ");t=t.replace(/\[icon=([^\]]*)]/gi,(function(e){var t=e.match(/title=(.*[^\s\]])/i);if(t&&t[1]){t=t[1];if(t.indexOf("width=")>-1){t=t.substr(0,t.indexOf("width="))}if(t.indexOf("height=")>-1){t=t.substr(0,t.indexOf("height="))}if(t.indexOf("size=")>-1){t=t.substr(0,t.indexOf("size="))}if(t){t="("+t.trim()+")"}}else{t="("+i["IM_UTILS_TEXT_ICON"]+")"}return t}));s.forEach((function(e,n){t=t.replace("####REPLACEMENT_CODE_"+n+"####",e)}));t=t.replace(/\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D([\s\S]*?)\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D\x2D/gim,"["+i["IM_UTILS_TEXT_QUOTE"]+"] ");t=t.replace(/^(>>(.*)(\n)?)/gim,"["+i["IM_UTILS_TEXT_QUOTE"]+"] ");t=t.replace(/<\/?[^>]+>/gi,"");if(n&&n.FILE_ID&&n.FILE_ID.length>0){var o=[];if(babelHelpers["typeof"](r)==="object"){n.FILE_ID.forEach((function(e){if(typeof r[e]==="undefined");else if(r[e].type==="image"){o.push(i["IM_UTILS_TEXT_IMAGE"])}else if(r[e].type==="audio"){o.push(i["IM_UTILS_TEXT_AUDIO"])}else if(r[e].type==="video"){o.push(i["IM_UTILS_TEXT_VIDEO"])}else{o.push(r[e].name)}}))}if(o.length<=0){o.push(i["IM_UTILS_TEXT_FILE"])}t=o.join(" ")+t}else if(n&&(n.WITH_ATTACH||n.ATTACH&&n.ATTACH.length>0)){t="["+i["IM_UTILS_TEXT_ATTACH"]+"] "+t}else if(n&&n.WITH_FILE){t="["+i["IM_UTILS_TEXT_FILE"]+"] "+t}if(t.length<=0){t=i["IM_UTILS_TEXT_DELETED"]}return t.replace("\n"," ").trim()},decode:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!t){return t}var i=true;t=t.toString().trim();t=r.text.htmlspecialchars(t);if(t.startsWith("/me")){t="<i>".concat(t.substr(4),"</i>")}else if(t.startsWith("/loud")){t="<b>".concat(t.substr(6),"</b>")}var s="&gt;&gt;";if(t.indexOf(s)>=0){var o=t.split("\n");for(var a=0;a<o.length;a++){if(o[a].startsWith(s)){o[a]=o[a].replace(s,'<div class="bx-im-message-content-quote"><div class="bx-im-message-content-quote-wrap">');while(++a<o.length&&o[a].startsWith(s)){o[a]=o[a].replace(s,"")}o[a-1]+="</div></div><br>"}}t=o.join("<br />")}t=t.replace(/\n/gi,"<br />");t=t.replace(/\t/gi,"&nbsp;&nbsp;&nbsp;&nbsp;");t=this.decodeBbCode(t,i);t=t.replace(/------------------------------------------------------<br \/>(.*?)\[(.*?)\](?: #(?:(?:chat)?\d+|\d+:\d+)\/\d+)?<br \/>(.*?)------------------------------------------------------(<br \/>)?/g,(function(e,t,n,r,i,s){return(s>0?"<br>":"")+'<div class="bx-im-message-content-quote"><div class="bx-im-message-content-quote-wrap"><div class="bx-im-message-content-quote-name"><span class="bx-im-message-content-quote-name-text">'+t+'</span><span class="bx-im-message-content-quote-name-time">'+n+"</span></div>"+r+"</div></div><br />"}));t=t.replace(/------------------------------------------------------<br \/>(.*?)------------------------------------------------------(<br \/>)?/g,(function(e,t,n,r,i){return(i>0?"<br>":"")+'<div class="bx-im-message-content-quote"><div class="bx-im-message-content-quote-wrap">'+t+"</div></div><br />"}));if(n.skipImages!==true){var l=false;t=t.replace(/(.)?((https|http):\/\/([\S]+)\.(jpg|jpeg|png|gif|webp)(\?[\S]+)?)/gi,(function(e,t,n,r){if(t&&![">","]"].includes(t)||!n.match(/(\.(jpg|jpeg|png|gif|webp)\?|\.(jpg|jpeg|png|gif|webp)$)/i)||n.toLowerCase().indexOf("/docs/pub/")>0||n.toLowerCase().indexOf("logout=yes")>0){return e}else{l=true;return(t?t:"")+'<span class="bx-im-element-file-image"><img src="'+n+'" class="bx-im-element-file-image-source-text" onerror="Utils.hideErrorImage(this)"></span>'}}));if(l){t=t.replace(/<\/span>(\n?)<\/a>(\n?)<br(\s\/?)>/gi,"</span></a>").replace(/<\/span>(\n?)(\n?)<br(\s\/?)>/gi,"</span>")}{t=t.replace(/^(\s*<img\s+src=[^>]+?data-code=[^>]+?data-definition="UHD"[^>]+?style="width:)(\d+)(px[^>]+?height:)(\d+)(px[^>]+?class="bx-smile"\s*\/?>\s*)$/,(function e(t,n,r,i,s,o){return n+parseInt(r,10)*1.7+i+parseInt(s,10)*1.7+o}))}}if(t.substr(-6)=="<br />"){t=t.substr(0,t.length-6)}t=t.replace(/<br><br \/>/gi,"<br />");t=t.replace(/<br \/><br>/gi,"<br />");return t},decodeBbCode:function e(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var s=[];n=n.replace(/\[PUT(?:=(.+?))?\](.+?)?\[\/PUT\]/gi,(function(e){var t=s.length;s.push(e);return"####REPLACEMENT_PUT_"+t+"####"}));var o=[];n=n.replace(/\[SEND(?:=(.+?))?\](.+?)?\[\/SEND\]/gi,(function(e){var t=o.length;o.push(e);return"####REPLACEMENT_SEND_"+t+"####"}));var a=[];n=n.replace(/\[CODE\]\n?([\s\S]*?)\[\/CODE\]/gi,(function(e,t){var n=a.length;a.push(t);return"####REPLACEMENT_CODE_"+n+"####"}));n=n.replace(/\[url(?:=([^[\]]+))?\]([\s\S]*?)\[\/url\]/gi,(function(e,n,i){var s=t.Text.decode(n||i);if(!r.text.checkUrl(s)){return i}return t.Dom.create({tag:"a",attrs:{href:s,target:"_blank"},html:i}).outerHTML}));n=n.replace(/\[url(?:=([\s\S]+?[^[\]]))?\]([\s\S]*?)\[\/url\]/gi,(function(e,n,i){var s=t.Text.decode(n||i);if(!r.text.checkUrl(s)){return i}if(!s.slice(s.lastIndexOf("[")).includes("]")){if(i.startsWith("]")){s="".concat(s,"]");i=i.slice(1)}else if(i.startsWith("=")){var o=t.Text.decode(i.slice(1,i.lastIndexOf("]")));s="".concat(s,"]=").concat(o);i=i.slice(i.lastIndexOf("]")+1)}}return t.Dom.create({tag:"a",attrs:{href:s,target:"_blank"},html:i}).outerHTML}));n=n.replace(/\[LIKE\]/gi,'<span class="bx-smile bx-im-smile-like"></span>');n=n.replace(/\[DISLIKE\]/gi,'<span class="bx-smile bx-im-smile-dislike"></span>');n=n.replace(/\[BR\]/gi,"<br/>");n=n.replace(/\[b]([^[]*(?:\[(?!b]|\/b])[^[]*)*)\[\/b]/gi,(function(e,t){return"<b>"+t+"</b>"}));n=n.replace(/\[u]([^[]*(?:\[(?!u]|\/u])[^[]*)*)\[\/u]/gi,(function(e,t){return"<u>"+t+"</u>"}));n=n.replace(/\[i]([^[]*(?:\[(?!i]|\/i])[^[]*)*)\[\/i]/gi,(function(e,t){return"<i>"+t+"</i>"}));n=n.replace(/\[s]([^[]*(?:\[(?!s]|\/s])[^[]*)*)\[\/s]/gi,(function(e,t){return"<s>"+t+"</s>"}));n=n.replace(/\[size=(\d+)(?:pt|px)?\]([\s\S]*?)\[\/size\]/gi,(function(e,n,r){return t.Dom.create({tag:"span",style:{fontSize:n+"px"},html:r}).outerHTML}));n=n.replace(/\[color=#([0-9a-f]{3}|[0-9a-f]{6})\]([\s\S]*?)\[\/color\]/gi,(function(e,n,r){return t.Dom.create({tag:"span",style:{color:"#"+n},html:r}).outerHTML}));n=n.replace(/\[USER=([0-9]+)( REPLACE)?](.*?)\[\/USER]/gi,(function(e,n,i,s){n=Number.parseInt(n,10);if(!t.Type.isNumber(n)||n===0){return s}if(i||!s){var o=BX.Messenger.Application.Core.controller.store.getters["users/get"](n);if(o){s=r.text.htmlspecialchars(o.name)}}else{s=t.Text.decode(s)}if(!s){s="User ".concat(n)}return BX.Dom.create({tag:"span",attrs:{className:"bx-im-mention","data-type":"USER","data-value":n},text:s}).outerHTML}));n=n.replace(/\[RATING\=([1-5]{1})\]/gi,(function(e,t){return BX.MessengerCommon.linesVoteHeadNodes(0,t,false).outerHTML}));n=n.replace(/\[CHAT=(imol\|)?([0-9]{1,})\](.*?)\[\/CHAT\]/gi,(function(e,n,r,i){r=parseInt(r);if(r<=0){return i}if(n){return t.Dom.create({tag:"span",attrs:{className:"bx-im-mention","data-type":"OPENLINES","data-value":r},text:i}).outerHTML}return t.Dom.create({tag:"span",attrs:{className:"bx-im-mention","data-type":"CHAT","data-value":r},text:i}).outerHTML}));n=n.replace(/\[context=(chat\d+|\d+:\d+)\/(\d+)\]([\s\S]*?)\[\/context\]/gi,(function(e,t,n,r){return r}));n=n.replace(/\[CALL(?:=(.+?))?\](.+?)?\[\/CALL\]/gi,(function(e,t,n){return'<span class="bx-im-mention" data-type="CALL" data-value="'+r.text.htmlspecialchars(t)+'">'+n+"</span>"}));n=n.replace(/\[PCH=([0-9]{1,})\](.*?)\[\/PCH\]/gi,(function(e,t,n){return n}));var l=0;if(i){l=n.replace(/\[icon\=([^\]]*)\]/gi,"").trim().length}n=n.replace(/\[icon\=([^\]]*)\]/gi,(function(e){var t=e.match(/icon\=(\S+[^\s.,> )\];\'\"!?])/i);if(t&&t[1]){t=t[1]}else{return""}var n={src:t,border:0};var s=e.match(/size\=(\d+)/i);if(s&&s[1]){n["width"]=s[1];n["height"]=s[1]}else{var o=e.match(/width\=(\d+)/i);if(o&&o[1]){n["width"]=o[1]}var a=e.match(/height\=(\d+)/i);if(a&&a[1]){n["height"]=a[1]}if(n["width"]&&!n["height"]){n["height"]=n["width"]}else if(n["height"]&&!n["width"]){n["width"]=n["height"]}else if(n["height"]&&n["width"]);else{n["width"]=20;n["height"]=20}}n["width"]=n["width"]>100?100:n["width"];n["height"]=n["height"]>100?100:n["height"];if(i&&l===0&&n["width"]===n["height"]&&n["width"]===20){n["width"]=40;n["height"]=40}var u=e.match(/title\=(.*[^\s\]])/i);if(u&&u[1]){u=u[1];if(u.indexOf("width=")>-1){u=u.substr(0,u.indexOf("width="))}if(u.indexOf("height=")>-1){u=u.substr(0,u.indexOf("height="))}if(u.indexOf("size=")>-1){u=u.substr(0,u.indexOf("size="))}if(u){n["title"]=r.text.htmlspecialchars(u).trim();n["alt"]=n["title"]}}var c="";for(var f in n){if(n.hasOwnProperty(f)){c+=f+'="'+n[f]+'" '}}return'<img class="bx-smile bx-icon" '+c+">"}));o.forEach((function(e,t){n=n.replace("####REPLACEMENT_SEND_"+t+"####",e)}));n=n.replace(/\[SEND(?:=(?:.+?))?\](?:.+?)?\[\/SEND]/gi,(function(e){return e.replace(/\[SEND(?:=(.+))?\](.+?)?\[\/SEND]/gi,(function(e,t,n){var r="";n=n?n:t;t=(t?t:n).replace("<br />","\n");if(n){n=n.replace(/<([\w]+)[^>]*>(.*?)<\\1>/i,"$2",n);n=n.replace(/\[([\w]+)[^\]]*\](.*?)\[\/\1\]/i,"$2",n);t=t.split("####REPLACEMENT_PUT_").join("####REPLACEMENT_SP_");r="\x3c!--IM_COMMAND_START--\x3e"+'<span class="bx-im-message-command-wrap">'+'<span class="bx-im-message-command" data-entity="send">'+n+"</span>"+'<span class="bx-im-message-command-data">'+t+"</span>"+"</span>"+"\x3c!--IM_COMMAND_END--\x3e"}else{r=n}return r}))}));s.forEach((function(e,t){n=n.replace("####REPLACEMENT_PUT_"+t+"####",e)}));n=n.replace(/\[PUT(?:=(?:.+?))?\](?:.+?)?\[\/PUT]/gi,(function(e){return e.replace(/\[PUT(?:=(.+))?\](.+?)?\[\/PUT]/gi,(function(e,t,n){var r="";n=n?n:t;t=(t?t:n).replace("<br />","\n");if(n){n=n.replace(/<([\w]+)[^>]*>(.*?)<\/\1>/i,"$2",n);n=n.replace(/\[([\w]+)[^\]]*\](.*?)\[\/\1\]/i,"$2",n);r="\x3c!--IM_COMMAND_START--\x3e"+'<span class="bx-im-message-command-wrap">'+'<span class="bx-im-message-command" data-entity="put">'+n+"</span>"+'<span class="bx-im-message-command-data">'+t+"</span>"+"</span>"+"\x3c!--IM_COMMAND_END--\x3e"}else{r=n}return r}))}));a.forEach((function(e,t){n=n.replace("####REPLACEMENT_CODE_"+t+"####",'<div class="bx-im-message-content-code">'+e+"</div>")}));if(o.length>0){do{o.forEach((function(e,t){n=n.replace("####REPLACEMENT_SEND_"+t+"####",e)}))}while(n.includes("####REPLACEMENT_SEND_"))}n=n.split("####REPLACEMENT_SP_").join("####REPLACEMENT_PUT_");if(s.length>0){do{s.forEach((function(e,t){n=n.replace("####REPLACEMENT_PUT_"+t+"####",e)}))}while(n.includes("####REPLACEMENT_PUT_"))}return n},checkUrl:function e(n){var r=["http:","https:","ftp:","file:","tel:","callto:","mailto:","skype:","viber:"];var i=["/"].concat(r).find((function(e){return n.startsWith(e)}));if(!i){return false}var s=t.Dom.create({tag:"a",attrs:{href:n}});return r.indexOf(s.protocol)>-1},htmlspecialchars:function e(t){if(typeof t!=="string"){return t}return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},htmlspecialcharsback:function e(t){if(typeof t!=="string"){return t}return t.replace(/\&quot;/g,'"').replace(/&#039;/g,"'").replace(/\&lt;/g,"<").replace(/\&gt;/g,">").replace(/\&amp;/g,"&").replace(/\&nbsp;/g," ")},getLocalizeForNumber:function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"en";var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(!i){i=BX.message}var s=1;n=parseInt(n);if(n<0){n=n*-1}if(r){switch(r){case"de":case"en":s=n!==1?1:0;break;case"ru":case"ua":s=n%10===1&&n%100!==11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2;break}}return i[t+"_PLURAL_"+s]}},date:{getFormatType:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:n.DateFormat["default"];var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!r){r=BX.message}var i=[];if(t===n.DateFormat.groupTitle){i=[["tommorow","tommorow"],["today","today"],["yesterday","yesterday"],["",r["IM_UTILS_FORMAT_DATE"]]]}else if(t===n.DateFormat.message){i=[["",r["IM_UTILS_FORMAT_TIME"]]]}else if(t===n.DateFormat.recentTitle){i=[["tommorow","today"],["today","today"],["yesterday","yesterday"],["",r["IM_UTILS_FORMAT_DATE_RECENT"]]]}else if(t===n.DateFormat.recentLinesTitle){i=[["tommorow","tommorow"],["today","today"],["yesterday","yesterday"],["",r["IM_UTILS_FORMAT_DATE_RECENT"]]]}else if(t===n.DateFormat.readedTitle){i=[["tommorow","tommorow, "+r["IM_UTILS_FORMAT_TIME"]],["today","today, "+r["IM_UTILS_FORMAT_TIME"]],["yesterday","yesterday, "+r["IM_UTILS_FORMAT_TIME"]],["",r["IM_UTILS_FORMAT_READED"]]]}else if(t===n.DateFormat.vacationTitle){i=[["",r["IM_UTILS_FORMAT_DATE_SHORT"]]]}else{i=[["tommorow","tommorow, "+r["IM_UTILS_FORMAT_TIME"]],["today","today, "+r["IM_UTILS_FORMAT_TIME"]],["yesterday","yesterday, "+r["IM_UTILS_FORMAT_TIME"]],["",r["IM_UTILS_FORMAT_DATE_TIME"]]]}return i},getDateFunction:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(this.dateFormatFunction){return this.dateFormatFunction}this.dateFormatFunction=Object.create(BX.Main.Date);if(t){this.dateFormatFunction._getMessage=function(e){return t[e]}}return this.dateFormatFunction},format:function e(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!e){e=this.getFormatType(n.DateFormat["default"],r)}return this.getDateFunction(r).format(e,t)},cast:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Date;var r=n;if(t instanceof Date){r=t}else if(typeof t==="string"){r=new Date(t)}else if(typeof t==="number"){r=new Date(t*1e3)}if(r instanceof Date&&Number.isNaN(r.getTime())){r=n}return r}},object:{countKeys:function e(t){var n=0;for(var r in t){if(t.hasOwnProperty(r)){n++}}return n}},user:{getLastDateText:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!t){return""}var s=r.date.getDateFunction(i);if(!i){i=BX.message||{}}var o="";var a={};if(t.bot||t.network){o=""}else if(t.absent&&!this.isMobileActive(t,i)){a=this.getOnlineStatus(t,i);o=i["IM_STATUS_VACATION_TITLE"].replace("#DATE#",s.format(r.date.getFormatType(n.DateFormat.vacationTitle,i),t.absent.getTime()/1e3));if(a.isOnline&&t.idle){o=i["IM_STATUS_AWAY_TITLE"].replace("#TIME#",this.getIdleText(t,i))+". "+o}else if(a.isOnline&&!a.lastSeenText){o=a.statusText+". "+o}else if(a.lastSeenText){if(!r.platform.isMobile()){o=o+". "+i["IM_LAST_SEEN_"+(t.gender==="F"?"F":"M")].replace("#POSITION#",o).replace("#LAST_SEEN#",a.lastSeenText)}}}else if(t.lastActivityDate){a=this.getOnlineStatus(t,i);if(a.isOnline&&t.idle&&!this.isMobileActive(t,i)){o=i["IM_STATUS_AWAY_TITLE"].replace("#TIME#",this.getIdleText(t,i))}else if(a.isOnline&&!a.lastSeenText){if(r.platform.isMobile()&&this.isMobileActive(t,i)){o=i["IM_STATUS_MOBILE"]}else{o=a.statusText}}else if(a.lastSeenText){if(r.platform.isMobile()){o=i["IM_LAST_SEEN_SHORT_"+(t.gender==="F"?"F":"M")].replace("#LAST_SEEN#",a.lastSeenText)}else{o=i["IM_LAST_SEEN_"+(t.gender==="F"?"F":"M")].replace("#POSITION#",o).replace("#LAST_SEEN#",a.lastSeenText)}}}return o},getIdleText:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!t){return""}if(!t.idle){return""}return r.date.getDateFunction(n).format([["s60","sdiff"],["i60","idiff"],["H24","Hdiff"],["","ddiff"]],t.idle)},getOnlineStatus:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i={isOnline:false,status:"offline",statusText:n?n.IM_STATUS_OFFLINE:"offline",lastSeen:t.lastActivityDate,lastSeenText:""};if(!t.lastActivityDate||t.lastActivityDate.getTime()===0){return i}var s=new Date;i.isOnline=s.getTime()-t.lastActivityDate.getTime()<=this.getOnlineLimit(n)*1e3;i.status=i.isOnline?t.status:"offline";i.statusText=n&&n["IM_STATUS_"+i.status.toUpperCase()]?n["IM_STATUS_"+i.status.toUpperCase()]:i.status;if(n&&t.lastActivityDate.getTime()>0&&s.getTime()-t.lastActivityDate.getTime()>300*1e3){i.lastSeenText=r.date.getDateFunction(n).formatLastActivityDate(t.lastActivityDate)}return i},isMobileActive:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!t){return false}if(!n){n=BX.message||{}}return t.mobileLastDate&&new Date-t.mobileLastDate<this.getOnlineLimit(n)*1e3&&t.lastActivityDate-t.mobileLastDate<300*1e3},getOnlineLimit:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!t){t=BX.message||{}}return t.LIMIT_ONLINE?parseInt(t.LIMIT_ONLINE):15*60}},isDarkColor:function e(t){if(!t||!t.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)){return false}if(t.length===4){t=t.replace(/#([A-Fa-f0-9])/gi,"$1$1")}else{t=t.replace(/#([A-Fa-f0-9])/gi,"$1")}t=t.toLowerCase();var n=["#17a3ea","#00aeef","#00c4fb","#47d1e2","#75d900","#ffab00","#ff5752","#468ee5","#1eae43"];if(n.includes("#"+t)){return true}var r=parseInt(t,16);var i=r>>16&255;var s=r>>8&255;var o=r&255;var a=(i*299+s*587+o*114)/1e3;return a<128},hashCode:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=0;if(babelHelpers["typeof"](t)==="object"&&t){t=JSON.stringify(t)}else if(typeof t!=="string"){t=t.toString()}if(typeof t!=="string"){return n}for(var r=0;r<t.length;r++){var i=t.charCodeAt(r);n=(n<<5)-n+i;n=n&n}return n},hideErrorImage:function e(t){if(t.parentNode){t.parentNode.innerHTML='<a href="'+encodeURI(t.src)+'" target="_blank">'+t.src+"</a>"}return true},versionCompare:function e(t,n){var r=/^([\d+\.]+)$/;if(!r.test(t)||!r.test(n)){return NaN}t=t.toString().split(".");n=n.toString().split(".");if(t.length<n.length){while(t.length<n.length){t.push(0)}}else if(n.length<t.length){while(n.length<t.length){n.push(0)}}for(var i=0;i<t.length;i++){if(t[i]>n[i]){return 1}else if(t[i]<n[i]){return-1}}return 0},throttle:function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this;var i=null;var s=null;var o=function e(){t.apply(r,s);i=null};return function(){if(!i){s=arguments;i=setTimeout(o,n)}}},debounce:function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this;var i=null;var s=null;var o=function e(){t.apply(r,s)};return function(){s=arguments;clearTimeout(i);i=setTimeout(o,n)}},getLogTrackingParams:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=[];var r=t.name,i=r===void 0?"tracking":r,s=t.data,o=s===void 0?[]:s,a=t.dialog,l=a===void 0?null:a,u=t.message,c=u===void 0?null:u,f=t.files,d=f===void 0?null:f;i=encodeURIComponent(i);if(o&&!(o instanceof Array)&&babelHelpers["typeof"](o)==="object"){var h=[];for(var p in o){if(o.hasOwnProperty(p)){h.push(encodeURIComponent(p)+"="+encodeURIComponent(o[p]))}}o=h}else if(!o instanceof Array){o=[]}if(l){n.push("timType="+l.type);if(l.type==="lines"){n.push("timLinesType="+l.entityId.split("|")[0])}}if(d){var m="file";if(d instanceof Array&&d[0]){m=d[0].type}else{m=d.type}n.push("timMessageType="+m)}else if(c){n.push("timMessageType=text")}if(this.platform.isBitrixMobile()){n.push("timDevice=bitrixMobile")}else if(this.platform.isBitrixDesktop()){n.push("timDevice=bitrixDesktop")}else if(this.platform.isIos()||this.platform.isAndroid()){n.push("timDevice=mobile")}else{n.push("timDevice=web")}return i+(o.length?"&"+o.join("&"):"")+(n.length?"&"+n.join("&"):"")}};e.Utils=r})(this.BX.Messenger.Lib=this.BX.Messenger.Lib||{},BX,BX.Messenger.Const);this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e,t,n,r,i,s,o,a){"use strict";
/**
	 * Bitrix Messenger
	 * Application model (Vuex Builder model)
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var l=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"getName",value:function e(){return"application"}},{key:"getState",value:function e(){return{common:{host:this.getVariable("common.host",location.protocol+"//"+location.host),siteId:this.getVariable("common.siteId","default"),userId:this.getVariable("common.userId",0),languageId:this.getVariable("common.languageId","en")},dialog:{dialogId:this.getVariable("dialog.dialogId","0"),chatId:this.getVariable("dialog.chatId",0),diskFolderId:this.getVariable("dialog.diskFolderId",0),messageLimit:this.getVariable("dialog.messageLimit",20),enableReadMessages:this.getVariable("dialog.enableReadMessages",true),messageExtraCount:0},disk:{enabled:false,maxFileSize:5242880},call:{serverEnabled:false,maxParticipants:24},mobile:{keyboardShow:false},device:{type:this.getVariable("device.type",a.DeviceType.desktop),orientation:this.getVariable("device.orientation",a.DeviceOrientation.portrait)},options:{quoteEnable:this.getVariable("options.quoteEnable",true),quoteFromRight:this.getVariable("options.quoteFromRight",true),autoplayVideo:this.getVariable("options.autoplayVideo",true),darkBackground:this.getVariable("options.darkBackground",false),showSmiles:false},error:{active:false,code:"",description:""}}}},{key:"getStateSaveException",value:function e(){return Object.assign({common:this.getVariable("saveException.common",null),dialog:this.getVariable("saveException.dialog",null),mobile:this.getVariable("saveException.mobile",null),device:this.getVariable("saveException.device",null),error:this.getVariable("saveException.error",null)})}},{key:"getActions",value:function e(){var t=this;return{set:function e(n,r){n.commit("set",t.validate(r))},showSmiles:function e(t,n){t.commit("showSmiles")},hideSmiles:function e(t,n){t.commit("hideSmiles")}}}},{key:"getMutations",value:function e(){var t=this;return{set:function e(n,r){var i=false;for(var s in r){if(!r.hasOwnProperty(s)){continue}for(var o in r[s]){if(!r[s].hasOwnProperty(o)){continue}n[s][o]=r[s][o];i=true}}if(i&&t.isSaveNeeded(r)){t.saveState(n)}},increaseDialogExtraCount:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=n.count,i=r===void 0?1:r;t.dialog.messageExtraCount+=i},decreaseDialogExtraCount:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=n.count,i=r===void 0?1:r;var s=t.dialog.messageExtraCount-i;if(s<=0){s=0}t.dialog.messageExtraCount=s},clearDialogExtraCount:function e(t){t.dialog.messageExtraCount=0},showSmiles:function e(t){t.options.showSmiles=true},hideSmiles:function e(t){t.options.showSmiles=false}}}},{key:"validate",value:function e(t){var n={};if(babelHelpers["typeof"](t.common)==="object"&&t.common){n.common={};if(typeof t.common.userId==="number"){n.common.userId=t.common.userId}if(typeof t.common.languageId==="string"){n.common.languageId=t.common.languageId}}if(babelHelpers["typeof"](t.dialog)==="object"&&t.dialog){n.dialog={};if(typeof t.dialog.dialogId==="number"){n.dialog.dialogId=t.dialog.dialogId.toString();n.dialog.chatId=0}else if(typeof t.dialog.dialogId==="string"){n.dialog.dialogId=t.dialog.dialogId;if(typeof t.dialog.chatId!=="number"){var r=t.dialog.dialogId;if(r.startsWith("chat")){r=t.dialog.dialogId.substr(4)}r=parseInt(r);n.dialog.chatId=!isNaN(r)?r:0;t.dialog.chatId=n.dialog.chatId}}if(typeof t.dialog.chatId==="number"){n.dialog.chatId=t.dialog.chatId}if(typeof t.dialog.diskFolderId==="number"){n.dialog.diskFolderId=t.dialog.diskFolderId}if(typeof t.dialog.messageLimit==="number"){n.dialog.messageLimit=t.dialog.messageLimit}if(typeof t.dialog.messageExtraCount==="number"){n.dialog.messageExtraCount=t.dialog.messageExtraCount}if(typeof t.dialog.enableReadMessages==="boolean"){n.dialog.enableReadMessages=t.dialog.enableReadMessages}}if(babelHelpers["typeof"](t.disk)==="object"&&t.disk){n.disk={};if(typeof t.disk.enabled==="boolean"){n.disk.enabled=t.disk.enabled}if(typeof t.disk.maxFileSize==="number"){n.disk.maxFileSize=t.disk.maxFileSize}}if(babelHelpers["typeof"](t.call)==="object"&&t.call){n.call={};if(typeof t.call.serverEnabled==="boolean"){n.call.serverEnabled=t.call.serverEnabled}if(typeof t.call.maxParticipants==="number"){n.call.maxParticipants=t.call.maxParticipants}}if(babelHelpers["typeof"](t.mobile)==="object"&&t.mobile){n.mobile={};if(typeof t.mobile.keyboardShow==="boolean"){n.mobile.keyboardShow=t.mobile.keyboardShow}}if(babelHelpers["typeof"](t.device)==="object"&&t.device){n.device={};if(typeof t.device.type==="string"&&typeof a.DeviceType[t.device.type]!=="undefined"){n.device.type=t.device.type}if(typeof t.device.orientation==="string"&&typeof a.DeviceOrientation[t.device.orientation]!=="undefined"){n.device.orientation=t.device.orientation}}if(babelHelpers["typeof"](t.error)==="object"&&t.error){if(typeof t.error.active==="boolean"){n.error={active:t.error.active,code:t.error.code.toString()||"",description:t.error.description.toString()||""}}}return n}}]);return t}(s.WidgetVuexBuilderModel);
/**
	 * Bitrix Messenger
	 * Call Application model (Vuex Builder model)
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var u=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"getName",value:function e(){return"conference"}},{key:"getState",value:function e(){return{common:{inited:false,passChecked:true,showChat:false,userCount:0,messageCount:0,userInCallCount:0,state:a.ConferenceStateType.preparation,callEnded:false,showSmiles:false,error:"",conferenceTitle:"",alias:"",permissionsRequested:false,conferenceStarted:null,conferenceStartDate:null,joinWithVideo:null,userReadyToJoin:false,isBroadcast:false,users:[],usersInCall:[],presenters:[],rightPanelMode:a.ConferenceRightPanelMode.hidden},user:{id:-1,hash:""}}}},{key:"getActions",value:function e(){return{showChat:function e(t,n){if(typeof n.newState!=="boolean"){return false}t.commit("showChat",n)},changeRightPanelMode:function e(t,n){if(!a.ConferenceRightPanelMode[n.mode]){return false}t.commit("changeRightPanelMode",n)},setPermissionsRequested:function e(t,n){if(typeof n.status!=="boolean"){return false}t.commit("setPermissionsRequested",n)},setPresenters:function e(t,n){if(!Array.isArray(n.presenters)){n.presenters=[n.presenters]}t.commit("setPresenters",n)},setUsers:function e(t,n){if(!Array.isArray(n.users)){n.users=[n.users]}t.commit("setUsers",n)},removeUsers:function e(t,n){if(!Array.isArray(n.users)){n.users=[n.users]}t.commit("removeUsers",n)},setUsersInCall:function e(t,n){if(!Array.isArray(n.users)){n.users=[n.users]}t.commit("setUsersInCall",n)},removeUsersInCall:function e(t,n){if(!Array.isArray(n.users)){n.users=[n.users]}t.commit("removeUsersInCall",n)},setConferenceTitle:function e(t,n){if(typeof n.conferenceTitle!=="string"){return false}t.commit("setConferenceTitle",n)},setBroadcastMode:function e(t,n){if(typeof n.broadcastMode!=="boolean"){return false}t.commit("setBroadcastMode",n)}}}},{key:"getMutations",value:function e(){var t=this;return{common:function e(t,n){if(typeof n.inited==="boolean"){t.common.inited=n.inited}if(typeof n.passChecked==="boolean"){t.common.passChecked=n.passChecked}if(typeof n.userCount==="number"||typeof n.userCount==="string"){t.common.userCount=parseInt(n.userCount)}if(typeof n.messageCount==="number"||typeof n.messageCount==="string"){t.common.messageCount=parseInt(n.messageCount)}if(typeof n.userInCallCount==="number"||typeof n.userInCallCount==="string"){t.common.userInCallCount=parseInt(n.userInCallCount)}if(typeof n.componentError==="string"){t.common.componentError=n.componentError}if(typeof n.isBroadcast==="boolean"){t.common.isBroadcast=n.isBroadcast}if(Array.isArray(n.presenters)){t.common.presenters=n.presenters}},user:function e(n,r){if(typeof r.id==="number"){n.user.id=r.id}if(typeof r.hash==="string"&&r.hash!==n.user.hash){n.user.hash=r.hash}if(t.isSaveNeeded({user:r})){t.saveState(n)}},showChat:function e(t,n){var r=n.newState;t.common.showChat=r},changeRightPanelMode:function e(t,n){var r=n.mode;t.common.rightPanelMode=r},setPermissionsRequested:function e(t,n){t.common.permissionsRequested=n.status},startCall:function e(t,n){t.common.state=a.ConferenceStateType.call;t.common.callEnded=false},endCall:function e(t,n){t.common.state=a.ConferenceStateType.preparation;t.common.callEnded=true},returnToPreparation:function e(t,n){t.common.state=a.ConferenceStateType.preparation},toggleSmiles:function e(t,n){t.common.showSmiles=!t.common.showSmiles},setError:function e(t,n){if(typeof n.errorCode==="string"){t.common.error=n.errorCode}},setConferenceTitle:function e(t,n){t.common.conferenceTitle=n.conferenceTitle},setBroadcastMode:function e(t,n){t.common.isBroadcast=n.broadcastMode},setAlias:function e(t,n){if(typeof n.alias==="string"){t.common.alias=n.alias}},setJoinType:function e(t,n){if(typeof n.joinWithVideo==="boolean"){t.common.joinWithVideo=n.joinWithVideo}},setConferenceStatus:function e(t,n){if(typeof n.conferenceStarted==="boolean"){t.common.conferenceStarted=n.conferenceStarted}},setConferenceStartDate:function e(t,n){if(n.conferenceStartDate instanceof Date){t.common.conferenceStartDate=n.conferenceStartDate}},setUserReadyToJoin:function e(t,n){t.common.userReadyToJoin=true},setPresenters:function e(t,n){if(n.replace){t.common.presenters=n.presenters}else{n.presenters.forEach((function(e){e=parseInt(e);if(!t.common.presenters.includes(e)){t.common.presenters.push(e)}}))}},setUsers:function e(t,n){n.users.forEach((function(e){e=parseInt(e);if(!t.common.users.includes(e)){t.common.users.push(e)}}))},removeUsers:function e(t,n){t.common.users=t.common.users.filter((function(e){return!n.users.includes(parseInt(e))}))},setUsersInCall:function e(t,n){n.users.forEach((function(e){e=parseInt(e);if(!t.common.usersInCall.includes(e)){t.common.usersInCall.push(e)}}))},removeUsersInCall:function e(t,n){t.common.usersInCall=t.common.usersInCall.filter((function(e){return!n.users.includes(parseInt(e))}))}}}},{key:"getStateSaveException",value:function e(){return{common:{inited:null,state:null,showSmiles:null,userCount:null,messageCount:null,userInCallCount:null,error:null,conferenceTitle:null,alias:null,conferenceStarted:null,conferenceStartDate:null,joinWithVideo:null,userReadyToJoin:null,rightPanelMode:null,presenters:null,users:null}}}}]);return t}(s.WidgetVuexBuilderModel);function c(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var r=0;var i=function e(){};return{s:i,n:function t(){if(r>=e.length)return{done:true};return{done:false,value:e[r++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,o=false,a;return{s:function t(){n=n.call(e)},n:function e(){var t=n.next();s=t.done;return t},e:function e(t){o=true;a=t},f:function e(){try{if(!s&&n["return"]!=null)n["return"]()}finally{if(o)throw a}}}}function f(e,t){if(!e)return;if(typeof e==="string")return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}function d(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h={empty:"empty",equal:"equal",none:"none",found:"found",foundReverse:"foundReverse"};var p=function(e){babelHelpers.inherits(s,e);function s(){babelHelpers.classCallCheck(this,s);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(s).apply(this,arguments))}babelHelpers.createClass(s,[{key:"getName",value:function e(){return"messages"}},{key:"getState",value:function e(){return{created:0,collection:{},mutationType:{},saveMessageList:{},saveFileList:{},saveUserList:{},host:this.getVariable("host",location.protocol+"//"+location.host)}}},{key:"getElementState",value:function e(){return{templateId:0,templateType:"message",placeholderType:0,id:0,chatId:0,authorId:0,date:new Date,text:"",textConverted:"",params:{TYPE:"default",COMPONENT_ID:"bx-im-view-message"},push:false,unread:false,sending:false,error:false,retry:false,blink:false}}},{key:"getGetters",value:function e(){var t=this;return{getMutationType:function e(t){return function(e){if(!t.mutationType[e]){return{initialType:a.MutationType.none,appliedType:a.MutationType.none}}return t.mutationType[e]}},getLastId:function e(t){return function(e){if(!t.collection[e]||t.collection[e].length<=0){return null}var n=0;for(var r=0;r<t.collection[e].length;r++){var i=t.collection[e][r];if(i.push||i.sending||i.id.toString().startsWith("temporary")){continue}if(n<i.id){n=i.id}}return n?n:null}},getMessage:function e(t){return function(e,n){if(!t.collection[e]||t.collection[e].length<=0){return null}for(var r=t.collection[e].length-1;r>=0;r--){if(t.collection[e][r].id===n){return t.collection[e][r]}}return null}},get:function e(t){return function(e){if(!t.collection[e]||t.collection[e].length<=0){return[]}return t.collection[e]}},getBlank:function e(n){return function(e){return t.getElementState()}},getSaveFileList:function e(t){return function(e){return t.saveFileList}},getSaveUserList:function e(t){return function(e){return t.saveUserList}}}}},{key:"getActions",value:function e(){var t=this;return{add:function e(n,r){var i=t.validate(Object.assign({},r));i.params=Object.assign({},t.getElementState().params,i.params);if(r.id){if(n.state.collection[r.chatId]){var s=n.state.collection[r.chatId].length-1;for(var o=s;o>=0;o--){var a=n.state.collection[r.chatId][o];if(a.templateId===r.id){return}}}i.id=r.id}else{i.id="temporary"+(new Date).getTime()+n.state.created}i.templateId=i.id;i.unread=false;n.commit("add",Object.assign({},t.getElementState(),i));if(r.sending!==false){n.dispatch("actionStart",{id:i.id,chatId:i.chatId})}return i.id},actionStart:function e(t,n){if(/^\d+$/.test(n.id)){n.id=parseInt(n.id)}n.chatId=parseInt(n.chatId);i.WidgetVue.nextTick((function(){t.commit("update",{id:n.id,chatId:n.chatId,fields:{sending:true}})}))},actionError:function e(t,n){if(/^\d+$/.test(n.id)){n.id=parseInt(n.id)}n.chatId=parseInt(n.chatId);i.WidgetVue.nextTick((function(){t.commit("update",{id:n.id,chatId:n.chatId,fields:{sending:false,error:true,retry:n.retry!==false}})}))},actionFinish:function e(t,n){if(/^\d+$/.test(n.id)){n.id=parseInt(n.id)}n.chatId=parseInt(n.chatId);i.WidgetVue.nextTick((function(){t.commit("update",{id:n.id,chatId:n.chatId,fields:{sending:false,error:false,retry:false}})}))},set:function e(n,r){if(r instanceof Array){r=r.map((function(e){return t.prepareMessage(e,{host:n.state.host})}))}else{var i=t.prepareMessage(r,{host:n.state.host});(r=[]).push(i)}n.commit("set",{insertType:a.MutationType.set,data:r});return"set is done"},addPlaceholders:function e(n,r){if(r.placeholders instanceof Array){r.placeholders=r.placeholders.map((function(e){return t.prepareMessage(e,{host:n.state.host})}))}else{return false}var i=r.requestMode==="history"?a.MutationType.setBefore:a.MutationType.setAfter;if(i===a.MutationType.setBefore){r.placeholders=r.placeholders.reverse()}n.commit("set",{insertType:i,data:r.placeholders});return r.placeholders[0].id},clearPlaceholders:function e(t,n){t.commit("clearPlaceholders",n)},updatePlaceholders:function e(n,r){if(r.data instanceof Array){r.data=r.data.map((function(e){return t.prepareMessage(e,{host:n.state.host})}))}else{return false}n.commit("updatePlaceholders",r);return true},setAfter:function e(n,r){if(r instanceof Array){r=r.map((function(e){return t.prepareMessage(e)}))}else{var i=t.prepareMessage(r);(r=[]).push(i)}n.commit("set",{insertType:a.MutationType.setAfter,data:r})},setBefore:function e(n,r){if(r instanceof Array){r=r.map((function(e){return t.prepareMessage(e)}))}else{var i=t.prepareMessage(r);(r=[]).push(i)}n.commit("set",{insertType:a.MutationType.setBefore,data:r})},update:function e(n,r){if(/^\d+$/.test(r.id)){r.id=parseInt(r.id)}if(/^\d+$/.test(r.chatId)){r.chatId=parseInt(r.chatId)}n.commit("initCollection",{chatId:r.chatId});if(!n.state.collection[r.chatId]){return false}var i=n.state.collection[r.chatId].findIndex((function(e){return e.id===r.id}));if(i<0){return false}var s=t.validate(Object.assign({},r.fields));if(s.params){s.params=Object.assign({},t.getElementState().params,n.state.collection[r.chatId][i].params,s.params)}n.commit("update",{id:r.id,chatId:r.chatId,index:i,fields:s});if(r.fields.blink){setTimeout((function(){n.commit("update",{id:r.id,chatId:r.chatId,fields:{blink:false}})}),1e3)}return true},delete:function e(t,n){if(!(n.id instanceof Array)){n.id=[n.id]}n.id=n.id.map((function(e){if(/^\d+$/.test(e)){e=parseInt(e)}return e}));t.commit("delete",{chatId:n.chatId,elements:n.id});return true},clear:function e(t,n){n.chatId=parseInt(n.chatId);if(n.keepPlaceholders){t.commit("clearMessages",{chatId:n.chatId})}else{t.commit("clear",{chatId:n.chatId})}return true},applyMutationType:function e(t,n){n.chatId=parseInt(n.chatId);t.commit("applyMutationType",{chatId:n.chatId});return true},readMessages:function e(t,n){n.readId=parseInt(n.readId)||0;n.chatId=parseInt(n.chatId);if(typeof t.state.collection[n.chatId]==="undefined"){return{count:0}}var r=0;for(var i=t.state.collection[n.chatId].length-1;i>=0;i--){var s=t.state.collection[n.chatId][i];if(!s.unread)continue;if(n.readId===0||s.id<=n.readId){r++}}t.commit("readMessages",{chatId:n.chatId,readId:n.readId});return{count:r}},unreadMessages:function e(t,n){n.unreadId=parseInt(n.unreadId)||0;n.chatId=parseInt(n.chatId);if(typeof t.state.collection[n.chatId]==="undefined"||!n.unreadId){return{count:0}}var r=0;for(var i=t.state.collection[n.chatId].length-1;i>=0;i--){var s=t.state.collection[n.chatId][i];if(s.unread)continue;if(s.id>=n.unreadId){r++}}t.commit("unreadMessages",{chatId:n.chatId,unreadId:n.unreadId});return{count:r}}}}},{key:"getMutations",value:function e(){var r=this;return{initCollection:function e(t,n){return r.initCollection(t,n)},add:function e(n,i){r.initCollection(n,{chatId:i.chatId});n.collection[i.chatId].push(i);n.saveMessageList[i.chatId].push(i.id);n.created+=1;n.collection[i.chatId].sort((function(e,t){return e.id-t.id}));r.saveState(n,i.chatId);t.Logger.warn("Messages model: saving state after add")},clearPlaceholders:function e(t,n){if(!t.collection[n.chatId]){return false}t.collection[n.chatId]=t.collection[n.chatId].filter((function(e){return!e.id.toString().startsWith("placeholder")}))},updatePlaceholders:function e(n,i){var s="placeholder".concat(i.firstMessage);var o=n.collection[i.chatId].findIndex((function(e){return e.id===s}));if(o>=0){var a;n.collection[i.chatId].splice(o,i.amount);(a=n.collection[i.chatId]).splice.apply(a,[o,0].concat(babelHelpers.toConsumableArray(i.data)))}n.collection[i.chatId].sort((function(e,t){return e.id-t.id}));t.Logger.warn("Messages model: saving state after updating placeholders");r.saveState(n,i.chatId)},set:function e(i,o){t.Logger.warn("Messages model: set mutation",o);var l=[];var u=[];var f=false;o.data=s.getPayloadWithTempMessages(i,o);var d=o.insertType;if(o.insertType===a.MutationType.set){o.insertType=a.MutationType.setAfter;var p={};o.data.forEach((function(e){if(!p[e.chatId]){p[e.chatId]=[]}p[e.chatId].push(e.id)}));var m=function e(n){if(!p.hasOwnProperty(n))return"continue";r.initCollection(i,{chatId:n});t.Logger.warn("Messages model: messages before adding from request - ",i.collection[n].length);if(i.saveMessageList[n].length>p[n].length||p[n].length<a.StorageLimit.messages){i.collection[n]=i.collection[n].filter((function(e){return p[n].includes(e.id)}));i.saveMessageList[n]=i.saveMessageList[n].filter((function(e){return p[n].includes(e)}))}t.Logger.warn("Messages model: cache length",i.saveMessageList[n].length);var s=r.manageCacheBeforeSet(babelHelpers.toConsumableArray(i.saveMessageList[n].reverse()),p[n]);t.Logger.warn("Messages model: set intersection with cache",s);if(s.type===h.none){if(s.foundElements.length>0){i.collection[n]=i.collection[n].filter((function(e){return!s.foundElements.includes(e.id)}));i.saveMessageList[n]=i.saveMessageList[n].filter((function(e){return!s.foundElements.includes(e)}))}t.Logger.warn("Messages model: no intersection - removing cache");r.removeIntersectionCacheElements=i.collection[n].map((function(e){return e.id}));i.collection[n]=i.collection[n].filter((function(e){return!r.removeIntersectionCacheElements.includes(e.id)}));i.saveMessageList[n]=i.saveMessageList[n].filter((function(e){return!r.removeIntersectionCacheElements.includes(e)}));r.removeIntersectionCacheElements=[]}else if(s.type===h.foundReverse){t.Logger.warn("Messages model: found reverse intersection");o.insertType=a.MutationType.setBefore;o.data=o.data.reverse()}};for(var g in p){var v=m(g);if(v==="continue")continue}}t.Logger.warn("Messages model: adding messages to model",o.data);var y=c(o.data),b;try{var w=function e(){var t=b.value;r.initCollection(i,{chatId:t.chatId});var n=i.collection[t.chatId].findIndex((function(e){if(s.isTemporaryMessage(e)){return e.templateId===t.templateId}return e.id===t.id}));if(n>-1){i.collection[t.chatId][n]=Object.assign(i.collection[t.chatId][n],t)}else if(o.insertType===a.MutationType.setBefore){i.collection[t.chatId].unshift(t)}else if(o.insertType===a.MutationType.setAfter){i.collection[t.chatId].push(t)}l.push(t.chatId);if(r.store.getters["dialogues/canSaveChat"]&&r.store.getters["dialogues/canSaveChat"](t.chatId)){u.push(t.chatId)}};for(y.s();!(b=y.n()).done;){w()}}catch(e){y.e(e)}finally{y.f()}l=babelHelpers.toConsumableArray(new Set(l));u=babelHelpers.toConsumableArray(new Set(u));f=o.data.every((function(e){return e.push===true}));t.Logger.warn("Is it fake push message?",f);l.forEach((function(e){i.collection[e].sort((function(e,t){return e.id-t.id}));if(!f){t.Logger.warn("setting messagesSet = true for chatId = ",e);setTimeout((function(){n.EventEmitter.emit(a.EventType.dialog.messagesSet,{chatId:e});n.EventEmitter.emit(a.EventType.dialog.readVisibleMessages,{chatId:e})}),100)}}));if(d!==a.MutationType.setBefore){u.forEach((function(e){t.Logger.warn("Messages model: saving state after set");r.saveState(i,e)}))}},update:function e(n,i){r.initCollection(n,{chatId:i.chatId});var s=-1;if(typeof i.index!=="undefined"&&n.collection[i.chatId][i.index]){s=i.index}else{s=n.collection[i.chatId].findIndex((function(e){return e.id===i.id}))}if(s>=0){var o=n.saveMessageList[i.chatId].includes(n.collection[i.chatId][s].id)||i.fields.id&&!i.fields.id.toString().startsWith("temporary")&&n.collection[i.chatId][s].id.toString().startsWith("temporary");n.collection[i.chatId][s]=Object.assign(n.collection[i.chatId][s],i.fields);if(o){t.Logger.warn("Messages model: saving state after update");r.saveState(n,i.chatId)}}},delete:function e(n,i){r.initCollection(n,{chatId:i.chatId});n.collection[i.chatId]=n.collection[i.chatId].filter((function(e){return!i.elements.includes(e.id)}));if(n.saveMessageList[i.chatId].length>0){var s=c(i.elements),o;try{for(s.s();!(o=s.n()).done;){var a=o.value;if(n.saveMessageList[i.chatId].includes(a)){t.Logger.warn("Messages model: saving state after delete");r.saveState(n,i.chatId);break}}}catch(e){s.e(e)}finally{s.f()}}},clear:function e(t,n){r.initCollection(t,{chatId:n.chatId});t.collection[n.chatId]=[];t.saveMessageList[n.chatId]=[]},clearMessages:function e(t,n){r.initCollection(t,{chatId:n.chatId});t.collection[n.chatId]=t.collection[n.chatId].filter((function(e){return e.id.toString().startsWith("placeholder")}));t.saveMessageList[n.chatId]=[]},applyMutationType:function e(t,n){if(typeof t.mutationType[n.chatId]==="undefined"){i.WidgetVue.set(t.mutationType,n.chatId,{applied:false,initialType:a.MutationType.none,appliedType:a.MutationType.none,scrollStickToTop:0,scrollMessageId:0})}t.mutationType[n.chatId].applied=true},readMessages:function e(n,i){r.initCollection(n,{chatId:i.chatId});var s=false;for(var o=n.collection[i.chatId].length-1;o>=0;o--){var a=n.collection[i.chatId][o];if(!a.unread)continue;if(i.readId===0||a.id<=i.readId){n.collection[i.chatId][o]=Object.assign(n.collection[i.chatId][o],{unread:false});s=true}}if(s){t.Logger.warn("Messages model: saving state after reading");r.saveState(n,i.chatId)}},unreadMessages:function e(n,i){r.initCollection(n,{chatId:i.chatId});var s=false;for(var o=n.collection[i.chatId].length-1;o>=0;o--){var a=n.collection[i.chatId][o];if(a.unread)continue;if(a.id>=i.unreadId){n.collection[i.chatId][o]=Object.assign(n.collection[i.chatId][o],{unread:true});s=true}}if(s){t.Logger.warn("Messages model: saving state after unreading");r.saveState(n,i.chatId);r.updateSubordinateStates()}}}}},{key:"initCollection",value:function e(t,n){if(typeof n.chatId==="undefined"){return false}if(typeof n.chatId==="undefined"||typeof t.collection[n.chatId]!=="undefined"){return true}i.WidgetVue.set(t.collection,n.chatId,n.messages?[].concat(n.messages):[]);i.WidgetVue.set(t.saveMessageList,n.chatId,[]);i.WidgetVue.set(t.saveFileList,n.chatId,[]);i.WidgetVue.set(t.saveUserList,n.chatId,[]);return true}},{key:"prepareMessage",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=this.validate(Object.assign({},t),n);r.params=Object.assign({},this.getElementState().params,r.params);if(!r.templateId){r.templateId=r.id}return Object.assign({},this.getElementState(),r)}},{key:"manageCacheBeforeSet",value:function e(n,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;t.Logger.warn("manageCacheBeforeSet",n,r);var s={type:h.empty,foundElements:[],noneElements:[]};if(!n||n.length<=0){return s}var o=c(r),a;try{for(o.s();!(a=o.n()).done;){var l=a.value;if(n.includes(l)){if(s.type===h.empty){s.type=h.found}s.foundElements.push(l)}else{if(s.type===h.empty){s.type=h.none}s.noneElements.push(l)}}}catch(e){o.e(e)}finally{o.f()}if(s.type===h.found&&n.length===r.length&&s.foundElements.length===r.length){s.type=h.equal}else if(s.type===h.none&&!i&&s.foundElements.length>0){var u=this.manageCacheBeforeSet(n.reverse(),r.reverse(),true);if(u.type===h.found){u.type=h.foundReverse;return u}}return s}},{key:"updateSaveLists",value:function e(t,n){if(!this.isSaveAvailable()){return true}if(!n||!this.store.getters["dialogues/canSaveChat"]||!this.store.getters["dialogues/canSaveChat"](n)){return false}this.initCollection(t,{chatId:n});var r=0;var i=[];var s=[];var o=[];var l=this.store.getters["dialogues/getByChatId"](n);if(l&&l.type==="private"){o.push(parseInt(l.dialogId))}var u=0;for(var c=t.collection[n].length-1;c>=0;c--){if(t.collection[n][c].id.toString().startsWith("temporary")){continue}if(!t.collection[n][c].unread){u++}if(r>=a.StorageLimit.messages&&u>=50){break}i.unshift(t.collection[n][c].id);r++}i=i.slice(0,a.StorageLimit.messages);t.collection[n].filter((function(e){return i.includes(e.id)})).forEach((function(e){if(e.authorId>0){o.push(e.authorId)}if(e.params.FILE_ID instanceof Array){s=e.params.FILE_ID.concat(s)}}));t.saveMessageList[n]=i;t.saveFileList[n]=babelHelpers.toConsumableArray(new Set(s));t.saveUserList[n]=babelHelpers.toConsumableArray(new Set(o));return true}},{key:"getSaveTimeout",value:function e(){return 150}},{key:"saveState",value:function e(n,r){if(!this.updateSaveLists(n,r)){return false}babelHelpers.get(babelHelpers.getPrototypeOf(s.prototype),"saveState",this).call(this,(function(){var e={collection:{},saveMessageList:{},saveUserList:{},saveFileList:{}};var r=function r(i){if(!n.saveMessageList.hasOwnProperty(i)){return"continue"}if(!n.collection[i]){return"continue"}if(!e.collection[i]){e.collection[i]=[]}n.collection[i].filter((function(e){return n.saveMessageList[i].includes(e.id)})).forEach((function(t){if(t.templateType!=="placeholder"){e.collection[i].push(t)}}));t.Logger.warn("Cache after updating",e.collection[i]);e.saveMessageList[i]=n.saveMessageList[i];e.saveFileList[i]=n.saveFileList[i];e.saveUserList[i]=n.saveUserList[i]};for(var i in n.saveMessageList){var s=r(i);if(s==="continue")continue}return e}))}},{key:"updateSubordinateStates",value:function e(){this.store.dispatch("users/saveState");this.store.dispatch("files/saveState")}},{key:"validate",value:function e(t,n){var i={};if(typeof t.id==="number"){i.id=t.id}else if(typeof t.id==="string"){if(t.id.startsWith("temporary")||t.id.startsWith("placeholder")||r.Utils.types.isUuidV4(t.id)){i.id=t.id}else{i.id=parseInt(t.id)}}if(typeof t.uuid==="string"){i.templateId=t.uuid}else if(typeof t.templateId==="number"){i.templateId=t.templateId}else if(typeof t.templateId==="string"){if(t.templateId.startsWith("temporary")||r.Utils.types.isUuidV4(t.templateId)){i.templateId=t.templateId}else{i.templateId=parseInt(t.templateId)}}if(typeof t.templateType==="string"){i.templateType=t.templateType}if(typeof t.placeholderType==="number"){i.placeholderType=t.placeholderType}if(typeof t.chat_id!=="undefined"){t.chatId=t.chat_id}if(typeof t.chatId==="number"||typeof t.chatId==="string"){i.chatId=parseInt(t.chatId)}if(typeof t.date!=="undefined"){i.date=r.Utils.date.cast(t.date)}if(typeof t.textLegacy==="string"||typeof t.textLegacy==="number"){if(typeof t.text==="string"||typeof t.text==="number"){i.text=t.text.toString()}i.textConverted=this.convertToHtml({text:t.textLegacy.toString(),isConverted:true});if(typeof t.text==="string"||typeof t.text==="number"){i.text=t.text}}else{if(typeof t.text_converted!=="undefined"){t.textConverted=t.text_converted}if(typeof t.textConverted==="string"||typeof t.textConverted==="number"){i.textConverted=t.textConverted.toString()}if(typeof t.text==="string"||typeof t.text==="number"){i.text=t.text.toString();var s=typeof i.textConverted!=="undefined";i.textConverted=this.convertToHtml({text:s?i.textConverted:i.text,isConverted:s})}}if(typeof t.senderId!=="undefined"){t.authorId=t.senderId}else if(typeof t.author_id!=="undefined"){t.authorId=t.author_id}if(typeof t.authorId==="number"||typeof t.authorId==="string"){if(t.system===true||t.system==="Y"){i.authorId=0}else{i.authorId=parseInt(t.authorId)}}if(babelHelpers["typeof"](t.params)==="object"&&t.params!==null){var o=this.validateParams(t.params,n);if(o){i.params=o}}if(typeof t.push==="boolean"){i.push=t.push}if(typeof t.sending==="boolean"){i.sending=t.sending}if(typeof t.unread==="boolean"){i.unread=t.unread}if(typeof t.blink==="boolean"){i.blink=t.blink}if(typeof t.error==="boolean"||typeof t.error==="string"){i.error=t.error}if(typeof t.retry==="boolean"){i.retry=t.retry}return i}},{key:"validateParams",value:function e(t,n){var i={};try{for(var s in t){if(!t.hasOwnProperty(s)){continue}if(s==="COMPONENT_ID"){if(typeof t[s]==="string"&&BX.WidgetVue.isComponent(t[s])){i[s]=t[s]}}else if(s==="LIKE"){if(t[s]instanceof Array){i["REACTION"]={like:t[s].map((function(e){return parseInt(e)}))}}}else if(s==="CHAT_LAST_DATE"){i[s]=r.Utils.date.cast(t[s])}else if(s==="AVATAR"){if(t[s]){i[s]=t[s].startsWith("http")?t[s]:n.host+t[s]}}else if(s==="NAME"){if(t[s]){i[s]=t[s]}}else if(s==="LINK_ACTIVE"){if(t[s]){i[s]=t[s].map((function(e){return parseInt(e)}))}}else if(s==="ATTACH"){i[s]=t[s]}else{i[s]=t[s]}}}catch(e){}var o=false;for(var a in i){if(!i.hasOwnProperty(a)){continue}o=true;break}return o?i:null}},{key:"convertToHtml",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=t.quote,i=n===void 0?true:n,s=t.image,o=s===void 0?true:s,a=t.text,l=a===void 0?"":a,u=t.isConverted,c=u===void 0?false:u,f=t.enableBigSmile,d=f===void 0?true:f;l=l.trim();if(!c){l=l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}if(l.startsWith("/me")){l="<i>".concat(l.substr(4),"</i>")}else if(l.startsWith("/loud")){l="<b>".concat(l.substr(6),"</b>")}var h="&gt;&gt;";if(i&&l.indexOf(h)>=0){var p=l.split(c?"<br />":"\n");for(var m=0;m<p.length;m++){if(p[m].startsWith(h)){p[m]=p[m].replace(h,'<div class="bx-im-message-content-quote"><div class="bx-im-message-content-quote-wrap">');while(++m<p.length&&p[m].startsWith(h)){p[m]=p[m].replace(h,"")}p[m-1]+="</div></div><br>"}}l=p.join("<br />")}l=l.replace(/\n/gi,"<br />");l=l.replace(/\t/gi,"&nbsp;&nbsp;&nbsp;&nbsp;");l=r.Utils.text.decodeBbCode(l,d);if(i){l=l.replace(/------------------------------------------------------<br \/>(.*?)\[(.*?)\](?: #(?:(?:chat)?\d+|\d+:\d+)\/\d+)?<br \/>(.*?)------------------------------------------------------(<br \/>)?/g,(function(e,t,n,r,i,s){return(s>0?"<br>":"")+'<div class="bx-im-message-content-quote"><div class="bx-im-message-content-quote-wrap"><div class="bx-im-message-content-quote-name"><span class="bx-im-message-content-quote-name-text">'+t+'</span><span class="bx-im-message-content-quote-name-time">'+n+"</span></div>"+r+"</div></div><br />"}));l=l.replace(/------------------------------------------------------<br \/>(.*?)------------------------------------------------------(<br \/>)?/g,(function(e,t,n,r,i){return(i>0?"<br>":"")+'<div class="bx-im-message-content-quote"><div class="bx-im-message-content-quote-wrap">'+t+"</div></div><br />"}))}if(o){var g=false;l=l.replace(/<a(.*?)>(http[s]{0,1}:\/\/.*?)<\/a>/gi,(function(e,t,n,r){if(!n.match(/(\.(jpg|jpeg|png|gif|webp)\?|\.(jpg|jpeg|png|gif|webp)$)/i)||n.indexOf("/docs/pub/")>0||n.indexOf("logout=yes")>0){return e}else{g=true;return(r>0?"<br />":"")+"<a"+t+' target="_blank" class="bx-im-element-file-image"><img src="'+n+'" class="bx-im-element-file-image-source-text" onerror="BX.Messenger.Model.MessagesModel.hideErrorImage(this)"></a></span>'}}));if(g){l=l.replace(/<\/span>(\n?)<br(\s\/?)>/gi,"</span>").replace(/<br(\s\/?)>(\n?)<br(\s\/?)>(\n?)<span/gi,"<br /><span")}}if(d){l=l.replace(/^(\s*<img\s+src=[^>]+?data-code=[^>]+?data-definition="UHD"[^>]+?style="width:)(\d+)(px[^>]+?height:)(\d+)(px[^>]+?class="bx-smile"\s*\/?>\s*)$/,(function e(t,n,r,i,s,o){return n+parseInt(r,10)*1.7+i+parseInt(s,10)*1.7+o}))}if(l.substr(-6)=="<br />"){l=l.substr(0,l.length-6)}l=l.replace(/<br><br \/>/gi,"<br />");l=l.replace(/<br \/><br>/gi,"<br />");return l}},{key:"decodeBbCode",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return s.decodeBbCode({text:t,textOnly:n,enableBigSmile:r})}},{key:"decodeAttach",value:function e(t){var n=this;if(Array.isArray(t)){t.forEach((function(e){e=n.decodeAttach(e)}))}else if(babelHelpers["typeof"](t)==="object"&&t!==null){for(var i in t){if(t.hasOwnProperty(i)){t[i]=this.decodeAttach(t[i])}}}else{if(typeof t==="string"){t=r.Utils.text.htmlspecialcharsback(t)}}return t}}],[{key:"decodeBbCode",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=t.text,i=t.textOnly,s=i===void 0?false:i,o=t.enableBigSmile,a=o===void 0?true:o;var l=[];n=n.replace(/\[PUT(?:=(.+?))?\](.+?)?\[\/PUT\]/gi,(function(e){var t=l.length;l.push(e);return"####REPLACEMENT_PUT_"+t+"####"}));var u=[];n=n.replace(/\[SEND(?:=(.+?))?\](.+?)?\[\/SEND\]/gi,(function(e){var t=u.length;u.push(e);return"####REPLACEMENT_SEND_"+t+"####"}));var c=[];n=n.replace(/\[CODE\]\n?([\s\S]*?)\[\/CODE\]/gi,(function(e,t){var n=c.length;c.push(t);return"####REPLACEMENT_CODE_"+n+"####"}));n=n.replace(/\[url=([^\]]+)\]([\s\S]*?)\[\/url\]/gi,(function(e,t,n){var i=document.createElement("a");i.href=r.Utils.text.htmlspecialcharsback(t);i.target="_blank";i.text=r.Utils.text.htmlspecialcharsback(n);var s=["http:","https:","ftp:","file:","tel:","callto:","mailto:","skype:","viber:"];if(s.indexOf(i.protocol)<=-1){return e}return i.outerHTML}));n=n.replace(/\[url\]([^\]]+)\[\/url\]/gi,(function(e,t){t=r.Utils.text.htmlspecialcharsback(t);var n=document.createElement("a");n.href=t;n.target="_blank";n.text=t;var i=["http:","https:","ftp:","file:","tel:","callto:","mailto:","skype:","viber:"];if(i.indexOf(n.protocol)<=-1){return e}return n.outerHTML}));n=n.replace(/\[LIKE\]/gi,'<span class="bx-smile bx-im-smile-like"></span>');n=n.replace(/\[DISLIKE\]/gi,'<span class="bx-smile bx-im-smile-dislike"></span>');n=n.replace(/\[BR\]/gi,"<br/>");n=n.replace(/\[([buis])\](.*?)\[(\/[buis])\]/gi,(function(e,t,n,r){return"<"+t+">"+n+"<"+r+">"}));n=n.replace(/\[CHAT=(imol\|)?([0-9]{1,})\](.*?)\[\/CHAT\]/gi,(function(e,t,n,r){return t?r:'<span class="bx-im-mention" data-type="CHAT" data-value="chat'+n+'">'+r+"</span>"}));n=n.replace(/\[CALL(?:=(.+?))?\](.+?)?\[\/CALL\]/gi,(function(e,t,n){return'<span class="bx-im-mention" data-type="CALL" data-value="'+r.Utils.text.htmlspecialchars(t)+'">'+n+"</span>"}));n=n.replace(/\[PCH=([0-9]{1,})\](.*?)\[\/PCH\]/gi,(function(e,t,n){return n}));var f=0;if(a){f=n.replace(/\[icon\=([^\]]*)\]/gi,"").trim().length}n=n.replace(/\[icon\=([^\]]*)\]/gi,(function(e){var t=e.match(/icon\=(\S+[^\s.,> )\];\'\"!?])/i);if(t&&t[1]){t=t[1]}else{return""}var n={src:t,border:0};var i=e.match(/size\=(\d+)/i);if(i&&i[1]){n["width"]=i[1];n["height"]=i[1]}else{var s=e.match(/width\=(\d+)/i);if(s&&s[1]){n["width"]=s[1]}var o=e.match(/height\=(\d+)/i);if(o&&o[1]){n["height"]=o[1]}if(n["width"]&&!n["height"]){n["height"]=n["width"]}else if(n["height"]&&!n["width"]){n["width"]=n["height"]}else if(n["height"]&&n["width"]);else{n["width"]=20;n["height"]=20}}n["width"]=n["width"]>100?100:n["width"];n["height"]=n["height"]>100?100:n["height"];if(a&&f===0&&n["width"]===n["height"]&&n["width"]===20){n["width"]=40;n["height"]=40}var l=e.match(/title\=(.*[^\s\]])/i);if(l&&l[1]){l=l[1];if(l.indexOf("width=")>-1){l=l.substr(0,l.indexOf("width="))}if(l.indexOf("height=")>-1){l=l.substr(0,l.indexOf("height="))}if(l.indexOf("size=")>-1){l=l.substr(0,l.indexOf("size="))}if(l){n["title"]=r.Utils.text.htmlspecialchars(l).trim();n["alt"]=n["title"]}}var u="";for(var c in n){if(n.hasOwnProperty(c)){u+=c+'="'+n[c]+'" '}}return'<img class="bx-smile bx-icon" '+u+">"}));u.forEach((function(e,t){n=n.replace("####REPLACEMENT_SEND_"+t+"####",e)}));n=n.replace(/\[SEND(?:=(?:.+?))?\](?:.+?)?\[\/SEND]/gi,(function(e){return e.replace(/\[SEND(?:=(.+))?\](.+?)?\[\/SEND]/gi,(function(e,t,n){var r="";n=n?n:t;t=(t?t:n).replace("<br />","\n");if(!s&&n){n=n.replace(/<([\w]+)[^>]*>(.*?)<\\1>/i,"$2",n);n=n.replace(/\[([\w]+)[^\]]*\](.*?)\[\/\1\]/i,"$2",n);t=t.split("####REPLACEMENT_PUT_").join("####REPLACEMENT_SP_");r="\x3c!--IM_COMMAND_START--\x3e"+'<span class="bx-im-message-command-wrap">'+'<span class="bx-im-message-command" data-entity="send">'+n+"</span>"+'<span class="bx-im-message-command-data">'+t+"</span>"+"</span>"+"\x3c!--IM_COMMAND_END--\x3e"}else{r=n}return r}))}));l.forEach((function(e,t){n=n.replace("####REPLACEMENT_PUT_"+t+"####",e)}));n=n.replace(/\[PUT(?:=(?:.+?))?\](?:.+?)?\[\/PUT]/gi,(function(e){return e.replace(/\[PUT(?:=(.+))?\](.+?)?\[\/PUT]/gi,(function(e,t,n){var r="";n=n?n:t;t=(t?t:n).replace("<br />","\n");if(!s&&n){n=n.replace(/<([\w]+)[^>]*>(.*?)<\/\1>/i,"$2",n);n=n.replace(/\[([\w]+)[^\]]*\](.*?)\[\/\1\]/i,"$2",n);r="\x3c!--IM_COMMAND_START--\x3e"+'<span class="bx-im-message-command-wrap">'+'<span class="bx-im-message-command" data-entity="put">'+n+"</span>"+'<span class="bx-im-message-command-data">'+t+"</span>"+"</span>"+"\x3c!--IM_COMMAND_END--\x3e"}else{r=n}return r}))}));c.forEach((function(e,t){n=n.replace("####REPLACEMENT_CODE_"+t+"####",!s?'<div class="bx-im-message-content-code">'+e+"</div>":e)}));if(u.length>0){do{u.forEach((function(e,t){n=n.replace("####REPLACEMENT_SEND_"+t+"####",e)}))}while(n.includes("####REPLACEMENT_SEND_"))}n=n.split("####REPLACEMENT_SP_").join("####REPLACEMENT_PUT_");if(l.length>0){do{l.forEach((function(e,t){n=n.replace("####REPLACEMENT_PUT_"+t+"####",e)}))}while(n.includes("####REPLACEMENT_PUT_"))}return n}},{key:"hideErrorImage",value:function e(t){if(t.parentNode&&t.parentNode){t.parentNode.innerHTML='<a href="'+t.src+'" target="_blank">'+t.src+"</a>"}return true}},{key:"isTemporaryMessage",value:function e(t){return t.id&&(r.Utils.types.isUuidV4(t.id)||t.id.toString().startsWith("temporary"))}},{key:"getPayloadWithTempMessages",value:function e(t,n){var i=babelHelpers.toConsumableArray(n.data);if(!r.Utils.platform.isBitrixMobile()){return i}if(!n.data||n.data.length<=0){return i}var o=n.data[0].chatId;if(!t.collection[o]){return i}t.collection[o].forEach((function(e){if(s.isTemporaryMessage(e)&&!s.existsInPayload(n,e.templateId)&&s.doesTaskExist(e)){i.push(e)}}));return i}},{key:"existsInPayload",value:function e(t,n){return t.data.find((function(e){return e.templateId===n}))}},{key:"doesTaskExist",value:function e(t){if(Array.isArray(t.params.FILE_ID)){var n=false;t.params.FILE_ID.forEach((function(e){if(!n){n=window.imDialogUploadTasks.find((function(t){return t.taskId.split("|")[1]===e}))}}));return!!n}if(t.templateId){var r=window.imDialogMessagesTasks.find((function(e){return e.taskId.split("|")[1]===t.templateId}));return!!r}return false}}]);return s}(s.WidgetVuexBuilderModel);function m(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=g(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var r=0;var i=function e(){};return{s:i,n:function t(){if(r>=e.length)return{done:true};return{done:false,value:e[r++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,o=false,a;return{s:function t(){n=n.call(e)},n:function e(){var t=n.next();s=t.done;return t},e:function e(t){o=true;a=t},f:function e(){try{if(!s&&n["return"]!=null)n["return"]()}finally{if(o)throw a}}}}function g(e,t){if(!e)return;if(typeof e==="string")return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}function v(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"getName",value:function e(){return"dialogues"}},{key:"getState",value:function e(){return{host:this.getVariable("host",location.protocol+"//"+location.host),collection:{},saveDialogList:[],saveChatList:[]}}},{key:"getStateSaveException",value:function e(){return{host:null}}},{key:"getElementStateSaveException",value:function e(){return{writingList:null,quoteId:null}}},{key:"getElementState",value:function e(){return{dialogId:"0",chatId:0,counter:0,userCounter:0,messageCount:0,unreadId:0,lastMessageId:0,managerList:[],readedList:[],writingList:[],muteList:[],textareaMessage:"",quoteId:0,editId:0,init:false,name:"",owner:0,extranet:false,avatar:"",color:"#17A3EA",type:"chat",entityType:"",entityId:"",entityData1:"",entityData2:"",entityData3:"",dateCreate:new Date,restrictions:{avatar:true,extend:true,leave:true,leaveOwner:true,rename:true,send:true,userList:true,mute:true,call:true},public:{code:"",link:""}}}},{key:"getGetters",value:function e(){var t=this;return{get:function e(t){return function(e){if(!t.collection[e]){return null}return t.collection[e]}},getByChatId:function e(t){return function(e){e=parseInt(e);for(var n in t.collection){if(!t.collection.hasOwnProperty(n)){continue}if(t.collection[n].chatId===e){return t.collection[n]}}return null}},getBlank:function e(n){return function(e){return t.getElementState()}},getQuoteId:function e(t){return function(e){if(!t.collection[e]){return 0}return t.collection[e].quoteId}},getEditId:function e(t){return function(e){if(!t.collection[e]){return 0}return t.collection[e].editId}},canSaveChat:function e(t){return function(e){if(/^\d+$/.test(e)){e=parseInt(e)}return t.saveChatList.includes(parseInt(e))}},canSaveDialog:function e(t){return function(e){return t.saveDialogList.includes(e.toString())}},isPrivateDialog:function e(t){return function(e){e=e.toString();return t.collection[e.toString()]&&t.collection[e].type==="private"}}}}},{key:"getActions",value:function e(){var t=this;return{set:function e(n,r){if(r instanceof Array){r=r.map((function(e){return Object.assign({},t.validate(Object.assign({},e),{host:n.state.host}),{init:true})}))}else{var i=[];i.push(Object.assign({},t.validate(Object.assign({},r),{host:n.state.host}),{init:true}));r=i}n.commit("set",r)},update:function e(n,r){if(typeof n.state.collection[r.dialogId]==="undefined"||n.state.collection[r.dialogId].init===false){return true}n.commit("update",{dialogId:r.dialogId,fields:t.validate(Object.assign({},r.fields),{host:n.state.host})});return true},delete:function e(t,n){t.commit("delete",n.dialogId);return true},updateWriting:function e(n,r){if(typeof n.state.collection[r.dialogId]==="undefined"||n.state.collection[r.dialogId].init===false){return true}var i=n.state.collection[r.dialogId].writingList.findIndex((function(e){return e.userId===r.userId}));if(r.action){if(i>=0){return true}else{var s=[].concat(n.state.collection[r.dialogId].writingList);s.unshift({userId:r.userId,userName:r.userName});n.commit("update",{actionName:"updateWriting/1",dialogId:r.dialogId,fields:t.validate({writingList:s},{host:n.state.host})})}}else{if(i>=0){var o=n.state.collection[r.dialogId].writingList.filter((function(e){return e.userId!==r.userId}));n.commit("update",{actionName:"updateWriting/2",dialogId:r.dialogId,fields:t.validate({writingList:o},{host:n.state.host})});return true}else{return true}}return false},updateReaded:function e(n,r){if(typeof n.state.collection[r.dialogId]==="undefined"||n.state.collection[r.dialogId].init===false){return true}var i=n.state.collection[r.dialogId].readedList.filter((function(e){return e.userId!==r.userId}));if(r.action){i.push({userId:r.userId,userName:r.userName||"",messageId:r.messageId,date:r.date||new Date})}n.commit("update",{actionName:"updateReaded",dialogId:r.dialogId,fields:t.validate({readedList:i},{host:n.state.host})});return false},increaseCounter:function e(t,n){var r;if(typeof t.state.collection[n.dialogId]==="undefined"||t.state.collection[n.dialogId].init===false){return true}var i=t.state.collection[n.dialogId].counter;if(i===100){return true}var s=i+n.count;if(s>100){s=100}var o=(r=t.rootState.application)===null||r===void 0?void 0:r.common.userId;var a=o&&t.state.collection[n.dialogId].muteList.includes(o);t.commit("update",{actionName:"increaseCounter",dialogId:n.dialogId,dialogMuted:a,fields:{counter:s,previousCounter:i}});return false},decreaseCounter:function e(t,n){if(typeof t.state.collection[n.dialogId]==="undefined"||t.state.collection[n.dialogId].init===false){return true}var r=t.state.collection[n.dialogId].counter;if(r===100){return true}var i=r-n.count;if(i<0){i=0}var s=n.unreadId>t.state.collection[n.dialogId].unreadId?n.unreadId:t.state.collection[n.dialogId].unreadId;if(t.state.collection[n.dialogId].unreadId!==s||t.state.collection[n.dialogId].counter!==i){var o;var a=t.state.collection[n.dialogId].counter;if(i===0){s=0}var l=(o=t.rootState.application)===null||o===void 0?void 0:o.common.userId;var u=l&&t.state.collection[n.dialogId].muteList.includes(l);t.commit("update",{actionName:"decreaseCounter",dialogId:n.dialogId,dialogMuted:u,fields:{counter:i,previousCounter:a,unreadId:s}})}return false},increaseMessageCounter:function e(t,n){if(typeof t.state.collection[n.dialogId]==="undefined"||t.state.collection[n.dialogId].init===false){return true}var r=t.state.collection[n.dialogId].messageCount;t.commit("update",{actionName:"increaseMessageCount",dialogId:n.dialogId,fields:{messageCount:r+n.count}})},saveDialog:function e(t,n){if(typeof t.state.collection[n.dialogId]==="undefined"||t.state.collection[n.dialogId].init===false){return true}t.commit("saveDialog",{dialogId:n.dialogId,chatId:n.chatId});return false}}}},{key:"getMutations",value:function e(){var t=this;return{initCollection:function e(n,r){t.initCollection(n,r)},saveDialog:function e(n,r){if(!(r.chatId>0&&r.dialogId.length>0)){return false}var i=n.saveDialogList.filter((function(e){return e!==r.dialogId}));i.unshift(r.dialogId);i=i.slice(0,a.StorageLimit.dialogues);if(n.saveDialogList.join(",")===i.join(",")){return true}n.saveDialogList=i;var s=n.saveChatList.filter((function(e){return e!==r.chatId}));s.unshift(r.chatId);n.saveChatList=s.slice(0,a.StorageLimit.dialogues);t.saveState(n)},set:function e(n,r){var i=m(r),s;try{for(i.s();!(s=i.n()).done;){var o=s.value;t.initCollection(n,{dialogId:o.dialogId});n.collection[o.dialogId]=Object.assign(t.getElementState(),n.collection[o.dialogId],o)}}catch(e){i.e(e)}finally{i.f()}t.saveState(n)},update:function e(n,r){t.initCollection(n,r);n.collection[r.dialogId]=Object.assign(n.collection[r.dialogId],r.fields);t.saveState(n)},delete:function e(n,r){delete n.collection[r.dialogId];t.saveState(n)}}}},{key:"initCollection",value:function e(t,n){if(typeof t.collection[n.dialogId]!=="undefined"){return true}i.WidgetVue.set(t.collection,n.dialogId,this.getElementState());if(n.fields){t.collection[n.dialogId]=Object.assign(t.collection[n.dialogId],this.validate(Object.assign({},n.fields),{host:t.host}))}return true}},{key:"getSaveTimeout",value:function e(){return 100}},{key:"saveState",value:function e(){var n=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!this.isSaveAvailable()){return true}babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"saveState",this).call(this,(function(){var e={collection:{},saveDialogList:[].concat(r.saveDialogList),saveChatList:[].concat(r.saveChatList)};r.saveDialogList.forEach((function(t){if(!r.collection[t])return false;e.collection[t]=Object.assign(n.getElementState(),n.cloneState(r.collection[t],n.getElementStateSaveException()))}));return e}))}},{key:"validate",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i={};n.host=n.host||this.getState().host;if(typeof t.dialog_id!=="undefined"){t.dialogId=t.dialog_id}if(typeof t.dialogId==="number"||typeof t.dialogId==="string"){i.dialogId=t.dialogId.toString()}if(typeof t.chat_id!=="undefined"){t.chatId=t.chat_id}else if(typeof t.id!=="undefined"){t.chatId=t.id}if(typeof t.chatId==="number"||typeof t.chatId==="string"){i.chatId=parseInt(t.chatId)}if(typeof t.quoteId==="number"){i.quoteId=parseInt(t.quoteId)}if(typeof t.editId==="number"){i.editId=parseInt(t.editId)}if(typeof t.counter==="number"||typeof t.counter==="string"){i.counter=parseInt(t.counter)}if(typeof t.user_counter==="number"||typeof t.user_counter==="string"){i.userCounter=parseInt(t.user_counter)}if(typeof t.userCounter==="number"||typeof t.userCounter==="string"){i.userCounter=parseInt(t.userCounter)}if(typeof t.message_count==="number"||typeof t.message_count==="string"){i.messageCount=parseInt(t.message_count)}if(typeof t.messageCount==="number"||typeof t.messageCount==="string"){i.messageCount=parseInt(t.messageCount)}if(typeof t.unread_id!=="undefined"){t.unreadId=t.unread_id}if(typeof t.unreadId==="number"||typeof t.unreadId==="string"){i.unreadId=parseInt(t.unreadId)}if(typeof t.last_message_id!=="undefined"){t.lastMessageId=t.last_message_id}if(typeof t.lastMessageId==="number"||typeof t.lastMessageId==="string"){i.lastMessageId=parseInt(t.lastMessageId)}if(typeof t.readed_list!=="undefined"){t.readedList=t.readed_list}if(typeof t.readedList!=="undefined"){i.readedList=[];if(t.readedList instanceof Array){t.readedList.forEach((function(e){var t={};if(typeof e.user_id!=="undefined"){e.userId=e.user_id}if(typeof e.user_name!=="undefined"){e.userName=e.user_name}if(typeof e.message_id!=="undefined"){e.messageId=e.message_id}if(!e.userId||!e.userName||!e.messageId){return false}t.userId=parseInt(e.userId);t.userName=e.userName.toString();t.messageId=parseInt(e.messageId);t.date=r.Utils.date.cast(e.date);i.readedList.push(t)}))}}if(typeof t.writing_list!=="undefined"){t.writingList=t.writing_list}if(typeof t.writingList!=="undefined"){i.writingList=[];if(t.writingList instanceof Array){t.writingList.forEach((function(e){var t={};if(!e.userId){return false}t.userId=parseInt(e.userId);t.userName=r.Utils.text.htmlspecialcharsback(e.userName);i.writingList.push(t)}))}}if(typeof t.manager_list!=="undefined"){t.managerList=t.manager_list}if(typeof t.managerList!=="undefined"){i.managerList=[];if(t.managerList instanceof Array){t.managerList.forEach((function(e){e=parseInt(e);if(e>0){i.managerList.push(e)}}))}}if(typeof t.mute_list!=="undefined"){t.muteList=t.mute_list}if(typeof t.muteList!=="undefined"){i.muteList=[];if(t.muteList instanceof Array){t.muteList.forEach((function(e){e=parseInt(e);if(e>0){i.muteList.push(e)}}))}else if(babelHelpers["typeof"](t.muteList)==="object"){Object.entries(t.muteList).forEach((function(e){if(e[1]===true){var t=parseInt(e[0]);if(t>0){i.muteList.push(t)}}}))}}if(typeof t.textareaMessage!=="undefined"){i.textareaMessage=t.textareaMessage.toString()}if(typeof t.title!=="undefined"){t.name=t.title}if(typeof t.name==="string"||typeof t.name==="number"){i.name=r.Utils.text.htmlspecialcharsback(t.name.toString())}if(typeof t.owner!=="undefined"){t.ownerId=t.owner}if(typeof t.ownerId==="number"||typeof t.ownerId==="string"){i.ownerId=parseInt(t.ownerId)}if(typeof t.extranet==="boolean"){i.extranet=t.extranet}if(typeof t.avatar==="string"){var s;if(!t.avatar||t.avatar.endsWith("/js/im/images/blank.gif")){s=""}else if(t.avatar.startsWith("http")){s=t.avatar}else{s=n.host+t.avatar}if(s){i.avatar=encodeURI(s)}}if(typeof t.color==="string"){i.color=t.color.toString()}if(typeof t.type==="string"){i.type=t.type.toString()}if(typeof t.entity_type!=="undefined"){t.entityType=t.entity_type}if(typeof t.entityType==="string"){i.entityType=t.entityType.toString()}if(typeof t.entity_id!=="undefined"){t.entityId=t.entity_id}if(typeof t.entityId==="string"||typeof t.entityId==="number"){i.entityId=t.entityId.toString()}if(typeof t.entity_data_1!=="undefined"){t.entityData1=t.entity_data_1}if(typeof t.entityData1==="string"){i.entityData1=t.entityData1.toString()}if(typeof t.entity_data_2!=="undefined"){t.entityData2=t.entity_data_2}if(typeof t.entityData2==="string"){i.entityData2=t.entityData2.toString()}if(typeof t.entity_data_3!=="undefined"){t.entityData3=t.entity_data_3}if(typeof t.entityData3==="string"){i.entityData3=t.entityData3.toString()}if(typeof t.date_create!=="undefined"){t.dateCreate=t.date_create}if(typeof t.dateCreate!=="undefined"){i.dateCreate=r.Utils.date.cast(t.dateCreate)}if(typeof t.dateLastOpen!=="undefined"){i.dateLastOpen=r.Utils.date.cast(t.dateLastOpen)}if(babelHelpers["typeof"](t.restrictions)==="object"&&t.restrictions){i.restrictions={};if(typeof t.restrictions.avatar==="boolean"){i.restrictions.avatar=t.restrictions.avatar}if(typeof t.restrictions.extend==="boolean"){i.restrictions.extend=t.restrictions.extend}if(typeof t.restrictions.leave==="boolean"){i.restrictions.leave=t.restrictions.leave}if(typeof t.restrictions.leave_owner==="boolean"){i.restrictions.leaveOwner=t.restrictions.leave_owner}if(typeof t.restrictions.rename==="boolean"){i.restrictions.rename=t.restrictions.rename}if(typeof t.restrictions.send==="boolean"){i.restrictions.send=t.restrictions.send}if(typeof t.restrictions.user_list==="boolean"){i.restrictions.userList=t.restrictions.user_list}if(typeof t.restrictions.mute==="boolean"){i.restrictions.mute=t.restrictions.mute}if(typeof t.restrictions.call==="boolean"){i.restrictions.call=t.restrictions.call}}if(babelHelpers["typeof"](t["public"])==="object"&&t["public"]){i["public"]={};if(typeof t["public"].code==="string"){i["public"].code=t["public"].code}if(typeof t["public"].link==="string"){i["public"].link=t["public"].link}}return i}}]);return t}(s.WidgetVuexBuilderModel);function b(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var r=0;var i=function e(){};return{s:i,n:function t(){if(r>=e.length)return{done:true};return{done:false,value:e[r++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,o=false,a;return{s:function t(){n=n.call(e)},n:function e(){var t=n.next();s=t.done;return t},e:function e(t){o=true;a=t},f:function e(){try{if(!s&&n["return"]!=null)n["return"]()}finally{if(o)throw a}}}}function w(e,t){if(!e)return;if(typeof e==="string")return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}function S(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"getName",value:function e(){return"users"}},{key:"getState",value:function e(){this.startOnlineCheckInterval();return{host:this.getVariable("host",location.protocol+"//"+location.host),collection:{},onlineList:[],mobileOnlineList:[],absentList:[]}}},{key:"getElementState",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=t.id,r=n===void 0?0:n,i=t.name,s=i===void 0?this.getVariable("default.name",""):i,o=t.firstName,a=o===void 0?this.getVariable("default.name",""):o,l=t.lastName,u=l===void 0?"":l;return{id:r,name:s,firstName:a,lastName:u,workPosition:"",color:"#048bd0",avatar:"",gender:"M",birthday:false,isBirthday:false,extranet:false,network:false,bot:false,connector:false,externalAuthId:"default",status:"online",idle:false,lastActivityDate:false,mobileLastDate:false,isOnline:false,isMobileOnline:false,absent:false,isAbsent:false,departments:[],phones:{workPhone:"",personalMobile:"",personalPhone:"",innerPhone:""},init:false}}},{key:"getGetters",value:function e(){var t=this;return{get:function e(n){return function(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;e=parseInt(e);if(e<=0){if(r){e=0}else{return null}}if(!r&&(!n.collection[e]||!n.collection[e].init)){return null}if(!n.collection[e]){return t.getElementState({id:e})}return n.collection[e]}},getBlank:function e(n){return function(e){return t.getElementState(e)}},getList:function e(n){return function(e){var r=[];if(!Array.isArray(e)){return null}e.forEach((function(e){if(n.collection[e]){r.push(n.collection[e])}else{r.push(t.getElementState({id:e}))}}));return r}}}}},{key:"getActions",value:function e(){var t=this;return{set:function e(n,r){if(r instanceof Array){r=r.map((function(e){return Object.assign({},t.getElementState(),t.validate(Object.assign({},e),{host:n.state.host}),{init:true})}))}else{var i=[];i.push(Object.assign({},t.getElementState(),t.validate(Object.assign({},r),{host:n.state.host}),{init:true}));r=i}n.commit("set",r)},update:function e(n,r){r.id=parseInt(r.id);if(typeof n.state.collection[r.id]==="undefined"||n.state.collection[r.id].init===false){return true}n.commit("update",{id:r.id,fields:t.validate(Object.assign({},r.fields),{host:n.state.host})});return true},delete:function e(t,n){t.commit("delete",n.id);return true},saveState:function e(t,n){t.commit("saveState",{});return true}}}},{key:"getMutations",value:function e(){var t=this;return{set:function e(n,i){var s=b(i),o;try{var a=function e(){var i=o.value;t.initCollection(n,{id:i.id});n.collection[i.id]=Object.assign(n.collection[i.id],i);var s=r.Utils.user.getOnlineStatus(i);if(s.isOnline){n.collection[i.id].isOnline=true;t.addToOnlineList(n,i.id)}var a=r.Utils.user.isMobileActive(i);if(a){n.collection[i.id].isMobileOnline=true;t.addToMobileOnlineList(n,i.id)}if(i.birthday){var l=r.Utils.date.format(new Date,"d-m");if(i.birthday===l){n.collection[i.id].isBirthday=true;var u=t.getTimeToNextMidnight();setTimeout((function(){n.collection[i.id].isBirthday=false}),u)}}if(i.absent){i.isAbsent=true;if(!n.absentList.includes(i.id)){t.addToAbsentList(n,i.id);var c=t.getTimeToNextMidnight();var f=1e3*60*60*24;setTimeout((function(){setInterval((function(){return t.startAbsentCheckInterval(n)}),f)}),c)}}t.saveState(n)};for(s.s();!(o=s.n()).done;){a()}}catch(e){s.e(e)}finally{s.f()}},update:function e(n,i){t.initCollection(n,i);if(typeof i.fields.lastActivityDate!=="undefined"&&n.collection[i.id].lastActivityDate){var s=n.collection[i.id].lastActivityDate.getTime();var o=i.fields.lastActivityDate.getTime();if(o>s){var a=r.Utils.user.getOnlineStatus(i.fields);if(a.isOnline){n.collection[i.id].isOnline=true;t.addToOnlineList(n,i.fields.id)}}}if(typeof i.fields.mobileLastDate!=="undefined"&&n.collection[i.id].mobileLastDate!==i.fields.mobileLastDate){var l=r.Utils.user.isMobileActive(i.fields);if(l){n.collection[i.id].isMobileOnline=true;t.addToMobileOnlineList(n,i.fields.id)}}n.collection[i.id]=Object.assign(n.collection[i.id],i.fields);t.saveState(n)},delete:function e(n,r){delete n.collection[r.id];t.saveState(n)},saveState:function e(n,r){t.saveState(n)}}}},{key:"initCollection",value:function e(t,n){if(typeof t.collection[n.id]!=="undefined"){return true}i.WidgetVue.set(t.collection,n.id,this.getElementState());return true}},{key:"getSaveUserList",value:function e(){if(!this.db){return[]}if(!this.store.getters["messages/getSaveUserList"]){return[]}var t=this.store.getters["messages/getSaveUserList"]();if(!t){return[]}return t}},{key:"getSaveTimeout",value:function e(){return 250}},{key:"saveState",value:function e(n){var r=this;if(!this.isSaveAvailable()){return false}babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"saveState",this).call(this,(function(){var e=r.getSaveUserList();if(!e){return false}var t={collection:{}};var i={absent:true,idle:true,mobileLastDate:true,lastActivityDate:true};for(var s in e){if(!e.hasOwnProperty(s)){continue}e[s].forEach((function(e){if(!n.collection[e]){return false}t.collection[e]=r.cloneState(n.collection[e],i)}))}return t}))}},{key:"validate",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i={};n.host=n.host||this.getState().host;if(typeof t.id==="number"||typeof t.id==="string"){i.id=parseInt(t.id)}if(typeof t.first_name!=="undefined"){t.firstName=r.Utils.text.htmlspecialcharsback(t.first_name)}if(typeof t.last_name!=="undefined"){t.lastName=r.Utils.text.htmlspecialcharsback(t.last_name)}if(typeof t.name==="string"||typeof t.name==="number"){t.name=r.Utils.text.htmlspecialcharsback(t.name.toString());i.name=t.name}if(typeof t.firstName==="string"||typeof t.firstName==="number"){i.firstName=r.Utils.text.htmlspecialcharsback(t.firstName.toString())}if(typeof t.lastName==="string"||typeof t.lastName==="number"){i.lastName=r.Utils.text.htmlspecialcharsback(t.lastName.toString())}if(typeof t.work_position!=="undefined"){t.workPosition=t.work_position}if(typeof t.workPosition==="string"||typeof t.workPosition==="number"){i.workPosition=t.workPosition.toString()}if(typeof t.color==="string"){i.color=t.color}if(typeof t.avatar==="string"){var s;if(!t.avatar||t.avatar.endsWith("/js/im/images/blank.gif")){s=""}else if(t.avatar.startsWith("http")){s=t.avatar}else{s=n.host+t.avatar}if(s){i.avatar=encodeURI(s)}}if(typeof t.gender!=="undefined"){i.gender=t.gender==="F"?"F":"M"}if(typeof t.birthday==="string"){i.birthday=t.birthday}if(typeof t.extranet==="boolean"){i.extranet=t.extranet}if(typeof t.network==="boolean"){i.network=t.network}if(typeof t.bot==="boolean"){i.bot=t.bot}if(typeof t.connector==="boolean"){i.connector=t.connector}if(typeof t.external_auth_id!=="undefined"){t.externalAuthId=t.external_auth_id}if(typeof t.externalAuthId==="string"&&t.externalAuthId){i.externalAuthId=t.externalAuthId}if(typeof t.status==="string"){i.status=t.status}if(typeof t.idle!=="undefined"){i.idle=r.Utils.date.cast(t.idle,false)}if(typeof t.last_activity_date!=="undefined"){t.lastActivityDate=t.last_activity_date}if(typeof t.lastActivityDate!=="undefined"){i.lastActivityDate=r.Utils.date.cast(t.lastActivityDate,false)}if(typeof t.mobile_last_date!=="undefined"){t.mobileLastDate=t.mobile_last_date}if(typeof t.mobileLastDate!=="undefined"){i.mobileLastDate=r.Utils.date.cast(t.mobileLastDate,false)}if(typeof t.absent!=="undefined"){i.absent=r.Utils.date.cast(t.absent,false)}if(typeof t.departments!=="undefined"){i.departments=[];if(t.departments instanceof Array){t.departments.forEach((function(e){e=parseInt(e);if(e>0){i.departments.push(e)}}))}}if(babelHelpers["typeof"](t.phones)==="object"&&t.phones){i.phones={};if(typeof t.phones.work_phone!=="undefined"){t.phones.workPhone=t.phones.work_phone}if(typeof t.phones.workPhone==="string"||typeof t.phones.workPhone==="number"){i.phones.workPhone=t.phones.workPhone.toString()}if(typeof t.phones.personal_mobile!=="undefined"){t.phones.personalMobile=t.phones.personal_mobile}if(typeof t.phones.personalMobile==="string"||typeof t.phones.personalMobile==="number"){i.phones.personalMobile=t.phones.personalMobile.toString()}if(typeof t.phones.personal_phone!=="undefined"){t.phones.personalPhone=t.phones.personal_phone}if(typeof t.phones.personalPhone==="string"||typeof t.phones.personalPhone==="number"){i.phones.personalPhone=t.phones.personalPhone.toString()}if(typeof t.phones.inner_phone!=="undefined"){t.phones.innerPhone=t.phones.inner_phone}if(typeof t.phones.innerPhone==="string"||typeof t.phones.innerPhone==="number"){i.phones.innerPhone=t.phones.innerPhone.toString()}}return i}},{key:"addToOnlineList",value:function e(t,n){if(!t.onlineList.includes(n)){t.onlineList.push(n)}}},{key:"addToMobileOnlineList",value:function e(t,n){if(!t.mobileOnlineList.includes(n)){t.mobileOnlineList.push(n)}}},{key:"addToAbsentList",value:function e(t,n){if(!t.absentList.includes(n)){t.absentList.push(n)}}},{key:"getTimeToNextMidnight",value:function e(){var t=new Date((new Date).setHours(24,0,0)).getTime();return t-new Date}},{key:"startAbsentCheckInterval",value:function e(t){var n=b(t.absentList),r;try{var i=function e(){var n=r.value;var i=t.collection[n];if(!i){return"continue"}var s=(new Date).getTime();var o=new Date(t.collection[n].absent).getTime();if(o<=s){t.absentList=t.absentList.filter((function(e){return e!==n}));i.isAbsent=false}};for(n.s();!(r=n.n()).done;){var s=i();if(s==="continue")continue}}catch(e){n.e(e)}finally{n.f()}}},{key:"startOnlineCheckInterval",value:function e(){var t=this;var n=6e4;setInterval((function(){var e=b(t.store.state.users.onlineList),n;try{var i=function e(){var i=n.value;var s=t.store.state.users.collection[i];if(!s){return"continue"}var o=r.Utils.user.getOnlineStatus(s);if(o.isOnline){s.isOnline=true}else{s.isOnline=false;t.store.state.users.onlineList=t.store.state.users.onlineList.filter((function(e){return e!==i}))}};for(e.s();!(n=e.n()).done;){var s=i();if(s==="continue")continue}}catch(t){e.e(t)}finally{e.f()}var o=b(t.store.state.users.mobileOnlineList),a;try{var l=function e(){var n=a.value;var i=t.store.state.users.collection[n];if(!i){return"continue"}var s=r.Utils.user.isMobileActive(i);if(s){i.isMobileOnline=true}else{i.isMobileOnline=false;t.store.state.users.mobileOnlineList=t.store.state.users.mobileOnlineList.filter((function(e){return e!==n}))}};for(o.s();!(a=o.n()).done;){var u=l();if(u==="continue")continue}}catch(e){o.e(e)}finally{o.f()}}),n)}}]);return t}(s.WidgetVuexBuilderModel);function I(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=E(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var r=0;var i=function e(){};return{s:i,n:function t(){if(r>=e.length)return{done:true};return{done:false,value:e[r++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,o=false,a;return{s:function t(){n=n.call(e)},n:function e(){var t=n.next();s=t.done;return t},e:function e(t){o=true;a=t},f:function e(){try{if(!s&&n["return"]!=null)n["return"]()}finally{if(o)throw a}}}}function E(e,t){if(!e)return;if(typeof e==="string")return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}function C(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"getName",value:function e(){return"files"}},{key:"getState",value:function e(){return{created:0,host:this.getVariable("host",location.protocol+"//"+location.host),collection:{},index:{}}}},{key:"getElementState",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=t.id,r=n===void 0?0:n,i=t.chatId,s=i===void 0?0:i,o=t.name,l=o===void 0?this.getVariable("default.name",""):o;return{id:r,chatId:s,name:l,templateId:r,date:new Date,type:"file",extension:"",icon:"empty",size:0,image:false,status:a.FileStatus.done,progress:100,authorId:0,authorName:"",urlPreview:"",urlShow:"",urlDownload:"",init:false,viewerAttrs:{}}}},{key:"getGetters",value:function e(){var t=this;return{get:function e(t){return function(e,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!e||!n){return null}if(!t.index[e]||!t.index[e][n]){return null}if(!r&&!t.index[e][n].init){return null}return t.index[e][n]}},getList:function e(t){return function(e){if(!t.index[e]){return null}return t.index[e]}},getBlank:function e(n){return function(e){return t.getElementState(e)}}}}},{key:"getActions",value:function e(){var t=this;return{add:function e(n,r){var i=t.validate(Object.assign({},r),{host:n.state.host});if(r.id){i.id=r.id}else{i.id="temporary"+(new Date).getTime()+n.state.created}i.templateId=i.id;i.init=true;n.commit("add",Object.assign({},t.getElementState(),i));return i.id},set:function e(n,r){if(r instanceof Array){r=r.map((function(e){var r=t.validate(Object.assign({},e),{host:n.state.host});r.templateId=r.id;return Object.assign({},t.getElementState(),r,{init:true})}))}else{var i=t.validate(Object.assign({},r),{host:n.state.host});i.templateId=i.id;r=[];r.push(Object.assign({},t.getElementState(),i,{init:true}))}n.commit("set",{insertType:a.MutationType.setAfter,data:r})},setBefore:function e(n,r){if(r instanceof Array){r=r.map((function(e){var r=t.validate(Object.assign({},e),{host:n.state.host});r.templateId=r.id;return Object.assign({},t.getElementState(),r,{init:true})}))}else{var i=t.validate(Object.assign({},r),{host:n.state.host});i.templateId=i.id;r=[];r.push(Object.assign({},t.getElementState(),i,{init:true}))}n.commit("set",{actionName:"setBefore",insertType:a.MutationType.setBefore,data:r})},update:function e(n,r){var i=t.validate(Object.assign({},r.fields),{host:n.state.host});n.commit("initCollection",{chatId:r.chatId});var s=n.state.collection[r.chatId].findIndex((function(e){return e.id===r.id}));if(s<0){return false}n.commit("update",{id:r.id,chatId:r.chatId,index:s,fields:i});if(r.fields.blink){setTimeout((function(){n.commit("update",{id:r.id,chatId:r.chatId,fields:{blink:false}})}),1e3)}return true},delete:function e(t,n){t.commit("delete",{id:n.id,chatId:n.chatId});return true},saveState:function e(t,n){t.commit("saveState",{});return true}}}},{key:"getMutations",value:function e(){var t=this;return{initCollection:function e(n,r){t.initCollection(n,r)},add:function e(n,r){t.initCollection(n,r);n.collection[r.chatId].push(r);n.index[r.chatId][r.id]=r;n.created+=1;t.saveState(n)},set:function e(n,r){var i=I(r.data),s;try{var o=function e(){var i=s.value;t.initCollection(n,{chatId:i.chatId});var o=n.collection[i.chatId].findIndex((function(e){return e.id===i.id}));if(o>-1){delete i.templateId;n.collection[i.chatId][o]=Object.assign(n.collection[i.chatId][o],i)}else if(r.insertType===a.MutationType.setBefore){n.collection[i.chatId].unshift(i)}else{n.collection[i.chatId].push(i)}n.index[i.chatId][i.id]=i;t.saveState(n)};for(i.s();!(s=i.n()).done;){o()}}catch(e){i.e(e)}finally{i.f()}},update:function e(n,r){t.initCollection(n,r);var i=-1;if(typeof r.index!=="undefined"&&n.collection[r.chatId][r.index]){i=r.index}else{i=n.collection[r.chatId].findIndex((function(e){return e.id===r.id}))}if(i>=0){delete r.fields.templateId;var s=Object.assign(n.collection[r.chatId][i],r.fields);n.collection[r.chatId][i]=s;n.index[r.chatId][s.id]=s;t.saveState(n)}},delete:function e(n,r){t.initCollection(n,r);n.collection[r.chatId]=n.collection[r.chatId].filter((function(e){return e.id!==r.id}));delete n.index[r.chatId][r.id];t.saveState(n)},saveState:function e(n,r){t.saveState(n)}}}},{key:"initCollection",value:function e(t,n){if(typeof t.collection[n.chatId]!=="undefined"){return true}i.WidgetVue.set(t.collection,n.chatId,[]);i.WidgetVue.set(t.index,n.chatId,{});return true}},{key:"getLoadedState",value:function e(t){if(!t||babelHelpers["typeof"](t)!=="object"){return t}if(babelHelpers["typeof"](t.collection)!=="object"){return t}t.index={};var n=function e(n){if(!t.collection.hasOwnProperty(n)){return"continue"}t.index[n]={};t.collection[n].filter((function(e){return e!=null})).forEach((function(e){t.index[n][e.id]=e}))};for(var r in t.collection){var i=n(r);if(i==="continue")continue}return t}},{key:"getSaveFileList",value:function e(){if(!this.db){return[]}if(!this.store.getters["messages/getSaveFileList"]){return[]}var t=this.store.getters["messages/getSaveFileList"]();if(!t){return[]}return t}},{key:"getSaveTimeout",value:function e(){return 250}},{key:"saveState",value:function e(n){var r=this;if(!this.isSaveAvailable()){return false}babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"saveState",this).call(this,(function(){var e=r.getSaveFileList();if(!e){return false}var t={collection:{}};var i=function r(i){if(!e.hasOwnProperty(i)){return"continue"}e[i].forEach((function(e){if(!n.index[i]){return false}if(!n.index[i][e]){return false}if(!t.collection[i]){t.collection[i]=[]}t.collection[i].push(n.index[i][e])}))};for(var s in e){var o=i(s);if(o==="continue")continue}return t}))}},{key:"validate",value:function e(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var s={};i.host=i.host||this.getState().host;if(typeof n.id==="number"){s.id=n.id}else if(typeof n.id==="string"){if(n.id.startsWith("temporary")){s.id=n.id}else{s.id=parseInt(n.id)}}if(typeof n.templateId==="number"){s.templateId=n.templateId}else if(typeof n.templateId==="string"){if(n.templateId.startsWith("temporary")){s.templateId=n.templateId}else{s.templateId=parseInt(n.templateId)}}if(typeof n.chatId==="number"||typeof n.chatId==="string"){s.chatId=parseInt(n.chatId)}if(typeof n.date!=="undefined"){s.date=r.Utils.date.cast(n.date)}if(typeof n.type==="string"){s.type=n.type}if(typeof n.extension==="string"){s.extension=n.extension.toString();if(s.type==="image"){s.icon="img"}else if(s.type==="video"){s.icon="mov"}else{s.icon=t.getIconType(s.extension)}}if(typeof n.name==="string"||typeof n.name==="number"){s.name=n.name.toString()}if(typeof n.size==="number"||typeof n.size==="string"){s.size=parseInt(n.size)}if(typeof n.image==="boolean"){s.image=false}else if(babelHelpers["typeof"](n.image)==="object"&&n.image){s.image={width:0,height:0};if(typeof n.image.width==="string"||typeof n.image.width==="number"){s.image.width=parseInt(n.image.width)}if(typeof n.image.height==="string"||typeof n.image.height==="number"){s.image.height=parseInt(n.image.height)}if(s.image.width<=0||s.image.height<=0){s.image=false}}if(typeof n.status==="string"&&typeof a.FileStatus[n.status]!=="undefined"){s.status=n.status}if(typeof n.progress==="number"||typeof n.progress==="string"){s.progress=parseInt(n.progress)}if(typeof n.authorId==="number"||typeof n.authorId==="string"){s.authorId=parseInt(n.authorId)}if(typeof n.authorName==="string"||typeof n.authorName==="number"){s.authorName=n.authorName.toString()}if(typeof n.urlPreview==="string"){if(!n.urlPreview||n.urlPreview.startsWith("http")||n.urlPreview.startsWith("bx")||n.urlPreview.startsWith("file")||n.urlPreview.startsWith("blob")){s.urlPreview=n.urlPreview}else{s.urlPreview=i.host+n.urlPreview}}if(typeof n.urlDownload==="string"){if(!n.urlDownload||n.urlDownload.startsWith("http")||n.urlDownload.startsWith("bx")||n.urlPreview.startsWith("file")){s.urlDownload=n.urlDownload}else{s.urlDownload=i.host+n.urlDownload}}if(typeof n.urlShow==="string"){if(!n.urlShow||n.urlShow.startsWith("http")||n.urlShow.startsWith("bx")||n.urlShow.startsWith("file")){s.urlShow=n.urlShow}else{s.urlShow=i.host+n.urlShow}}if(babelHelpers["typeof"](n.viewerAttrs)==="object"){if(s.type==="image"&&!r.Utils.platform.isBitrixMobile()){s.viewerAttrs=n.viewerAttrs}if(s.type==="video"&&!r.Utils.platform.isBitrixMobile()&&s.size>t.maxDiskFileSize){s.viewerAttrs=n.viewerAttrs}}return s}}],[{key:"getType",value:function e(t){t=t.toString().toLowerCase().split(".").splice(-1)[0];switch(t){case"png":case"jpe":case"jpg":case"jpeg":case"gif":case"heic":case"bmp":case"webp":return a.FileType.image;case"mp4":case"mkv":case"webm":case"mpeg":case"hevc":case"avi":case"3gp":case"flv":case"m4v":case"ogg":case"wmv":case"mov":return a.FileType.video;case"mp3":return a.FileType.audio}return a.FileType.file}},{key:"getIconType",value:function e(t){var n="empty";switch(t.toString()){case"png":case"jpe":case"jpg":case"jpeg":case"gif":case"heic":case"bmp":case"webp":n="img";break;case"mp4":case"mkv":case"webm":case"mpeg":case"hevc":case"avi":case"3gp":case"flv":case"m4v":case"ogg":case"wmv":case"mov":n="mov";break;case"txt":n="txt";break;case"doc":case"docx":n="doc";break;case"xls":case"xlsx":n="xls";break;case"php":n="php";break;case"pdf":n="pdf";break;case"ppt":case"pptx":n="ppt";break;case"rar":n="rar";break;case"zip":case"7z":case"tar":case"gz":case"gzip":n="zip";break;case"set":n="set";break;case"conf":case"ini":case"plist":n="set";break}return n}}]);return t}(s.WidgetVuexBuilderModel);babelHelpers.defineProperty(_,"maxDiskFileSize",5242880);
/**
	 * Bitrix Messenger
	 * Recent model (Vuex Builder model)
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var x=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"getName",value:function e(){return"recent"}},{key:"getState",value:function e(){return{host:this.getVariable("host",location.protocol+"//"+location.host),collection:[]}}},{key:"getElementState",value:function e(){return{id:0,templateId:"",template:a.TemplateTypes.item,chatType:a.ChatTypes.chat,sectionCode:a.RecentSection.general,avatar:"",color:"#048bd0",title:"",lines:{id:0,status:0},message:{id:0,text:"",date:new Date,senderId:0,status:a.MessageStatus.received},counter:0,pinned:false,chatId:0,userId:0}}},{key:"getGetters",value:function e(){var t=this;return{get:function e(n){return function(e){if(o.Type.isNumber(e)){e=e.toString()}var n=t.findItem(e);if(n){return n}return false}}}}},{key:"getActions",value:function e(){var t=this;return{set:function e(n,r){var i=[];if(r instanceof Array){i=r.map((function(e){return t.prepareItem(e,{host:n.state.host})}))}if(i.length===0){return false}i.forEach((function(e){var r=t.findItem(e.id);if(r){n.commit("update",{index:r.index,fields:e})}else{n.commit("add",{fields:e})}}));n.state.collection.sort(t.sortListByMessageDate)},addPlaceholders:function e(t,n){n.forEach((function(e){t.commit("addPlaceholder",{fields:e})}))},updatePlaceholders:function e(n,r){r.items=r.items.map((function(e){return t.prepareItem(e)}));r.items.forEach((function(e,i){var s="placeholder"+(r.firstMessage+i);var o=t.findItem(s,"templateId");var a=t.findItem(e.id);if(a){n.commit("update",{index:a.index,fields:e});n.commit("delete",{index:o.index})}else{n.commit("update",{index:o.index,fields:e})}}))},update:function e(n,r){if(typeof r.id==="string"&&!r.id.startsWith("chat")&&r.id!=="notify"){r.id=parseInt(r.id)}var i=t.findItem(r.id);if(!i){return false}r.fields=t.validate(Object.assign({},r.fields));n.commit("update",{index:i.index,fields:r.fields});n.state.collection.sort(t.sortListByMessageDate)},pin:function e(n,r){if(typeof r.id==="string"&&!r.id.startsWith("chat")&&r.id!=="notify"){r.id=parseInt(r.id)}var i=t.findItem(r.id);if(!i){return false}n.commit("update",{index:i.index,fields:Object.assign({},i.element,{pinned:r.action})});n.state.collection.sort(t.sortListByMessageDate)},clearPlaceholders:function e(t){t.commit("clearPlaceholders")},delete:function e(n,r){if(typeof r.id==="string"&&!r.id.startsWith("chat")&&r.id!=="notify"){r.id=parseInt(r.id)}var i=t.findItem(r.id);if(!i){return false}n.commit("delete",{index:i.index});n.state.collection.sort(t.sortListByMessageDate)}}}},{key:"getMutations",value:function e(){var t=this;return{add:function e(n,r){n.collection.push(Object.assign({},t.getElementState(),r.fields))},update:function e(t,n){t.collection.splice(n.index,1,Object.assign({},t.collection[n.index],n.fields))},delete:function e(t,n){t.collection.splice(n.index,1)},addPlaceholder:function e(n,r){n.collection.push(Object.assign({},t.getElementState(),r.fields))},clearPlaceholders:function e(t){t.collection=t.collection.filter((function(e){return!e.id.toString().startsWith("placeholder")}))}}}},{key:"validate",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i={};if(o.Type.isNumber(t.id)){i.id=t.id.toString()}if(o.Type.isStringFilled(t.id)){i.id=t.id}if(o.Type.isString(t.templateId)){i.templateId=t.templateId}if(o.Type.isString(t.template)){i.template=t.template}if(o.Type.isString(t.type)){if(t.type===a.ChatTypes.chat){if(t.chat.type===a.ChatTypes.open){i.chatType=a.ChatTypes.open}else if(t.chat.type===a.ChatTypes.chat){i.chatType=a.ChatTypes.chat}}else if(t.type===a.ChatTypes.user){i.chatType=a.ChatTypes.user}else if(t.type===a.ChatTypes.notification){i.chatType=a.ChatTypes.notification;t.title="Notifications"}else{i.chatType=a.ChatTypes.chat}}if(o.Type.isString(t.avatar)){var s;if(!t.avatar||t.avatar.endsWith("/js/im/images/blank.gif")){s=""}else if(t.avatar.startsWith("http")){s=t.avatar}else{s=n.host+t.avatar}if(s){i.avatar=encodeURI(s)}}if(o.Type.isString(t.color)){i.color=t.color}if(o.Type.isString(t.title)){i.title=t.title}if(o.Type.isPlainObject(t.message)){var l={};if(o.Type.isNumber(t.message.id)){l.id=t.message.id}if(o.Type.isString(t.message.text)){var u={};if(t.message.withAttach){u.WITH_ATTACH=true}else if(t.message.withFile){u.WITH_FILE=true}l.text=r.Utils.text.purify(t.message.text,u)}if(o.Type.isDate(t.message.date)||o.Type.isString(t.message.date)){l.date=t.message.date}if(o.Type.isNumber(t.message.author_id)){l.senderId=t.message.author_id}if(o.Type.isNumber(t.message.senderId)){l.senderId=t.message.senderId}if(o.Type.isStringFilled(t.message.status)){l.status=t.message.status}i.message=l}if(o.Type.isNumber(t.counter)){i.counter=t.counter}if(o.Type.isBoolean(t.pinned)){i.pinned=t.pinned}if(o.Type.isNumber(t.chatId)){i.chatId=t.chatId}if(o.Type.isNumber(t.userId)){i.userId=t.userId}return i}},{key:"sortListByMessageDate",value:function e(t,n){if(t.message&&n.message){var r=new Date(t.message.date).getTime();var i=new Date(n.message.date).getTime();return i-r}}},{key:"prepareItem",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=this.validate(Object.assign({},t));return Object.assign({},this.getElementState(),r,n)}},{key:"findItem",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"id";var r={};if(n==="id"&&o.Type.isNumber(t)){t=t.toString()}var i=this.store.state.recent.collection.findIndex((function(e,r){return e[n]===t}));if(i!==-1){r.index=i;r.element=this.store.state.recent.collection[i];return r}return false}}]);return t}(s.WidgetVuexBuilderModel);function T(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=O(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var r=0;var i=function e(){};return{s:i,n:function t(){if(r>=e.length)return{done:true};return{done:false,value:e[r++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,o=false,a;return{s:function t(){n=n.call(e)},n:function e(){var t=n.next();s=t.done;return t},e:function e(t){o=true;a=t},f:function e(){try{if(!s&&n["return"]!=null)n["return"]()}finally{if(o)throw a}}}}function O(e,t){if(!e)return;if(typeof e==="string")return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}function M(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"getName",value:function e(){return"notifications"}},{key:"getState",value:function e(){return{collection:[],searchCollection:[],chat_id:0,total:0,host:this.getVariable("host",location.protocol+"//"+location.host),unreadCounter:0,schema:{}}}},{key:"getElementState",value:function e(){return{id:0,authorId:0,date:new Date,text:"",sectionCode:a.NotificationTypesCodes.simple,textConverted:"",title:"",unread:false,display:true,settingName:"im|default"}}},{key:"getGetters",value:function e(){var t=this;return{get:function e(t){return function(){return t.collection}},getById:function e(n){return function(e){if(o.Type.isString(e)){e=parseInt(e)}var r=t.findItemInArr(n.collection,e);if(!r.element){return false}return r.element}},getSearchItemById:function e(n){return function(e){if(o.Type.isString(e)){e=parseInt(e)}var r=t.findItemInArr(n.searchCollection,e);if(!r.element){return false}return r.element}},getBlank:function e(n){return function(e){return t.getElementState()}}}}},{key:"getActions",value:function e(){var t=this;return{set:function e(n,r){var i={notification:[]};if(r.notification instanceof Array){i.notification=r.notification.map((function(e){return t.prepareNotification(e,{host:n.state.host})}))}if(o.Type.isNumber(r.total)||o.Type.isString(r.total)){i.total=parseInt(r.total)}n.commit("set",i)},setSearchResults:function e(n,r){var i={notification:[]};if(!(r.notification instanceof Array)){return false}if(r.type==="local"){i.notification=r.notification}else{i.notification=r.notification.map((function(e){return t.prepareNotification(e,{host:n.state.host})}))}n.commit("setSearchResults",{data:i})},deleteSearchResults:function e(t,n){t.commit("deleteSearchResults")},setCounter:function e(t,n){if(o.Type.isNumber(n.unreadTotal)||o.Type.isString(n.unreadTotal)){var r=parseInt(n.unreadTotal);t.commit("setCounter",r)}},setTotal:function e(t,n){if(o.Type.isNumber(n.total)||o.Type.isString(n.total)){t.commit("setTotal",n.total)}},add:function e(n,r){var i=t.prepareNotification(r.data,{host:n.state.host});i.unread=true;var s=t.findItemInArr(n.state.collection,i.id);if(!s.element){n.commit("add",{data:i});n.commit("setTotal",n.state.total+1)}else{n.commit("update",{index:s.index,fields:Object.assign({},r.fields)})}},updatePlaceholders:function e(n,r){if(r.items instanceof Array){r.items=r.items.map((function(e){return t.prepareNotification(e)}))}else{return false}n.commit("updatePlaceholders",r);return true},clearPlaceholders:function e(t,n){t.commit("clearPlaceholders",n)},update:function e(n,r){var i=t.findItemInArr(n.state.collection,r.id);if(i.element){n.commit("update",{index:i.index,fields:Object.assign({},r.fields)})}if(r.searchMode){var s=t.findItemInArr(n.state.searchCollection,r.id);if(s.element){n.commit("update",{searchCollection:true,index:s.index,fields:Object.assign({},r.fields)})}}},read:function e(n,r){var i=T(r.ids),s;try{for(i.s();!(s=i.n()).done;){var o=s.value;var a=t.findItemInArr(n.state.collection,o);if(!a.element){return false}n.commit("read",{index:a.index,action:!r.action})}}catch(e){i.e(e)}finally{i.f()}},readAll:function e(t,n){t.commit("readAll")},delete:function e(n,r){var i=t.findItemInArr(n.state.collection,r.id);if(i.element){n.commit("delete",{searchCollection:false,index:i.index});n.commit("setTotal",n.state.total-1)}if(r.searchMode){var s=t.findItemInArr(n.state.searchCollection,r.id);if(s.element){n.commit("delete",{searchCollection:true,index:s.index})}}},deleteAll:function e(t,n){t.commit("deleteAll")},setSchema:function e(t,n){t.commit("setSchema",{data:n.data})}}}},{key:"getMutations",value:function e(){var t=this;return{set:function e(n,r){n.total=r.hasOwnProperty("total")?r.total:n.total;if(!r.hasOwnProperty("notification")||!o.Type.isArray(r.notification)){return}var i=T(r.notification),s;try{for(i.s();!(s=i.n()).done;){var a=s.value;var l=t.findItemInArr(n.collection,a.id);if(!l.element){n.collection.push(a)}else{if(a.unread!==n.collection[l.index].unread){a.unread=n.collection[l.index].unread;n.unreadCounter=a.unread===true?n.unreadCounter+1:n.unreadCounter-1}n.collection[l.index]=Object.assign(n.collection[l.index],a)}}}catch(e){i.e(e)}finally{i.f()}n.collection.sort(t.sortByType)},setSearchResults:function e(n,r){var i=T(r.data.notification),s;try{for(i.s();!(s=i.n()).done;){var o=s.value;var a=t.findItemInArr(n.searchCollection,o.id);if(!a.element){n.searchCollection.push(o)}else{n.searchCollection[a.index]=Object.assign(n.searchCollection[a.index],o)}}}catch(e){i.e(e)}finally{i.f()}},deleteAll:function e(t,n){t.collection=[]},deleteSearchResults:function e(t,n){t.searchCollection=[]},add:function e(n,r){var i=null;if(r.data.sectionCode===a.NotificationTypesCodes.confirm){n.collection.unshift(r.data)}else{for(var s=0;n.collection.length>s;s++){if(n.collection[s].sectionCode===a.NotificationTypesCodes.simple){i=s;break}}if(i===null){n.collection.push(r.data)}else{n.collection.splice(i,0,r.data)}}n.collection.sort(t.sortByType)},update:function e(t,n){var r=n.searchCollection?"searchCollection":"collection";i.WidgetVue.set(t[r],n.index,Object.assign({},t[r][n.index],n.fields))},delete:function e(t,n){var r=n.searchCollection?"searchCollection":"collection";t[r].splice(n.index,1)},read:function e(t,n){t.collection[n.index].unread=n.action},readAll:function e(t,n){for(var r=0;t.collection.length>r;r++){t.collection[r].unread=false}},updatePlaceholders:function e(n,r){var i=r.searchCollection?"searchCollection":"collection";r.items.forEach((function(e,t){var s="placeholder".concat(r.firstItem+t);var o=n[i].findIndex((function(e){return e.id===s}));var a=n[i].findIndex((function(t){return t.id===e.id}));if(a>=0){n[i][a]=Object.assign(n[i][a],e);n[i].splice(o,1)}else{n[i].splice(o,1,Object.assign({},e))}}));n[i].sort(t.sortByType)},clearPlaceholders:function e(t,n){t.collection=t.collection.filter((function(e){return!e.id.toString().startsWith("placeholder")}));t.searchCollection=t.searchCollection.filter((function(e){return!e.id.toString().startsWith("placeholder")}))},setCounter:function e(t,n){t.unreadCounter=n},setTotal:function e(t,n){t.total=n},setSchema:function e(t,n){t.schema=n.data}}}},{key:"validate",value:function e(n,i){var s={};if(o.Type.isString(n.id)||o.Type.isNumber(n.id)){s.id=n.id}if(!o.Type.isNil(n.date)){s.date=r.Utils.date.cast(n.date)}if(o.Type.isString(n.text)||o.Type.isNumber(n.text)){s.text=n.text.toString();s.textConverted=t.decodeText(s.text)}if(o.Type.isNumber(n.author_id)){if(n.system===true||n.system==="Y"){s.authorId=0}else{s.authorId=n.author_id}}if(o.Type.isNumber(n.userId)){s.authorId=n.userId}if(o.Type.isObjectLike(n.params)){var l=this.validateParams(n.params);if(l){s.params=l}}if(!o.Type.isNil(n.notify_buttons)){s.notifyButtons=JSON.parse(n.notify_buttons)}if(!o.Type.isNil(n.buttons)){s.notifyButtons=n.buttons.map((function(e){return{COMMAND:"notifyConfirm",COMMAND_PARAMS:"".concat(s.id,"|").concat(e.VALUE),TEXT:"".concat(e.TITLE),TYPE:"BUTTON",DISPLAY:"LINE",BG_COLOR:e.VALUE==="Y"?"#8bc84b":"#ef4b57",TEXT_COLOR:"#fff"}}))}if(n.notify_type===a.NotificationTypesCodes.confirm||n.type===a.NotificationTypesCodes.confirm){s.sectionCode=a.NotificationTypesCodes.confirm}else if(n.type===a.NotificationTypesCodes.placeholder){s.sectionCode=a.NotificationTypesCodes.placeholder}if(!o.Type.isNil(n.notify_read)){s.unread=n.notify_read==="N"}if(!o.Type.isNil(n.read)){s.unread=n.read==="N"}if(o.Type.isString(n.setting_name)){s.settingName=n.setting_name}if(o.Type.isString(n.notify_title)&&n.notify_title.length>0){s.title=n.notify_title}if(o.Type.isString(n.title)&&n.title.length>0){s.title=n.title}return s}},{key:"validateParams",value:function e(t){var n={};try{for(var i in t){if(!t.hasOwnProperty(i)){continue}if(i==="COMPONENT_ID"){if(o.Type.isString(t[i])&&BX.WidgetVue.isComponent(t[i])){n[i]=t[i]}}else if(i==="LIKE"){if(t[i]instanceof Array){n["REACTION"]={like:t[i].map((function(e){return parseInt(e)}))}}}else if(i==="CHAT_LAST_DATE"){n[i]=r.Utils.date.cast(t[i])}else if(i==="AVATAR"){if(t[i]){n[i]=t[i].startsWith("http")?t[i]:options.host+t[i]}}else if(i==="NAME"){if(t[i]){n[i]=t[i]}}else{n[i]=t[i]}}}catch(e){}var s=false;for(var a in n){if(!n.hasOwnProperty(a)){continue}s=true;break}return s?n:null}},{key:"prepareNotification",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=this.validate(Object.assign({},t));return Object.assign({},this.getElementState(),r,n)}},{key:"findItemInArr",value:function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"id";var i={};var s=t.findIndex((function(e,t){return e[r]===n}));if(s!==-1){i.index=s;i.element=t[s]}return i}},{key:"sortByType",value:function e(t,n){if(t.sectionCode===a.NotificationTypesCodes.confirm&&n.sectionCode!==a.NotificationTypesCodes.confirm){return-1}else if(t.sectionCode!==a.NotificationTypesCodes.confirm&&n.sectionCode===a.NotificationTypesCodes.confirm){return 1}else{return n.id-t.id}}}],[{key:"decodeText",value:function e(t){t=o.Text.decode(t.toString());t=r.Utils.text.decode(t,{skipImages:true});var n=o.Reflection.getClass("BX.Messenger.v2.Lib.Parser");if(n){t=n.decodeSmileForLegacyCore(t,{enableBigSmile:false})}if(!r.Utils.platform.isBitrixDesktop()){t=t.replace(/<a(.*?)>(.*?)<\/a>/gi,(function(e,t,n){return"<a ".concat(t.replace('target="_blank"','target="_self"'),' class="bx-im-notifications-item-link">').concat(n,"</a>")}))}return t}}]);return t}(s.WidgetVuexBuilderModel);
/**
	 * Bitrix Messenger
	 * Call Application model (Vuex Builder model)
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var A=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"getName",value:function e(){return"call"}},{key:"getState",value:function e(){return{users:{}}}},{key:"getElementState",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{id:t.id?t.id:0,state:a.ConferenceUserState.Idle,talking:false,pinned:false,cameraState:false,microphoneState:false,screenState:false,floorRequestState:false}}},{key:"getGetters",value:function e(){var t=this;return{getUser:function e(n){return function(e){e=parseInt(e,10);if(!n.users[e]){return t.getElementState({id:e})}return n.users[e]}},getBlankUser:function e(n){return function(e){e=parseInt(e,10);return t.getElementState({id:e})}}}}},{key:"getActions",value:function e(){var t=this;return{updateUser:function e(n,r){r.id=parseInt(r.id,10);r.fields=Object.assign({},t.validate(r.fields));n.commit("updateUser",r)},unpinUser:function e(t,n){t.commit("unpinUser")}}}},{key:"getMutations",value:function e(){var t=this;return{updateUser:function e(n,r){if(!n.users[r.id]){i.WidgetVue.set(n.users,r.id,Object.assign(t.getElementState(),r.fields,{id:r.id}))}else{n.users[r.id]=Object.assign(n.users[r.id],r.fields)}},unpinUser:function e(t,n){var r=Object.values(t.users).find((function(e){return e.pinned===true}));if(r){t.users[r.id].pinned=false}}}}},{key:"validate",value:function e(t){var n={};if(o.Type.isNumber(t.id)||o.Type.isString(t.id)){n.id=parseInt(t.id,10)}if(a.ConferenceUserState[t.state]){n.state=t.state}if(o.Type.isBoolean(t.talking)){n.talking=t.talking}if(o.Type.isBoolean(t.pinned)){n.pinned=t.pinned}if(o.Type.isBoolean(t.cameraState)){n.cameraState=t.cameraState}if(o.Type.isBoolean(t.microphoneState)){n.microphoneState=t.microphoneState}if(o.Type.isBoolean(t.screenState)){n.screenState=t.screenState}if(o.Type.isBoolean(t.floorRequestState)){n.floorRequestState=t.floorRequestState}return n}},{key:"getStateSaveException",value:function e(){return{users:false}}}]);return t}(s.WidgetVuexBuilderModel);e.ApplicationModel=l;e.ConferenceModel=u;e.MessagesModel=p;e.DialoguesModel=y;e.UsersModel=k;e.FilesModel=_;e.RecentModel=x;e.NotificationsModel=D;e.CallModel=A})(this.BX.Messenger.Model=this.BX.Messenger.Model||{},BX.Messenger.Lib,BX.Event,BX.Messenger.Lib,BX,BX,BX,BX.Messenger.Const);(function(e,t){"use strict";if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype){if(!("isIntersecting"in e.IntersectionObserverEntry.prototype)){Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}})}return}var n=[];function r(e){this.time=e.time;this.target=e.target;this.rootBounds=e.rootBounds;this.boundingClientRect=e.boundingClientRect;this.intersectionRect=e.intersectionRect||f();this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect;var n=t.width*t.height;var r=this.intersectionRect;var i=r.width*r.height;if(n){this.intersectionRatio=i/n}else{this.intersectionRatio=this.isIntersecting?1:0}}function i(e,t){var n=t||{};if(typeof e!=="function"){throw new Error("callback must be a function")}if(n.root&&n.root.nodeType!==1){throw new Error("root must be an Element")}this._checkForIntersections=o(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT);this._callback=e;this._observationTargets=[];this._queuedEntries=[];this._rootMarginValues=this._parseRootMargin(n.rootMargin);this.thresholds=this._initThresholds(n.threshold);this.root=n.root||null;this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" ")}i.prototype.THROTTLE_TIMEOUT=100;i.prototype.POLL_INTERVAL=null;i.prototype.USE_MUTATION_OBSERVER=true;i.prototype.observe=function(e){var t=this._observationTargets.some((function(t){return t.element===e}));if(t){return}if(!(e&&e.nodeType===1)){throw new Error("target must be an Element")}this._registerInstance();this._observationTargets.push({element:e,entry:null});this._monitorIntersections();this._checkForIntersections()};i.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!==e}));if(!this._observationTargets.length){this._unmonitorIntersections();this._unregisterInstance()}};i.prototype.disconnect=function(){this._observationTargets=[];this._unmonitorIntersections();this._unregisterInstance()};i.prototype.takeRecords=function(){var e=this._queuedEntries.slice();this._queuedEntries=[];return e};i.prototype._initThresholds=function(e){var t=e||[0];if(!Array.isArray(t)){t=[t]}return t.sort().filter((function(e,t,n){if(typeof e!=="number"||isNaN(e)||e<0||e>1){throw new Error("threshold must be a number between 0 and 1 inclusively")}return e!==n[t-1]}))};i.prototype._parseRootMargin=function(e){var t=e||"0px";var n=t.split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t){throw new Error("rootMargin must be specified in pixels or percent")}return{value:parseFloat(t[1]),unit:t[2]}}));n[1]=n[1]||n[0];n[2]=n[2]||n[0];n[3]=n[3]||n[1];return n};i.prototype._monitorIntersections=function(){if(!this._monitoringIntersections){this._monitoringIntersections=true;if(this.POLL_INTERVAL){this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL)}else{a(e,"resize",this._checkForIntersections,true);a(t,"scroll",this._checkForIntersections,true);if(this.USE_MUTATION_OBSERVER&&"MutationObserver"in e){this._domObserver=new MutationObserver(this._checkForIntersections);this._domObserver.observe(t,{attributes:true,childList:true,characterData:true,subtree:true})}}}};i.prototype._unmonitorIntersections=function(){if(this._monitoringIntersections){this._monitoringIntersections=false;clearInterval(this._monitoringInterval);this._monitoringInterval=null;l(e,"resize",this._checkForIntersections,true);l(t,"scroll",this._checkForIntersections,true);if(this._domObserver){this._domObserver.disconnect();this._domObserver=null}}};i.prototype._checkForIntersections=function(){var e=this._rootIsInDom();var t=e?this._getRootRect():f();this._observationTargets.forEach((function(n){var i=n.element;var o=c(i);var a=this._rootContainsTarget(i);var l=n.entry;var u=e&&a&&this._computeTargetAndRootIntersection(i,t);var f=n.entry=new r({time:s(),target:i,boundingClientRect:o,rootBounds:t,intersectionRect:u});if(!l){this._queuedEntries.push(f)}else if(e&&a){if(this._hasCrossedThreshold(l,f)){this._queuedEntries.push(f)}}else{if(l&&l.isIntersecting){this._queuedEntries.push(f)}}}),this);if(this._queuedEntries.length){this._callback(this.takeRecords(),this)}};i.prototype._computeTargetAndRootIntersection=function(n,r){if(e.getComputedStyle(n).display==="none"){return}var i=c(n);var s=h(n);var o=false;while(!o){var a=null;var l=s.nodeType===1?e.getComputedStyle(s):{};if(l.display=="none"){return}if(s===this.root||s===t){o=true;a=r}else{if(s!=t.body&&s!=t.documentElement&&l.overflow!="visible"){a=c(s)}}if(a){i=u(a,i);if(!i){break}}s=h(s)}return i};i.prototype._getRootRect=function(){var e;if(this.root){e=c(this.root)}else{var n=t.documentElement;var r=t.body;e={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)};i.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return t.unit==="px"?t.value:t.value*(n%2?e.width:e.height)/100}));var n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};n.width=n.right-n.left;n.height=n.bottom-n.top;return n};i.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1;var r=t.isIntersecting?t.intersectionRatio||0:-1;if(n===r){return}for(var i=0;i<this.thresholds.length;i++){var s=this.thresholds[i];if(s==n||s==r||s<n!==s<r){return true}}};i.prototype._rootIsInDom=function(){return!this.root||d(t,this.root)};i.prototype._rootContainsTarget=function(e){return d(this.root||t,e)};i.prototype._registerInstance=function(){if(n.indexOf(this)<0){n.push(this)}};i.prototype._unregisterInstance=function(){var e=n.indexOf(this);if(e!==-1){n.splice(e,1)}};function s(){return e.performance&&performance.now&&performance.now()}function o(e,t){var n=null;return function(){if(!n){n=setTimeout((function(){e();n=null}),t)}}}function a(e,t,n,r){if(typeof e.addEventListener=="function"){e.addEventListener(t,n,r||false)}else if(typeof e.attachEvent==="function"){e.attachEvent("on"+t,n)}}function l(e,t,n,r){if(typeof e.removeEventListener==="function"){e.removeEventListener(t,n,r||false)}else if(typeof e.detatchEvent==="function"){e.detatchEvent("on"+t,n)}}function u(e,t){var n=Math.max(e.top,t.top);var r=Math.min(e.bottom,t.bottom);var i=Math.max(e.left,t.left);var s=Math.min(e.right,t.right);var o=s-i;var a=r-n;return o>=0&&a>=0&&{top:n,bottom:r,left:i,right:s,width:o,height:a}}function c(e){var t;try{t=e.getBoundingClientRect()}catch(e){}if(!t){return f()}if(!(t.width&&t.height)){t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}}return t}function f(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function d(e,t){var n=t;while(n){if(n===e){return true}n=h(n)}return false}function h(e){var t=e.parentNode;if(t&&t.nodeType==11&&t.host){return t.host}return t}e.IntersectionObserver=i;e.IntersectionObserverEntry=r})(window,document);(function(e,t,n,r,i){"use strict";
/**
	 * Bitrix UI
	 * Audio player Vue component
	 *
	 * @package bitrix
	 * @subpackage ui
	 * @copyright 2001-2021 Bitrix
	 */var s=Object.freeze({play:"play",pause:"pause",stop:"stop",none:"none"});r.WidgetBitrixVue.component("bx-audioplayer",{props:{id:{default:0},src:{default:""},autoPlayNext:{default:true},background:{default:"light"}},data:function e(){return{isDark:false,preload:"none",loaded:false,loading:false,playAfterLoad:false,state:s.none,progress:0,progressInPixel:0,seek:0,timeCurrent:0,timeTotal:0}},created:function e(){this.preloadRequestSent=false;this.registeredId=0;this.registerPlayer(this.id);this.$Bitrix.eventEmitter.subscribe("ui:audioplayer:play",this.onPlay);this.$Bitrix.eventEmitter.subscribe("ui:audioplayer:stop",this.onStop);this.$Bitrix.eventEmitter.subscribe("ui:audioplayer:pause",this.onPause);this.$Bitrix.eventEmitter.subscribe("ui:audioplayer:preload",this.onPreload);this.isDark=this.background==="dark"},mounted:function e(){this.getObserver().observe(this.$refs.body)},beforeDestroy:function e(){this.unregisterPlayer();this.$Bitrix.eventEmitter.unsubscribe("ui:audioplayer:play",this.onPlay);this.$Bitrix.eventEmitter.unsubscribe("ui:audioplayer:stop",this.onStop);this.$Bitrix.eventEmitter.unsubscribe("ui:audioplayer:pause",this.onPause);this.$Bitrix.eventEmitter.unsubscribe("ui:audioplayer:preload",this.onPreload);this.getObserver().unobserve(this.$refs.body)},watch:{id:function e(t){this.registerPlayer(t)},progress:function e(t){if(t>70){this.preloadNext()}}},methods:{loadFile:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.loaded){return true}if(this.loading&&!t){return true}this.preload="auto";if(t){this.loading=true;if(this.source()){this.source().play()}}return true},clickToButton:function e(){if(!this.src){return false}if(this.state===s.play){this.pause()}else{this.play()}},play:function e(){if(!this.loaded){this.loadFile(true);return false}this.source().play()},pause:function e(){this.source().pause()},stop:function e(){this.state=s.stop;this.source().pause()},setPosition:function e(t){if(!this.loaded){this.loadFile(true);return false}var n=this.$refs.track.offsetWidth/100;this.setProgress(this.seek/n,this.seek);if(this.state!==s.play){this.state=s.pause}this.play();this.source().currentTime=this.timeTotal/100*this.progress},seeking:function e(t){if(!this.loaded){return false}this.seek=t.offsetX>0?t.offsetX:0;return true},setProgress:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;this.progress=t;this.progressInPixel=n>0?n:Math.round(this.$refs.track.offsetWidth/100*t)},formatTime:function e(t){t=Math.floor(t);var n=Math.floor(t/60/60);if(n>0){t-=n*60*60}var r=Math.floor(t/60);if(r>0){t-=r*60}return(n>0?n+":":"")+(n>0?r.toString().padStart(2,"0")+":":r+":")+t.toString().padStart(2,"0")},registerPlayer:function e(t){var n=this;if(t<=0){return false}var r=this.$Bitrix.Data.get("ui-audioplayer-id",[]);r=babelHelpers.toConsumableArray(new Set([].concat(babelHelpers.toConsumableArray(r),[t]))).filter((function(e){return e!==n.registeredId})).sort((function(e,t){return e-t}));this.$Bitrix.Data.set("ui-audioplayer-id",r);this.registeredId=t;return true},unregisterPlayer:function e(){var t=this;if(!this.registeredId){return true}var n=this.$Bitrix.Data.get("ui-audioplayer-id",[]).filter((function(e){return e!==t.registeredId}));this.$Bitrix.Data.set("ui-audioplayer-id",n);this.registeredId=0;return true},playNext:function e(){var t=this;if(!this.registeredId||!this.autoPlayNext){return false}var n=this.$Bitrix.Data.get("ui-audioplayer-id",[]).filter((function(e){return e>t.registeredId})).slice(0,1)[0];if(n){this.$Bitrix.eventEmitter.emit("ui:audioplayer:play",{id:n,start:true})}return true},preloadNext:function e(){var t=this;if(this.preloadRequestSent){return true}if(!this.registeredId||!this.autoPlayNext){return false}this.preloadRequestSent=true;var n=this.$Bitrix.Data.get("ui-audioplayer-id",[]).filter((function(e){return e>t.registeredId})).slice(0,1)[0];if(n){this.$Bitrix.eventEmitter.emit("ui:audioplayer:preload",{id:n})}return true},onPlay:function e(t){var n=t.getData();if(n.id!==this.id){return false}if(n.start){this.stop()}this.play()},onStop:function e(t){var n=t.getData();if(n.initiator===this.id){return false}this.stop()},onPause:function e(t){var n=t.getData();if(n.initiator===this.id){return false}this.pause()},onPreload:function e(t){var n=t.getData();if(n.id!==this.id){return false}this.loadFile()},source:function e(){return this.$refs.source},audioEventRouter:function e(t,n){if(t==="durationchange"||t==="loadeddata"||t==="loadedmetadata"){this.timeTotal=this.source().duration}else if(t==="abort"||t==="error"){console.error("BxAudioPlayer: load failed",this.id,n);this.loading=false;this.state=s.none;this.timeTotal=0;this.preload="none"}else if(t==="canplaythrough"){this.loading=false;this.loaded=true}else if(t==="timeupdate"){if(!this.source()){return}this.timeCurrent=this.source().currentTime;this.setProgress(Math.round(100/this.timeTotal*this.timeCurrent));if(this.state===s.play&&this.timeCurrent>=this.timeTotal){this.playNext()}}else if(t==="pause"){if(this.state!==s.stop){this.state=s.pause}}else if(t==="play"){this.state=s.play;if(this.state===s.stop){this.progress=0;this.timeCurrent=0}if(this.id>0){this.$Bitrix.eventEmitter.emit("ui:audioplayer:pause",{initiator:this.id})}}},getObserver:function e(){var t=this;if(this.observer){return this.observer}this.observer=new IntersectionObserver((function(e,n){e.forEach((function(e){if(e.isIntersecting){if(t.preload==="none"){t.preload="metadata";t.observer.unobserve(e.target)}}}))}),{threshold:[0,1]});return this.observer}},computed:{State:function e(){return s},seekPosition:function e(){if(!this.loaded&&!this.seek||this.isMobile){return"display: none"}return"left: ".concat(this.seek,"px;")},progressPosition:function e(){if(!this.loaded||this.state===s.none){return"width: 100%;"}return"width: ".concat(this.progressInPixel,"px;")},labelTime:function e(){if(!this.loaded&&!this.timeTotal){return"--:--"}var t;if(this.state===s.play){t=this.timeTotal-this.timeCurrent}else{t=this.timeTotal}return this.formatTime(t)},isMobile:function e(){var t=navigator.userAgent.toLowerCase();return t.includes("android")||t.includes("iphone")||t.includes("ipad")||t.includes("bitrixmobile")}},template:'\n\t\t<div :class="[\'ui-vue-audioplayer-container\', {\n\t\t\t\t\'ui-vue-audioplayer-container-dark\': isDark,\n\t\t\t\t\'ui-vue-audioplayer-container-mobile\': isMobile,\n\t\t\t}]" ref="body">\n\t\t\t<div class="ui-vue-audioplayer-controls-container">\n\t\t\t\t<button :class="[\'ui-vue-audioplayer-control\', {\n\t\t\t\t\t\'ui-vue-audioplayer-control-loader\': loading,\n\t\t\t\t\t\'ui-vue-audioplayer-control-play\': !loading && state !== State.play,\n\t\t\t\t\t\'ui-vue-audioplayer-control-pause\': !loading && state === State.play,\n\t\t\t\t}]" @click="clickToButton"></button>\n\t\t\t</div>\n\t\t\t<div class="ui-vue-audioplayer-timeline-container">\n\t\t\t\t<div class="ui-vue-audioplayer-track-container" @click="setPosition" ref="track">\n\t\t\t\t\t<div class="ui-vue-audioplayer-track-mask"></div>\n\t\t\t\t\t<div class="ui-vue-audioplayer-track" :style="progressPosition"></div>\n\t\t\t\t\t<div class="ui-vue-audioplayer-track-seek" :style="seekPosition"></div>\n\t\t\t\t\t<div class="ui-vue-audioplayer-track-event" @mousemove="seeking"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ui-vue-audioplayer-timers-container">\n\t\t\t\t\t<div class="ui-vue-audioplayer-time-current">{{labelTime}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<audio v-if="src" :src="src" class="ui-vue-audioplayer-source" ref="source" :preload="preload"\n\t\t\t\t@abort="audioEventRouter(\'abort\', $event)"\n\t\t\t\t@error="audioEventRouter(\'error\', $event)"\n\t\t\t\t@suspend="audioEventRouter(\'suspend\', $event)"\n\t\t\t\t@canplay="audioEventRouter(\'canplay\', $event)"\n\t\t\t\t@canplaythrough="audioEventRouter(\'canplaythrough\', $event)"\n\t\t\t\t@durationchange="audioEventRouter(\'durationchange\', $event)"\n\t\t\t\t@loadeddata="audioEventRouter(\'loadeddata\', $event)"\n\t\t\t\t@loadedmetadata="audioEventRouter(\'loadedmetadata\', $event)"\n\t\t\t\t@timeupdate="audioEventRouter(\'timeupdate\', $event)"\n\t\t\t\t@play="audioEventRouter(\'play\', $event)"\n\t\t\t\t@playing="audioEventRouter(\'playing\', $event)"\n\t\t\t\t@pause="audioEventRouter(\'pause\', $event)"\n\t\t\t></audio>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,BX,BX,BX.Event);(function(e,t){"use strict";
/**
	 * Image Lazy Load Vue directive
	 *
	 * @package bitrix
	 * @subpackage ui
	 * @copyright 2001-2019 Bitrix
	 */var n="bx-lazyload-watch";var r="bx-lazyload-loading";var i="bx-lazyload-success";var s="bx-lazyload-error";var o="bx-lazyload-hidden";var a="data:image/svg+xml,%3Csvg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'%3E%3C/svg%3E";var l=null;var u=function e(t,u){var c=t.dataset.lazyloadSuccessClass?t.dataset.lazyloadSuccessClass.split(" "):[];delete t.dataset.lazyloadSuccessClass;c=[i].concat(babelHelpers.toConsumableArray(c));var f=t.dataset.lazyloadErrorClass?t.dataset.lazyloadErrorClass.split(" "):[];delete t.dataset.lazyloadErrorClass;f=[s].concat(babelHelpers.toConsumableArray(f));t.classList.add(r);var d=new Image;d.src=t.dataset.lazyloadSrc;if(!t.dataset.lazyloadHiddenSrc){t.dataset.lazyloadHiddenSrc=t.src}d.onload=function(){var e;if(t.classList.contains(o)){return false}if(t.dataset.lazyloadSrc){t.src=t.dataset.lazyloadSrc}t.classList.remove(r);(e=t.classList).add.apply(e,babelHelpers.toConsumableArray(c));if(typeof t.lazyloadCallback==="function"){t.lazyloadCallback({element:t,state:"success"});delete t.lazyloadCallback}};d.onerror=function(){var e;if(t.classList.contains(o)){return false}t.classList.remove(r);(e=t.classList).add.apply(e,babelHelpers.toConsumableArray(f));t.title="";t.alt="";if(typeof t.lazyloadCallback==="function"){t.lazyloadCallback({element:t,state:"error"});delete t.lazyloadCallback}else{t.src=a}};if(typeof t.dataset.lazyloadDontHide!=="undefined"){t.classList.remove(n);delete t.dataset.lazyloadDontHide;if(l){l.unobserve(t)}}};if(typeof window.IntersectionObserver!=="undefined"){l=new IntersectionObserver((function(e,t){e.forEach((function(e){var t=e.target;if(t.classList.contains(s)){return true}if(e.isIntersecting){if(t.classList.contains(o)){if(t.dataset.lazyloadSrc){t.src=t.dataset.lazyloadSrc}t.classList.remove(o)}else if(t.classList.contains(n)){return true}else{t.classList.add(n);u(t)}}else{if(t.classList.contains(o)||!t.classList.contains(n)){return true}if(t.dataset.lazyloadHiddenSrc){t.src=t.dataset.lazyloadHiddenSrc}t.classList.remove(r);t.classList.add(o)}}))}),{threshold:[0,1]})}t.WidgetBitrixVue.directive("bx-lazyload",{bind:function e(t,n){if(babelHelpers["typeof"](n.value)==="object"&&typeof n.value.callback==="function"){t.lazyloadCallback=n.value.callback}if(!t.src||t.src===location.href.replace(location.hash,"")){t.src=a}if(l){l.observe(t)}else{u(t)}},componentUpdated:function e(t){if(!t.classList.contains(i)&&!t.classList.contains(s)&&!t.classList.contains(n)&&!t.classList.contains(r)){t.classList.add(r)}else if((t.classList.contains(i)||t.classList.contains(s))&&t.dataset.lazyloadSrc&&t.dataset.lazyloadSrc!==t.src){if(!t.dataset.lazyloadSrc.startsWith("http")){var o=document.createElement("a");o.href=t.dataset.lazyloadSrc;if(o.href===t.src){return}}u(t)}},unbind:function e(t){if(l){l.unobserve(t)}}})})(this.window=this.window||{},BX);(function(e,t,n,r,i,s){"use strict";
/**
	 * Bitrix UI
	 * Social Video Vue component
	 *
	 * @package bitrix
	 * @subpackage ui
	 * @copyright 2001-2021 Bitrix
	 */var o=Object.freeze({play:"play",pause:"pause",stop:"stop",none:"none"});i.WidgetBitrixVue.component("bx-socialvideo",{props:{id:{default:0},src:{default:""},preview:{default:""},autoplay:{default:true},containerClass:{default:null},containerStyle:{default:null},elementStyle:{default:null},showControls:{default:true}},data:function e(){return{preload:"none",previewLoaded:false,loaded:false,loading:false,playAfterLoad:false,enterFullscreen:false,playBeforeMute:2,state:o.none,progress:0,timeCurrent:0,timeTotal:0,muteFlag:true}},created:function e(){if(!this.preview){this.previewLoaded=true;this.preload="metadata"}this.$Bitrix.eventEmitter.subscribe("ui:socialvideo:unmute",this.onUnmute)},mounted:function e(){this.getObserver().observe(this.$refs.body)},beforeDestroy:function e(){this.$Bitrix.eventEmitter.unsubscribe("ui:socialvideo:unmute",this.onUnmute);this.getObserver().unobserve(this.$refs.body)},watch:{id:function e(t){this.registeredId=t}},methods:{loadFile:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.loaded){return true}if(this.loading){return true}this.preload="auto";this.loading=true;this.playAfterLoad=t;return true},clickToButton:function e(t){if(!this.src){return false}if(this.state===o.play){this.getObserver().unobserve(this.$refs.body);this.pause()}else{this.play()}t.stopPropagation()},clickToMute:function e(){if(!this.src){return false}if(!this.muteFlag){this.mute()}else{this.unmute()}event.stopPropagation()},click:function e(t){if(this.autoPlayDisabled){this.play();t.stopPropagation();return false}if(this.isMobile){if(this.source().webkitEnterFullscreen){this.unmute();this.enterFullscreen=true;this.source().webkitEnterFullscreen()}else if(this.source().requestFullscreen){this.unmute();this.enterFullscreen=true;this.source().requestFullscreen()}else{this.$emit("click",t)}}else{this.$emit("click",t)}t.stopPropagation()},play:function e(t){if(!this.loaded){this.loadFile(true);return false}if(!this.source()){return false}this.source().play()},pause:function e(){if(!this.source()){return false}this.playAfterLoad=false;this.source().pause()},stop:function e(){if(!this.source()){return false}this.state=o.stop;this.source().pause()},mute:function e(){if(!this.source()){return false}this.muteFlag=true;this.playBeforeMute=2;this.source().muted=true},unmute:function e(){if(!this.source()){return false}this.muteFlag=false;this.source().muted=false;if(this.id>0){this.$Bitrix.eventEmitter.emit("ui:socialvideo:unmute",{initiator:this.id})}},setProgress:function e(t){this.progress=t},formatTime:function e(t){t=Math.floor(t);var n=Math.floor(t/60/60);if(n>0){t-=n*60*60}var r=Math.floor(t/60);if(r>0){t-=r*60}return(n>0?n+":":"")+(n>0?r.toString().padStart(2,"0")+":":r+":")+t.toString().padStart(2,"0")},onUnmute:function e(t){t=t.getData();if(t.initiator===this.id){return false}this.mute()},source:function e(){return this.$refs.source},videoEventRouter:function e(t,n){if(t==="durationchange"||t==="loadeddata"){if(!this.source()){return false}this.timeTotal=this.source().duration}else if(t==="loadedmetadata"){if(!this.source()){return false}this.timeTotal=this.source().duration;this.loaded=true;if(this.playAfterLoad){this.play()}}else if(t==="abort"||t==="error"){console.error("BxSocialVideo: load failed",this.id,n);this.loading=false;this.state=o.none;this.timeTotal=0;this.preload="none"}else if(t==="canplaythrough"){this.loading=false;this.loaded=true;if(this.playAfterLoad){this.play()}}else if(t==="volumechange"){if(!this.source()){return false}if(this.source().muted){this.mute()}else{this.unmute()}}else if(t==="timeupdate"){if(!this.source()){return false}this.timeCurrent=this.source().currentTime;if(!this.muteFlag&&!this.enterFullscreen&&this.timeCurrent===0){if(this.playBeforeMute<=0){this.mute()}this.playBeforeMute-=1}this.setProgress(Math.round(100/this.timeTotal*this.timeCurrent))}else if(t==="pause"){if(this.state!==o.stop){this.state=o.pause}if(this.enterFullscreen){this.enterFullscreen=false;this.mute();this.play()}}else if(t==="play"){this.state=o.play;if(this.state===o.stop){this.progress=0;this.timeCurrent=0}if(this.enterFullscreen){this.enterFullscreen=false}}},getObserver:function e(){var t=this;if(this.observer){return this.observer}this.observer=new IntersectionObserver((function(e,n){if(t.autoPlayDisabled){return false}e.forEach((function(e){if(e.isIntersecting){t.play()}else{t.pause()}}))}),{threshold:[0,1]});return this.observer},lazyLoadCallback:function e(t){this.previewLoaded=t.state==="success"}},computed:{State:function e(){return o},autoPlayDisabled:function e(){return!this.autoplay&&this.state===o.none},showStartButton:function e(){return this.autoPlayDisabled&&this.previewLoaded},showInterface:function e(){return this.previewLoaded&&!this.showStartButton},labelTime:function e(){if(!this.loaded&&!this.timeTotal){return"--:--"}var t;if(this.state===o.play){t=this.timeTotal-this.timeCurrent}else{t=this.timeTotal}return this.formatTime(t)},isMobile:function e(){var t=navigator.userAgent.toLowerCase();return t.includes("android")||t.includes("iphone")||t.includes("ipad")||t.includes("bitrixmobile")}},template:'\n\t\t<div :class="[\'ui-vue-socialvideo\', containerClass, {\n\t\t\t\t\'ui-vue-socialvideo-mobile\': isMobile,\n\t\t\t}]" :style="containerStyle" @click="click">\n\t\t\t<transition name="ui-vue-socialvideo-animation-fade">\n\t\t\t\t<div v-if="showStartButton && showControls" class="ui-vue-socialvideo-button-start">\n\t\t\t\t\t<span class="ui-vue-socialvideo-button-start-icon"></span>\n\t\t\t\t</div>\n\t\t\t</transition>\n\t\t\t<transition name="ui-vue-socialvideo-animation-fade">\n\t\t\t\t<div v-if="showInterface && showControls" class="ui-vue-socialvideo-overlay-container">\n\t\t\t\t\t<div class="ui-vue-socialvideo-controls-container" @click="clickToButton">\n\t\t\t\t\t\t<button :class="[\'ui-vue-socialvideo-control\', {\n\t\t\t\t\t\t\t\'ui-vue-socialvideo-control-loader\': loading,\n\t\t\t\t\t\t\t\'ui-vue-socialvideo-control-play\': !loading && state !== State.play,\n\t\t\t\t\t\t\t\'ui-vue-socialvideo-control-pause\': !loading && state === State.play,\n\t\t\t\t\t\t}]"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-vue-socialvideo-info-container" @click="clickToMute">\n\t\t\t\t\t\t<span class="ui-vue-socialvideo-time-current">{{labelTime}}</span>\n\t\t\t\t\t\t<span :class="[\'ui-vue-socialvideo-sound\', {\n\t\t\t\t\t\t\t\'ui-vue-socialvideo-sound-on\': state !== State.none && !muteFlag,\n\t\t\t\t\t\t\t\'ui-vue-socialvideo-sound-off\': state !== State.none && muteFlag\n\t\t\t\t\t\t}]"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</transition>\n\t\t\t<div v-if="!preview" class="ui-vue-socialvideo-background" :style="{position: (src? \'absolute\': \'relative\')}"></div>\n\t\t\t<div class="ui-vue-socialvideo-container" ref="body">\n\t\t\t\t<img \n\t\t\t\t\tv-bx-lazyload="{callback: lazyLoadCallback}"\n\t\t\t\t\tdata-lazyload-dont-hide\n\t\t\t\t\tv-if="preview"\n\t\t\t\t\tclass="ui-vue-socialvideo-image-source"\n\t\t\t\t\t:data-lazyload-src="preview"\n\t\t\t\t\t:style="{position: (src? \'absolute\': \'relative\'), ...elementStyle}"\n\t\t\t\t/>\n\t\t\t\t<video \n\t\t\t\t\tv-if="src" :src="src" \n\t\t\t\t\tclass="ui-vue-socialvideo-source" \n\t\t\t\t\tref="source"\n\t\t\t\t\t:preload="preload" \n\t\t\t\t\tplaysinline\n\t\t\t\t\tloop \n\t\t\t\t\tmuted\n\t\t\t\t\t:style="{opacity: (loaded? 1: 0), ...elementStyle}"\n\t\t\t\t\t@abort="videoEventRouter(\'abort\', $event)"\n\t\t\t\t\t@error="videoEventRouter(\'error\', $event)"\n\t\t\t\t\t@suspend="videoEventRouter(\'suspend\', $event)"\n\t\t\t\t\t@canplay="videoEventRouter(\'canplay\', $event)"\n\t\t\t\t\t@canplaythrough="videoEventRouter(\'canplaythrough\', $event)"\n\t\t\t\t\t@durationchange="videoEventRouter(\'durationchange\', $event)"\n\t\t\t\t\t@loadeddata="videoEventRouter(\'loadeddata\', $event)"\n\t\t\t\t\t@loadedmetadata="videoEventRouter(\'loadedmetadata\', $event)"\n\t\t\t\t\t@volumechange="videoEventRouter(\'volumechange\', $event)"\n\t\t\t\t\t@timeupdate="videoEventRouter(\'timeupdate\', $event)"\n\t\t\t\t\t@play="videoEventRouter(\'play\', $event)"\n\t\t\t\t\t@playing="videoEventRouter(\'playing\', $event)"\n\t\t\t\t\t@pause="videoEventRouter(\'pause\', $event)"\n\t\t\t\t></video>\n\t\t\t</div>\n\t\t</div>\t\n\t'})})(this.window=this.window||{},BX,window,BX,BX,BX.Event);(function(e,t,n,r,i,s,o,a,l,u,c,f,d){"use strict";function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}d.WidgetBitrixVue.component("bx-im-view-element-file",{mounted:function e(){this.createProgressbar()},beforeDestroy:function e(){this.removeProgressbar()},props:{userId:{default:0},messageType:{default:s.MessageType.self},file:{type:Object,required:true}},methods:{download:function e(t){if(t.progress!==100){return false}if(BX.UI&&BX.UI.Viewer&&Object.keys(t.viewerAttrs).length>0){return false}if(t.type===s.FileType.image&&t.urlShow){if(f.Utils.platform.isBitrixMobile()){BXMobileApp.UI.Photo.show({photos:this.files.collection[this.application.dialog.chatId].filter((function(e){return e.type==="image"})).map((function(e){return{url:e.urlShow.replace("bxhttp","http")}})).reverse(),default_photo:t.urlShow.replace("bxhttp","http")})}else{window.open(t.urlShow,"_blank")}}else if(t.type===s.FileType.video&&t.urlShow){if(f.Utils.platform.isBitrixMobile()){app.openDocument({url:t.urlShow,name:t.name})}else{window.open(t.urlShow,"_blank")}}else if(t.urlDownload){if(f.Utils.platform.isBitrixMobile()){app.openDocument({url:t.urlDownload,name:t.name})}else{window.open(t.urlDownload,"_blank")}}else{if(f.Utils.platform.isBitrixMobile()){app.openDocument({url:t.urlShow,name:t.name})}else{window.open(t.urlShow,"_blank")}}},createProgressbar:function e(){var n=this;if(this.uploader){return true}if(this.file.progress===100){return false}var r=undefined;if(this.file.progress<0||this.file.type!==s.FileType.image&&this.file.type!==s.FileType.video){r=false}this.uploader=new t.Uploader({container:this.$refs.container,blurElement:r,direction:this.$refs.container.offsetHeight>54?t.Uploader.direction.vertical:t.Uploader.direction.horizontal,icon:this.file.progress<0?t.Uploader.icon.cloud:t.Uploader.icon.cancel,sizes:{circle:this.$refs.container.offsetHeight>54?54:38,progress:this.$refs.container.offsetHeight>54?4:8},labels:{loading:this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_LOADING"],completed:this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_COMPLETED"],canceled:this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_CANCELED"],cancelTitle:this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_CANCEL_TITLE"],megabyte:this.localize["IM_MESSENGER_ELEMENT_FILE_SIZE_MB"]},cancelCallback:this.file.progress<0?null:function(e){i.EventEmitter.emit(s.EventType.dialog.clickOnUploadCancel,{file:n.file,event:e})},destroyCallback:function e(){if(n.uploader){n.uploader=null}}});this.uploader.start();if(this.file.size&&this.file.size/1024/1024<=2||this.$refs.container.offsetHeight<=54&&this.$refs.container.offsetWidth<240){this.uploader.setProgressTitleVisibility(false)}this.updateProgressbar();return true},updateProgressbar:function e(){if(!this.uploader){var n=this.createProgressbar();if(!n){return false}}if(this.file.status===s.FileStatus.error){this.uploader.setProgress(0);this.uploader.setCancelDisable(false);this.uploader.setIcon(t.Uploader.icon.error);this.uploader.setProgressTitle(this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_ERROR"])}else if(this.file.status===s.FileStatus.wait){this.uploader.setProgress(this.file.progress>5?this.file.progress:5);this.uploader.setCancelDisable(true);this.uploader.setIcon(t.Uploader.icon.cloud);this.uploader.setProgressTitle(this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_SAVING"])}else if(this.file.progress===100){this.uploader.setProgress(100)}else if(this.file.progress===-1){this.uploader.setProgress(10);this.uploader.setProgressTitle(this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_WAITING"])}else{if(this.file.progress===0){this.uploader.setIcon(t.Uploader.icon.cancel)}var r=this.file.progress>5?this.file.progress:5;this.uploader.setProgress(r);if(this.file.size/1024/1024<=2){this.uploader.setProgressTitle(this.localize["IM_MESSENGER_ELEMENT_FILE_UPLOAD_LOADING"])}else{this.uploader.setByteSent(this.file.size/100*this.file.progress,this.file.size)}}},removeProgressbar:function e(){if(!this.uploader){return true}this.uploader.destroy(false);return true}},computed:p({FileStatus:function e(){return s.FileStatus},localize:function e(){return d.WidgetBitrixVue.getFilteredPhrases("IM_MESSENGER_ELEMENT_FILE_",this)},fileName:function e(){var t=70;if(this.file.name.length<t){return this.file.name}var n=10;var r=this.file.name.substring(this.file.name.length-1-(this.file.extension.length+1+n));var i=this.file.name.substring(0,t-r.length-3);return i.trim()+"..."+r.trim()},fileSize:function e(){var t=this.file.size;if(t<=0){return"&nbsp;"}var n=["BYTE","KB","MB","GB","TB"];var r=0;while(t>=1024&&r<4){t/=1024;r++}return Math.round(t)+" "+this.localize["IM_MESSENGER_ELEMENT_FILE_SIZE_"+n[r]]},uploadProgress:function e(){return this.file.status+" "+this.file.progress}},n.WidgetVuex.mapState({application:function e(t){return t.application},files:function e(t){return t.files}})),watch:{uploadProgress:function e(){this.updateProgressbar()}},template:'\n\t\t<div class="bx-im-element-file" @click="download(file, $event)" ref="container">\n\t\t\t<div class="bx-im-element-file-icon">\n\t\t\t\t<div :class="[\'ui-icon\', \'ui-icon-file-\'+file.icon]"><i></i></div>\n\t\t\t</div>\n\t\t\t<div class="bx-im-element-file-block">\n\t\t\t\t<div class="bx-im-element-file-name" :title="file.name">\n\t\t\t\t\t{{fileName}}\n\t\t\t\t</div>\n\t\t\t\t<div class="bx-im-element-file-size" v-html="fileSize"></div>\n\t\t\t</div>\n\t\t</div>\n\t'});
/**
	 * Bitrix Messenger
	 * File element Vue component
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */d.WidgetVue.cloneComponent("bx-im-view-element-file-audio","bx-im-view-element-file",{computed:{background:function e(){return this.messageType===s.MessageType.self?"dark":"light"}},template:'\n\t\t<div :class="[\'bx-im-element-file-audio\', \'bx-im-element-file-audio-\'+messageType]" ref="container">\n\t\t\t<bx-audioplayer :id="file.id" :src="file.urlShow" :background="background"/>\n\t\t</div>\t\n\t'});
/**
	 * Bitrix Messenger
	 * File element Vue component
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */d.WidgetVue.cloneComponent("bx-im-view-element-file-image","bx-im-view-element-file",{methods:{getImageSize:function e(t,n,r){var i;if(t>r){i=r/t}else{i=1}return{width:t*i,height:n*i}}},computed:{styleFileSizes:function e(){var t=this.getImageSize(this.file.image.width,this.file.image.height,280);return{width:t.width+"px",height:t.height+"px",backgroundSize:t.width<100||t.height<100?"contain":"initial"}},styleBoxSizes:function e(){if(parseInt(this.styleFileSizes.height)<=280){return{}}return{height:"280px"}},fileSource:function e(){return this.file.urlPreview}},template:'\n\t\t<div class="bx-im-element-file-image" @click="download(file, $event)" :style="styleBoxSizes" ref="container">\n\t\t\t<img v-bx-lazyload\n\t\t\t\tclass="bx-im-element-file-image-source"\n\t\t\t\t:data-lazyload-src="fileSource"\n\t\t\t\t:title="$Bitrix.Loc.getMessage(\'IM_MESSENGER_ELEMENT_FILE_SHOW_TITLE\').replace(\'#NAME#\', file.name).replace(\'#SIZE#\', fileSize)"\n\t\t\t\t:style="styleFileSizes"\n\t\t\t\t:data-viewer="file.viewerAttrs.viewer === null"\n\t\t\t\t:data-viewer-type="file.viewerAttrs.viewerType? file.viewerAttrs.viewerType: false"\n\t\t\t\t:data-src="file.viewerAttrs.src? file.viewerAttrs.src: false"\n\t\t\t\t:data-viewer-group-by="file.viewerAttrs.viewerGroupBy? file.viewerAttrs.viewerGroupBy: false"\n\t\t\t\t:data-title="file.viewerAttrs.title? file.viewerAttrs.title: false"\n\t\t\t\t:data-actions="file.viewerAttrs.actions? file.viewerAttrs.actions: false"\n\t\t\t/>\n\t\t</div>\n\t'});
/**
	 * Bitrix Messenger
	 * File element Vue component
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */d.WidgetVue.cloneComponent("bx-im-view-element-file-video","bx-im-view-element-file",{methods:{getImageSize:function e(t,n,r){var i;if(t>r){i=r/t}else{i=1}return{width:t*i,height:n*i}}},computed:{isSafari:function e(){return f.Utils.browser.isSafari()||f.Utils.platform.isBitrixMobile()},styleBoxSizes:function e(){if(parseInt(this.styleVideoSizes.height)<=280){return{}}return{height:"280px"}},styleVideoSizes:function e(){if(!this.file.image){return{}}var t=this.getImageSize(this.file.image.width,this.file.image.height,280);return{width:t.width+"px",height:t.height+"px",backgroundSize:t.width<100||t.height<100?"contain":"initial"}},autoplay:function e(){return this.file.size<5e6&&this.application.options.autoplayVideo}},template:'\n\t\t<div :class="[\'bx-im-element-file-video\', {\'bx-im-element-file-video-safari\': isSafari}]" :style="styleBoxSizes" ref="container">\n\t\t\t<bx-socialvideo \n\t\t\t\t:id="file.id" \n\t\t\t\t:src="file.urlShow" \n\t\t\t\t:preview="file.urlPreview" \n\t\t\t\t:containerStyle="styleBoxSizes"\n\t\t\t\t:elementStyle="styleVideoSizes"\n\t\t\t\t:autoplay="autoplay"\n\t\t\t\t:showControls="!file.viewerAttrs.viewerType"\n\t\t\t\t:data-viewer="file.viewerAttrs.viewer === null"\n\t\t\t\t:data-viewer-type="file.viewerAttrs.viewerType? file.viewerAttrs.viewerType: false"\n\t\t\t\t:data-src="file.viewerAttrs.src? file.viewerAttrs.src: false"\n\t\t\t\t:data-viewer-group-by="file.viewerAttrs.viewerGroupBy? file.viewerAttrs.viewerGroupBy: false"\n\t\t\t\t:data-title="file.viewerAttrs.title? file.viewerAttrs.title: false"\n\t\t\t\t:data-actions="file.viewerAttrs.action? file.viewerAttrs.actions: false"\n\t\t\t\t@click="download(file, $event)"\n\t\t\t/>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX.ProgressBarJs,BX,BX.Messenger.Model,BX.Event,BX.Messenger.Const,window,BX,window,BX,window,BX.Messenger.Lib,BX);(function(e,t,n,r,i,s,o){"use strict";
/**
	 * Bitrix Messenger
	 * Vue component
	 *
	 * Delimiter (attach type)
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var a={property:"DELIMITER",name:"bx-im-view-element-attach-delimiter",component:{props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},computed:{styles:function e(){return{width:this.config.DELIMITER.SIZE?this.config.DELIMITER.SIZE+"px":"",backgroundColor:this.config.DELIMITER.COLOR?this.config.DELIMITER.COLOR:this.color}}},template:'<div class="bx-im-element-attach-type-delimiter" :style="styles"></div>'}};
/**
	 * Bitrix Messenger
	 * Vue component
	 *
	 * File (attach type)
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var l={property:"FILE",name:"bx-im-element-attach-file",component:{props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},methods:{openLink:function e(t){s.Utils.platform.openNewPage(t.LINK)},file:function e(){return{name:this.config.FILE.NAME,extension:this.config.FILE.NAME.split(".").splice(-1)[0],size:this.config.FILE.SIZE}},fileName:function e(t){var n=70;if(!t.NAME||t.NAME.length<n){return t.NAME}var r=10;var i=t.NAME.split(".").splice(-1)[0];var s=t.NAME.substring(t.NAME.length-1-(i.length+1+r));var o=t.NAME.substring(0,n-s.length-3);return o.trim()+"..."+s.trim()},fileNameFull:function e(t){return t.NAME},fileSize:function e(t){var n=t.SIZE;if(!n||n<=0){n=0}var r=["BYTE","KB","MB","GB","TB"];var i=0;while(n>=1024&&i<4){n/=1024;i++}return Math.round(n)+" "+this.$Bitrix.Loc.getMessage("IM_MESSENGER_ATTACH_FILE_SIZE_"+r[i])},fileIcon:function e(t){return i.FilesModel.getIconType(t.NAME.split(".").splice(-1)[0])}},template:'\n\t\t\t<div class="bx-im-element-attach-type-file-element">\n\t\t\t\t<template v-for="(element, index) in config.FILE">\n\t\t\t\t\t<div class="bx-im-element-attach-type-file" @click="openLink(element)">\n\t\t\t\t\t\t<div class="bx-im-element-attach-type-file-icon">\n\t\t\t\t\t\t\t<div :class="[\'ui-icon\', \'ui-icon-file-\'+fileIcon(element)]"><i></i></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bx-im-element-attach-type-file-block">\n\t\t\t\t\t\t\t<div class="bx-im-element-attach-type-file-name" :title="fileNameFull(element)">\n\t\t\t\t\t\t\t\t{{fileName(element)}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="bx-im-element-attach-type-file-size">{{fileSize(element)}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t'}};var u={methods:{openLink:function e(t){var n=t.element;var r=t.event;if(!s.Utils.platform.isBitrixMobile()&&n.LINK){return}if(n.LINK&&r.target.tagName!=="A"){s.Utils.platform.openNewPage(n.LINK)}else if(!n.LINK){var i={id:null,type:null};if(n.hasOwnProperty("USER_ID")&&n.USER_ID>0){i.id=n.USER_ID;i.type="user"}if(n.hasOwnProperty("CHAT_ID")&&n.CHAT_ID>0){i.id=n.CHAT_ID;i.type="chat"}if(i.id&&i.type&&window.top["BXIM"]){var o=!BX.MessengerTheme.isDark();window.top["BXIM"].messenger.openPopupExternalData(r.target,i.type,o,{ID:i.id})}else if(navigator.userAgent.toLowerCase().includes("bitrixmobile")){var a="";if(i.type==="chat"){a="chat".concat(i.id)}else{a=i.id}if(a!==""){BXMobileApp.Events.postToComponent("onOpenDialog",[{dialogId:a},true],"im.recent")}}}}}};
/**
	 * Bitrix Messenger
	 * Vue component
	 *
	 * Grid (attach type)
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var c={property:"GRID",name:"bx-im-view-element-attach-grid",component:{mixins:[u],props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},created:function e(){if(s.Utils.platform.isBitrixMobile()){this.maxCellWith=Math.floor(Math.min(screen.availWidth,screen.availHeight)/4)}else{this.maxCellWith=null}},methods:{getWidth:function e(t){if(t.DISPLAY!=="row"){return t.WIDTH?t.WIDTH+"px":""}if(!t.VALUE){return false}if(this.maxCellWith&&t.WIDTH>this.maxCellWith){return this.maxCellWith+"px"}return t.WIDTH?t.WIDTH+"px":""},getValueColor:function e(t){if(!t.COLOR){return false}return t.COLOR},getValue:function e(t){if(!t.VALUE){return""}return s.Utils.text.decode(t.VALUE)}},template:'\n\t\t\t<div class="bx-im-element-attach-type-grid">\n\t\t\t\t<template v-for="(element, index) in config.GRID">\n\t\t\t\t\t<template v-if="element.DISPLAY.toLowerCase() === \'block\'">\n\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-display bx-im-element-attach-type-display-block" :style="{width: getWidth(element)}">\n\t\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-element-name">{{element.NAME}}</div>\n\t\t\t\t\t\t\t<template v-if="element.LINK">\n\t\t\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-element-value bx-im-element-attach-type-grid-element-value-link">\n\t\t\t\t\t\t\t\t\t<a :href="element.LINK" target="_blank" @click="openLink({element: element, event: $event})" :style="{color: getValueColor(element)}" v-html="getValue(element)"></a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-element-value" :style="{color: getValueColor(element)}" v-html="getValue(element)"></div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if="element.DISPLAY.toLowerCase() === \'line\'">\n\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-display bx-im-element-attach-type-display-card" :style="{width: getWidth(element)}">\n\t\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-element-name">{{element.NAME}}</div>\n\t\t\t\t\t\t\t<template v-if="element.LINK">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass="bx-im-element-attach-type-grid-element-value bx-im-element-attach-type-grid-element-value-link"\n\t\t\t\t\t\t\t\t\t:style="{color: element.COLOR? element.COLOR: \'\'}"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<a :href="element.LINK" target="_blank" @click="openLink({element: element, event: $event})" v-html="getValue(element)"></a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-element-value" :style="{color: element.COLOR? element.COLOR: \'\'}" v-html="getValue(element)"></div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if="element.DISPLAY.toLowerCase() === \'row\'">\n\t\t\t\t\t\t<div class="bx-im-element-attach-type-grid-display bx-im-element-attach-type-display-column">\n\t\t\t\t\t\t\t<table class="bx-im-element-attach-type-display-column-table">\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<template v-if="element.NAME">\n\t\t\t\t\t\t\t\t\t\t\t<td class="bx-im-element-attach-type-grid-element-name" :colspan="element.VALUE? 1: 2" :style="{width: getWidth(element)}">{{element.NAME}}</td>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<template v-if="element.VALUE">\n\t\t\t\t\t\t\t\t\t\t\t<template v-if="element.LINK">\n\t\t\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="bx-im-element-attach-type-grid-element-value bx-im-element-attach-type-grid-element-value-link"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:colspan="element.NAME? 1: 2"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:style="{color: element.COLOR? element.COLOR: \'\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a :href="element.LINK" target="_blank" @click="openLink({element: element, event: $event})" v-html="getValue(element)"></a>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t\t\t\t<td class="bx-im-element-attach-type-grid-element-value" :colspan="element.NAME? 1: 2" :style="{color: element.COLOR? element.COLOR: \'\'}" v-html="getValue(element)"></td>\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t'}};
/**
	 * Bitrix Messenger
	 * Vue component
	 *
	 * Rich Attach type
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var f={property:"HTML",name:"bx-im-view-element-attach-html",component:{props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},computed:{html:function e(){var t=this.config.HTML.replace(/&nbsp;/gi," ");return s.Utils.text.decode(t)}},template:'<div class="bx-im-element-attach-type-html" v-html="html"></div>'}};
/**
	 * Bitrix Messenger
	 * Vue component
	 *
	 * Image (attach type)
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var d={property:"IMAGE",name:"bx-im-view-element-attach-image",component:{props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},methods:{open:function e(t){if(!t){return false}if(s.Utils.platform.isBitrixMobile()){BXMobileApp.UI.Photo.show({photos:[{url:t}],default_photo:t})}else{window.open(t,"_blank")}},getImageSize:function e(t,n,r){var i;if(t>r){i=r/t}else{i=1}return{width:t*i,height:n*i}},getElementSource:function e(t){return t.PREVIEW?t.PREVIEW:t.LINK},lazyLoadCallback:function e(t){if(!t.element.style.width){t.element.style.width=t.element.offsetWidth+"px"}if(!t.element.style.height){t.element.style.height=t.element.offsetHeight+"px"}},styleFileSizes:function e(t){if(!(t.WIDTH&&t.HEIGHT)){return{maxHeight:"100%",backgroundSize:"contain"}}var n=this.getImageSize(t.WIDTH,t.HEIGHT,250);return{width:n.width+"px",height:n.height+"px",backgroundSize:n.width<100||n.height<100?"contain":"initial"}},styleBoxSizes:function e(t){if(!(t.WIDTH&&t.HEIGHT)){return{height:"150px"}}if(parseInt(this.styleFileSizes(t).height)<=250){return{}}return{height:"280px"}}},template:'\n\t\t\t<div class="bx-im-element-attach-type-image">\n\t\t\t\t<template v-for="(image, index) in config.IMAGE">\n\t\t\t\t\t<div class="bx-im-element-attach-type-image-block" @click="open(image.LINK)" :style="styleBoxSizes(image)" :key="index">\n\t\t\t\t\t\t<img v-bx-lazyload="{callback: lazyLoadCallback}"\n\t\t\t\t\t\t\tclass="bx-im-element-attach-type-image-source"\n\t\t\t\t\t\t\t:data-lazyload-src="getElementSource(image)"\n\t\t\t\t\t\t\t:style="styleFileSizes(image)"\n\t\t\t\t\t\t\t:title="image.NAME"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t'}};
/**
	 * Bitrix Messenger
	 * Vue component
	 *
	 * Link (attach type)
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var h={property:"LINK",name:"bx-im-view-element-attach-link",component:{mixins:[u],props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},methods:{getImageConfig:function e(t){return{IMAGE:[{NAME:t.NAME,PREVIEW:t.PREVIEW,WIDTH:t.WIDTH,HEIGHT:t.HEIGHT}]}},getLinkName:function e(t){return t.NAME?t.NAME:t.LINK},getDescription:function e(t){var n=t.HTML?t.HTML:t.DESC;return s.Utils.text.decode(n)}},computed:{imageComponentName:function e(){return d.name}},components:babelHelpers.defineProperty({},d.name,d.component),template:'\n\t\t\t<div class="bx-im-element-attach-type-link">\n\t\t\t\t<template v-for="(element, index) in config.LINK">\n\t\t\t\t\t<div class="bx-im-element-attach-type-link-element" :key="index">\n\t\t\t\t\t\t<a \n\t\t\t\t\t\t\tv-if="element.LINK"\n\t\t\t\t\t\t\t:href="element.LINK"\n\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\tclass="bx-im-element-attach-type-link-name" \n\t\t\t\t\t\t\t@click="openLink({element: element, event: $event})"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{getLinkName(element)}}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<span \n\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\tclass="bx-im-element-attach-type-ajax-link"\n\t\t\t\t\t\t\t@click="openLink({element: element, event: $event})"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{getLinkName(element)}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div v-if="element.DESC || element.HTML" class="bx-im-element-attach-type-link-desc" v-html="getDescription(element)"></div>\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tv-if="element.PREVIEW" \n\t\t\t\t\t\t\tclass="bx-im-element-attach-type-link-image"\n\t\t\t\t\t\t\t@click="openLink({element: element, event: $event})"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<component :is="imageComponentName" :config="getImageConfig(element)" :color="color"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t'}};
/**
	 * Bitrix Messenger
	 * Vue component
	 *
	 * Message (attach type)
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var p={property:"MESSAGE",name:"bx-im-view-element-attach-message",component:{props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},computed:{message:function e(){return s.Utils.text.decode(this.config.MESSAGE)}},template:'<div class="bx-im-element-attach-type-message" v-html="message"></div>'}};
/**
	 * Bitrix Messenger
	 * Vue component
	 *
	 * Rich (attach type)
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var m={property:"RICH_LINK",name:"bx-im-view-element-attach-rich",component:{mixins:[u],props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},methods:{getImageConfig:function e(t){return{IMAGE:[{NAME:t.NAME,PREVIEW:t.PREVIEW,WIDTH:t.WIDTH,HEIGHT:t.HEIGHT}]}}},computed:{imageComponentName:function e(){return d.name}},components:babelHelpers.defineProperty({},d.name,d.component),template:'\n\t\t\t<div class="bx-im-element-attach-type-rich">\n\t\t\t\t<template v-for="(element, index) in config.RICH_LINK">\n\t\t\t\t\t<div class="bx-im-element-attach-type-rich-element" :key="index">\n\t\t\t\t\t\t<div v-if="element.PREVIEW" class="bx-im-element-attach-type-rich-image" @click="openLink({element: element, event: $event})">\n\t\t\t\t\t\t\t<component :is="imageComponentName" :config="getImageConfig(element)" :color="color"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bx-im-element-attach-type-rich-name" @click="openLink({element: element, event: $event})">{{element.NAME}}</div>\n\t\t\t\t\t\t<div v-if="element.HTML || element.DESC" class="bx-im-element-attach-type-rich-desc">{{element.HTML || element.DESC}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t'}};
/**
	 * Bitrix Messenger
	 * Vue component
	 *
	 * User (Attach type)
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var g={property:"USER",name:"bx-im-view-element-attach-user",component:{mixins:[u],props:{config:{type:Object,default:{}},color:{type:String,default:"transparent"}},methods:{getAvatarType:function e(t){if(t.AVATAR){return""}var n="user";if(t.AVATAR_TYPE==="CHAT"){n="chat"}else if(t.AVATAR_TYPE==="BOT"){n="bot"}return"bx-im-element-attach-type-user-avatar-type-"+n}},template:'\n\t\t\t<div class="bx-im-element-attach-type-user">\n\t\t\t\t<template v-for="(element, index) in config.USER">\n\t\t\t\t\t<div class="bx-im-element-attach-type-user-body">\n\t\t\t\t\t\t<div class="bx-im-element-attach-type-user-avatar">\n\t\t\t\t\t\t\t<div :class="[\'bx-im-element-attach-type-user-avatar-type\', getAvatarType(element)]" :style="{backgroundColor: element.AVATAR? \'\': color}">\n\t\t\t\t\t\t\t\t<img v-if="element.AVATAR" \n\t\t\t\t\t\t\t\t\tv-bx-lazyload\n\t\t\t\t\t\t\t\t\tclass="bx-im-element-attach-type-user-avatar-source"\n\t\t\t\t\t\t\t\t\t:data-lazyload-src="element.AVATAR"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tv-if="element.LINK"\n\t\t\t\t\t\t\t:href="element.LINK" \n\t\t\t\t\t\t\tclass="bx-im-element-attach-type-user-name"\n\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\t@click="openLink({element: element, event: $event})"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{element.NAME}}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<span v-else @click.prevent="openLink({element: element, event: $event})">\n\t\t\t\t\t\t\t{{element.NAME}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t'}};
/**
	 * Bitrix Messenger
	 * Attach element Vue component
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var v=[a,l,c,f,d,h,p,m,g];var y={};v.forEach((function(e){y[e.name]=e.component}));o.WidgetBitrixVue.component("bx-im-view-element-attach",{props:{config:{type:Object,default:{}},baseColor:{type:String,default:"#17a3ea"}},methods:{getComponentForBlock:function e(t){for(var n=0,r=v;n<r.length;n++){var i=r[n];if(typeof t[i.property]!=="undefined"){return i.name}}return""}},computed:{color:function e(){if(typeof this.config.COLOR==="undefined"||!this.config.COLOR){return this.baseColor}if(this.config.COLOR==="transparent"){return""}return this.config.COLOR}},components:y,template:'\n\t\t<div class="bx-im-element-attach">\n\t\t\t<div v-if="color" class="bx-im-element-attach-border" :style="{borderColor: color}"></div>\n\t\t\t<div class="bx-im-element-attach-content">\n\t\t\t\t<template v-for="(block, index) in config.BLOCKS">\n\t\t\t\t\t<component :is="getComponentForBlock(block)" :config="block" :color="color" :key="index" />\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,BX,window,BX.Messenger.Model,BX.Messenger.Lib,BX);(function(exports,ui_designTokens,ui_vue,im_lib_utils,im_lib_logger){"use strict";
/**
	 * Bitrix Messenger
	 * Attach element Vue component
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var _ButtonType=Object.freeze({newline:"NEWLINE",button:"BUTTON"});ui_vue.WidgetBitrixVue.component("bx-im-view-element-keyboard",{props:{buttons:{type:Array,default:function e(){return[]}},messageId:{default:0},userId:{default:0},dialogId:{default:0}},data:function e(){return{isMobile:im_lib_utils.Utils.platform.isMobile(),isBlocked:false,localButtons:[]}},created:function e(){this.localButtons=this.prepareButtons(this.buttons)},watch:{buttons:function e(){clearTimeout(this.recoverStateButton);this.isBlocked=false;this.localButtons=this.prepareButtons(this.buttons)}},methods:{click:function click(button){var _this=this;if(this.isBlocked){return false}if(button.DISABLED&&button.DISABLED==="Y"){return false}if(button.ACTION&&button.ACTION_VALUE.toString()){this.$emit("click",{action:"ACTION",params:{dialogId:this.dialogId,messageId:this.messageId,botId:button.BOT_ID,action:button.ACTION,value:button.ACTION_VALUE}})}else if(button.FUNCTION){var execFunction=button.FUNCTION.toString().replace("#MESSAGE_ID#",this.messageId).replace("#DIALOG_ID#",this.dialogId).replace("#USER_ID#",this.userId);eval(execFunction)}else if(button.APP_ID){im_lib_logger.Logger.warn("Messenger keyboard: open app is not implemented.")}else if(button.LINK){if(im_lib_utils.Utils.platform.isBitrixMobile()){app.openNewPage(button.LINK)}else{window.open(button.LINK,"_blank")}}else if(button.WAIT!=="Y"){if(button.BLOCK==="Y"){this.isBlocked=true}button.WAIT="Y";this.$emit("click",{action:"COMMAND",params:{dialogId:this.dialogId,messageId:this.messageId,botId:button.BOT_ID,command:button.COMMAND,params:button.COMMAND_PARAMS}});this.recoverStateButton=setTimeout((function(){_this.isBlocked=false;button.WAIT="N"}),1e4)}return true},getStyles:function e(t){var n={};if(t.WIDTH){n["width"]=t.WIDTH+"px"}else if(t.DISPLAY==="BLOCK"){n["width"]="225px"}if(t.BG_COLOR){n["backgroundColor"]=t.BG_COLOR}if(t.TEXT_COLOR){n["color"]=t.TEXT_COLOR}return n},prepareButtons:function e(t){return t.filter((function(e){if(!e.CONTEXT){return true}if(im_lib_utils.Utils.platform.isBitrixMobile()&&e.CONTEXT==="DESKTOP"){return false}if(!im_lib_utils.Utils.platform.isBitrixMobile()&&e.CONTEXT==="MOBILE"){return false}if(!im_lib_utils.Utils.platform.isBitrixMobile()&&(e.ACTION==="DIALOG"||e.ACTION==="CALL")){return false}return true}))}},computed:{ButtonType:function e(){return _ButtonType}},template:'\n\t\t<div :class="[\'bx-im-element-keyboard\', {\'bx-im-element-keyboard-mobile\': isMobile}]">\n\t\t\t<template v-for="(button, index) in localButtons">\n\t\t\t\t<div v-if="button.TYPE === ButtonType.newline" class="bx-im-element-keyboard-button-separator"></div>\n\t\t\t\t<span v-else-if="button.TYPE === ButtonType.button" :class="[\n\t\t\t\t\t\'bx-im-element-keyboard-button\', \n\t\t\t\t\t\'bx-im-element-keyboard-button-\'+button.DISPLAY.toLowerCase(), \n\t\t\t\t\t{\n\t\t\t\t\t\t\'bx-im-element-keyboard-button-disabled\': isBlocked || button.DISABLED === \'Y\',\n\t\t\t\t\t\t\'bx-im-element-keyboard-button-progress\': button.WAIT === \'Y\',\n\t\t\t\t\t}\n\t\t\t\t]" @click="click(button)">\n\t\t\t\t\t<span class="bx-im-element-keyboard-button-text" :style="getStyles(button)">{{button.TEXT}}</span>\n\t\t\t\t</span>\n\t\t\t</template>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,BX,BX.Messenger.Lib,BX.Messenger.Lib);(function(e,t,n,r){"use strict";
/**
	 * Bitrix Messenger
	 * ChatTeaser element Vue component
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */n.WidgetBitrixVue.component("bx-im-view-element-chat-teaser",{props:{messageCounter:{default:0},messageLastDate:{default:0},languageId:{default:"en"}},computed:{formattedDate:function e(){return r.Utils.date.format(this.messageLastDate,null,this.$Bitrix.Loc.getMessages())},formattedCounter:function e(){return this.messageCounter+" "+r.Utils.text.getLocalizeForNumber("IM_MESSENGER_COMMENT",this.messageCounter,this.languageId,this.$Bitrix.Loc.getMessages())}},template:'\n\t\t<div class="bx-im-element-chat-teaser" @click="$emit(\'click\', $event)">\n\t\t\t<span class="bx-im-element-chat-teaser-join">{{$Bitrix.Loc.getMessage(\'IM_MESSENGER_COMMENT_OPEN\')}}</span>\n\t\t\t<span class="bx-im-element-chat-teaser-comment">\n\t\t\t\t<span class="bx-im-element-chat-teaser-counter">{{formattedCounter}}</span>, {{formattedDate}}\n\t\t\t</span>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,BX,BX.Messenger.Lib);(function(e,t,n,r){"use strict";
/**
	 * Bitrix UI
	 * Reaction picker Vue component
	 *
	 * @package bitrix
	 * @subpackage ui
	 * @copyright 2001-2019 Bitrix
	 */var i=Object.freeze({none:"none",like:"like",kiss:"kiss",laugh:"laugh",wonder:"wonder",cry:"cry",angry:"angry"});var s=["like","kiss","laugh","wonder","cry","angry"];n.WidgetBitrixVue.component("bx-reaction",{props:{id:{default:""},values:{default:{}},userId:{default:0},openList:{default:true}},data:function e(){return{localValues:{},userReaction:i.none,buttonAnimate:false}},created:function e(){this.localValues=Object.assign({},this.values);r.EventEmitter.subscribe("ui:reaction:press",this.onPress)},destroy:function e(){r.EventEmitter.unsubscribe("ui:reaction:press",this.onPress)},watch:{values:function e(t){this.localValues=Object.assign({},t)}},methods:{list:function e(){if(this.openList);this.$emit("list",{values:this.localValues})},press:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:i.like;if(this.userReaction===i.none){if(!this.localValues[n]){this.localValues=Object.assign({},this.localValues,babelHelpers.defineProperty({},n,[]))}this.localValues[n].push(this.userId);this.buttonAnimate=true;setTimeout((function(){return t.buttonAnimate=false}),400);this.$emit("set",{action:"set",type:n})}else{if(this.localValues[this.userReaction]){this.localValues[this.userReaction]=this.localValues[this.userReaction].filter((function(e){return e!==t.userId}))}this.$emit("set",{action:"remove",type:this.userReaction})}},onPress:function e(t){var n=t.getData();if(!this.id||n.id!==this.id){return false}if(!n.emotion){n.emotion=i.like}this.press(n.emotion)}},computed:{types:function e(){var t=this;this.userReaction=i.none;return s.filter((function(e){if(typeof t.localValues[e]==="undefined"||!(t.localValues[e]instanceof Array)||t.localValues[e].length<=0){return false}if(t.userId>0&&t.userReaction===i.none&&t.localValues[e].includes(t.userId)){t.userReaction=e}return true})).map((function(e){return{type:e,count:t.localValues[e].length}}))},counter:function e(){return this.types.map((function(e){return e.count})).reduce((function(e,t){return e+t}),0)},isTypesShowed:function e(){if(this.counter<=0){return false}if(this.userReaction!==i.none&&this.counter===1){return false}return true},isMobile:function e(){var t=navigator.userAgent.toLowerCase();return t.includes("android")||t.includes("iphone")||t.includes("ipad")||t.includes("bitrixmobile")}},template:'\n\t\t<div :class="[\'ui-vue-reaction\', {\'ui-vue-reaction-mobile\': isMobile}]">\n\t\t\t<transition name="ui-vue-reaction-result-animation">\n\t\t\t\t<div v-if="isTypesShowed" class="ui-vue-reaction-result" @click="list">\n\t\t\t\t\t<transition-group tag="div" class="ui-vue-reaction-result-types" name="ui-vue-reaction-result-type-animation" >\n\t\t\t\t\t\t<span v-for="element in types" :class="[\'ui-vue-reaction-result-type\', \'ui-vue-reaction-icon-\'+element.type]" :key="element.type"></span>\n\t\t\t\t\t</transition-group>\t\n\t\t\t\t\t<div class="ui-vue-reaction-result-counter">{{counter}}</div>\n\t\t\t\t</div>\n\t\t\t</transition>\n\t\t\t<div v-if="userId > 0"  class="ui-vue-reaction-button" @click.prevent="press()">\n\t\t\t\t<div class="ui-vue-reaction-button-container">\n\t\t\t\t\t<div :class="[\'ui-vue-reaction-button-icon\', \'ui-vue-reaction-icon-\'+userReaction, {\'ui-vue-reaction-button-pressed\': buttonAnimate}]"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,BX,BX.Event);(function(e,t,n,r,i,s,o,a,l,u,c,f,d,h){"use strict";function p(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=m(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var r=0;var i=function e(){};return{s:i,n:function t(){if(r>=e.length)return{done:true};return{done:false,value:e[r++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,o=false,a;return{s:function t(){n=n.call(e)},n:function e(){var t=n.next();s=t.done;return t},e:function e(t){o=true;a=t},f:function e(){try{if(!s&&n["return"]!=null)n["return"]()}finally{if(o)throw a}}}}function m(e,t){if(!e)return;if(typeof e==="string")return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}function g(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=window.BX;var w=Object.freeze({default:"default",progress:"progress",image:"image",audio:"audio",video:"video",richLink:"richLink"});a.WidgetBitrixVue.component("bx-im-view-message-body",{props:{userId:{default:0},dialogId:{default:"0"},chatId:{default:0},messageType:{default:c.MessageType.self},message:{type:Object,default:u.MessagesModel.create().getElementState},enableReactions:{default:true},showName:{default:true},showAvatar:{default:true},referenceContentBodyClassName:{default:""},referenceContentNameClassName:{default:""}},created:function e(){this.dateFormatFunction=null;this.cacheFormatDate={}},methods:{clickByUserName:function e(t){if(this.showAvatar&&f.Utils.platform.isMobile()){return false}h.EventEmitter.emit(c.EventType.dialog.clickOnUserName,t)},clickByChatTeaser:function e(t){h.EventEmitter.emit(c.EventType.dialog.clickOnChatTeaser,{message:t.message,event:t.event})},clickByKeyboardButton:function e(t){h.EventEmitter.emit(c.EventType.dialog.clickOnKeyboardButton,y({message:t.message},t.event))},setReaction:function e(t){h.EventEmitter.emit(c.EventType.dialog.setMessageReaction,t)},openReactionList:function e(t){h.EventEmitter.emit(c.EventType.dialog.openMessageReactionList,t)},formatDate:function e(t){var n=t.toJSON().slice(0,10);if(this.cacheFormatDate[n]){return this.cacheFormatDate[n]}var r=f.Utils.date.getFormatType(b.Messenger.Const.DateFormat.message,this.$Bitrix.Loc.getMessages());this.cacheFormatDate[n]=this._getDateFormat().format(r,t);return this.cacheFormatDate[n]},_getDateFormat:function e(){var t=this;if(this.dateFormatFunction){return this.dateFormatFunction}this.dateFormatFunction=Object.create(b.Main.Date);this.dateFormatFunction._getMessage=function(e){return t.$Bitrix.Loc.getMessage(e)};return this.dateFormatFunction},isDesktop:function e(){return f.Utils.platform.isBitrixDesktop()},getDesktopVersion:function e(){return f.Utils.platform.getDesktopVersion()},isMobile:function e(){return f.Utils.platform.isBitrixMobile()}},computed:y({MessageType:function e(){return c.MessageType},ContentType:function e(){return w},contentType:function e(){if(this.filesData.length>0){var t=false;var n=false;var r=false;var i=false;var s=p(this.filesData),o;try{for(s.s();!(o=s.n()).done;){var a=o.value;if(a.progress<0){i=true;break}else if(a.type==="audio"){if(n||t){t=false;n=false;break}r=true}else if(a.type==="image"&&a.image){if(n||r){r=false;n=false;break}t=true}else if(a.type==="video"){if(t||r){r=false;t=false;break}n=true}else{r=false;t=false;n=false;break}}}catch(e){s.e(e)}finally{s.f()}if(i){return w.progress}else if(t){return w.image}else if(r){return w.audio}else if(n){return w.video}}return w["default"]},formattedDate:function e(){return this.formatDate(this.message.date)},messageText:function e(){if(this.isDeleted){return this.$Bitrix.Loc.getMessage("IM_MESSENGER_MESSAGE_DELETED")}var t=this.message.textConverted?this.message.textConverted:f.Utils.text.decode(this.message.text);var n=this.message.params;if(typeof n.LINK_ACTIVE!=="undefined"&&n.LINK_ACTIVE.length>0&&!n.LINK_ACTIVE.includes(this.userId)){t=t.replace(/<a.*?href="([^"]*)".*?>(.*?)<\/a>/gi,"$2")}return t},messageAttach:function e(){return this.message.params.ATTACH},messageReactions:function e(){return this.message.params.REACTION||{}},isEdited:function e(){return this.message.params.IS_EDITED==="Y"},isDeleted:function e(){return this.message.params.IS_DELETED==="Y"},chatColor:function e(){return this.dialog.type!==c.DialogType["private"]?this.dialog.color:this.user.color},dialog:function e(){var e=this.$store.getters["dialogues/get"](this.dialogId);return e?e:this.$store.getters["dialogues/getBlank"]()},user:function e(){return this.$store.getters["users/get"](this.message.authorId,true)},filesData:function e(){var t=this;var n=[];if(!this.message.params.FILE_ID||this.message.params.FILE_ID.length<=0){return n}this.message.params.FILE_ID.forEach((function(e){if(!e){return false}var r=t.$store.getters["files/get"](t.chatId,e,true);if(!r){t.$store.commit("files/set",{data:[t.$store.getters["files/getBlank"]({id:e,chatId:t.chatId})]});r=t.$store.getters["files/get"](t.chatId,e,true)}if(r){n.push(r)}}));return n},keyboardButtons:function e(){var t=false;if(!this.message.params.KEYBOARD||this.message.params.KEYBOARD==="N"){return t}return this.message.params.KEYBOARD},chatTeaser:function e(){if(typeof this.message.params.CHAT_ID==="undefined"||typeof this.message.params.CHAT_LAST_DATE==="undefined"||typeof this.message.params.CHAT_MESSAGE==="undefined"){return false}return{messageCounter:this.message.params.CHAT_MESSAGE,messageLastDate:this.message.params.CHAT_LAST_DATE,languageId:this.application.common.languageId}},userName:function e(){if(this.message.params.NAME){return d.Text.decode(this.message.params.NAME)}if(!this.showAvatar){return this.user.name}else{return this.user.firstName?this.user.firstName:this.user.name}},userColor:function e(){if(this.user.extranet){return"#CA7B00"}return this.user.color}},l.WidgetVuex.mapState({application:function e(t){return t.application}})),template:'\n\t\t<div class="bx-im-message-content-wrap">\n\t\t\t<template v-if="contentType == ContentType.default || contentType == ContentType.audio || contentType == ContentType.progress || (contentType !== ContentType.image && isDesktop() && getDesktopVersion() < 47)">\n\t\t\t\t<div class="bx-im-message-content">\n\t\t\t\t\t<span class="bx-im-message-content-box">\n\t\t\t\t\t\t<div class="bx-im-message-content-name-wrap">\n\t\t\t\t\t\t\t<template v-if="showName && user.extranet && messageType == MessageType.opponent">\n\t\t\t\t\t\t\t\t<div class="bx-im-message-extranet-icon"></div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-if="showName && messageType == MessageType.opponent">\n\t\t\t\t\t\t\t\t<div :class="[\'bx-im-message-content-name\', referenceContentNameClassName]" :style="{color: userColor}" @click="clickByUserName({user: user, event: $event})">{{userName}}</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div :class="[\'bx-im-message-content-body\', referenceContentBodyClassName]">\n\t\t\t\t\t\t\t<template v-if="(contentType == ContentType.audio) && (!isDesktop() || (isDesktop() && getDesktopVersion() > 43))">\n\t\t\t\t\t\t\t\t<bx-im-view-element-file-audio v-for="file in filesData" :messageType="messageType" :file="file" :key="file.templateId"/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<bx-im-view-element-file v-for="file in filesData" :messageType="messageType" :file="file" :key="file.templateId"/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<div :class="[\'bx-im-message-content-body-wrap\', {\n\t\t\t\t\t\t\t\t\'bx-im-message-content-body-with-text\': messageText.length > 0,\n\t\t\t\t\t\t\t\t\'bx-im-message-content-body-without-text\': messageText.length <= 0,\n\t\t\t\t\t\t\t}]">\n\t\t\t\t\t\t\t\t<template v-if="messageText">\n\t\t\t\t\t\t\t\t\t<span class="bx-im-message-content-text" v-html="messageText"></span>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-for="(config, id) in messageAttach">\n\t\t\t\t\t\t\t\t\t<bx-im-view-element-attach :baseColor="chatColor" :config="config" :key="id"/>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<span class="bx-im-message-content-params">\n\t\t\t\t\t\t\t\t\t<span class="bx-im-message-content-date">{{formattedDate}}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div v-if="!message.push && enableReactions && message.authorId" class="bx-im-message-content-reaction">\n\t\t\t\t\t\t<bx-reaction :id="\'message\'+message.id" :values="messageReactions" :userId="userId" :openList="false" @set="setReaction({message: message, reaction: $event})" @list="openReactionList({message: message, values: $event.values})"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if="contentType == ContentType.richLink">\n\t\t\t\t\x3c!-- richLink type markup --\x3e\n\t\t\t</template>\n\t\t\t<template v-else-if="contentType == ContentType.image || contentType == ContentType.video">\n\t\t\t\t<div class="bx-im-message-content bx-im-message-content-fit">\n\t\t\t\t\t<span class="bx-im-message-content-box">\n\t\t\t\t\t\t<template v-if="showName && messageType == MessageType.opponent">\n\t\t\t\t\t\t\t<div :class="[\'bx-im-message-content-name\', referenceContentNameClassName]" :style="{color: user.color}" @click="clickByUserName({user: user, event: $event})">{{!showAvatar? user.name: (user.firstName? user.firstName: user.name)}}</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<div :class="[\'bx-im-message-content-body\', referenceContentBodyClassName]">\n\t\t\t\t\t\t\t<template v-if="contentType == ContentType.image">\n\t\t\t\t\t\t\t\t<bx-im-view-element-file-image v-for="file in filesData" :messageType="messageType" :file="file" :key="file.templateId"/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if="contentType == ContentType.video">\n\t\t\t\t\t\t\t\t<bx-im-view-element-file-video v-for="file in filesData" :messageType="messageType" :file="file" :key="file.templateId"/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<div :class="[\'bx-im-message-content-body-wrap\', {\n\t\t\t\t\t\t\t\t\'bx-im-message-content-body-with-text\': messageText.length > 0,\n\t\t\t\t\t\t\t\t\'bx-im-message-content-body-without-text\': messageText.length <= 0,\n\t\t\t\t\t\t\t}]">\n\t\t\t\t\t\t\t\t<template v-if="messageText">\n\t\t\t\t\t\t\t\t\t<span class="bx-im-message-content-text" v-html="messageText"></span>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<span class="bx-im-message-content-params">\n\t\t\t\t\t\t\t\t\t<span class="bx-im-message-content-date">{{formattedDate}}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div v-if="!message.push && enableReactions && message.authorId" class="bx-im-message-content-reaction">\n\t\t\t\t\t\t<bx-reaction :id="\'message\'+message.id" :values="messageReactions" :userId="userId" :openList="false" @set="setReaction({message: message, reaction: $event})" @list="openReactionList({message: message, values: $event.values})"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-if="keyboardButtons">\n\t\t\t\t<bx-im-view-element-keyboard :buttons="keyboardButtons" :messageId="message.id" :userId="userId" :dialogId="dialogId" @click="clickByKeyboardButton({message: message, event: $event})"/>\n\t\t\t</template>\n\t\t\t<template v-if="chatTeaser">\n\t\t\t\t<bx-im-view-element-chat-teaser :messageCounter="chatTeaser.messageCounter" :messageLastDate="chatTeaser.messageLastDate" :languageId="chatTeaser.languageId" @click="clickByChatTeaser({message: message, event: $event})"/>\n\t\t\t</template>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,window,window,window,window,window,BX,BX,BX.Messenger.Model,BX.Messenger.Const,BX.Messenger.Lib,BX,BX.Event);this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e){"use strict";
/**
	 * Bitrix Messenger
	 * Animation manager
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var t=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"start",value:function e(t){var n=t.start,e=n===void 0?0:n,r=t.end,i=r===void 0?0:r,s=t.increment,o=s===void 0?20:s,a=t.callback,l=a===void 0?function(){}:a,u=t.duration,c=u===void 0?500:u,f=t.element,d=t.elementProperty;var h=i-e;var p=0;var m=function e(t,n,r,i){t/=i/2;if(t<1){return r/2*t*t+n}t--;return-r/2*(t*(t-2)-1)+n};var g=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)};var v=null;var y=function t(){p+=o;f[d]=m(p,e,h,c);if(p<c){v=g(t)}else{if(l&&typeof l==="function"){l()}}return v};return y()}},{key:"cancel",value:function e(t){var n=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)};n(t)}}]);return e}();t.frameIds={};e.Animation=t})(this.BX.Messenger.Lib=this.BX.Messenger.Lib||{});(function(e,t,n,r,i,s,o,a){"use strict";
/**
	 * Bitrix Messenger
	 * Message Vue component
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */r.WidgetBitrixVue.component("bx-im-view-message",{props:{userId:{default:0},dialogId:{default:0},chatId:{default:0},enableReactions:{default:true},enableDateActions:{default:true},enableCreateContent:{default:true},enableGestureQuote:{default:true},enableGestureQuoteFromRight:{default:true},enableGestureMenu:{default:false},showAvatar:{default:true},showMenu:{default:true},showName:{default:true},showLargeFont:{default:true},capturedMoveEvent:{default:null},referenceContentClassName:{default:""},referenceContentBodyClassName:{default:""},referenceContentNameClassName:{default:""},message:{type:Object,default:n.MessagesModel.create().getElementState}},data:function e(){return{componentBodyId:"bx-im-view-message-body",drag:false,dragWidth:0,dragPosition:0,dragIconShowLeft:false,dragIconShowRight:false}},created:function e(){this.dragStartPositionX=0;this.dragStartPositionY=0;this.dragMovePositionX=0;this.dragMovePositionY=0},beforeDestroy:function e(){clearTimeout(this.dragStartTimeout1);clearTimeout(this.dragStartTimeout2);if(this.dragBackAnimation){o.Animation.cancel(this.dragBackAnimation)}},methods:{clickByAvatar:function e(t){a.EventEmitter.emit(i.EventType.dialog.clickOnUserName,t)},clickByMessageMenu:function e(t){a.EventEmitter.emit(i.EventType.dialog.clickOnMessageMenu,t)},clickByMessageRetry:function e(t){a.EventEmitter.emit(i.EventType.dialog.clickOnMessageRetry,t)},doubleClickByMessage:function e(t){a.EventEmitter.emit(i.EventType.dialog.doubleClickOnMessage,t)},gestureRouter:function e(t,n){this.gestureQuote(t,n);this.gestureMenu(t,n)},gestureMenu:function e(t,n){var r=this;if(!this.enableGestureMenu){return}if(t==="touchstart"){this.gestureMenuStarted=true;this.gestureMenuPreventTouchEnd=false;if(n.target.tagName==="A"){return false}this.gestureMenuStartPosition={x:n.changedTouches[0].clientX,y:n.changedTouches[0].clientY};this.gestureMenuTimeout=setTimeout((function(){r.gestureMenuPreventTouchEnd=true;r.clickByMessageMenu({message:r.message,event:n})}),500)}else if(t==="touchmove"){if(!this.gestureMenuStarted){return false}if(Math.abs(this.gestureMenuStartPosition.x-n.changedTouches[0].clientX)>=10||Math.abs(this.gestureMenuStartPosition.y-n.changedTouches[0].clientY)>=10){this.gestureMenuStarted=false;clearTimeout(this.gestureMenuTimeout)}}else if(t==="touchend"){if(!this.gestureMenuStarted){return false}this.gestureMenuStarted=false;clearTimeout(this.gestureMenuTimeout);if(this.gestureMenuPreventTouchEnd){n.preventDefault()}}},gestureQuote:function e(t,n){var r=this;var l=s.Utils.browser.findParent(n.target,"bx-im-message")||n.target;if(!this.enableGestureQuote||s.Utils.platform.isAndroid()){return}var u=this.enableGestureQuoteFromRight;var c=l.getBoundingClientRect().left+n.layerX;var f=l.getBoundingClientRect().top+n.layerY;if(t==="touchstart"){this.dragCheck=true;this.dragStartInitialX=l.getBoundingClientRect().left;this.dragStartInitialY=l.getBoundingClientRect().top;this.dragStartPositionX=c;this.dragStartPositionY=f;this.dragMovePositionX=null;this.dragMovePositionY=null;clearTimeout(this.dragStartTimeout1);clearTimeout(this.dragStartTimeout2);this.dragStartTimeout1=setTimeout((function(){if(r.dragMovePositionX!==null){if(Math.abs(r.dragStartPositionY-r.dragMovePositionY)>=10){r.dragCheck=false}}}),29);this.dragStartTimeout2=setTimeout((function(){r.dragCheck=false;if(Math.abs(r.dragStartPositionY-r.dragMovePositionY)>=10){return}if(r.dragMovePositionX===null){return}else if(u&&r.dragStartPositionX-r.dragMovePositionX<9){return}else if(!u&&r.dragStartPositionX-r.dragMovePositionX>9){return}o.Animation.cancel(r.dragBackAnimation);r.drag=true;r.$emit("dragMessage",{result:r.drag,event:n});r.dragWidth=r.$refs.body.offsetWidth}),80)}else if(t==="touchmove"){if(this.drag||!this.dragCheck){return false}this.dragMovePositionX=c;this.dragMovePositionY=f}else if(t==="touchend"){clearTimeout(this.dragStartTimeout1);clearTimeout(this.dragStartTimeout2);this.dragCheck=false;if(!this.drag){this.dragIconShowLeft=false;this.dragIconShowRight=false;return}o.Animation.cancel(this.dragBackAnimation);this.drag=false;this.$emit("dragMessage",{result:this.drag,event:n});if(this.enableGestureQuoteFromRight&&this.dragIconShowRight&&this.dragPosition!==0||!this.enableGestureQuoteFromRight&&this.dragIconShowLeft&&this.dragPosition!==this.dragStartInitialX){if(s.Utils.platform.isBitrixMobile()){setTimeout((function(){return app.exec("callVibration")}),200)}a.EventEmitter.emit(i.EventType.dialog.quoteMessage,{message:this.message})}this.dragIconShowLeft=false;this.dragIconShowRight=false;this.dragBackAnimation=o.Animation.start({start:this.dragPosition,end:this.dragStartInitialX,increment:20,duration:300,element:this,elementProperty:"dragPosition",callback:function e(){r.dragLayerPosition=undefined;r.dragWidth=0;r.dragPosition=0}})}}},watch:{capturedMoveEvent:function e(t){if(!this.drag||!t){return}var n=s.Utils.browser.findParent(t.target,"bx-im-message")||t.target;var r=n.getBoundingClientRect().left+t.layerX;if(typeof this.dragLayerPosition==="undefined"){this.dragLayerPosition=r}var i=this.dragLayerPosition-r;this.dragLayerPosition=r;this.dragPosition=this.dragPosition-i;if(this.enableGestureQuoteFromRight){var o=(this.showAvatar?30:0)+45;var a=this.showAvatar?30:30;if(this.dragPosition<-o){this.dragPosition=-o}else if(this.dragPosition<-a){if(!this.dragIconShowRight){this.dragIconShowRight=true}}else if(this.dragPosition>=0){this.dragPosition=0}}else{var l=60;var u=40;if(this.dragPosition<=this.dragStartInitialX){this.dragPosition=this.dragStartInitialX}else if(this.dragPosition>=l){this.dragPosition=l}else if(this.dragPosition>=u){if(!this.dragIconShowLeft){this.dragIconShowLeft=true}}}}},computed:{MessageType:function e(){return i.MessageType},dialog:function e(){var e=this.$store.getters["dialogues/get"](this.dialogId);return e?e:this.$store.getters["dialogues/getBlank"]()},type:function e(){if(this.message.system||this.message.authorId==0){return i.MessageType.system}else if(this.message.authorId===-1||this.message.authorId==this.userId){return i.MessageType.self}else{return i.MessageType.opponent}},userData:function e(){return this.$store.getters["users/get"](this.message.authorId,true)},userAvatar:function e(){if(this.message.params.AVATAR){return"url('".concat(this.message.params.AVATAR,"')")}if(this.userData.avatar){return"url('".concat(this.userData.avatar,"')")}return""},filesData:function e(){var t=this.$store.getters["files/getList"](this.chatId);return t?t:{}},isEdited:function e(){return this.message.params.IS_EDITED==="Y"},isDeleted:function e(){return this.message.params.IS_DELETED==="Y"},isLargeFont:function e(){return this.showLargeFont&&this.message.params.LARGE_FONT==="Y"}},template:'\n\t\t<div :class="[\'bx-im-message\', {\n\t\t\t\t\'bx-im-message-without-menu\': !showMenu,\n\t\t\t\t\'bx-im-message-without-avatar\': !showAvatar,\n\t\t\t\t\'bx-im-message-type-system\': type === MessageType.system,\n\t\t\t\t\'bx-im-message-type-self\': type === MessageType.self,\n\t\t\t\t\'bx-im-message-type-other\': type !== MessageType.self,\n\t\t\t\t\'bx-im-message-type-opponent\': type === MessageType.opponent,\n\t\t\t\t\'bx-im-message-status-error\': message.error,\n\t\t\t\t\'bx-im-message-status-unread\': message.unread,\n\t\t\t\t\'bx-im-message-status-blink\': message.blink,\n\t\t\t\t\'bx-im-message-status-edited\': isEdited,\n\t\t\t\t\'bx-im-message-status-deleted\': isDeleted,\n\t\t\t\t\'bx-im-message-large-font\': isLargeFont,\n\t\t\t}]" \n\t\t\t@touchstart="gestureRouter(\'touchstart\', $event)"\n\t\t\t@touchmove="gestureRouter(\'touchmove\', $event)"\n\t\t\t@touchend="gestureRouter(\'touchend\', $event)"\n\t\t\t@dblclick="doubleClickByMessage({message: message, event: $event})"\n\t\t\tref="body"\n\t\t\t:style="{\n\t\t\t\twidth: dragWidth > 0? dragWidth+\'px\': \'\', \n\t\t\t\tmarginLeft: (enableGestureQuoteFromRight && dragPosition < 0) || (!enableGestureQuoteFromRight && dragPosition > 0)? dragPosition+\'px\': \'\',\n\t\t\t}"\n\t\t>\n\t\t\t<template v-if="type === MessageType.self">\n\t\t\t\t<template v-if="dragIconShowRight">\n\t\t\t\t\t<div class="bx-im-message-reply bx-im-message-reply-right">\n\t\t\t\t\t\t<div class="bx-im-message-reply-icon"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</template> \n\t\t\t\t<div class="bx-im-message-box">\n\t\t\t\t\t<component :is="componentBodyId"\n\t\t\t\t\t\t:userId="userId" \n\t\t\t\t\t\t:message="message"\n\t\t\t\t\t\t:dialogId="dialogId"\n\t\t\t\t\t\t:chatId="chatId"\n\t\t\t\t\t\t:messageType="type"\n\t\t\t\t\t\t:showAvatar="showAvatar"\n\t\t\t\t\t\t:showName="showName"\n\t\t\t\t\t\t:enableReactions="enableReactions"\n\t\t\t\t\t\t:referenceContentBodyClassName="referenceContentBodyClassName"\n\t\t\t\t\t\t:referenceContentNameClassName="referenceContentNameClassName"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class="bx-im-message-box-status">\n\t\t\t\t\t<template v-if="message.sending">\n\t\t\t\t\t\t<div class="bx-im-message-sending"></div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<transition name="bx-im-message-status-retry">\n\t\t\t\t\t\t<template v-if="!message.sending && message.error && message.retry">\n\t\t\t\t\t\t\t<div class="bx-im-message-status-retry" :title="$Bitrix.Loc.getMessage(\'IM_MESSENGER_MESSAGE_RETRY_TITLE\')" @click="clickByMessageRetry({message: message, event: $event})">\n\t\t\t\t\t\t\t\t<span class="bx-im-message-retry-icon"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</transition>\n\t\t\t\t\t<template v-if="showMenu && !message.sending && !message.error">\n\t\t\t\t\t\t<div class="bx-im-message-status-menu" :title="$Bitrix.Loc.getMessage(\'IM_MESSENGER_MESSAGE_MENU_TITLE\')" @click="clickByMessageMenu({message: message, event: $event})">\n\t\t\t\t\t\t\t<span class="bx-im-message-menu-icon"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template> \n\t\t\t\t</div>\n\t\t\t\t<template v-if="dragIconShowLeft">\n\t\t\t\t\t<div class="bx-im-message-reply bx-im-message-reply-left">\n\t\t\t\t\t\t<div class="bx-im-message-reply-icon"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</template> \n\t\t\t</template>\n\t\t\t<template v-else-if="type !== MessageType.self">\n\t\t\t\t<template v-if="dragIconShowLeft">\n\t\t\t\t\t<div class="bx-im-message-reply bx-im-message-reply-left">\n\t\t\t\t\t\t<div class="bx-im-message-reply-icon"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</template> \n\t\t\t\t<template v-if="type === MessageType.opponent">\n\t\t\t\t\t<div v-if="showAvatar" class="bx-im-message-avatar" @click="clickByAvatar({user: userData, event: $event})">\n\t\t\t\t\t\t<div :class="[\'bx-im-message-avatar-image\', {\n\t\t\t\t\t\t\t\t\'bx-im-message-avatar-image-default\': !userData.avatar\n\t\t\t\t\t\t\t}]"\n\t\t\t\t\t\t\t:style="{\n\t\t\t\t\t\t\t\tbackgroundColor: !userData.avatar? userData.color: \'\', \n\t\t\t\t\t\t\t\tbackgroundImage: userAvatar\n\t\t\t\t\t\t\t}" \n\t\t\t\t\t\t\t:title="userData.name"\n\t\t\t\t\t\t></div>\t\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div class="bx-im-message-box">\n\t\t\t\t\t<component :is="componentBodyId"\n\t\t\t\t\t\t:message="message"\n\t\t\t\t\t\t:userId="userId" \n\t\t\t\t\t\t:dialogId="dialogId"\n\t\t\t\t\t\t:chatId="chatId"\n\t\t\t\t\t\t:messageType="type"\n\t\t\t\t\t\t:files="filesData"\n\t\t\t\t\t\t:showAvatar="showAvatar"\n\t\t\t\t\t\t:showName="showName"\n\t\t\t\t\t\t:enableReactions="enableReactions"\n\t\t\t\t\t\t:referenceContentBodyClassName="referenceContentBodyClassName"\n\t\t\t\t\t\t:referenceContentNameClassName="referenceContentNameClassName"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div v-if="showMenu"  class="bx-im-message-menu" :title="$Bitrix.Loc.getMessage(\'IM_MESSENGER_MESSAGE_MENU_TITLE\')" @click="clickByMessageMenu({message: message, event: $event})">\n\t\t\t\t\t<span class="bx-im-message-menu-icon"></span>\n\t\t\t\t</div>\t\n\t\t\t\t<template v-if="dragIconShowRight">\n\t\t\t\t\t<div class="bx-im-message-reply bx-im-message-reply-right">\n\t\t\t\t\t\t<div class="bx-im-message-reply-icon"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</template> \n\t\t\t</template>\n\t\t</div>\n\t'})})(this.window=this.window||{},window,BX.Messenger.Model,BX,BX.Messenger.Const,BX.Messenger.Lib,BX.Messenger.Lib,BX.Event);this.BX=this.BX||{};(function(e,t,n,r,i,s,o,a,l,u,c,f,d){"use strict";var h=Object.freeze({read:"read",none:"none"});var p=Object.freeze({history:"history",unread:"unread"});var m=Object.freeze({groupTitle:"groupTitle",readedTitle:"readedTitle"});var g={props:["element"],created:function e(){var t=["self","opponent"];var n=Math.floor(Math.random()*t.length);this.mode=t[n]},computed:{itemClasses:function e(){var e=["im-skeleton-item","im-skeleton-item--sm","".concat(u.DialogReferenceClassName.listItem,"-").concat(this.element.id)];if(this.mode==="self"){e.push("im-skeleton-item-self")}else{e.push("im-skeleton-item-opponent")}return e}},template:'\n\t\t<div :class="itemClasses" :key="element.templateId">\n\t\t\t<div v-if="mode === \'opponent\'" class="im-skeleton-logo"></div>\n\t\t\t<div class="im-skeleton-content">\n\t\t\t\t<div class="im-skeleton-line-row">\n\t\t\t\t\t<div style="max-width: 70%" class="im-skeleton-line"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="im-skeleton-line-row">\n\t\t\t\t\t<div style="max-width: 100%" class="im-skeleton-line"></div>\n\t\t\t\t\t<div style="max-width: 26px; margin-left: auto;" class="im-skeleton-line"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="im-skeleton-like"></div>\n\t\t\t</div>\n\t\t</div>\n\t'};var v={props:["element"],created:function e(){var t=["self","opponent"];var n=Math.floor(Math.random()*t.length);this.mode=t[n]},computed:{itemClasses:function e(){var e=["im-skeleton-item","im-skeleton-item--md","".concat(u.DialogReferenceClassName.listItem,"-").concat(this.element.id)];if(this.mode==="self"){e.push("im-skeleton-item-self")}else{e.push("im-skeleton-item-opponent")}return e}},template:'\n\t\t<div :class="itemClasses" :key="element.templateId">\n\t\t\t<div v-if="mode === \'opponent\'" class="im-skeleton-logo"></div>\n\t\t\t<div class="im-skeleton-content">\n\t\t\t\t<div class="im-skeleton-line-row">\n\t\t\t\t\t<div style="max-width: 35%" class="im-skeleton-line"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="im-skeleton-line-row">\n\t\t\t\t\t<div style="max-width: 100%" class="im-skeleton-line"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="im-skeleton-line-row">\n\t\t\t\t\t<div style="max-width: 55%" class="im-skeleton-line"></div>\n\t\t\t\t\t<div style="max-width: 26px; margin-left: auto;" class="im-skeleton-line"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="im-skeleton-like"></div>\n\t\t\t</div>\n\t\t</div>\n\t'};var y={props:["element"],created:function e(){var t=["self","opponent"];var n=Math.floor(Math.random()*t.length);this.mode=t[n]},computed:{itemClasses:function e(){var e=["im-skeleton-item","im-skeleton-item--md","".concat(u.DialogReferenceClassName.listItem,"-").concat(this.element.id)];if(this.mode==="self"){e.push("im-skeleton-item-self")}else{e.push("im-skeleton-item-opponent")}return e}},template:'\n\t\t<div :class="itemClasses" :key="element.templateId">\n\t\t\t<div v-if="mode === \'opponent\'" class="im-skeleton-logo"></div>\n\t\t\t<div class="im-skeleton-content">\n\t\t\t\t<div class="im-skeleton-line-row">\n\t\t\t\t\t<div style="max-width: 35%" class="im-skeleton-line"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="im-skeleton-line-row">\n\t\t\t\t\t<div style="max-width: 100%" class="im-skeleton-line"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="im-skeleton-line-row">\n\t\t\t\t\t<div style="max-width: 55%" class="im-skeleton-line"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="im-skeleton-line-row">\n\t\t\t\t\t<div style="max-width: 26px; margin-left: auto;" class="im-skeleton-line"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="im-skeleton-like"></div>\n\t\t\t</div>\n\t\t</div>\n\t'};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S={props:{userId:{type:Number,default:0},dialogId:{type:String,default:"0"},messageLimit:{type:Number,default:50},enableReadMessages:{type:Boolean,default:true},enableReactions:{type:Boolean,default:true},enableDateActions:{type:Boolean,default:true},enableCreateContent:{type:Boolean,default:true},enableGestureQuote:{type:Boolean,default:true},enableGestureQuoteFromRight:{type:Boolean,default:true},enableGestureMenu:{type:Boolean,default:false},showMessageUserName:{type:Boolean,default:true},showMessageAvatar:{type:Boolean,default:true},showMessageMenu:{type:Boolean,default:true}},components:{Placeholder1:g,Placeholder2:v,Placeholder3:y},data:function e(){return{messagesSet:false,scrollAnimating:false,showScrollButton:false,captureMove:false,capturedMoveEvent:null,lastMessageId:null,isRequestingHistory:false,historyPagesRequested:0,stopHistoryLoading:false,isRequestingUnread:false,unreadPagesRequested:0,placeholderCount:0,pagesLoaded:0}},created:function e(){o.Logger.warn("MessageList component is created");this.initParams();this.initEvents()},beforeDestroy:function e(){this.observers={};clearTimeout(this.scrollButtonShowTimeout);this.clearEvents()},mounted:function e(){this.windowFocused=i.Utils.platform.isBitrixMobile()?true:document.hasFocus();this.getMessageIdsForPagination();this.scrollOnStart()},watch:{dialogId:function e(t,n){var r=this;o.Logger.warn("new dialogId in message-list",t);this.messagesSet=false;this.$nextTick((function(){r.scrollOnStart()}))}},computed:w({TemplateType:function e(){return u.DialogTemplateType},ObserverType:function e(){return h},DialogReferenceClassName:function e(){return u.DialogReferenceClassName},localize:function e(){return l.WidgetBitrixVue.getFilteredPhrases("IM_MESSENGER_DIALOG_",this)},dialog:function e(){var e=this.$store.getters["dialogues/get"](this.dialogId);return e?e:this.$store.getters["dialogues/getBlank"]()},chatId:function e(){if(this.application){return this.application.dialog.chatId}},collection:function e(){return this.$store.getters["messages/get"](this.chatId)},formattedCollection:function e(){var t=this;this.lastMessageId=0;this.lastMessageAuthorId=0;this.firstUnreadMessageId=0;var n=0;var r={};var i=[];this.collection.forEach((function(e){if(t.messagesSet&&(t.lastHistoryMessageId===null||t.lastHistoryMessageId>e.id)){o.Logger.warn("setting new lastHistoryMessageId",e.id);t.lastHistoryMessageId=e.id}t.lastMessageId=e.id;var s=t.getDateGroup(e.date);if(!r[s.title]){r[s.title]=s.id;i.push(t.getDateGroupBlock(s.id,s.title))}else if(n!==e.authorId){i.push(t.getDelimiterBlock(e.id))}if(e.unread&&!t.firstUnreadMessageId){t.firstUnreadMessageId=e.id}i.push(e);n=e.authorId}));this.lastMessageAuthorId=n;return i},writingStatusText:function e(){var t=this;clearTimeout(this.scrollToTimeout);if(this.dialog.writingList.length===0){return""}if(!this.scrollChangedByUser&&!this.showScrollButton){this.scrollToTimeout=setTimeout((function(){return t.animatedScrollToPosition({duration:500})}),300)}var n=this.dialog.writingList.map((function(e){return e.userName})).join(", ");return this.localize["IM_MESSENGER_DIALOG_WRITES_MESSAGE"].replace("#USER#",n)},statusReaded:function e(){var t=this;clearTimeout(this.scrollToTimeout);if(this.dialog.readedList.length===0){return""}var n="";if(this.dialog.type===u.DialogType["private"]){var r=this.dialog.readedList[0];if(r.messageId===this.lastMessageId&&r.userId!==this.lastMessageAuthorId){var i=this.getDateFormat(m.readedTitle);var s=this.getDateObject().format(i,r.date);n=this.localize["IM_MESSENGER_DIALOG_MESSAGES_READED_USER"].replace("#DATE#",s)}}else{var o=this.dialog.readedList.filter((function(e){return e.messageId===t.lastMessageId&&e.userId!==t.lastMessageAuthorId}));if(o.length===1){n=this.localize["IM_MESSENGER_DIALOG_MESSAGES_READED_CHAT"].replace("#USERS#",o[0].userName)}else if(o.length>1){n=this.localize["IM_MESSENGER_DIALOG_MESSAGES_READED_CHAT"].replace("#USERS#",this.localize["IM_MESSENGER_DIALOG_MESSAGES_READED_CHAT_PLURAL"].replace("#USER#",o[0].userName).replace("#COUNT#",o.length-1).replace("[LINK]","").replace("[/LINK]",""))}}if(!n){return""}if(!this.scrollChangedByUser&&!this.showScrollButton){this.scrollToTimeout=setTimeout((function(){return t.animatedScrollToPosition({duration:500})}),300)}return n},unreadCounter:function e(){return this.dialog.counter>99?999:this.dialog.counter},formattedUnreadCounter:function e(){return this.unreadCounter>99?"99+":this.unreadCounter},scrollBlocked:function e(){if(this.application.device.type!==u.DeviceType.mobile){return false}return this.scrollAnimating||this.captureMove},isDarkBackground:function e(){return this.application.options.darkBackground},isMobile:function e(){return this.application.device.type===u.DeviceType.mobile},isRequestingData:function e(){return this.isRequestingHistory||this.isRequestingUnread},remainingHistoryPages:function e(){return Math.ceil((this.dialog.messageCount-this.collection.length)/this.historyMessageLimit)},remainingUnreadPages:function e(){if(this.isLastIdInCollection){return 0}return Math.ceil((this.dialog.messageCount-this.collection.length)/this.unreadMessageLimit)},unreadInCollection:function e(){return this.collection.filter((function(e){return e.unread===true}))},isLastIdInCollection:function e(){return this.collection.map((function(e){return e.id})).includes(this.dialog.lastMessageId)},showStatusPlaceholder:function e(){return!this.writingStatusText&&!this.statusReaded},bodyClasses:function e(){return[u.DialogReferenceClassName.listBody,{"bx-im-dialog-list-scroll-blocked":this.scrollBlocked,"bx-im-dialog-dark-background":this.isDarkBackground,"bx-im-dialog-mobile":this.isMobile}]}},d.WidgetVuex.mapState({application:function e(t){return t.application}})),methods:{initParams:function e(){this.placeholdersComposition=this.getPlaceholdersComposition();this.historyMessageLimit=50;this.unreadMessageLimit=50;this.showScrollButton=this.unreadCounter>0;this.scrollingDownThreshold=1e3;this.scrollingUpThreshold=1e3;this.messageScrollOffset=20;this.lastScroll=0;this.scrollChangedByUser=false;this.scrollButtonDiff=100;this.scrollButtonShowTimeout=null;this.scrollPositionChangeTime=(new Date).getTime();this.lastRequestTime=(new Date).getTime();this.observers={};this.lastAuthorId=0;this.lastHistoryMessageId=null;this.firstUnreadMessageId=null;this.lastUnreadMessageId=null;this.dateFormatFunction=null;this.cachedDateGroups={};this.readMessageQueue=[];this.readMessageTarget={};this.readVisibleMessagesDelayed=i.Utils.debounce(this.readVisibleMessages,50,this);this.requestHistoryDelayed=i.Utils.debounce(this.requestHistory,50,this)},initEvents:function e(){f.EventEmitter.subscribe(u.EventType.dialog.scrollOnStart,this.onScrollOnStart);f.EventEmitter.subscribe(u.EventType.dialog.scrollToBottom,this.onScrollToBottom);f.EventEmitter.subscribe(u.EventType.dialog.readVisibleMessages,this.onReadVisibleMessages);f.EventEmitter.subscribe(u.EventType.dialog.newMessage,this.onNewMessage);f.EventEmitter.subscribe(u.EventType.dialog.requestUnread,this.onExternalUnreadRequest);f.EventEmitter.subscribe(u.EventType.dialog.messagesSet,this.onMessagesSet);f.EventEmitter.subscribe(u.EventType.dialog.beforeMobileKeyboard,this.onBeforeMobileKeyboard);window.addEventListener("orientationchange",this.onOrientationChange);window.addEventListener("focus",this.onWindowFocus);window.addEventListener("blur",this.onWindowBlur);l.WidgetBitrixVue.event.$on("bitrixmobile:controller:focus",this.onWindowFocus);l.WidgetBitrixVue.event.$on("bitrixmobile:controller:blur",this.onWindowBlur)},clearEvents:function e(){f.EventEmitter.unsubscribe(u.EventType.dialog.scrollOnStart,this.onScrollOnStart);f.EventEmitter.unsubscribe(u.EventType.dialog.scrollToBottom,this.onScrollToBottom);f.EventEmitter.unsubscribe(u.EventType.dialog.readVisibleMessages,this.onReadVisibleMessages);f.EventEmitter.unsubscribe(u.EventType.dialog.newMessage,this.onNewMessage);f.EventEmitter.unsubscribe(u.EventType.dialog.requestUnread,this.onExternalUnreadRequest);f.EventEmitter.unsubscribe(u.EventType.dialog.messagesSet,this.onMessagesSet);f.EventEmitter.unsubscribe(u.EventType.dialog.beforeMobileKeyboard,this.onBeforeMobileKeyboard);window.removeEventListener("orientationchange",this.onOrientationChange);window.removeEventListener("focus",this.onWindowFocus);window.removeEventListener("blur",this.onWindowBlur);l.WidgetBitrixVue.event.$off("bitrixmobile:controller:focus",this.onWindowFocus);l.WidgetBitrixVue.event.$off("bitrixmobile:controller:blur",this.onWindowBlur)},onDialogClick:function e(t){if(l.WidgetBitrixVue.testNode(t.target,{className:"bx-im-message-command"})){this.onCommandClick(t)}else if(l.WidgetBitrixVue.testNode(t.target,{className:"bx-im-mention"})){this.onMentionClick(t)}this.windowFocused=true;f.EventEmitter.emit(u.EventType.dialog.clickOnDialog,{event:t})},onDialogMove:function e(t){if(!this.captureMove){return}this.capturedMoveEvent=t},onCommandClick:function e(t){var n="";if(t.target.dataset.entity==="send"||t.target.dataset.entity==="put"){n=t.target.nextSibling.innerHTML}else if(t.target.dataset.entity==="call"){n=t.target.dataset.command}f.EventEmitter.emit(u.EventType.dialog.clickOnCommand,{type:t.target.dataset.entity,value:n,event:t})},onMentionClick:function e(t){f.EventEmitter.emit(u.EventType.dialog.clickOnMention,{type:t.target.dataset.type,value:t.target.dataset.value,event:t})},onOrientationChange:function e(){var t=this;clearTimeout(this.scrollToTimeout);if(this.application.device.type!==u.DeviceType.mobile){return false}o.Logger.log("Orientation changed");if(!this.scrollChangedByUser){this.scrollToTimeout=setTimeout((function(){return t.scrollToBottom({force:true})}),300)}},onWindowFocus:function e(){this.windowFocused=true;this.readVisibleMessages();return true},onWindowBlur:function e(){this.windowFocused=false},onScrollToBottom:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=t.data,r=n===void 0?{chatId:0,force:false,cancelIfScrollChange:false,duration:null}:n;if(r.chatId!==this.chatId){return false}o.Logger.warn("onScrollToBottom",r);r.force=r.force===true;r.cancelIfScrollChange=r.cancelIfScrollChange===true;if(this.firstUnreadMessageId){o.Logger.warn("Dialog.onScrollToBottom: canceled - unread messages");return false}if(r.cancelIfScrollChange&&this.scrollChangedByUser&&this.scrollBeforeMobileKeyboard){var i=this.$refs.body;this.scrollAfterMobileKeyboard=i.scrollHeight-i.scrollTop-i.clientHeight;var s=this.scrollAfterMobileKeyboard-this.scrollBeforeMobileKeyboard;this.animatedScrollToPosition({start:i.scrollTop,end:i.scrollTop+s});return true}this.scrollToBottom(r);return true},onReadVisibleMessages:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=t.data,r=n===void 0?{chatId:0}:n;if(r.chatId!==this.chatId){return false}o.Logger.warn("onReadVisibleMessages");this.readVisibleMessagesDelayed();return true},onClickOnReadList:function e(t){var n=this;var r=this.dialog.readedList.filter((function(e){return e.messageId===n.lastMessageId&&e.userId!==n.lastMessageAuthorId}));f.EventEmitter.emit(u.EventType.dialog.clickOnReadList,{list:r,event:t})},onDragMessage:function e(t){if(!this.windowFocused){return false}this.captureMove=t.result;if(!t.result){this.capturedMoveEvent=null}},onScroll:function e(t){if(this.isScrolling){return false}clearTimeout(this.scrollToTimeout);this.currentScroll=t.target.scrollTop;var n=this.lastScroll<this.currentScroll;var r=!n;if(r&&this.scrollButtonClicked){o.Logger.warn("scrollUp - reset scroll button clicks");this.scrollButtonClicked=false}var i=t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight;if(this.currentScroll>0&&n&&i<this.scrollingDownThreshold){this.onScrollDown()}else if(r&&this.currentScroll<=this.scrollingUpThreshold){this.onScrollUp()}this.lastScroll=this.currentScroll;this.scrollPositionChangeTime=(new Date).getTime();this.manageScrollButton(t)},onScrollDown:function e(){var t=this;if(!this.messagesSet||this.isLastIdInCollection){return false}if(this.isRequestingData&&this.remainingUnreadPages>0){this.drawPlaceholders(p.unread).then((function(){t.unreadPagesRequested+=1;o.Logger.warn("Already loading! Draw placeholders and add request, total - ",t.unreadPagesRequested)}))}else if(!this.isRequestingData&&this.remainingUnreadPages>0){o.Logger.warn("Starting new unread request");this.isRequestingUnread=true;this.drawPlaceholders(p.unread).then((function(){t.requestUnread()}))}},onScrollUp:function e(){var t=this;if(!this.messagesSet||this.stopHistoryLoading){return false}this.projectedPagesToLoad=1;if(!this.isMobile&&this.$refs.body.scrollTop<this.$refs.body.scrollHeight/4){this.projectedPagesToLoad=3}if(this.isRequestingData&&this.remainingHistoryPages>0){var n=this.$refs.body.scrollHeight;this.drawPlaceholders(p.history,this.projectedPagesToLoad).then((function(){if(!t.isOverflowAnchorSupported()){t.enableUserScroll()}t.historyPagesRequested+=t.projectedPagesToLoad;o.Logger.warn("Already loading! Draw placeholders and add request, total - ",t.historyPagesRequested)}));if(!this.isOverflowAnchorSupported()){o.Logger.warn("Disabling user scroll");this.$nextTick((function(){var e=t.$refs.body.scrollHeight-n;t.disableUserScroll();t.forceScrollToPosition(t.$refs.body.scrollTop+e)}))}}else if(!this.isRequestingData&&this.remainingHistoryPages>0){o.Logger.warn("Starting new history request");this.isRequestingHistory=true;var r=this.$refs.body.scrollHeight;this.drawPlaceholders(p.history,this.projectedPagesToLoad).then((function(){t.historyPagesRequested=t.projectedPagesToLoad-1;if(!t.isOverflowAnchorSupported()){t.enableUserScroll()}t.requestHistory()}));if(!this.isOverflowAnchorSupported()){o.Logger.warn("Disabling user scroll");this.$nextTick((function(){var e=t.$refs.body.scrollHeight-r;t.disableUserScroll();t.forceScrollToPosition(t.$refs.body.scrollTop+e)}))}}},isOverflowAnchorSupported:function e(){return!i.Utils.platform.isBitrixMobile()&&!i.Utils.browser.isIe()&&!i.Utils.browser.isSafari()&&!i.Utils.browser.isSafariBased()},disableUserScroll:function e(){this.$refs.body.classList.add("bx-im-dialog-list-scroll-blocked")},enableUserScroll:function e(){this.$refs.body.classList.remove("bx-im-dialog-list-scroll-blocked")},onScrollButtonClick:function e(){o.Logger.warn("Scroll button click",this.scrollButtonClicked);if(this.isRequestingData){return false}if(this.unreadCounter===0){this.scrollToBottom();return true}if(this.scrollButtonClicked&&this.remainingUnreadPages>0){o.Logger.warn("Second click on scroll button");this.scrollToLastPage();return true}this.scrollButtonClicked=true;this.scrollToBottom()},onNewMessage:function e(t){var n=this;var r=t.data,i=r.chatId,s=r.messageId;if(i!==this.chatId){return false}o.Logger.warn("Received new message from pull",s);if(this.showScrollButton){return false}this.$nextTick((function(){if(!n.windowFocused){var e=n.$refs["body"].scrollHeight-n.$refs["body"].clientHeight;if(n.currentScroll<e){n.showScrollButton=true}n.scrollToFirstUnreadMessage();return true}var t=n.getElementById(s);if(!t){return false}var r=n.$refs.body;if(t.clientHeight>r.clientHeight){n.scrollToMessage({messageId:s});return true}n.animatedScrollToPosition()}))},onMessagesSet:function e(t){var n=t.data;if(n.chatId!==this.chatId){return false}if(this.messagesSet===true){o.Logger.warn("messages are already set");return false}o.Logger.warn("onMessagesSet",n.chatId);this.messagesSet=true;var r=false;if(this.$refs.body.scrollTop<this.$refs.body.scrollHeight/2){r=true}this.scrollToBottom({force:r,cancelIfScrollChange:false})},onBeforeMobileKeyboard:function e(t){var n=t.data;var r=this.$refs.body;this.scrollBeforeMobileKeyboard=r.scrollHeight-r.scrollTop-r.clientHeight},onExternalUnreadRequest:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},r=n.data,i=r===void 0?{chatId:0}:r;if(i.chatId!==this.chatId){return false}o.Logger.warn("onExternalUnreadRequest");this.isRequestingUnread=true;this.drawPlaceholders(p.unread).then((function(){return t.requestUnread()}));this.externalUnreadRequestResolve=null;return new Promise((function(e,n){t.externalUnreadRequestResolve=e}))},onScrollOnStart:function e(t){var n=t.data;if(n.chatId!==this.chatId){return false}this.scrollOnStart({force:false})},scrollOnStart:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=t.force,r=n===void 0?true:n;o.Logger.warn("scrolling on start of dialog");var i=this.getFirstUnreadMessage();if(i){this.scrollToFirstUnreadMessage(i,r)}else{var s=this.$refs.body;this.forceScrollToPosition(s.scrollHeight-s.clientHeight)}},scrollToBottom:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=t.force,r=n===void 0?false:n,i=t.cancelIfScrollChange,s=i===void 0?false:i,a=t.duration,l=a===void 0?null:a;o.Logger.warn("scroll to bottom",r,s,l);if(s&&this.scrollChangedByUser){return false}var u=this.$refs.body;if(this.dialog.counter>0){var c=this.dialog.counter>1&&this.firstUnreadMessageId?this.firstUnreadMessageId:this.lastMessageId;this.scrollToFirstUnreadMessage(c,r);return true}this.showScrollButton=false;if(r){this.forceScrollToPosition(u.scrollHeight-u.clientHeight)}else{var f={};if(l){f.duration=l}this.animatedScrollToPosition(w({},f))}},scrollToFirstUnreadMessage:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;o.Logger.warn("scroll to first unread");var r=false;if(t!==null){r=this.getElementById(t)}if(!r){t=this.getFirstUnreadMessage()}this.scrollToMessage({messageId:t,force:n})},scrollToMessage:function e(t){var n=t.messageId,r=n===void 0?0:n,i=t.force,s=i===void 0?false:i,a=t.stickToTop,l=a===void 0?true:a;o.Logger.warn("scroll to message");var u=this.$refs.body;var c=this.getElementById(r);var f=0;if(!c){if(l){f=10}else{f=u.scrollHeight-u.clientHeight}}else if(l){f=c.offsetTop-this.messageScrollOffset/2}else{f=c.offsetTop+c.offsetHeight-u.clientHeight+this.messageScrollOffset/2}if(s){this.forceScrollToPosition(f)}else{this.animatedScrollToPosition({end:f})}return true},forceScrollToPosition:function e(t){o.Logger.warn("Force scroll to position - ",t);var n=this.$refs.body;if(!n){return false}if(this.animateScrollId){s.Animation.cancel(this.animateScrollId);this.scrollAnimating=false;this.animateScrollId=null}n.scrollTop=t},animatedScrollToPosition:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};o.Logger.warn("Animated scroll to - ",n);if(this.animateScrollId){s.Animation.cancel(this.animateScrollId);this.scrollAnimating=false}if(typeof n==="function"){n={callback:n}}var r=this.$refs.body;if(!r){if(n.callback&&typeof n.callback==="function"){n.callback()}this.animateScrollId=null;this.scrollAnimating=false;return true}if(i.Utils.platform.isIos()&&i.Utils.platform.getIosVersion()>12&&i.Utils.platform.getIosVersion()<13.2){r.scrollTop=r.scrollHeight-r.clientHeight;return true}var a=n,l=a.start,u=l===void 0?r.scrollTop:l,c=a.end,f=c===void 0?r.scrollHeight-r.clientHeight:c,d=a.increment,h=d===void 0?20:d,p=a.callback,m=a.duration,g=m===void 0?500:m;var v=this.$refs.container;if(v&&f-u>v.offsetHeight*3){u=f-v.offsetHeight*3;o.Logger.warn("Dialog.animatedScroll: Scroll trajectory has been reduced")}this.scrollAnimating=true;o.Logger.warn("Dialog.animatedScroll: User scroll blocked while scrolling");this.animateScrollId=s.Animation.start({start:u,end:f,increment:h,duration:g,element:r,elementProperty:"scrollTop",callback:function e(){t.animateScrollId=null;t.scrollAnimating=false;if(p&&typeof p==="function"){p()}}})},drawPlaceholders:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var r=t===p.history?this.historyMessageLimit:this.unreadMessageLimit;var i=this.generatePlaceholders(r,n);return this.$store.dispatch("messages/addPlaceholders",{placeholders:i,requestMode:t})},generatePlaceholders:function e(t,n){var r=[];for(var i=0;i<n;i++){for(var s=0;s<this.placeholdersComposition.length;s++){r.push({id:"placeholder".concat(this.placeholderCount),chatId:this.chatId,templateType:u.DialogTemplateType.placeholder,placeholderType:this.placeholdersComposition[s],unread:false});this.placeholderCount++}}return r},getPlaceholdersComposition:function e(){return[1,1,1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,3,3].sort((function(){return.5-Math.random()}))},requestHistory:function e(){var t=this;return this.$Bitrix.RestClient.get().callMethod(u.RestMethod.imDialogMessagesGet,{chat_id:this.chatId,last_id:this.lastHistoryMessageId,limit:this.historyMessageLimit,convert_text:"Y"}).then((function(e){var n=e.data().messages;if(n.length>0){t.lastHistoryMessageId=n[n.length-1].id}if(n.length<t.historyMessageLimit){t.stopHistoryLoading=true}t.$Bitrix.Data.get("controller").executeRestAnswer(u.RestMethodHandler.imDialogMessagesGet,e);return new Promise((function(e,r){var i=t.$refs.body.scrollHeight;t.$store.dispatch("messages/updatePlaceholders",{chatId:t.chatId,data:n,firstMessage:t.pagesLoaded*t.placeholdersComposition.length,amount:t.placeholdersComposition.length}).then((function(){if(!t.isOverflowAnchorSupported()){t.enableUserScroll()}e()}));if(!t.isOverflowAnchorSupported()){o.Logger.warn("Disabling user scroll in updating placeholders");t.$nextTick((function(){var e=t.$refs.body.scrollHeight-i;t.disableUserScroll();t.forceScrollToPosition(t.$refs.body.scrollTop+e)}))}}))})).then((function(){t.pagesLoaded+=1;o.Logger.warn("History page loaded. Total loaded - ",t.pagesLoaded);return t.onAfterHistoryRequest()}))["catch"]((function(e){o.Logger.warn("Request history error",e)}))},onAfterHistoryRequest:function e(){var t=this;o.Logger.warn("onAfterHistoryRequest");if(this.stopHistoryLoading){o.Logger.warn("stopHistoryLoading, deleting all delayed requests");this.historyPagesRequested=0}if(this.historyPagesRequested>0){o.Logger.warn("We have delayed requests -",this.historyPagesRequested);this.historyPagesRequested--;return this.requestHistory()}else if(this.$refs.body.scrollTop<=this.scrollingUpThreshold&&this.remainingHistoryPages>0){o.Logger.warn("currentScroll <= scrollingUpThreshold, requesting next page and scrolling");return this.drawPlaceholders(p.history).then((function(e){t.scrollToMessage({messageId:e,force:true,stickToTop:false});return t.requestHistory()}))}else{o.Logger.warn("No more delayed requests, clearing placeholders");this.$store.dispatch("messages/clearPlaceholders",{chatId:this.chatId});this.isRequestingHistory=false;return true}},prepareUnreadRequestParams:function e(){var t;return t={},babelHelpers.defineProperty(t,u.RestMethodHandler.imDialogRead,[u.RestMethod.imDialogRead,{dialog_id:this.dialogId,message_id:this.lastUnreadMessageId}]),babelHelpers.defineProperty(t,u.RestMethodHandler.imChatGet,[u.RestMethod.imChatGet,{dialog_id:this.dialogId}]),babelHelpers.defineProperty(t,u.RestMethodHandler.imDialogMessagesGetUnread,[u.RestMethod.imDialogMessagesGet,{chat_id:this.chatId,first_id:this.lastUnreadMessageId,limit:this.unreadMessageLimit,convert_text:"Y"}]),t},requestUnread:function e(){var t=this;if(!this.lastUnreadMessageId){this.lastUnreadMessageId=this.$store.getters["messages/getLastId"](this.chatId)}if(!this.lastUnreadMessageId){return false}f.EventEmitter.emitAsync(u.EventType.dialog.readMessage,{id:this.lastUnreadMessageId,skipTimer:true,skipAjax:true}).then((function(){t.$Bitrix.RestClient.get().callBatch(t.prepareUnreadRequestParams(),(function(e){return t.onUnreadRequest(e)}))}))},onUnreadRequest:function e(t){var n=this;if(!t){o.Logger.warn("Unread request: callBatch error");return false}var r=t[u.RestMethodHandler.imChatGet];if(r.error()){o.Logger.warn("Unread request: imChatGet error",r.error());return false}this.$Bitrix.Data.get("controller").executeRestAnswer(u.RestMethodHandler.imChatGet,r);var i=t[u.RestMethodHandler.imDialogMessagesGetUnread];if(i.error()){o.Logger.warn("Unread request: imDialogMessagesGetUnread error",i.error());return false}var s=i.data().messages;if(s.length>0){this.lastUnreadMessageId=s[s.length-1].id}this.$Bitrix.Data.get("controller").executeRestAnswer(u.RestMethodHandler.imDialogMessagesGetUnread,i);this.$store.dispatch("messages/updatePlaceholders",{chatId:this.chatId,data:s,firstMessage:this.pagesLoaded*this.placeholdersComposition.length,amount:this.placeholdersComposition.length}).then((function(){n.pagesLoaded+=1;o.Logger.warn("Unread page loaded. Total loaded - ",n.pagesLoaded);return n.onAfterUnreadRequest()}))["catch"]((function(e){o.Logger.warn("Unread history error",e)}))},onAfterUnreadRequest:function e(){if(this.unreadPagesRequested>0){o.Logger.warn("We have delayed requests -",this.unreadPagesRequested);this.unreadPagesRequested--;return this.requestUnread()}else{o.Logger.warn("No more delayed requests, clearing placeholders");this.$store.dispatch("messages/clearPlaceholders",{chatId:this.chatId});this.isRequestingUnread=false;if(this.externalUnreadRequestResolve){this.externalUnreadRequestResolve()}return true}},scrollToLastPage:function e(){var t=this;o.Logger.warn("Load last page");this.drawPlaceholders(p.unread).then((function(){t.isScrolling=true;t.animatedScrollToPosition({callback:function e(){return t.onScrollToLastPage()}})}))},onScrollToLastPage:function e(){var t=this;this.showScrollButton=false;this.$store.dispatch("dialogues/update",{dialogId:this.dialogId,fields:{counter:0}});this.$store.dispatch("messages/clear",{chatId:this.chatId,keepPlaceholders:true});this.$Bitrix.RestClient.get().callBatch(this.prepareLastPageRequestParams(),(function(e){return t.onLastPageRequest(e)}))},prepareLastPageRequestParams:function e(){var t;return t={},babelHelpers.defineProperty(t,u.RestMethodHandler.imDialogRead,[u.RestMethod.imDialogRead,{dialog_id:this.dialogId}]),babelHelpers.defineProperty(t,u.RestMethodHandler.imChatGet,[u.RestMethod.imChatGet,{dialog_id:this.dialogId}]),babelHelpers.defineProperty(t,u.RestMethodHandler.imDialogMessagesGet,[u.RestMethod.imDialogMessagesGet,{chat_id:this.chatId,limit:this.unreadMessageLimit,convert_text:"Y"}]),t},onLastPageRequest:function e(t){var n=this;if(!t){o.Logger.warn("Last page request: callBatch error");return false}var r=t[u.RestMethodHandler.imChatGet];if(r.error()){o.Logger.warn("Last page request: imChatGet error",r.error());return false}this.$Bitrix.Data.get("controller").executeRestAnswer(u.RestMethodHandler.imChatGet,r);var i=t[u.RestMethodHandler.imDialogMessagesGet];if(i.error()){o.Logger.warn("Last page request: imDialogMessagesGet error",i.error());return false}var s=i.data().messages.reverse();this.$Bitrix.Data.get("controller").executeRestAnswer(u.RestMethodHandler.imDialogMessagesGet,i);this.$store.dispatch("messages/updatePlaceholders",{chatId:this.chatId,data:s,firstMessage:this.pagesLoaded*this.placeholdersComposition.length,amount:this.placeholdersComposition.length}).then((function(){n.lastHistoryMessageId=n.collection[0].id;n.pagesLoaded+=1;return n.$store.dispatch("messages/clearPlaceholders",{chatId:n.chatId})})).then((function(){n.scrollToBottom({force:true});n.stopHistoryLoading=false;n.isScrolling=false}))["catch"]((function(e){o.Logger.warn("Unread history error",e)}))},readVisibleMessages:function e(){var t=this;if(!this.windowFocused||!this.messagesSet){o.Logger.warn("reading is disabled!");return false}this.readMessageQueue=this.readMessageQueue.filter((function(e){if(t.readMessageTarget[e]){if(t.observers[h.read]){t.observers[h.read].unobserve(t.readMessageTarget[e])}delete t.readMessageTarget[e]}t.requestReadVisibleMessages(e);return false}))},requestReadVisibleMessages:function e(t){f.EventEmitter.emit(u.EventType.dialog.readMessage,{id:t})},getMessageIdsForPagination:function e(){if(this.unreadInCollection.length>0){this.lastUnreadMessageId=this.unreadInCollection[this.unreadInCollection.length-1].id}},getFirstUnreadMessage:function e(){var t=null;for(var n=this.collection.length-1;n>=0;n--){if(!this.collection[n].unread){break}t=this.collection[n].id}return t},manageScrollButton:function e(t){var n=this;var r=t.target.scrollHeight-t.target.clientHeight;this.scrollChangedByUser=this.currentScroll+this.scrollButtonDiff<r;clearTimeout(this.scrollButtonShowTimeout);this.scrollButtonShowTimeout=setTimeout((function(){if(n.scrollChangedByUser){if(!n.showScrollButton){n.showScrollButton=true}}else{if(n.showScrollButton&&n.remainingUnreadPages===0){n.showScrollButton=false}}}),200);if(t.target.scrollTop===t.target.scrollHeight-t.target.offsetHeight){clearTimeout(this.scrollButtonShowTimeout);if(this.showScrollButton&&this.remainingUnreadPages===0){this.showScrollButton=false}}},getDateObject:function e(){var t=this;if(this.dateFormatFunction){return this.dateFormatFunction}this.dateFormatFunction=Object.create(BX.Main.Date);this.dateFormatFunction._getMessage=function(e){return t.$Bitrix.Loc.getMessage(e)};return this.dateFormatFunction},getDateGroup:function e(t){var n=t.toJSON().slice(0,10);if(this.cachedDateGroups[n]){return this.cachedDateGroups[n]}var r=this.getDateFormat(m.groupTitle);this.cachedDateGroups[n]={id:n,title:this.getDateObject().format(r,t)};return this.cachedDateGroups[n]},getDateFormat:function e(t){return i.Utils.date.getFormatType(BX.Messenger.Const.DateFormat[t],this.$Bitrix.Loc.getMessages())},getDateGroupBlock:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";return{templateId:"group"+t,templateType:u.DialogTemplateType.group,text:n}},getDelimiterBlock:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return{templateId:"delimiter"+t,templateType:u.DialogTemplateType.delimiter}},getObserver:function e(t){var n=this;if(typeof window.IntersectionObserver==="undefined"||t.type===h.none){return{observe:function e(){},unobserve:function e(){}}}var r,i;r=function e(t){t.forEach((function(e){var t=false;if(e.isIntersecting){if(e.intersectionRatio>=.99){t=true}else if(e.intersectionRatio>0&&e.rootBounds.height<e.boundingClientRect.height+20&&e.intersectionRect.height>e.rootBounds.height/2){t=true}}if(t){n.readMessageQueue.push(e.target.dataset.messageId);n.readMessageTarget[e.target.dataset.messageId]=e.target}else{n.readMessageQueue=n.readMessageQueue.filter((function(t){return t!==e.target.dataset.messageId}));delete n.readMessageTarget[e.target.dataset.messageId]}if(n.enableReadMessages){n.readVisibleMessagesDelayed()}}))};i={root:this.$refs.body,threshold:new Array(101).fill(0).map((function(e,t){return t*.01}))};return new IntersectionObserver(r,i)},getElementClass:function e(t){var n=u.DialogReferenceClassName.listItem+"-"+t;return["bx-im-dialog-list-item",u.DialogReferenceClassName.listItem,n]},getElementById:function e(t){var n=this.$refs.body;var r=u.DialogReferenceClassName.listItem+"-"+t;return n.getElementsByClassName(r)[0]},getPlaceholderClass:function e(t){var n=u.DialogReferenceClassName.listItem+"-"+t;return["im-skeleton-item","im-skeleton-item-1","im-skeleton-item--sm",n]}},directives:{"bx-im-directive-dialog-observer":{inserted:function e(t,n,r){if(n.value===h.none){return false}if(!r.context.observers[n.value]){r.context.observers[n.value]=r.context.getObserver({type:n.value})}r.context.observers[n.value].observe(t);return true},unbind:function e(t,n,r){if(n.value===h.none){return true}if(r.context.observers[n.value]){r.context.observers[n.value].unobserve(t)}return true}}},template:'\n\t<div class="bx-im-dialog" @click="onDialogClick" @touchmove="onDialogMove" ref="container">\n\t\t<div :class="bodyClasses" @scroll.passive="onScroll" ref="body">\n\t\t\t\x3c!-- Main elements loop --\x3e\n\t\t\t<template v-for="(element, index) in formattedCollection">\n\t\t\t\t\x3c!-- Message --\x3e\n\t\t\t\t<template v-if="element.templateType === TemplateType.message">\n\t\t\t\t\t<div\n\t\t\t\t\t\t:class="getElementClass(element.id)"\n\t\t\t\t\t\t:data-message-id="element.id"\n\t\t\t\t\t\t:data-template-id="element.templateId"\n\t\t\t\t\t\t:data-type="element.templateType" \n\t\t\t\t\t\t:key="element.templateId"\n\t\t\t\t\t\tv-bx-im-directive-dialog-observer="element.unread? ObserverType.read: ObserverType.none"\n\t\t\t\t\t>\n\t\t\t\t\t\t<component :is="element.params.COMPONENT_ID"\n\t\t\t\t\t\t\t:userId="userId" \n\t\t\t\t\t\t\t:dialogId="dialogId"\n\t\t\t\t\t\t\t:chatId="chatId"\n\t\t\t\t\t\t\t:message="element"\n\t\t\t\t\t\t\t:enableReactions="enableReactions"\n\t\t\t\t\t\t\t:enableDateActions="enableDateActions"\n\t\t\t\t\t\t\t:enableCreateContent="showMessageMenu"\n\t\t\t\t\t\t\t:enableGestureQuote="enableGestureQuote"\n\t\t\t\t\t\t\t:enableGestureQuoteFromRight="enableGestureQuoteFromRight"\n\t\t\t\t\t\t\t:enableGestureMenu="enableGestureMenu"\n\t\t\t\t\t\t\t:showName="showMessageUserName"\n\t\t\t\t\t\t\t:showAvatar="showMessageAvatar"\n\t\t\t\t\t\t\t:showMenu="showMessageMenu"\n\t\t\t\t\t\t\t:capturedMoveEvent="capturedMoveEvent"\n\t\t\t\t\t\t\t:referenceContentClassName="DialogReferenceClassName.listItem"\n\t\t\t\t\t\t\t:referenceContentBodyClassName="DialogReferenceClassName.listItemBody"\n\t\t\t\t\t\t\t:referenceContentNameClassName="DialogReferenceClassName.listItemName"\n\t\t\t\t\t\t\t@dragMessage="onDragMessage"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t\x3c!-- Date groups --\x3e\n\t\t\t\t<template v-else-if="element.templateType === TemplateType.group">\n\t\t\t\t\t<div class="bx-im-dialog-group" :data-template-id="element.templateId" :data-type="element.templateType" :key="element.templateId">\n\t\t\t\t\t\t<div class="bx-im-dialog-group-date">{{ element.text }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t\x3c!-- Delimiters --\x3e\n\t\t\t\t<template v-else-if="element.templateType === TemplateType.delimiter">\n\t\t\t\t\t<div class="bx-im-dialog-delimiter" :data-template-id="element.templateId" :data-type="element.templateType" :key="element.templateId"></div>\n\t\t\t\t</template>\n\t\t\t\t\x3c!-- Placeholders --\x3e\n\t\t\t\t<template v-else-if="element.templateType === TemplateType.placeholder">\n\t\t\t\t\t<component :is="\'Placeholder\'+element.placeholderType" :element="element"/>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t\t\x3c!-- Writing and readed statuses --\x3e\n\t\t\t<transition name="bx-im-dialog-status">\n\t\t\t\t<template v-if="writingStatusText">\n\t\t\t\t\t<div class="bx-im-dialog-status">\n\t\t\t\t\t\t<span class="bx-im-dialog-status-writing"></span>\n\t\t\t\t\t\t{{ writingStatusText }}\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else-if="statusReaded">\n\t\t\t\t\t<div class="bx-im-dialog-status" @click="onClickOnReadList">\n\t\t\t\t\t\t{{ statusReaded }}\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</transition>\n\t\t\t<div v-if="showStatusPlaceholder" class="bx-im-dialog-status-placeholder"></div>\n\t\t</div>\n\t\t\x3c!-- Scroll button --\x3e\n\t\t<transition name="bx-im-dialog-scroll-button">\n\t\t\t<div v-show="showScrollButton || (unreadCounter > 0 && !isLastIdInCollection)" class="bx-im-dialog-scroll-button-box" @click="onScrollButtonClick">\n\t\t\t\t<div class="bx-im-dialog-scroll-button">\n\t\t\t\t\t<div v-show="unreadCounter" class="bx-im-dialog-scroll-button-counter">\n\t\t\t\t\t\t<div class="bx-im-dialog-scroll-button-counter-digit">{{ formattedUnreadCounter }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bx-im-dialog-scroll-button-arrow"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\n\t</div>\n'};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={computed:I({},d.WidgetVuex.mapState({application:function e(t){return t.application}})),template:'\n\t\t<div class="bx-mobilechat-body">\n\t\t\t<div class="bx-mobilechat-warning-window">\n\t\t\t\t<div class="bx-mobilechat-warning-icon"></div>\n\t\t\t\t<template v-if="application.error.description">\n\t\t\t\t\t<div class="bx-mobilechat-help-title bx-mobilechat-help-title-sm bx-mobilechat-warning-msg" v-html="application.error.description"></div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class="bx-mobilechat-help-title bx-mobilechat-help-title-md bx-mobilechat-warning-msg">{{$Bitrix.Loc.getMessage(\'IM_DIALOG_ERROR_TITLE\')}}</div>\n\t\t\t\t\t<div class="bx-mobilechat-help-title bx-mobilechat-help-title-sm bx-mobilechat-warning-msg">{{$Bitrix.Loc.getMessage(\'IM_DIALOG_ERROR_DESC\')}}</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t'};var C={data:function e(){return{placeholdersComposition:[],placeholderTypes:[0,1],placeholderModes:["self","opponent"],placeholdersCount:20}},created:function e(){for(var t=0;t<this.placeholdersCount;t++){var n=Math.floor(Math.random()*this.placeholderTypes.length);var r=Math.floor(Math.random()*this.placeholderModes.length);this.placeholdersComposition.push({index:t,type:n,mode:this.placeholderModes[r],classes:this.getItemClasses(n,r)})}},methods:{getItemClasses:function e(t,n){var r=["im-skeleton-item"];if(this.placeholderModes[n]==="self"){r.push("im-skeleton-item-self")}else{r.push("im-skeleton-item-opponent")}if(t===0){r.push("im-skeleton-item--sm")}else{r.push("im-skeleton-item--md")}return r}},template:'\n\t\t<div class="bx-mobilechat-placeholder-wrap">\n\t\t\t<div class="bx-mobilechat-placeholder-wrap-visible">\n\t\t\t\t<template v-for="item in placeholdersComposition">\n\t\t\t\t\t<div :class="item.classes" :key="item.index">\n\t\t\t\t\t\t<div v-if="item.mode === \'opponent\'" class="im-skeleton-logo"></div>\n\t\t\t\t\t\t<div class="im-skeleton-content">\n\t\t\t\t\t\t\t<template v-if="item.type === 0">\n\t\t\t\t\t\t\t\t<div class="im-skeleton-line-row">\n\t\t\t\t\t\t\t\t\t<div style="max-width: 70%" class="im-skeleton-line"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="im-skeleton-line-row">\n\t\t\t\t\t\t\t\t\t<div style="max-width: 100%" class="im-skeleton-line"></div>\n\t\t\t\t\t\t\t\t\t<div style="max-width: 26px; margin-left: auto;" class="im-skeleton-line"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<div class="im-skeleton-line-row">\n\t\t\t\t\t\t\t\t\t<div style="max-width: 35%" class="im-skeleton-line"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="im-skeleton-line-row">\n\t\t\t\t\t\t\t\t\t<div style="max-width: 100%" class="im-skeleton-line"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="im-skeleton-line-row">\n\t\t\t\t\t\t\t\t\t<div style="max-width: 55%" class="im-skeleton-line"></div>\n\t\t\t\t\t\t\t\t\t<div style="max-width: 26px; margin-left: auto;" class="im-skeleton-line"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<div class="im-skeleton-like"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t'};var _={template:'\n\t\t<div class="bx-mobilechat-loading-window">\n\t\t\t<h3 class="bx-mobilechat-help-title bx-mobilechat-help-title-md bx-mobilechat-loading-msg">\n\t\t  \t\t{{ $Bitrix.Loc.getMessage(\'IM_DIALOG_EMPTY\') }}\n\t\t\t</h3>\n\t\t</div>\n\t'};var x={props:{quotePanelData:{type:Object,default:function e(){return{id:0,title:"",description:"",color:""}}},canClose:{default:true}},methods:{close:function e(t){f.EventEmitter.emit(u.EventType.dialog.quotePanelClose,t)}},computed:{formattedTittle:function e(){return this.quotePanelData.title?this.quotePanelData.title.substr(0,255):this.$Bitrix.Loc.getMessage("IM_QUOTE_PANEL_DEFAULT_TITLE")},formattedDescription:function e(){return this.quotePanelData.description?this.quotePanelData.description.substr(0,255):""}},template:'\n\t<transition enter-active-class="bx-im-quote-panel-animation-show" leave-active-class="bx-im-quote-panel-animation-close">\t\t\t\t\n\t\t<div v-if="quotePanelData.id > 0" class="bx-im-quote-panel">\n\t\t\t<div class="bx-im-quote-panel-wrap">\n\t\t\t\t<div class="bx-im-quote-panel-box" :style="{borderLeftColor: quotePanelData.color}">\n\t\t\t\t\t<div class="bx-im-quote-panel-box-title" :style="{color: quotePanelData.color}">{{formattedTittle}}</div>\n\t\t\t\t\t<div class="bx-im-quote-panel-box-desc">{{formattedDescription}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-if="canClose" class="bx-im-quote-panel-close" @click="close"></div>\n\t\t\t</div>\n\t\t</div>\n\t</transition>\n'};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l.WidgetBitrixVue.component("bx-im-component-dialog",{components:{MessageList:S,ErrorState:E,LoadingState:C,EmptyState:_,QuotePanel:x},props:{userId:{default:0},dialogId:{default:0},skipDataRequest:{default:false},showLoadingState:{default:true},showEmptyState:{default:true},enableGestureQuote:{default:true},enableGestureQuoteFromRight:{default:true},enableGestureMenu:{default:false},showMessageUserName:{default:true},showMessageAvatar:{default:true}},data:function e(){return{messagesSet:false,dialogState:u.DialogState.loading}},created:function e(){f.EventEmitter.subscribe(u.EventType.dialog.messagesSet,this.onMessagesSet);this.onDialogOpen()},beforeDestroy:function e(){f.EventEmitter.unsubscribe(u.EventType.dialog.messagesSet,this.onMessagesSet)},watch:{dialogId:function e(t,n){o.Logger.warn("Switching dialogId from ",n," to ",t);this.messagesSet=false;this.onDialogOpen()}},computed:O(O({EventType:function e(){return u.EventType},DialogState:function e(){return u.DialogState},dialogWrapClasses:function e(){return["bx-mobilechat-wrapper",{"bx-mobilechat-chat-start":this.isDialogShowingMessages}]},dialogBoxClasses:function e(){return["bx-mobilechat-box",{"bx-mobilechat-box-dark-background":this.isDarkBackground}]},dialogBodyClasses:function e(){return["bx-mobilechat-body",{"bx-mobilechat-body-with-message":this.dialogState===u.DialogState.show}]},quotePanelData:function e(){var t={id:0,title:"",description:"",color:""};if(!this.isDialogShowingMessages||!this.dialog.quoteId){return t}var n=this.$store.getters["messages/getMessage"](this.dialog.chatId,this.dialog.quoteId);if(!n){return t}var r=this.$store.getters["users/get"](n.authorId);var s=this.$store.getters["files/getList"](this.dialog.chatId);return{id:this.dialog.quoteId,title:n.params.NAME?c.Text.decode(n.params.NAME):r?r.name:"",color:r?r.color:"",description:i.Utils.text.purify(n.text,n.params,s,this.localize)}},isLoading:function e(){if(!this.showLoadingState){return false}return!this.isChatIdInModel||this.isChatIdInModel&&!this.isMessagesModelInited&&!this.messagesSet},isEmpty:function e(){return this.showEmptyState&&this.messagesSet&&this.messageCollection.length===0},isChatIdInModel:function e(){var t=this.$store.state.dialogues.collection;return t[this.dialogId]&&t[this.dialogId].chatId>0},isMessagesModelInited:function e(){var t=this.$store.state.messages.collection;return t[this.chatId]},isDialogShowingMessages:function e(){var t=this.messageCollection&&this.messageCollection.length>0;if(t){this.dialogState=u.DialogState.show}else if(this.dialog&&this.dialog.init){this.dialogState=u.DialogState.empty}else{this.dialogState=u.DialogState.loading}return t},dialog:function e(){var e=this.$store.getters["dialogues/get"](this.application.dialog.dialogId);return e?e:this.$store.getters["dialogues/getBlank"]()},chatId:function e(){if(!this.application){return 0}return this.application.dialog.chatId},messageCollection:function e(){return this.$store.getters["messages/get"](this.application.dialog.chatId)},isDarkBackground:function e(){return this.application.options.darkBackground}},d.WidgetVuex.mapState({application:function e(t){return t.application}})),{},{localize:function e(){return l.WidgetBitrixVue.getFilteredPhrases(["IM_DIALOG_","IM_UTILS_","IM_MESSENGER_DIALOG_","IM_QUOTE_"],this)}}),methods:{prepareRequestDataQuery:function e(){var t;var n=(t={},babelHelpers.defineProperty(t,u.RestMethodHandler.mobileBrowserConstGet,[u.RestMethod.mobileBrowserConstGet,{}]),babelHelpers.defineProperty(t,u.RestMethodHandler.imChatGet,[u.RestMethod.imChatGet,{dialog_id:this.dialogId}]),babelHelpers.defineProperty(t,u.RestMethodHandler.imDialogMessagesGetInit,[u.RestMethod.imDialogMessagesGet,{dialog_id:this.dialogId,limit:this.getController().application.getRequestMessageLimit(),convert_text:"Y"}]),t);if(i.Utils.dialog.isChatId(this.dialogId)){n[u.RestMethodHandler.imUserGet]=[u.RestMethod.imUserGet,{}]}else{n[u.RestMethodHandler.imUserListGet]=[u.RestMethod.imUserListGet,{id:[this.userId,this.dialogId]}]}return n},requestData:function e(){var t=this;o.Logger.log("requesting dialog data");var n=this.prepareRequestDataQuery();this.$Bitrix.RestClient.get().callBatch(n,(function(e){if(!e){return false}var n=e[u.RestMethodHandler.mobileBrowserConstGet];if(!n.error()){t.executeRestAnswer(u.RestMethodHandler.mobileBrowserConstGet,n)}var r=e[u.RestMethodHandler.imUserGet];if(r&&!r.error()){t.executeRestAnswer(u.RestMethodHandler.imUserGet,r)}var i=e[u.RestMethodHandler.imUserListGet];if(i&&!i.error()){t.executeRestAnswer(u.RestMethodHandler.imUserListGet,i)}var s=e[u.RestMethodHandler.imChatGet];if(!s.error()){t.executeRestAnswer(u.RestMethodHandler.imChatGet,s)}var o=e[u.RestMethodHandler.imDialogMessagesGetInit];if(!o.error()){t.$store.dispatch("application/set",{dialog:{enableReadMessages:true}}).then((function(){t.executeRestAnswer(u.RestMethodHandler.imDialogMessagesGetInit,o)}))}}),false,false,i.Utils.getLogTrackingParams({name:"im.dialog",dialog:this.getController().application.getDialogData()}));return new Promise((function(e,t){return e()}))},onDialogOpen:function e(){if(this.isChatIdInModel){var t=this.$store.state.dialogues.collection;this.$store.commit("application/set",{dialog:{chatId:t[this.dialogId].chatId,dialogId:this.dialogId}})}if(!this.skipDataRequest){this.requestData()}},onMessagesSet:function e(t){var n=t.data;if(n.chatId!==this.chatId){return false}if(this.messagesSet===true){return false}this.messagesSet=true},getController:function e(){return this.$Bitrix.Data.get("controller")},executeRestAnswer:function e(t,n,r){this.getController().executeRestAnswer(t,n,r)}},template:'\n\t\t<div :class="dialogWrapClasses">\n\t\t\t<div :class="dialogBoxClasses" ref="chatBox">\n\t\t\t\t\x3c!-- Error state --\x3e\n\t\t\t\t<ErrorState v-if="application.error.active" />\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div :class="dialogBodyClasses" key="with-message">\n\t\t\t\t\t\t\x3c!-- Loading state --\x3e\n\t\t\t\t\t  \t<LoadingState v-if="isLoading" />\n\t\t\t\t\t\t\x3c!-- Empty state --\x3e\n\t\t\t\t\t  \t<EmptyState v-else-if="isEmpty" />\n\t\t\t\t\t\t\x3c!-- Message list state --\x3e\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<div class="bx-mobilechat-dialog">\n\t\t\t\t\t\t\t\t<MessageList\n\t\t\t\t\t\t\t\t\t:userId="userId" \n\t\t\t\t\t\t\t\t\t:dialogId="dialogId"\n\t\t\t\t\t\t\t\t\t:messageLimit="application.dialog.messageLimit"\n\t\t\t\t\t\t\t\t\t:enableReadMessages="application.dialog.enableReadMessages"\n\t\t\t\t\t\t\t\t\t:enableReactions="true"\n\t\t\t\t\t\t\t\t\t:enableDateActions="false"\n\t\t\t\t\t\t\t\t\t:enableCreateContent="false"\n\t\t\t\t\t\t\t\t\t:enableGestureQuote="enableGestureQuote"\n\t\t\t\t\t\t\t\t\t:enableGestureQuoteFromRight="enableGestureQuoteFromRight"\n\t\t\t\t\t\t\t\t\t:enableGestureMenu="enableGestureMenu"\n\t\t\t\t\t\t\t\t\t:showMessageUserName="showMessageUserName"\n\t\t\t\t\t\t\t\t\t:showMessageAvatar="showMessageAvatar"\n\t\t\t\t\t\t\t\t\t:showMessageMenu="false"\n\t\t\t\t\t\t\t\t />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\x3c!-- Quote panel --\x3e\n\t\t\t\t\t\t\t<QuotePanel :quotePanelData="quotePanelData" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t'})})(this.BX.Messenger=this.BX.Messenger||{},BX,BX,window,BX.Messenger.Lib,BX.Messenger.Lib,BX.Messenger.Lib,BX,BX,BX.Messenger.Const,BX,BX.Event,BX);this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e){"use strict";
/**
	 * Bitrix Messenger
	 * LocalStorage manager
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var t=function(){function e(){babelHelpers.classCallCheck(this,e);this.enabled=null;this.expireList=null;this.expireInterval=null}babelHelpers.createClass(e,[{key:"isEnabled",value:function e(){if(this.enabled!==null){return this.enabled}this.enabled=false;if(typeof window.localStorage!=="undefined"){try{window.localStorage.setItem("__bx_test_ls_feature__","ok");if(window.localStorage.getItem("__bx_test_ls_feature__")==="ok"){window.localStorage.removeItem("__bx_test_ls_feature__");this.enabled=true}}catch(e){}}if(this.enabled&&!this.expireInterval){try{var t=window.localStorage.getItem("bx-messenger-localstorage-expire");if(t){this.expireList=JSON.parse(t)}}catch(e){}clearInterval(this.expireInterval);this.expireInterval=setInterval(this._checkExpireInterval.bind(this),6e4)}return this.enabled}},{key:"set",value:function e(t,n,r,i){var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;if(!this.isEnabled()){return false}var o=null;if(s){o=new Date((new Date).getTime()+s*1e3)}var a=JSON.stringify({value:i,expire:o});if(window.localStorage.getItem(this._getKey(t,n,r))!==a){window.localStorage.setItem(this._getKey(t,n,r),a)}if(s){if(!this.expireList){this.expireList={}}this.expireList[this._getKey(t,n,r)]=o;window.localStorage.setItem("bx-messenger-localstorage-expire",JSON.stringify(this.expireList))}return true}},{key:"get",value:function e(t,n,r,i){if(!this.isEnabled()){return typeof i!=="undefined"?i:null}var s=window.localStorage.getItem(this._getKey(t,n,r));if(s===null){return typeof i!=="undefined"?i:null}try{s=JSON.parse(s);if(s&&typeof s.value!=="undefined"){if(!s.expire||new Date(s.expire)>new Date){s=s.value}else{window.localStorage.removeItem(this._getKey(t,n,r));if(this.expireList){delete this.expireList[this._getKey(t,n,r)]}return typeof i!=="undefined"?i:null}}else{return typeof i!=="undefined"?i:null}}catch(e){return typeof i!=="undefined"?i:null}return s}},{key:"remove",value:function e(t,n,r){if(!this.isEnabled()){return false}if(this.expireList){delete this.expireList[this._getKey(t,n,r)]}return window.localStorage.removeItem(this._getKey(t,n,r))}},{key:"_getKey",value:function e(t,n,r){return"bx-messenger-"+t+"-"+n+"-"+r}},{key:"_checkExpireInterval",value:function e(){if(!this.expireList)return true;var t=new Date;var n=0;for(var r in this.expireList){if(!this.expireList.hasOwnProperty(r)){continue}if(new Date(this.expireList[r])<=t){window.localStorage.removeItem(r);delete this.expireList[r]}else{n++}}if(n){window.localStorage.setItem("bx-messenger-localstorage-expire",JSON.stringify(this.expireList))}else{this.expireList=null;window.localStorage.removeItem("bx-messenger-localstorage-expire")}return true}}]);return e}();var n=new t;e.LocalStorage=n})(this.BX.Messenger.Lib=this.BX.Messenger.Lib||{});(function(e,t,n,r,i,s,o,a,l){"use strict";function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.WidgetBitrixVue.component("bx-im-component-textarea",{props:{siteId:{default:"default"},userId:{default:0},dialogId:{default:0},enableCommand:{default:true},enableMention:{default:true},desktopMode:{default:false},enableEdit:{default:false},enableFile:{default:false},sendByEnter:{default:true},autoFocus:{default:null},writesEventLetter:{default:0},styles:{type:Object,default:function e(){return{}}}},data:function e(){return{placeholderMessage:"",currentMessage:"",previousMessage:"",commandListen:false,mentionListen:false,stylesDefault:Object.freeze({button:{backgroundColor:null,iconColor:null}})}},created:function e(){a.EventEmitter.subscribe(l.EventType.textarea.insertText,this.onInsertText);a.EventEmitter.subscribe(l.EventType.textarea.setFocus,this.onFocusSet);a.EventEmitter.subscribe(l.EventType.textarea.setBlur,this.onFocusClear);this.localStorage=r.LocalStorage;this.textareaHistory=this.localStorage.get(this.siteId,this.userId,"textarea-history",{});this.currentMessage=this.textareaHistory[this.dialogId]||"";this.placeholderMessage=this.currentMessage},beforeDestroy:function e(){a.EventEmitter.unsubscribe(l.EventType.textarea.insertText,this.onInsertText);a.EventEmitter.unsubscribe(l.EventType.textarea.setFocus,this.onFocusSet);a.EventEmitter.unsubscribe(l.EventType.textarea.setBlur,this.onFocusClear);clearTimeout(this.messageStoreTimeout);this.localStorage.set(this.siteId,this.userId,"textarea-history",this.textareaHistory);this.localStorage=null},computed:c({textareaClassName:function e(){return["bx-im-textarea",{"bx-im-textarea-dark-background":this.isDarkBackground,"bx-im-textarea-mobile":this.isMobile}]},buttonStyle:function e(){var t=Object.assign({},this.stylesDefault,this.styles);var n=false;if(t.button.iconColor){n=i.Utils.isDarkColor(t.button.iconColor)}else{n=!i.Utils.isDarkColor(t.button.backgroundColor)}t.button.className=n?"bx-im-textarea-send-button":"bx-im-textarea-send-button bx-im-textarea-send-button-bright-arrow";t.button.style=t.button.backgroundColor?"background-color: "+t.button.backgroundColor+";":"";return t},isDarkBackground:function e(){return this.application.options.darkBackground},isMobile:function e(){return this.application.device.type===l.DeviceType.mobile},localize:function e(){return n.WidgetBitrixVue.getFilteredPhrases("BX_MESSENGER_TEXTAREA_",this)},isIE11:function e(){return s.Browser.isIE11()}},o.WidgetVuex.mapState({application:function e(t){return t.application}})),directives:{"bx-im-focus":{inserted:function e(t,n){if(n.value===true||n.value===null&&!this.isMobile){t.focus()}}}},methods:{insertText:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"current";var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"after";var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var o=this.$refs.textarea;var a=o.selectionStart;var l=o.selectionEnd;if(r=="start"){if(n){t=t+"\n"}o.value=t+o.value;if(s){if(i=="after"){o.selectionStart=t.length;o.selectionEnd=o.selectionStart}else if(i=="before"){o.selectionStart=0;o.selectionEnd=o.selectionStart}}}else if(r=="current"){if(n){if(o.value.substring(0,a).trim().length>0){t="\n"+t}t=t+"\n"}else{if(o.value&&!o.value.endsWith(" ")){t=" "+t}}o.value=o.value.substring(0,a)+t+o.value.substring(l,o.value.length);if(s){if(i=="after"){o.selectionStart=a+t.length;o.selectionEnd=o.selectionStart}else if(i=="before"){o.selectionStart=a;o.selectionEnd=o.selectionStart}}}else if(r=="end"){if(n){if(o.value.substring(0,a).trim().length>0){t="\n"+t}t=t+"\n"}else{if(o.value&&!o.value.endsWith(" ")){t=" "+t}}o.value=o.value+t;if(s){if(i=="after"){o.selectionStart=o.value.length;o.selectionEnd=o.selectionStart}else if(i=="before"){o.selectionStart=o.value.length-t.length;o.selectionEnd=o.selectionStart}}}if(s){if(i=="start"){o.selectionStart=0;o.selectionEnd=0}else if(i=="end"){o.selectionStart=o.value.length;o.selectionEnd=o.selectionStart}o.focus()}this.textChangeEvent()},sendMessage:function e(t){t.preventDefault();a.EventEmitter.emit(l.EventType.textarea.sendMessage,{text:this.currentMessage.trim()});var n=this.$refs.textarea;if(n){n.value=""}if(this.autoFocus===null||this.autoFocus){n.focus()}this.textChangeEvent()},textChangeEvent:function e(){var t=this;var n=this.$refs.textarea;if(!n){return}var r=n.value.trim();if(this.currentMessage===r){return}if(this.writesEventLetter<=r.length){a.EventEmitter.emit(l.EventType.textarea.startWriting,{text:r})}this.previousMessage=this.currentMessage;this.previousSelectionStart=n.selectionStart;this.previousSelectionEnd=this.previousSelectionStart;this.currentMessage=r;if(r.toString().length>0){this.textareaHistory[this.dialogId]=r}else{delete this.textareaHistory[this.dialogId]}clearTimeout(this.messageStoreTimeout);this.messageStoreTimeout=setTimeout((function(){t.localStorage.set(t.siteId,t.userId,"textarea-history",t.textareaHistory,t.userId?0:10)}),500)},onKeyDown:function e(t){this.$emit("keydown",t);var n=t.target;var r=n.value.trim();var s=i.Utils.platform.isMac();var o=i.Utils.platform.isBitrixDesktop()||!i.Utils.browser.isChrome();if(this.commandListen);else if(this.mentionListen);else if(!(t.altKey&&t.ctrlKey)){if(this.enableMention&&t.shiftKey&&(t.keyCode==61||t.keyCode==50||t.keyCode==187||t.keyCode==187)||t.keyCode==107);else if(this.enableCommand&&(t.keyCode==191||t.keyCode==111||t.keyCode==220));}if(t.keyCode==27){if(n.value!=""&&n===document.activeElement){t.preventDefault();t.stopPropagation()}if(t.shiftKey){n.value=""}}else if(t.metaKey||t.ctrlKey){if(o&&t.key==="t"||!o&&t.key==="e"){t.preventDefault()}else if(["b","s","i","u"].includes(t.key)){var u=n.selectionStart;var c=n.selectionEnd;var f="["+t.key.toLowerCase()+"]";var d="[/"+t.key.toLowerCase()+"]";var h=n.value.substring(u,c);if(h.startsWith(f)&&h.endsWith(d)){h=h.substring(f.length,h.indexOf(d))}else{h=f+h+d}n.value=n.value.substring(0,u)+h+n.value.substring(c,n.value.length);n.selectionStart=u;n.selectionEnd=u+h.length;t.preventDefault()}}if(t.keyCode==9){this.insertText("\t");t.preventDefault()}else if(this.enableEdit&&t.keyCode==38&&r.length<=0){a.EventEmitter.emit(l.EventType.textarea.edit,{})}else if(t.keyCode==13){if(this.isMobile);else if(this.sendByEnter==true){if(t.ctrlKey||t.altKey||t.shiftKey){if(!t.shiftKey){this.insertText("\n")}}else if(r.length<=0){t.preventDefault()}else{this.sendMessage(t)}}else{if(t.ctrlKey==true){this.sendMessage(t)}else if(s&&(t.metaKey==true||t.altKey==true)){this.sendMessage(t)}}}else if((t.ctrlKey||t.metaKey)&&t.key=="z"){if(this.previousMessage){n.value=this.previousMessage;n.selectionStart=this.previousSelectionStart;n.selectionEnd=this.previousSelectionEnd;this.previousMessage="";t.preventDefault()}}},onKeyUp:function e(t){a.EventEmitter.emit(l.EventType.textarea.keyUp,{event:t,text:this.currentMessage});this.textChangeEvent()},onPaste:function e(t){this.$nextTick(this.textChangeEvent)},onInput:function e(t){this.textChangeEvent()},onFocus:function e(t){a.EventEmitter.emit(l.EventType.textarea.focus,t)},onBlur:function e(t){a.EventEmitter.emit(l.EventType.textarea.blur,t)},onAppButtonClick:function e(t,n){a.EventEmitter.emit(l.EventType.textarea.appButtonClick,{appId:t,event:n})},onInsertText:function e(t){var n=t.data,r=n===void 0?{}:n;if(!r.text){return false}this.insertText(r.text,r.breakline,r.position,r.cursor,r.focus);a.EventEmitter.emit(l.EventType.textarea.keyUp,{event:r,text:this.currentMessage});return true},onFocusSet:function e(){this.$refs.textarea.focus();return true},onFocusClear:function e(){this.$refs.textarea.blur();return true},onFileClick:function e(t){t.target.value=""},onFileSelect:function e(t){a.EventEmitter.emit(l.EventType.textarea.fileSelected,{fileChangeEvent:t,fileInput:t.target})},log:function e(t,n,r){console.warn(t);if(n==1){r.preventDefault()}},preventDefault:function e(t){t.preventDefault()}},template:'\n\t\t<div :class="textareaClassName">\n\t\t\t<div class="bx-im-textarea-box">\n\t\t\t\t<textarea ref="textarea" class="bx-im-textarea-input" @keydown="onKeyDown" @keyup="onKeyUp" @paste="onPaste" @input="onInput" @focus="onFocus" @blur="onBlur" v-bx-im-focus="autoFocus" :placeholder="localize.BX_MESSENGER_TEXTAREA_PLACEHOLDER">{{placeholderMessage}}</textarea>\n\t\t\t\t<transition enter-active-class="bx-im-textarea-send-button-show" leave-active-class="bx-im-textarea-send-button-hide">\n\t\t\t\t\t<button \n\t\t\t\t\t\tv-if="currentMessage" \n\t\t\t\t\t\t:class="buttonStyle.button.className" \n\t\t\t\t\t\t:style="buttonStyle.button.style" \n\t\t\t\t\t\t:title="localize.BX_MESSENGER_TEXTAREA_BUTTON_SEND"\n\t\t\t\t\t\t@click="sendMessage" \n\t\t\t\t\t\t@touchend="sendMessage" \n\t\t\t\t\t\t@mousedown="preventDefault" \n\t\t\t\t\t\t@touchstart="preventDefault" \n\t\t\t\t\t/>\n\t\t\t\t</transition>\n\t\t\t</div>\n\t\t\t<div class="bx-im-textarea-app-box">\n\t\t\t\t<label v-if="enableFile && !isIE11" class="bx-im-textarea-app-button bx-im-textarea-app-file" :title="localize.BX_MESSENGER_TEXTAREA_FILE">\n\t\t\t\t\t<input type="file" @click="onFileClick($event)" @change="onFileSelect($event)" multiple>\n\t\t\t\t</label>\n\t\t\t\t<button class="bx-im-textarea-app-button bx-im-textarea-app-smile" :title="localize.BX_MESSENGER_TEXTAREA_SMILE" @click="onAppButtonClick(\'smile\', $event)"></button>\n\t\t\t\t<button v-if="false" class="bx-im-textarea-app-button bx-im-textarea-app-gif" :title="localize.BX_MESSENGER_TEXTAREA_GIPHY" @click="onAppButtonClick(\'giphy\', $event)"></button>\n\t\t\t</div>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,BX,BX.Messenger.Lib,BX.Messenger.Lib,BX,BX,BX.Event,BX.Messenger.Const);(function(e,t,n,r,i,s){"use strict";
/**
	 * Bitrix OpenLines widget
	 * Widget constants
	 *
	 * @package bitrix
	 * @subpackage imopenlines
	 * @copyright 2001-2019 Bitrix
	 */function o(e){var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(e[n])}}return t}var a=Object.freeze({none:"none",like:"like",dislike:"dislike"});var l=Object.freeze({russian:"ru",ukraine:"ua",world:"en"});var u=Object.freeze({none:"none",like:"like",smile:"smile",consent:"consent",welcome:"welcome",offline:"offline",history:"history"});var c=Object.freeze({topLeft:1,topMiddle:2,topBottom:3,bottomLeft:6,bottomMiddle:5,bottomRight:4});var f=Object.freeze({1:"top-left",2:"top-center",3:"top-right",6:"bottom-left",5:"bottom-center",4:"bottom-right"});var d=Object.freeze({width:435,height:557});var h=Object.freeze({width:340,height:435});var p=Object.freeze({configLoaded:"configLoaded",widgetOpen:"widgetOpen",widgetClose:"widgetClose",sessionStart:"sessionStart",sessionOperatorChange:"sessionOperatorChange",sessionFinish:"sessionFinish",operatorMessage:"operatorMessage",userForm:"userForm",userMessage:"userMessage",userFile:"userFile",userVote:"userVote",every:"every"});var m=o(p);var g=Object.freeze({widgetUserRegister:"imopenlines.widget.user.register",widgetChatCreate:"imopenlines.widget.chat.create",widgetConfigGet:"imopenlines.widget.config.get",widgetDialogGet:"imopenlines.widget.dialog.get",widgetDialogList:"imopenlines.widget.dialog.list",widgetUserGet:"imopenlines.widget.user.get",widgetUserConsentApply:"imopenlines.widget.user.consent.apply",widgetVoteSend:"imopenlines.widget.vote.send",widgetActionSend:"imopenlines.widget.action.send",pullServerTime:"server.time",pullConfigGet:"pull.config.get"});var v=o(g);var y=Object.freeze({guest:"guest"});var b=Object.freeze({new:0,skip:5,answer:10,client:20,clientAfterOperator:25,operator:40,waitClient:50,close:60,spam:65,duplicate:69,silentlyClose:75});var w=Object.freeze({showForm:"IMOL.Widget:showForm",hideForm:"IMOL.Widget:hideForm",processMessagesToSendQueue:"IMOL.Widget:processMessagesToSendQueue",requestData:"IMOL.Widget:requestData",showConsent:"IMOL.Widget:showConsent",acceptConsent:"IMOL.Widget:acceptConsent",consentAccepted:"IMOL.Widget:consentAccepted",declineConsent:"IMOL.Widget:declineConsent",consentDeclined:"IMOL.Widget:consentDeclined",sendDialogVote:"IMOL.Widget:sendDialogVote",createSession:"IMOL.Widget:createSession",openSession:"IMOL.Widget:openSession"});function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=Object.freeze({none:"none",like:"like",welcome:"welcome",offline:"offline",history:"history"});var E=Object.freeze({none:"none",like:"like",dislike:"dislike"});t.WidgetBitrixVue.cloneComponent("bx-imopenlines-message","bx-im-view-message",{methods:{checkMessageParamsForForm:function e(){if(!this.message.params||!this.message.params.IMOL_FORM){return true}if(this.message.params.IMOL_FORM===I.like){if(parseInt(this.message.params.IMOL_VOTE_SID)===this.widget.dialog.sessionId&&this.widget.dialog.userVote===E.none){s.EventEmitter.emit(w.showForm,{type:I.like,delayed:true})}}}},created:function e(){this.checkMessageParamsForForm()},computed:k({dialogNumber:function e(){if(!this.message.params){return false}if(!this.message.params.IMOL_SID){return false}return this.$Bitrix.Loc.getMessage("IMOL_MESSAGE_DIALOG_ID").replace("#ID#",this.message.params.IMOL_SID)},showMessage:function e(){if(!this.message.params){return true}if(this.message.params.IMOL_FORM&&this.message.params.IMOL_FORM==="like"){return false}return true}},n.WidgetVuex.mapState({widget:function e(t){return t.widget}})),template:'\n\t\t<div v-if="showMessage" class="bx-imopenlines-message">\n\t\t\t<div v-if="dialogNumber" class="bx-imopenlines-message-dialog-number">{{dialogNumber}}</div>\n\t\t\t#PARENT_TEMPLATE#\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,BX,window,BX,BX.Event);(function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s="Openlines";var o="livechat";t.WidgetBitrixVue.component("bx-imopenlines-form",{props:{message:{type:Object,required:false}},data:function e(){return{formSuccess:false,formError:false}},mounted:function e(){if(this.filledFormFlag){this.formSuccess=true}},computed:i({chatId:function e(){return this.application.dialog.chatId},formId:function e(){if(this.message){return String(this.message.params.CRM_FORM_ID)}if(this.widget.common.crmFormsSettings.welcomeFormId){return this.widget.common.crmFormsSettings.welcomeFormId}return""},formSec:function e(){if(this.message){return this.message.params.CRM_FORM_SEC}if(this.widget.common.crmFormsSettings.welcomeFormSec){return this.widget.common.crmFormsSettings.welcomeFormSec}return""},showForm:function e(){return this.formId&&this.formSec&&!this.formSuccess&&!this.formError},filledFormFlag:function e(){if(this.message){return this.message.params.CRM_FORM_FILLED==="Y"}return false},messageCount:function e(){return this.dialog.messageCount}},n.WidgetVuex.mapState({widget:function e(t){return t.widget},application:function e(t){return t.application},dialog:function e(t){return t.dialogues.collection[t.application.dialog.dialogId]}})),watch:{filledFormFlag:function e(t){if(t===true&&!this.formSuccess){this.formSuccess=true}},chatId:function e(t){if(t!==0&&this.widgetInitPromiseResolve){this.widgetInitPromiseResolve()}}},methods:{getCrmBindings:function e(){var t=this;return new Promise((function(e,n){t.$Bitrix.RestClient.get().callMethod("imopenlines.widget.crm.bindings.get",{OPENLINES_CODE:t.buildOpenlinesCode()}).then(e)["catch"](n)}))},onBeforeFormSubmit:function e(t){if(this.signedEntities&&this.signedEntities!==""){t.sign=this.signedEntities}},onFormSubmit:function e(t){var n=this;this.eventData=t;this.eventData.promise=this.eventData.promise.then((function(){return new Promise((function(e){if(n.chatId===0){new Promise((function(e,t){n.widgetInitPromiseResolve=e})).then((function(){n.setFormProperties();return e()}));n.getApplication().requestData()}else{if(n.widget.common.crmFormsSettings.welcomeFormDelay){n.getCrmBindings().then((function(t){n.signedEntities=t.data();n.setFormProperties();return e()}))["catch"]((function(e){console.error("Error getting CRM bindings",e)}))}else{n.setFormProperties();return e()}}}))}))},setFormProperties:function e(){if(!this.eventData){return false}this.eventData.form.setProperty("eventNamePostfix",s);this.eventData.form.setProperty("openlinesCode",this.buildOpenlinesCode());if(this.message){var t;this.eventData.form.setProperty("messageId",this.message.id);this.eventData.form.setProperty("isWelcomeForm",(t=this.message.params.IS_WELCOME_FORM)!==null&&t!==void 0?t:"N")}else{this.eventData.form.setProperty("isWelcomeForm","Y")}},buildOpenlinesCode:function e(){var t=0;if(this.dialog.entityId!==""){t=this.dialog.entityId.split("|")[0]}var n=this.dialog.chatId||0;var r=this.application.common.userId||0;return"".concat(o,"|").concat(t,"|").concat(n,"|").concat(r)},onFormSendSuccess:function e(){if(!this.message){this.$store.commit("widget/common",{dialogStart:true})}this.$emit("formSendSuccess");this.formSuccess=true},onFormSendError:function e(t){this.formError=true;this.$emit("formSendError",{error:t})},getSuccessText:function e(){return this.widget.common.crmFormsSettings.successText},getErrorText:function e(){return this.widget.common.crmFormsSettings.errorText},getApplication:function e(){return this.$Bitrix.Application.get()}},template:'\n\t\t<div class="bx-im-message bx-im-message-without-menu bx-im-message-without-avatar bx-imopenlines-form-wrapper">\n\t\t\t<div v-show="showForm" class="bx-imopenlines-form-content">\n\t\t\t\t<bx-crm-form\n\t\t\t\t\t:id="formId"\n\t\t\t\t\t:sec="formSec"\n\t\t\t\t\t:address="widget.common.host"\n\t\t\t\t\t:lang="application.common.languageId"\n\t\t\t\t\t@form:submit:post:before="onBeforeFormSubmit"\n\t\t\t\t\t@form:submit="onFormSubmit"\n\t\t\t\t\t@form:send:success="onFormSendSuccess"\n\t\t\t\t\t@form:send:error="onFormSendError"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div v-show="formSuccess" class="bx-imopenlines-form-result-container bx-imopenlines-form-success">\n\t\t\t\t<div class="bx-imopenlines-form-result-icon"></div>\n\t\t\t\t<div class="bx-imopenlines-form-result-title">\n\t\t\t\t\t{{ getSuccessText() }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-show="formError" class="bx-imopenlines-form-result-container bx-imopenlines-form-error">\n\t\t\t\t<div class="bx-imopenlines-form-result-icon"></div>\n\t\t\t\t<div class="bx-imopenlines-form-result-title">\n\t\t\t\t\t{{ getErrorText() }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,BX);this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.Provider=this.BX.Messenger.Provider||{};(function(e,t,n,r,i){"use strict";
/**
	 * Bitrix Messenger
	 * Base Rest Answer Handler
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var s=function(){babelHelpers.createClass(e,null,[{key:"create",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new this(t)}}]);function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);if(babelHelpers["typeof"](t.controller)==="object"&&t.controller){this.controller=t.controller}if(babelHelpers["typeof"](t.store)==="object"&&t.store){this.store=t.store}}babelHelpers.createClass(e,[{key:"execute",value:function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};t="handle"+t.split(".").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("");if(n.error()){if(typeof this[t+"Error"]==="function"){return this[t+"Error"](n.error(),r)}}else{if(typeof this[t+"Success"]==="function"){return this[t+"Success"](n.data(),r)}}return typeof this[t]==="function"?this[t](n,r):null}}]);return e}();function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){babelHelpers.inherits(s,e);function s(){babelHelpers.classCallCheck(this,s);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(s).apply(this,arguments))}babelHelpers.createClass(s,[{key:"handleImUserListGetSuccess",value:function e(n){this.store.dispatch("users/set",t.WidgetVuexBuilderModel.convertToArray(n))}},{key:"handleImUserGetSuccess",value:function e(t){this.store.dispatch("users/set",[t])}},{key:"handleImChatGetSuccess",value:function e(t){this.store.dispatch("dialogues/set",t)}},{key:"handleImDialogMessagesGetSuccess",value:function e(t){this.store.dispatch("users/set",t.users);this.store.dispatch("files/setBefore",this.controller.application.prepareFilesBeforeSave(t.files))}},{key:"handleImDialogMessagesGetInitSuccess",value:function e(t){this.store.dispatch("users/set",t.users);this.store.dispatch("files/set",this.controller.application.prepareFilesBeforeSave(t.files));if(t.messages.length===0&&t.chat_id){r.Logger.warn("setting messagesSet for empty chat",t.chat_id);setTimeout((function(){i.EventEmitter.emit(n.EventType.dialog.messagesSet,{chatId:t.chat_id})}),100)}else{this.store.dispatch("messages/set",t.messages.reverse())}}},{key:"handleImDialogMessagesGetUnreadSuccess",value:function e(t){this.store.dispatch("users/set",t.users);this.store.dispatch("files/set",this.controller.application.prepareFilesBeforeSave(t.files))}},{key:"handleImDiskFolderGetSuccess",value:function e(t){this.store.commit("application/set",{dialog:{diskFolderId:t.ID}})}},{key:"handleImMessageAddSuccess",value:function e(t,n){var r=this;this.store.dispatch("messages/update",{id:n.id,chatId:n.chatId,fields:{id:t,sending:false,error:false}}).then((function(){r.store.dispatch("messages/actionFinish",{id:t,chatId:n.chatId})}))}},{key:"handleImMessageAddError",value:function e(t,n){this.store.dispatch("messages/actionError",{id:n.id,chatId:n.chatId})}},{key:"handleImDiskFileCommitSuccess",value:function e(t,n){var r=this;this.store.dispatch("messages/update",{id:n.id,chatId:n.chatId,fields:{id:t["MESSAGE_ID"],sending:false,error:false}}).then((function(){r.store.dispatch("messages/actionFinish",{id:t["MESSAGE_ID"],chatId:n.chatId})}))}},{key:"handleImDiskFileCommitError",value:function e(t,r){this.store.dispatch("files/update",{chatId:r.chatId,id:r.file.id,fields:{status:n.FileStatus.error,progress:0}});this.store.dispatch("messages/actionError",{id:r.id,chatId:r.chatId,retry:false})}},{key:"handleImRecentListSuccess",value:function e(t,n){r.Logger.warn("Provider.Rest.handleImRecentGetSuccess",t);var i=[];var s=[];var o=[];t.items.forEach((function(e){var t=0;var n=0;if(e.user&&e.user.id>0){t=e.user.id;i.push(e.user)}if(e.chat){n=e.chat.id;s.push(Object.assign(e.chat,{dialogId:e.id}))}else{s.push(Object.assign({},{dialogId:e.id}))}o.push(a(a({},e),{},{avatar:e.avatar.url,color:e.avatar.color,userId:t,chatId:n}))}));this.store.dispatch("users/set",i);this.store.dispatch("dialogues/set",s);this.store.dispatch("recent/set",o)}}]);return s}(s);
/**
	 * Bitrix Im
	 * Dialog Rest answers (Rest Answer Handler)
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2023 Bitrix
	 */var u=function(e){babelHelpers.inherits(t,e);function t(e){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));n.application=e.application;return n}babelHelpers.createClass(t,[{key:"handleImChatGetSuccess",value:function e(t){this.store.commit("application/set",{dialog:{chatId:t.id,dialogId:t.dialog_id,diskFolderId:t.disk_folder_id}})}},{key:"handleImCallGetCallLimitsSuccess",value:function e(t){this.store.commit("application/set",{call:{serverEnabled:t.callServerEnabled,maxParticipants:t.maxParticipants}})}},{key:"handleImChatGetError",value:function e(t){if(t.ex.error==="ACCESS_ERROR"){r.Logger.error("MobileRestAnswerHandler.handleImChatGetError: ACCESS_ERROR")}}},{key:"handleImDialogMessagesGetInitSuccess",value:function e(t){}},{key:"handleImMessageAddSuccess",value:function e(t,n){console.warn("im.message.add success in dialog handler")}},{key:"handleImMessageAddError",value:function e(t,n){}},{key:"handleImDiskFileCommitSuccess",value:function e(t,n){}}]);return t}(s);
/**
	 * Bitrix Messenger
	 * Bundle rest answer handlers
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */e.BaseRestHandler=s;e.CoreRestHandler=l;e.DialogRestHandler=u})(this.BX.Messenger.Provider.Rest=this.BX.Messenger.Provider.Rest||{},BX,BX.Messenger.Const,BX.Messenger.Lib,BX.Event);(function(e){"use strict";if(typeof e.Promise==="undefined"||e.Promise.toString().indexOf("[native code]")===-1){var t="[[PromiseStatus]]";var n="[[PromiseValue]]";var r="pending";var i="internal pending";var s="resolved";var o="rejected";var a=function(e,o){if(e[t]===i){e=e[n]}if(e[t]===r){e.deferreds.push(o)}else{e.handled=true;setTimeout((function(){var r=e[t]===s?o.onFulfilled:o.onRejected;if(r){try{l(o.promise,r(e[n]))}catch(e){u(o.promise,e)}}else{if(e[t]===s){l(o.promise,e[n])}else{u(o.promise,e[n])}}}),0)}};var l=function(e,r){if(r===e){throw new TypeError("A promise cannot be resolved with it promise.")}try{if(r&&(typeof r==="object"||typeof r==="function")){if(r instanceof h){e[t]=i;e[n]=r;c(e);return}else if(typeof r.then==="function"){f(r.then.bind(r),e);return}}e[t]=s;e[n]=r;c(e)}catch(t){u(e,t)}};var u=function(e,r){e[t]=o;e[n]=r;c(e)};var c=function(e){if(e[t]===o&&e.deferreds.length===0){setTimeout((function(){if(!e.handled){console.error("Unhandled Promise Rejection: "+e[n])}}),0)}e.deferreds.forEach((function(t){a(e,t)}));e.deferreds=null};var f=function(e,t){var n=false;try{e(r,i)}catch(e){if(!n){n=true;u(t,e)}}function r(e){if(!n){n=true;l(t,e)}}function i(e){if(!n){n=true;u(t,e)}}};var d=function(e,t,n){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.promise=n};var h=function(e){this[t]=r;this[n]=null;this.handled=false;this.deferreds=[];f(e,this)};h.prototype["catch"]=function(e){return this.then(null,e)};h.prototype.then=function(e,t){var n=new h((function(){}));a(this,new d(e,t,n));return n};h.all=function(e){var t=[].slice.call(e);return new h((function(e,n){if(t.length===0){e(t)}else{var r=t.length;var i=function(s,o){try{if(o&&(typeof o==="object"||typeof o==="function")){if(typeof o.then==="function"){o.then.call(o,(function(e){i(s,e)}),n);return}}t[s]=o;if(--r===0){e(t)}}catch(e){n(e)}};for(var s=0;s<t.length;s++){i(s,t[s])}}}))};h.resolve=function(e){if(e&&typeof e==="object"&&e.constructor===h){return e}return new h((function(t){t(e)}))};h.reject=function(e){return new h((function(t,n){n(e)}))};h.race=function(e){return new h((function(t,n){for(var r=0,i=e.length;r<i;r++){e[r].then(t,n)}}))};e.Promise=h}})(window);this.BX=this.BX||{};this.BX.Ui=this.BX.Ui||{};this.BX.Ui.Vue=this.BX.Ui.Vue||{};this.BX.Ui.Vue.Components=this.BX.Ui.Vue.Components||{};(function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){babelHelpers.defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=null;t.WidgetVue.component("bx-crm-form",{props:{id:{type:String,required:true},sec:{type:String,required:true},lang:{type:String,required:true,default:"en"},address:{type:String,required:true,default:function e(){return window.location.origin}},design:{type:Object,required:false,default:function e(){return{compact:true}}}},data:function e(){return{message:"",isLoading:false,obj:{}}},beforeDestroy:function e(){if(this.obj.instance){this.obj.instance.destroy()}},mounted:function e(){var t=this;var n=function e(){t.isLoading=false;t.message="";t.obj.config.data.node=t.$el;t.obj.config.data.design=r(r({},t.obj.config.data.design),t.design);t.obj.instance=window.b24form.App.createForm24(t.obj.config,t.obj.config.data);t.obj.instance.subscribeAll((function(e,n,r){e=e||{};e.form=n;t.$emit("form:"+r,e)}))};this.isLoading=true;var s=null;if(window.fetch){var o=new FormData;o.append("id",this.id);o.append("sec",this.sec);s=fetch(this.address+"/bitrix/services/main/ajax.php?action=crm.site.form.get",{method:"POST",body:o,mode:"cors"})}else{this.message="error";return}s.then((function(e){return e.json()})).then((function(e){if(e.error){throw new Error(e.error_description)}t.obj.config=e.result.config;if(window.b24form&&window.b24form.App){n();return}if(!i){i=new Promise((function(t,n){var r=function e(){if(!window.b24form||!window.b24form||!window.b24form.App){setTimeout(e,200)}else{t()}};var i=document.createElement("script");i.src=e.result.loader.app.link;i.onload=r;i.onerror=n;document.head.appendChild(i)}))}i.then(n)["catch"]((function(e){t.message="App load failed:"+e}))}))["catch"]((function(e){t.isLoading=false;t.message=e}))},template:'\n\t\t<div>\n\t\t\t<div v-if="isLoading" class="ui-vue-crm-form-loading-container"></div>\n\t\t\t<div v-else-if="message">{{ message }}</div>\n\t\t</div>\n\t'})})(this.BX.Ui.Vue.Components.Crm=this.BX.Ui.Vue.Components.Crm||{},BX);this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.Provider=this.BX.Messenger.Provider||{};(function(e,t,n,r,i,s){"use strict";function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(){babelHelpers.createClass(e,null,[{key:"create",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new this(t)}}]);function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);if(babelHelpers["typeof"](t.controller)==="object"&&t.controller){this.controller=t.controller}if(babelHelpers["typeof"](t.store)==="object"&&t.store){this.store=t.store}this.option=babelHelpers["typeof"](t.store)==="object"&&t.store?t.store:{};if(!(babelHelpers["typeof"](this.option.handlingDialog)==="object"&&this.option.handlingDialog&&this.option.handlingDialog.chatId&&this.option.handlingDialog.dialogId)){this.option.handlingDialog=false}}babelHelpers.createClass(e,[{key:"getModuleId",value:function e(){return"im"}},{key:"getSubscriptionType",value:function e(){return s.PullClient.SubscriptionType.Server}},{key:"skipExecute",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!n.optionImportant){if(this.option.skip){r.Logger.info("Pull: command skipped while loading messages",t);return true}if(!this.option.handlingDialog){return false}}if(typeof t.chatId!=="undefined"||typeof t.dialogId!=="undefined"){if(typeof t.chatId!=="undefined"&&parseInt(t.chatId)===parseInt(this.option.handlingDialog.chatId)){return false}if(typeof t.dialogId!=="undefined"&&t.dialogId.toString()===this.option.handlingDialog.dialogId.toString()){return false}return true}return false}},{key:"handleMessage",value:function e(t,n){this.handleMessageAdd(t,n)}},{key:"handleMessageChat",value:function e(t,n){this.handleMessageAdd(t,n)}},{key:"handleMessageAdd",value:function e(s,o){var l=this;r.Logger.warn("handleMessageAdd",s);if(this.skipExecute(s,o)){return false}var u=this.store.state.messages.collection[s.chatId];if(!u){u=[]}var c=u.find((function(e){if(s.message.templateId&&e.id===s.message.templateId){return true}return e.id===s.message.id}));if(c&&s.message.push){return false}if(s.chat&&s.chat[s.chatId]){var f=this.store.getters["dialogues/getByChatId"](s.chatId);if(!f){var d=Object.assign({},s.chat[s.chatId],{dialogId:s.dialogId});this.store.dispatch("dialogues/set",d)}else{this.store.dispatch("dialogues/update",{dialogId:s.dialogId,fields:s.chat[s.chatId]})}}if(s.users){this.store.dispatch("users/set",t.WidgetVuexBuilderModel.convertToArray(s.users))}if(s.files){var h=this.controller.application.prepareFilesBeforeSave(t.WidgetVuexBuilderModel.convertToArray(s.files));h.forEach((function(e){if(h.length===1&&s.message.templateFileId&&l.store.state.files.index[s.chatId]&&l.store.state.files.index[s.chatId][s.message.templateFileId]){l.store.dispatch("files/update",{id:s.message.templateFileId,chatId:s.chatId,fields:e}).then((function(){i.EventEmitter.emit(n.EventType.dialog.scrollToBottom,{chatId:s.chatId,cancelIfScrollChange:true})}))}else{l.store.dispatch("files/set",e)}}))}if(c){r.Logger.warn("New message pull handler: we already have this message",s.message);this.store.dispatch("messages/update",{id:c.id,chatId:c.chatId,fields:a(a({},s.message),{},{sending:false,error:false})}).then((function(){if(!s.message.push){i.EventEmitter.emit(n.EventType.dialog.scrollToBottom,{chatId:c.chatId,cancelIfScrollChange:s.message.senderId!==l.controller.application.getUserId()})}}))}else if(this.controller.application.isUnreadMessagesLoaded()){r.Logger.warn("New message pull handler: we dont have this message",s.message);this.store.dispatch("messages/setAfter",a(a({},s.message),{},{unread:true})).then((function(){if(!s.message.push){i.EventEmitter.emit(n.EventType.dialog.newMessage,{chatId:s.message.chatId,messageId:s.message.id})}}))}this.controller.application.stopOpponentWriting({dialogId:s.dialogId,userId:s.message.senderId});if(s.message.senderId===this.controller.application.getUserId()){if(this.store.state.dialogues.collection[s.dialogId]&&this.store.state.dialogues.collection[s.dialogId].counter!==0){this.controller.restClient.callMethod("im.dialog.read",{dialog_id:s.dialogId}).then((function(){l.store.dispatch("messages/readMessages",{chatId:s.chatId}).then((function(e){i.EventEmitter.emit(n.EventType.dialog.scrollToBottom,{chatId:s.chatId,cancelIfScrollChange:false});l.store.dispatch("dialogues/update",{dialogId:s.dialogId,fields:{counter:0}})}))}))}}else if(s.message.senderId!==this.controller.application.getUserId()){this.store.dispatch("dialogues/increaseCounter",{dialogId:s.dialogId,count:1})}this.store.dispatch("dialogues/update",{dialogId:s.dialogId,fields:{lastMessageId:s.message.id}});this.store.dispatch("dialogues/increaseMessageCounter",{dialogId:s.dialogId,count:1})}},{key:"handleMessageUpdate",value:function e(t,n,r){this.execMessageUpdateOrDelete(t,n,r)}},{key:"handleMessageDelete",value:function e(t,n,r){this.execMessageUpdateOrDelete(t,n,r)}},{key:"execMessageUpdateOrDelete",value:function e(t,r,s){if(this.skipExecute(t,r)){return false}this.controller.application.stopOpponentWriting({dialogId:t.dialogId,userId:t.senderId});var o={params:t.params,blink:true};if(s==="messageUpdate"){if(typeof t.textLegacy!=="undefined"){o.textLegacy=t.textLegacy}if(typeof t.text!=="undefined"){o.text=t.text}}this.store.dispatch("messages/update",{id:t.id,chatId:t.chatId,fields:o}).then((function(){i.EventEmitter.emit(n.EventType.dialog.scrollToBottom,{chatId:t.chatId,cancelIfScrollChange:true})}))}},{key:"handleMessageDeleteComplete",value:function e(t,n){if(this.skipExecute(t,n)){return false}this.store.dispatch("messages/delete",{id:t.id,chatId:t.chatId});this.controller.application.stopOpponentWriting({dialogId:t.dialogId,userId:t.senderId,action:false})}},{key:"handleMessageLike",value:function e(t,n){if(this.skipExecute(t,n)){return false}this.store.dispatch("messages/update",{id:t.id,chatId:t.chatId,fields:{params:{LIKE:t.users}}})}},{key:"handleChatOwner",value:function e(t,n){if(this.skipExecute(t,n)){return false}this.store.dispatch("dialogues/update",{dialogId:t.dialogId,fields:{ownerId:t.userId}})}},{key:"handleChatManagers",value:function e(t,n){if(this.skipExecute(t,n)){return false}this.store.dispatch("dialogues/update",{dialogId:t.dialogId,fields:{managerList:t.list}})}},{key:"handleChatUpdateParams",value:function e(t,n){if(this.skipExecute(t,n)){return false}this.store.dispatch("dialogues/update",{dialogId:t.dialogId,fields:t.params})}},{key:"handleChatUserAdd",value:function e(t,n){if(this.skipExecute(t,n)){return false}this.store.dispatch("dialogues/update",{dialogId:t.dialogId,fields:{userCounter:t.userCount}})}},{key:"handleChatUserLeave",value:function e(t,n){if(this.skipExecute(t,n)){return false}this.store.dispatch("dialogues/update",{dialogId:t.dialogId,fields:{userCounter:t.userCount}})}},{key:"handleMessageParamsUpdate",value:function e(t,r){if(this.skipExecute(t,r)){return false}this.store.dispatch("messages/update",{id:t.id,chatId:t.chatId,fields:{params:t.params}}).then((function(){i.EventEmitter.emit(n.EventType.dialog.scrollToBottom,{chatId:t.chatId,cancelIfScrollChange:true})}))}},{key:"handleStartWriting",value:function e(t,n){if(this.skipExecute(t,n)){return false}this.controller.application.startOpponentWriting(t)}},{key:"handleReadMessage",value:function e(t,n){var r=this;if(this.skipExecute(t,n)){return false}this.store.dispatch("messages/readMessages",{chatId:t.chatId,readId:t.lastId}).then((function(e){r.store.dispatch("dialogues/update",{dialogId:t.dialogId,fields:{counter:t.counter}})}))}},{key:"handleReadMessageChat",value:function e(t,n){this.handleReadMessage(t,n)}},{key:"handleReadMessageOpponent",value:function e(t,n){this.execReadMessageOpponent(t,n)}},{key:"handleReadMessageChatOpponent",value:function e(t,n){this.execReadMessageOpponent(t,n)}},{key:"execReadMessageOpponent",value:function e(t,n){if(this.skipExecute(t,n)){return false}this.store.dispatch("dialogues/updateReaded",{dialogId:t.dialogId,userId:t.userId,userName:t.userName,messageId:t.lastId,date:t.date,action:true})}},{key:"handleUnreadMessageOpponent",value:function e(t,n){this.execUnreadMessageOpponent(t,n)}},{key:"handleUnreadMessageChatOpponent",value:function e(t,n){this.execUnreadMessageOpponent(t,n)}},{key:"execUnreadMessageOpponent",value:function e(t,n){if(this.skipExecute(t,n)){return false}this.store.dispatch("dialogues/updateReaded",{dialogId:t.dialogId,userId:t.userId,action:false})}},{key:"handleFileUpload",value:function e(r,s){if(this.skipExecute(r,s)){return false}this.store.dispatch("files/set",this.controller.application.prepareFilesBeforeSave(t.WidgetVuexBuilderModel.convertToArray({file:r.fileParams}))).then((function(){i.EventEmitter.emit(n.EventType.dialog.scrollToBottom,{cancelIfScrollChange:true})}))}},{key:"handleChatMuteNotify",value:function e(t,n){var r=this.store.getters["dialogues/get"](t.dialogId);if(!r){return false}var i=r.muteList;var s=[];var o=this.store.state.application.common.userId;if(t.mute){s=[].concat(babelHelpers.toConsumableArray(i),[o])}else{s=i.filter((function(e){return e!==o}))}this.store.dispatch("dialogues/update",{dialogId:t.dialogId,fields:{muteList:s}})}},{key:"handleUserInvite",value:function e(t,n){if(!t.invited){this.store.dispatch("users/update",{id:t.userId,fields:t.user})}}}]);return e}();function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){babelHelpers.createClass(e,null,[{key:"create",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new this(t)}}]);function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);if(babelHelpers["typeof"](t.application)==="object"&&t.application){this.application=t.application}if(babelHelpers["typeof"](t.controller)==="object"&&t.controller){this.controller=t.controller}if(babelHelpers["typeof"](t.store)==="object"&&t.store){this.store=t.store}this.option=babelHelpers["typeof"](t.store)==="object"&&t.store?t.store:{}}babelHelpers.createClass(e,[{key:"getModuleId",value:function e(){return"im"}},{key:"getSubscriptionType",value:function e(){return s.PullClient.SubscriptionType.Server}},{key:"handleChatUserAdd",value:function e(t){if(t.dialogId!==this.store.state.application.dialog.dialogId){return false}var n=Object.values(t.users).map((function(e){return c(c({},e),{},{lastActivityDate:new Date})}));this.store.commit("conference/common",{userCount:t.userCount});this.store.dispatch("users/set",n);this.store.dispatch("conference/setUsers",{users:n.map((function(e){return e.id}))})}},{key:"handleChatUserLeave",value:function e(t){if(t.dialogId!==this.store.state.application.dialog.dialogId){return false}if(t.userId===this.controller.getUserId()){this.application.kickFromCall()}this.store.commit("conference/common",{userCount:t.userCount});this.store.dispatch("conference/removeUsers",{users:[t.userId]})}},{key:"handleCallUserNameUpdate",value:function e(t){var n=this.store.getters["users/get"](t.userId);if(!n){this.store.dispatch("users/set",{id:t.userId,lastActivityDate:new Date})}this.store.dispatch("users/update",{id:t.userId,fields:{name:t.name,lastActivityDate:new Date}})}},{key:"handleVideoconfShareUpdate",value:function e(t){if(t.dialogId===this.store.state.application.dialog.dialogId){this.store.dispatch("dialogues/update",{dialogId:t.dialogId,fields:{public:{code:t.newCode,link:t.newLink}}});this.application.changeVideoconfUrl(t.newLink)}}},{key:"handleMessageChat",value:function e(t){this.application.sendNewMessageNotify(t)}},{key:"handleChatRename",value:function e(t){if(t.chatId!==this.application.getChatId()){return false}this.store.dispatch("conference/setConferenceTitle",{conferenceTitle:t.name})}},{key:"handleConferenceUpdate",value:function e(t){if(t.chatId!==this.application.getChatId()){return false}if(t.isBroadcast!==""){this.store.dispatch("conference/setBroadcastMode",{broadcastMode:t.isBroadcast})}if(t.presenters.length>0){this.store.dispatch("conference/setPresenters",{presenters:t.presenters,replace:true})}}}]);return e}();function d(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var r=0;var i=function e(){};return{s:i,n:function t(){if(r>=e.length)return{done:true};return{done:false,value:e[r++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,o=false,a;return{s:function t(){n=n.call(e)},n:function e(){var t=n.next();s=t.done;return t},e:function e(t){o=true;a=t},f:function e(){try{if(!s&&n["return"]!=null)n["return"]()}finally{if(o)throw a}}}}function h(e,t){if(!e)return;if(typeof e==="string")return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}function p(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(){babelHelpers.createClass(e,null,[{key:"create",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new this(t)}}]);function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);if(babelHelpers["typeof"](t.application)==="object"&&t.application){this.application=t.application}if(babelHelpers["typeof"](t.controller)==="object"&&t.controller){this.controller=t.controller}if(babelHelpers["typeof"](t.store)==="object"&&t.store){this.store=t.store}this.option=babelHelpers["typeof"](t.store)==="object"&&t.store?t.store:{}}babelHelpers.createClass(e,[{key:"getModuleId",value:function e(){return"im"}},{key:"getSubscriptionType",value:function e(){return s.PullClient.SubscriptionType.Server}},{key:"handleNotifyAdd",value:function e(t,n){if(n.server_time_ago>30||t.onlyFlash===true){return false}var r=this.store.getters["users/get"](t.userId);if(!r){var i=[];i.push({id:t.userId,avatar:t.userAvatar,color:t.userColor,name:t.userName});this.store.dispatch("users/set",i)}this.store.dispatch("notifications/add",{data:t});this.store.dispatch("notifications/setCounter",{unreadTotal:t.counter});this.store.dispatch("recent/update",{id:"notify",fields:{message:{id:t.id,text:t.text,date:t.date},counter:t.counter}})}},{key:"handleNotifyReadAll",value:function e(t){this.store.dispatch("notifications/readAll");this.store.dispatch("notifications/setCounter",{unreadTotal:0});this.store.dispatch("recent/update",{id:"notify",fields:{counter:0}})}},{key:"handleNotifyConfirm",value:function e(t,n){if(n.server_time_ago>30){return false}this.store.dispatch("notifications/delete",{id:t.id});this.store.dispatch("notifications/setCounter",{unreadTotal:t.counter});this.updateRecentListOnDelete(t.counter)}},{key:"handleNotifyRead",value:function e(t,n){var r=this;if(n.server_time_ago>30){return false}t.list.forEach((function(e){r.store.dispatch("notifications/read",{ids:[e],action:true})}));this.store.dispatch("notifications/setCounter",{unreadTotal:t.counter});this.store.dispatch("recent/update",{id:"notify",fields:{counter:t.counter}})}},{key:"handleNotifyUnread",value:function e(t,n){var r=this;if(n.server_time_ago>30){return false}t.list.forEach((function(e){r.store.dispatch("notifications/read",{ids:[e],action:false})}));this.store.dispatch("notifications/setCounter",{unreadTotal:t.counter});this.store.dispatch("recent/update",{id:"notify",fields:{counter:t.counter}})}},{key:"handleNotifyDelete",value:function e(t,n){var r=this;if(n.server_time_ago>30){return false}var i=Object.keys(t.id).map((function(e){return parseInt(e,10)}));i.forEach((function(e){r.store.dispatch("notifications/delete",{id:e})}));this.updateRecentListOnDelete(t.counter);this.store.dispatch("notifications/setCounter",{unreadTotal:t.counter})}},{key:"updateRecentListOnDelete",value:function e(t){var n;var r=this.getLatest();if(r!==null){n={id:r.id,text:r.text,date:r.date}}else{var i=this.store.getters["recent/get"]("notify");if(i===false){return}n=i.element.message;n.text=this.controller.localize["IM_NOTIFICATIONS_DELETED_ITEM_STUB"]}this.store.dispatch("recent/update",{id:"notify",fields:{message:n,counter:t}})}},{key:"getLatest",value:function e(){var t={id:0};var n=d(this.store.state.notifications.collection),r;try{for(n.s();!(r=n.n()).done;){var i=r.value;if(i.id>t.id){t=i}}}catch(e){n.e(e)}finally{n.f()}if(t.id===0){return null}return t}}]);return e}();
/**
	 * Bitrix Messenger
	 * Bundle pull command handlers
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */e.ImBasePullHandler=l;e.ImCallPullHandler=f;e.ImNotificationsPullHandler=m})(this.BX.Messenger.Provider.Pull=this.BX.Messenger.Provider.Pull||{},BX,BX.Messenger.Const,BX.Messenger.Lib,BX.Event,BX);this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e){"use strict";
/**
	 * Bitrix Messenger
	 * Timer manager
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2019 Bitrix
	 */var t=function(){function e(){babelHelpers.classCallCheck(this,e);this.list={};this.updateInterval=1e3;clearInterval(this.updateIntervalId);this.updateIntervalId=setInterval(this.worker.bind(this),this.updateInterval)}babelHelpers.createClass(e,[{key:"start",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"default";var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};n=n==null?"default":n;r=parseFloat(r);if(isNaN(r)||r<=0){return false}r=r*1e3;if(typeof this.list[t]==="undefined"){this.list[t]={}}this.list[t][n]={dateStop:(new Date).getTime()+r,callback:typeof i==="function"?i:function(){},callbackParams:s};return true}},{key:"has",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"default";n=n==null?"default":n;if(n.toString().length<=0||typeof this.list[t]==="undefined"){return false}return!!this.list[t][n]}},{key:"stop",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"default";var r=arguments.length>2?arguments[2]:undefined;n=n==null?"default":n;if(n.toString().length<=0||typeof this.list[t]==="undefined"){return false}if(!this.list[t][n]){return true}if(r!==true){this.list[t][n]["callback"](n,this.list[t][n]["callbackParams"])}delete this.list[t][n];return true}},{key:"stopAll",value:function e(t){for(var n in this.list){if(this.list.hasOwnProperty(n)){for(var r in this.list[n]){if(this.list[n].hasOwnProperty(r)){this.stop(n,r,t)}}}}return true}},{key:"worker",value:function e(){for(var t in this.list){if(!this.list.hasOwnProperty(t)){continue}for(var n in this.list[t]){if(!this.list[t].hasOwnProperty(n)||this.list[t][n]["dateStop"]>new Date){continue}this.stop(t,n)}}return true}},{key:"clean",value:function e(){clearInterval(this.updateIntervalId);this.stopAll(true);return true}}]);return e}();e.Timer=t})(this.BX.Messenger.Lib=this.BX.Messenger.Lib||{});this.BX=this.BX||{};(function(e,t,n,r,i,s,o,a,l,u,c,f){"use strict";
/**
	 * Bitrix Messenger
	 * Application controller
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var d=function(){function e(){babelHelpers.classCallCheck(this,e);this.controller=null;this.timer=new a.Timer;this._prepareFilesBeforeSave=function(e){return e};this.defaultMessageLimit=50;this.requestMessageLimit=this.getDefaultMessageLimit();this.messageLastReadId={};this.messageReadQueue={}}babelHelpers.createClass(e,[{key:"setCoreController",value:function e(t){this.controller=t}},{key:"getSiteId",value:function e(){return this.controller.getStore().state.application.common.siteId}},{key:"getUserId",value:function e(){return this.controller.getStore().state.application.common.userId}},{key:"getLanguageId",value:function e(){return this.controller.getStore().state.application.common.languageId}},{key:"getCurrentUser",value:function e(){return this.controller.getStore().getters["users/get"](this.controller.getStore().state.application.common.userId,true)}},{key:"getChatId",value:function e(){return this.controller.getStore().state.application.dialog.chatId}},{key:"getDialogId",value:function e(){return this.controller.getStore().state.application.dialog.dialogId}},{key:"getData",value:function e(){return this.controller.getStore().state.application}},{key:"getDialogData",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getDialogId();if(this.controller.getStore().state.dialogues.collection[t]){return this.controller.getStore().state.dialogues.collection[t]}return this.controller.getStore().getters["dialogues/getBlank"]()}},{key:"getDialogCrmData",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getDialogId();var n={enabled:false,entityType:l.DialogCrmType.none,entityId:0};var r=this.getDialogData(t);if(r.type===l.DialogType.call){if(r.entityData1&&typeof r.entityData1==="string"){var i=r.entityData1.split("|"),s=babelHelpers.slicedToArray(i,3),o=s[0],a=s[1],u=s[2];if(o){a=a?a.toString().toLowerCase():l.DialogCrmType.none;n={enabled:o,entityType:a,entityId:u}}}}else if(r.type===l.DialogType.crm){var c=r.entityId.split("|"),f=babelHelpers.slicedToArray(c,2),d=f[0],h=f[1];d=d?d.toString().toLowerCase():l.DialogCrmType.none;n={enabled:true,entityType:d,entityId:h}}return n}},{key:"getDialogIdByChatId",value:function e(t){if(this.getDialogId()==="chat"+t){return this.getDialogId()}var n=this.controller.getStore().getters["dialogues/getByChatId"](t);if(!n){return 0}return n.dialogId}},{key:"getDiskFolderId",value:function e(){return this.controller.getStore().state.application.dialog.diskFolderId}},{key:"getDefaultMessageLimit",value:function e(){return this.defaultMessageLimit}},{key:"getRequestMessageLimit",value:function e(){return this.requestMessageLimit}},{key:"muteDialog",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.getDialogId();if(u.Utils.dialog.isEmptyDialogId(r)){return false}if(n===null){n=!this.isDialogMuted()}this.timer.start("muteDialog",r,.3,(function(e){t.controller.restClient.callMethod(l.RestMethod.imChatMute,{DIALOG_ID:r,ACTION:n?"Y":"N"})}));var i=[];if(n){i=this.getDialogData().muteList;i.push(this.getUserId())}else{i=this.getDialogData().muteList.filter((function(e){return e!==t.getUserId()}))}this.controller.getStore().dispatch("dialogues/update",{dialogId:r,fields:{muteList:i}});return true}},{key:"isDialogMuted",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getDialogId();return this.getDialogData().muteList.includes(this.getUserId())}},{key:"isUnreadMessagesLoaded",value:function e(){var t=this.controller.getStore().state.dialogues.collection[this.getDialogId()];if(!t){return true}if(t.lastMessageId<=0){return true}var n=this.controller.getStore().state.messages.collection[this.getChatId()];if(!n||n.length<=0){return true}var r=0;for(var i=n.length-1;i>=0;i--){var s=n[i];if(typeof s.id==="number"){r=s.id;break}}return r>=t.lastMessageId}},{key:"prepareFilesBeforeSave",value:function e(t){return this._prepareFilesBeforeSave(t)}},{key:"setPrepareFilesBeforeSaveFunction",value:function e(t){this._prepareFilesBeforeSave=t.bind(this)}},{key:"showSmiles",value:function e(){this.store.dispatch("application/showSmiles")}},{key:"hideSmiles",value:function e(){this.store.dispatch("application/hideSmiles")}},{key:"startOpponentWriting",value:function e(t){var n=this;var r=t.dialogId,i=t.userId,s=t.userName;this.controller.getStore().dispatch("dialogues/updateWriting",{dialogId:r,userId:i,userName:s,action:true});this.timer.start("writingEnd",r+"|"+i,35,(function(e,t){var r=t.dialogId,i=t.userId;n.controller.getStore().dispatch("dialogues/updateWriting",{dialogId:r,userId:i,action:false})}),{dialogId:r,userId:i});return true}},{key:"stopOpponentWriting",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=t.dialogId,r=t.userId,i=t.userName;this.timer.stop("writingStart",n+"|"+r,true);this.timer.stop("writingEnd",n+"|"+r);return true}},{key:"startWriting",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getDialogId();if(u.Utils.dialog.isEmptyDialogId(n)||this.timer.has("writes",n)){return false}this.timer.start("writes",n,28);this.timer.start("writesSend",n,5,(function(e){t.controller.restClient.callMethod(l.RestMethod.imDialogWriting,{DIALOG_ID:n})["catch"]((function(){t.timer.stop("writes",n)}))}))}},{key:"stopWriting",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getDialogId();this.timer.stop("writes",t,true);this.timer.stop("writesSend",t,true)}},{key:"joinParentChat",value:function e(t,n){var r=this;return new Promise((function(e,i){if(!t||!n){return i()}if(typeof r.tempJoinChat==="undefined"){r.tempJoinChat={}}else if(r.tempJoinChat["wait"]){return i()}r.tempJoinChat["wait"]=true;r.controller.restClient.callMethod(l.RestMethod.imChatParentJoin,{DIALOG_ID:n,MESSAGE_ID:t}).then((function(){r.tempJoinChat["wait"]=false;r.tempJoinChat[n]=true;return e(n)}))["catch"]((function(){r.tempJoinChat["wait"]=false;return i()}))}))}},{key:"setTextareaMessage",value:function e(t){var n=t.message,r=n===void 0?"":n,i=t.dialogId,s=i===void 0?this.getDialogId():i;this.controller.getStore().dispatch("dialogues/update",{dialogId:s,fields:{textareaMessage:r}})}},{key:"setSendingMessageFlag",value:function e(t){this.controller.getStore().dispatch("messages/actionStart",{id:t,chatId:this.getChatId()})}},{key:"reactMessage",value:function e(t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"auto";this.controller.restClient.callMethod(l.RestMethod.imMessageLike,{MESSAGE_ID:t,ACTION:n==="auto"?"auto":n==="set"?"plus":"minus"})}},{key:"readMessage",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=this.getChatId();if(typeof this.messageLastReadId[s]==="undefined"){this.messageLastReadId[s]=null}if(typeof this.messageReadQueue[s]==="undefined"){this.messageReadQueue[s]=[]}if(n){this.messageReadQueue[s].push(parseInt(n))}this.timer.stop("readMessage",s,true);this.timer.stop("readMessageServer",s,true);if(r){return this.readMessageExecute(s,i)}return new Promise((function(e,n){t.timer.start("readMessage",s,.1,(function(n,r){return t.readMessageExecute(n,i).then((function(t){return e(t)}))}))}))}},{key:"readMessageExecute",value:function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return new Promise((function(e,i){if(n.messageReadQueue[t]){n.messageReadQueue[t]=n.messageReadQueue[t].filter((function(e){if(!n.messageLastReadId[t]){n.messageLastReadId[t]=e}else if(n.messageLastReadId[t]<e){n.messageLastReadId[t]=e}}))}var s=n.getDialogIdByChatId(t);var o=n.messageLastReadId[t]||0;if(o<=0){e({dialogId:s,lastId:0});return true}n.controller.getStore().dispatch("messages/readMessages",{chatId:t,readId:o}).then((function(i){n.controller.getStore().dispatch("dialogues/decreaseCounter",{dialogId:s,count:i.count});if(n.getChatId()===t&&n.controller.getStore().getters["dialogues/canSaveChat"]){var a=n.controller.getStore().getters["dialogues/get"](s);if(a.counter<=0){n.controller.getStore().commit("application/clearDialogExtraCount")}}if(r){e({dialogId:s,lastId:o})}else{n.timer.start("readMessageServer",t,.5,(function(){n.controller.restClient.callMethod(l.RestMethod.imDialogRead,{DIALOG_ID:s,MESSAGE_ID:o}).then((function(){return e({dialogId:s,lastId:o})}))["catch"]((function(){return e({dialogId:s,lastId:o})}))}))}}))["catch"]((function(){e()}))}))}},{key:"unreadMessage",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=this.getChatId();if(typeof this.messageLastReadId[i]==="undefined"){this.messageLastReadId[i]=null}if(typeof this.messageReadQueue[i]==="undefined"){this.messageReadQueue[i]=[]}if(n){this.messageReadQueue[i]=this.messageReadQueue[i].filter((function(e){return e<n}))}this.timer.stop("readMessage",i,true);this.timer.stop("readMessageServer",i,true);this.messageLastReadId[i]=n;this.controller.getStore().dispatch("messages/unreadMessages",{chatId:i,unreadId:this.messageLastReadId[i]}).then((function(e){var s=t.getDialogIdByChatId(i);t.controller.getStore().dispatch("dialogues/update",{dialogId:s,fields:{unreadId:n}});t.controller.getStore().dispatch("dialogues/increaseCounter",{dialogId:s,count:e.count});if(!r){t.controller.restClient.callMethod(l.RestMethod.imDialogUnread,{DIALOG_ID:s,MESSAGE_ID:t.messageLastReadId[i]})}}))["catch"]((function(){}))}},{key:"shareMessage",value:function e(t,n){this.controller.restClient.callMethod(l.RestMethod.imMessageShare,{DIALOG_ID:this.getDialogId(),MESSAGE_ID:t,TYPE:n});return true}},{key:"replyToUser",value:function e(t,n){return true}},{key:"openMessageReactionList",value:function e(t,n){return true}},{key:"emit",value:function e(t){var n;for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++){i[s-1]=arguments[s]}(n=c.WidgetVue.event).$emit.apply(n,[t].concat(i))}},{key:"listen",value:function e(t,n){c.WidgetVue.event.$on(t,n)}}]);return e}();function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(){function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);this.inited=false;this.initPromise=new Promise((function(e,n){t.initPromiseResolver=e}));this.offline=false;this.restAnswerHandler=[];this.vuexAdditionalModel=[];this.store=null;this.storeBuilder=null;this.init().then((function(){return t.prepareParams(n)})).then((function(){return t.initController()})).then((function(){return t.initLocalStorage()})).then((function(){return t.initStorage()})).then((function(){return t.initRestClient()})).then((function(){return t.initPullClient()})).then((function(){return t.initEnvironment()})).then((function(){return t.initComplete()}))["catch"]((function(e){f.Logger.error("error initializing core controller",e)}))}babelHelpers.createClass(e,[{key:"init",value:function e(){return Promise.resolve()}},{key:"prepareParams",value:function e(i){var s=this;if(typeof i.localize!=="undefined"){this.localize=i.localize}else{if(typeof BX!=="undefined"){this.localize=p({},BX.message)}else{this.localize={}}}if(typeof i.host!=="undefined"){this.host=i.host}else{this.host=location.origin}if(typeof i.userId!=="undefined"){var o=parseInt(i.userId);if(!isNaN(o)){this.userId=o}else{this.userId=0}}else{var a=this.getLocalize("USER_ID");this.userId=a?parseInt(a):0}if(typeof i.siteId!=="undefined"){if(typeof i.siteId==="string"&&i.siteId!==""){this.siteId=i.siteId}else{this.siteId="s1"}}else{this.siteId=this.getLocalize("SITE_ID")||"s1"}if(typeof i.siteDir!=="undefined"){if(typeof i.siteDir==="string"&&i.siteDir!==""){this.siteDir=i.siteDir}else{this.siteDir="s1"}}else{this.siteDir=this.getLocalize("SITE_DIR")||"s1"}if(typeof i.languageId!=="undefined"){if(typeof i.languageId==="string"&&i.languageId!==""){this.languageId=i.languageId}else{this.languageId="en"}}else{this.languageId=this.getLocalize("LANGUAGE_ID")||"en"}this.pullInstance=t.PullClient;this.pullClient=t.PULL;if(typeof i.pull!=="undefined"){if(typeof i.pull.instance!=="undefined"){this.pullInstance=i.pull.instance}if(typeof i.pull.client!=="undefined"){this.pullClient=i.pull.client}}this.restInstance=n.RestClient;this.restClient=n.rest;if(typeof i.rest!=="undefined"){if(typeof i.rest.instance!=="undefined"){this.restInstance=i.rest.instance}if(typeof i.rest.client!=="undefined"){this.restClient=i.rest.client}}this.vuexBuilder={database:false,databaseName:"desktop/im",databaseType:r.WidgetVuexBuilder.DatabaseType.indexedDb};if(typeof i.vuexBuilder!=="undefined"){if(typeof i.vuexBuilder.database!=="undefined"){this.vuexBuilder.database=i.vuexBuilder.database}if(typeof i.vuexBuilder.databaseName!=="undefined"){this.vuexBuilder.databaseName=i.vuexBuilder.databaseName}if(typeof i.vuexBuilder.databaseType!=="undefined"){this.vuexBuilder.databaseType=i.vuexBuilder.databaseType}if(typeof i.vuexBuilder.models!=="undefined"){i.vuexBuilder.models.forEach((function(e){s.addVuexModel(e)}))}}return Promise.resolve()}},{key:"initController",value:function e(){this.application=new d;this.application.setCoreController(this);return new Promise((function(e,t){return e()}))}},{key:"initLocalStorage",value:function e(){return new Promise((function(e,t){return e()}))}},{key:"initStorage",value:function e(){var t=this;var n={common:{host:this.getHost(),userId:this.getUserId(),siteId:this.getSiteId(),languageId:this.getLanguageId()},dialog:{messageLimit:this.application.getDefaultMessageLimit(),enableReadMessages:true},device:{type:u.Utils.device.isMobile()?l.DeviceType.mobile:l.DeviceType.desktop,orientation:u.Utils.device.getOrientation()}};var s=(new r.WidgetVuexBuilder).addModel(i.ApplicationModel.create().useDatabase(false).setVariables(n)).addModel(i.MessagesModel.create().useDatabase(this.vuexBuilder.database).setVariables({host:this.getHost()})).addModel(i.DialoguesModel.create().useDatabase(this.vuexBuilder.database).setVariables({host:this.getHost()})).addModel(i.FilesModel.create().useDatabase(this.vuexBuilder.database).setVariables({host:this.getHost(),default:{name:"File is deleted"}})).addModel(i.UsersModel.create().useDatabase(this.vuexBuilder.database).setVariables({host:this.getHost(),default:{name:"Anonymous"}})).addModel(i.RecentModel.create().useDatabase(false).setVariables({host:this.getHost()})).addModel(i.NotificationsModel.create().useDatabase(false).setVariables({host:this.getHost()}));this.vuexAdditionalModel.forEach((function(e){s.addModel(e)}));s.setDatabaseConfig({name:this.vuexBuilder.databaseName,type:this.vuexBuilder.databaseType,siteId:this.getSiteId(),userId:this.getUserId()});return s.build().then((function(e){t.store=e.store;t.storeBuilder=e.builder;return new Promise((function(e,t){return e()}))}))}},{key:"initRestClient",value:function e(t){this.addRestAnswerHandler(o.CoreRestHandler.create({store:this.store,controller:this}));return new Promise((function(e,t){return e()}))}},{key:"initPullClient",value:function e(){if(!this.pullClient){return false}this.pullClient.subscribe(this.pullBaseHandler=new s.ImBasePullHandler({store:this.store,controller:this}));this.pullClient.subscribe({type:this.pullInstance.SubscriptionType.Status,callback:this.eventStatusInteraction.bind(this)});this.pullClient.subscribe({type:this.pullInstance.SubscriptionType.Online,callback:this.eventOnlineInteraction.bind(this)});return new Promise((function(e,t){return e()}))}},{key:"initEnvironment",value:function e(t){var n=this;window.addEventListener("orientationchange",(function(){if(!n.store){return}n.store.commit("application/set",{device:{orientation:u.Utils.device.getOrientation()}});if(n.store.state.application.device.type===l.DeviceType.mobile&&n.store.state.application.device.orientation===l.DeviceOrientation.horizontal){document.activeElement.blur()}}));return new Promise((function(e,t){return e()}))}},{key:"initComplete",value:function e(){this.inited=true;this.initPromiseResolver(this)}},{key:"eventStatusInteraction",value:function e(t){if(t.status===this.pullInstance.PullStatus.Online){this.offline=false}else if(t.status===this.pullInstance.PullStatus.Offline){this.offline=true}}},{key:"eventOnlineInteraction",value:function e(t){if(t.command==="list"||t.command==="userStatus"){for(var n in t.params.users){if(!t.params.users.hasOwnProperty(n)){continue}this.store.dispatch("users/update",{id:t.params.users[n].id,fields:t.params.users[n]})}}}},{key:"executeRestAnswer",value:function e(t,n,r){f.Logger.warn("Core.controller.executeRestAnswer",t,n,r);this.restAnswerHandler.forEach((function(e){e.execute(t,n,r)}))}},{key:"createVue",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=this;var i=function e(){};if(n.beforeCreate){i=n.beforeCreate}var s=function e(){};if(n.destroyed){s=n.destroyed}var o=function e(){};if(n.created){o=n.created}var a={store:this.store,beforeCreate:function e(){this.$bitrix.Data.set("controller",r);this.$bitrix.Application.set(t);this.$bitrix.Loc.setMessage(r.localize);if(r.restClient){this.$bitrix.RestClient.set(r.restClient)}if(r.pullClient){this.$bitrix.PullClient.set(r.pullClient)}i.bind(this)()},created:function e(){o.bind(this)()},destroyed:function e(){s.bind(this)()}};if(n.el){a.el=n.el}if(n.template){a.template=n.template}if(n.computed){a.computed=n.computed}if(n.data){a.data=n.data}var l=a.created;return new Promise((function(e,t){a.created=function(){l.bind(this)();e(this)};c.WidgetBitrixVue.createApp(a)}))}},{key:"getHost",value:function e(){return this.host}},{key:"setHost",value:function e(t){this.host=t;this.store.commit("application/set",{common:{host:t}})}},{key:"getUserId",value:function e(){return this.userId}},{key:"setUserId",value:function e(t){var n=parseInt(t);if(!isNaN(n)){this.userId=n}else{this.userId=0}this.store.commit("application/set",{common:{userId:t}})}},{key:"getSiteId",value:function e(){return this.siteId}},{key:"setSiteId",value:function e(t){if(typeof t==="string"&&t!==""){this.siteId=t}else{this.siteId="s1"}this.store.commit("application/set",{common:{siteId:this.siteId}})}},{key:"getLanguageId",value:function e(){return this.languageId}},{key:"setLanguageId",value:function e(t){if(typeof t==="string"&&t!==""){this.languageId=t}else{this.languageId="en"}this.store.commit("application/set",{common:{languageId:this.languageId}})}},{key:"getStore",value:function e(){return this.store}},{key:"getStoreBuilder",value:function e(){return this.storeBuilder}},{key:"addRestAnswerHandler",value:function e(t){this.restAnswerHandler.push(t)}},{key:"addVuexModel",value:function e(t){this.vuexAdditionalModel.push(t)}},{key:"isOnline",value:function e(){return!this.offline}},{key:"ready",value:function e(){if(this.inited){return Promise.resolve(this)}return this.initPromise}},{key:"setError",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";f.Logger.error("Messenger.Application.error: ".concat(t," (").concat(n,")"));var r="";if(t.endsWith("LOCALIZED")){r=n}this.store.commit("application/set",{error:{active:true,code:t,description:r}})}},{key:"clearError",value:function e(){this.store.commit("application/set",{error:{active:false,code:"",description:""}})}},{key:"addLocalize",value:function e(t){if(babelHelpers["typeof"](t)!=="object"||!t){return false}for(var n in t){if(t.hasOwnProperty(n)){this.localize[n]=t[n]}}return true}},{key:"getLocalize",value:function e(t){var n="";if(typeof t==="undefined"){return this.localize}else if(typeof this.localize[t.toString()]==="undefined"){f.Logger.warn("Controller.Core.getLocalize: message with code '".concat(t.toString(),"' is undefined."))}else{n=this.localize[t]}return n}}]);return e}();e.Controller=m})(this.BX.Messenger=this.BX.Messenger||{},BX,BX,BX,BX.Messenger.Model,BX.Messenger.Provider.Pull,BX.Messenger.Provider.Rest,BX.Messenger.Lib,BX.Messenger.Const,BX.Messenger.Lib,BX,BX.Messenger.Lib);this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e,t){"use strict";
/**
	 * Bitrix Im
	 * Cookie manager
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var n={get:function e(n,r){var i=n?n+"_"+r:r;if(navigator.cookieEnabled){var s=document.cookie.match(new RegExp("(?:^|; )"+i.replace(/([.$?*|{}()\[\]\\\/+^])/g,"\\$1")+"=([^;]*)"));if(s){return decodeURIComponent(s[1])}}if(t.LocalStorage.isEnabled()){var o=t.LocalStorage.get(n,0,r,undefined);if(typeof o!=="undefined"){return o}}if(typeof window.BX.GuestUserCookie==="undefined"){window.BX.GuestUserCookie={}}return window.BX.GuestUserCookie[i]},set:function e(n,r,i,s){s=s||{};var o=s.expires;if(typeof o=="number"&&o){var a=new Date;a.setTime(a.getTime()+o*1e3);o=s.expires=a}if(o&&o.toUTCString){s.expires=o.toUTCString()}i=encodeURIComponent(i);var l=n?n+"_"+r:r;var u=l+"="+i;for(var c in s){if(!s.hasOwnProperty(c)){continue}u+="; "+c;var f=s[c];if(f!==true){u+="="+f}}document.cookie=u;if(typeof window.BX.GuestUserCookie==="undefined"){BX.GuestUserCookie={}}window.BX.GuestUserCookie[l]=i;t.LocalStorage.set(n,0,r,i);return true}};e.Cookie=n})(this.BX.Messenger.Lib=this.BX.Messenger.Lib||{},BX.Messenger.Lib);this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e,t,n){"use strict";var r=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"token",null);babelHelpers.defineProperty(this,"nextDataChunkToSend",null);babelHelpers.defineProperty(this,"readOffset",0);this.diskFolderId=t.diskFolderId;this.listener=t.listener;this.status=t.status;this.taskId=t.taskId;this.fileData=t.fileData;this.fileName=t.fileName||this.fileData.name;this.generateUniqueName=t.generateUniqueName;this.chunkSizeInBytes=t.chunkSize;this.previewBlob=t.previewBlob||null;this.requestToDelete=false;this.listener("onStartUpload",{id:this.taskId,file:this.fileData,previewData:this.previewBlob});this.host=n.host||null;this.actionUploadChunk=n.actionUploadChunk||"disk.api.content.upload";this.actionCommitFile=n.actionCommitFile||"disk.api.file.createByContent";this.actionRollbackUpload=n.actionRollbackUpload||"disk.api.content.rollbackUpload";this.customHeaders=n.customHeaders||null}babelHelpers.createClass(e,[{key:"uploadContent",value:function e(){var t=this;if(this.status===i.STATUSES.CANCELLED){return}this.status=i.STATUSES.PROGRESS;this.readNext();var n="".concat(this.host?this.host:"","\n\t\t\t/bitrix/services/main/ajax.php?action=").concat(this.actionUploadChunk,"\n\t\t\t&filename=").concat(this.fileName,"\n\t\t\t").concat(this.token?"&token="+this.token:"");var r="bytes "+this.readOffset+"-"+(this.readOffset+this.chunkSizeInBytes-1)+"/"+this.fileData.size;this.calculateProgress();var s={"Content-Type":this.fileData.type,"Content-Range":r};if(!this.customHeaders){s["X-Bitrix-Csrf-Token"]=BX.bitrix_sessid()}else{for(var o in this.customHeaders){if(this.customHeaders.hasOwnProperty(o)){s[o]=this.customHeaders[o]}}}fetch(n,{method:"POST",headers:s,credentials:"include",body:this.nextDataChunkToSend}).then((function(e){return e.json()})).then((function(e){if(e.errors.length>0){t.status=i.STATUSES.FAILED;t.listener("onUploadFileError",{id:t.taskId,result:e});console.error(e.errors[0].message)}else if(e.data.token){t.token=e.data.token;t.readOffset=t.readOffset+t.chunkSizeInBytes;if(!t.isEndOfFile()){t.uploadContent()}else{t.createFileFromUploadedChunks()}}}))["catch"]((function(e){t.status=i.STATUSES.FAILED;t.listener("onUploadFileError",{id:t.taskId,result:e})}))}},{key:"deleteContent",value:function e(){this.status=i.STATUSES.CANCELLED;this.requestToDelete=true;if(!this.token){console.error("Empty token.");return}var t="".concat(this.host?this.host:"","/bitrix/services/main/ajax.php?\n\t\taction=").concat(this.actionRollbackUpload,"&token=").concat(this.token);var n={};if(!this.customHeaders){n["X-Bitrix-Csrf-Token"]=BX.bitrix_sessid()}else{for(var r in this.customHeaders){if(this.customHeaders.hasOwnProperty(r)){n[r]=this.customHeaders[r]}}}fetch(t,{method:"POST",credentials:"include",headers:n}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))["catch"]((function(e){return console.error(e)}))}},{key:"createFileFromUploadedChunks",value:function e(){var t=this;if(!this.token){console.error("Empty token.");return}if(this.requestToDelete){return}var n="".concat(this.host?this.host:"","/bitrix/services/main/ajax.php?action=").concat(this.actionCommitFile,"&filename=").concat(this.fileName)+"&folderId="+this.diskFolderId+"&contentId="+this.token+(this.generateUniqueName?"&generateUniqueName=true":"");var r={"X-Upload-Content-Type":this.fileData.type};if(!this.customHeaders){r["X-Bitrix-Csrf-Token"]=BX.bitrix_sessid()}else{for(var s in this.customHeaders){if(this.customHeaders.hasOwnProperty(s)){r[s]=this.customHeaders[s]}}}var o=new FormData;if(this.previewBlob){o.append("previewFile",this.previewBlob,"preview_"+this.fileName+".jpg")}fetch(n,{method:"POST",headers:r,credentials:"include",body:o}).then((function(e){return e.json()})).then((function(e){t.uploadResult=e;if(e.errors.length>0){t.status=i.STATUSES.FAILED;t.listener("onCreateFileError",{id:t.taskId,result:e});console.error(e.errors[0].message)}else{t.calculateProgress();t.status=i.STATUSES.DONE;t.listener("onComplete",{id:t.taskId,result:e})}}))["catch"]((function(e){t.status=i.STATUSES.FAILED;t.listener("onCreateFileError",{id:t.taskId,result:e})}))}},{key:"calculateProgress",value:function e(){this.progress=Math.round(this.readOffset*100/this.fileData.size);this.listener("onProgress",{id:this.taskId,progress:this.progress,readOffset:this.readOffset,fileSize:this.fileData.size})}},{key:"readNext",value:function e(){if(this.readOffset+this.chunkSizeInBytes>this.fileData.size){this.chunkSizeInBytes=this.fileData.size-this.readOffset}this.nextDataChunkToSend=this.fileData.slice(this.readOffset,this.readOffset+this.chunkSizeInBytes)}},{key:"isEndOfFile",value:function e(){return this.readOffset>=this.fileData.size}}]);return e}();var i=function(e){babelHelpers.inherits(t,e);function t(e){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"queue",[]);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"isCloud",BX.message.isCloud);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"phpUploadMaxFilesize",BX.message.phpUploadMaxFilesize);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"phpPostMaxSize",BX.message.phpPostMaxSize);n.setEventNamespace("BX.Messenger.Lib.Uploader");n.generatePreview=e.generatePreview||false;if(e){n.inputNode=e.inputNode||null;n.dropNode=e.dropNode||null;n.fileMaxSize=e.fileMaxSize||null;n.fileMaxWidth=e.fileMaxWidth||null;n.fileMaxHeight=e.fileMaxHeight||null;if(e.sender){n.senderOptions={host:e.sender.host,actionUploadChunk:e.sender.actionUploadChunk,actionCommitFile:e.sender.actionCommitFile,actionRollbackUpload:e.sender.actionRollbackUpload,customHeaders:e.sender.customHeaders||null}}n.assignInput();n.assignDrop()}return n}babelHelpers.createClass(t,[{key:"setInputNode",value:function e(t){if(t instanceof HTMLInputElement||Array.isArray(t)){this.inputNode=t;this.assignInput()}}},{key:"addFilesFromEvent",value:function e(t){var n=this;Array.from(t.target.files).forEach((function(e){n.emitSelectedFile(e)}))}},{key:"getPreview",value:function e(n){var r=this;return new Promise((function(e,i){if(!r.generatePreview){e()}if(n instanceof File){if(n.type.startsWith("video")){t.getVideoPreviewBlob(n,10).then((function(e){return r.getImageDimensions(e)})).then((function(t){return e(t)}))["catch"]((function(e){return i(e)}))}else if(n.type.startsWith("image")){var s=new Blob([n],{type:n.type});r.getImageDimensions(s).then((function(t){return e(t)}))}else{e()}}else{i("Parameter 'file' is not instance of 'File'")}}))}},{key:"addTask",value:function e(n){var i=this;if(!this.isModernBrowser()){console.warn("Unsupported browser!");return}if(!this.checkTaskParams(n)){return}n.chunkSize=this.calculateChunkSize(n.chunkSize);n.listener=function(e,t){return i.onUploadEvent(e,t)};n.status=t.STATUSES.PENDING;var s=new r(n,this.senderOptions);this.queue.push(s);this.checkUploadQueue()}},{key:"deleteTask",value:function e(t){if(!t){return}this.queue=this.queue.filter((function(e){if(e.taskId===t){e.deleteContent();return false}return true}))}},{key:"getTask",value:function e(t){var n=this.queue.find((function(e){return e.taskId===t}));if(n){return{id:n.id,diskFolderId:n.diskFolderId,fileData:n.fileData,fileName:n.fileName,progress:n.progress,readOffset:n.readOffset,status:n.status,token:n.token,uploadResult:n.uploadResult}}return null}},{key:"checkUploadQueue",value:function e(){if(this.queue.length>0){var n=this.queue.filter((function(e){return e.status===t.STATUSES.PENDING}));if(n.length>0){n[0].uploadContent()}}}},{key:"onUploadEvent",value:function e(t,n){this.emit(t,n);this.checkUploadQueue()}},{key:"checkTaskParams",value:function e(t){if(!t.taskId){console.error("Empty Task ID.");return false}if(!t.fileData){console.error("Empty file data.");return false}if(!t.diskFolderId){console.error("Empty disk folder ID.");return false}if(this.fileMaxSize&&this.fileMaxSize<t.fileData.size){var n={maxFileSizeLimit:this.fileMaxSize,file:t.fileData};this.emit("onFileMaxSizeExceeded",n);return false}return true}},{key:"calculateChunkSize",value:function e(r){if(n.Type.isUndefined(this.isCloud)){return r}var i=0;if(r){i=r}if(this.isCloud==="Y"){i=i<t.CLOUD_MIN_CHUNK_SIZE?t.CLOUD_MIN_CHUNK_SIZE:i;i=i>t.CLOUD_MAX_CHUNK_SIZE?t.CLOUD_MAX_CHUNK_SIZE:i}else{var s=Math.min(this.phpPostMaxSize,this.phpUploadMaxFilesize);i=i<t.BOX_MIN_CHUNK_SIZE?t.BOX_MIN_CHUNK_SIZE:i;i=i>s?s:i}return i}},{key:"isModernBrowser",value:function e(){return typeof fetch!=="undefined"}},{key:"assignInput",value:function e(){var t=this;if(this.inputNode instanceof HTMLInputElement){this.setOnChangeEventListener(this.inputNode)}else if(Array.isArray(this.inputNode)){this.inputNode.forEach((function(e){if(e instanceof HTMLInputElement){t.setOnChangeEventListener(e)}}))}}},{key:"setOnChangeEventListener",value:function e(t){var n=this;t.addEventListener("change",(function(e){n.addFilesFromEvent(e)}),false)}},{key:"assignDrop",value:function e(){var t=this;if(this.dropNode instanceof HTMLElement){this.setDropEventListener(this.dropNode)}else if(Array.isArray(this.dropNode)){this.dropNode.forEach((function(e){if(e instanceof HTMLElement){t.setDropEventListener(e)}}))}}},{key:"setDropEventListener",value:function e(t){var n=this;t.addEventListener("drop",(function(e){e.preventDefault();e.stopPropagation();Array.from(e.dataTransfer.files).forEach((function(e){n.emitSelectedFile(e)}))}),false)}},{key:"emitSelectedFile",value:function e(t){var n=this;var r={file:t};this.getPreview(t).then((function(e){if(e){r["previewData"]=e.blob;r["previewDataWidth"]=e.width;r["previewDataHeight"]=e.height;if(n.fileMaxWidth||n.fileMaxHeight){var t=n.fileMaxWidth===null?false:n.fileMaxWidth<r["previewDataWidth"];var i=n.fileMaxHeight===null?false:n.fileMaxHeight<r["previewDataHeight"];if(t||i){var s={maxWidth:n.fileMaxWidth,maxHeight:n.fileMaxHeight,fileWidth:r["previewDataWidth"],fileHeight:r["previewDataHeight"]};n.emit("onFileMaxResolutionExceeded",s);return false}}}n.emit("onSelectFile",r)}))["catch"]((function(e){console.warn("Couldn't get preview for file ".concat(t.name,". Error: ").concat(e));n.emit("onSelectFile",r)}))}},{key:"getImageDimensions",value:function e(t){return new Promise((function(e,n){if(!t){n("getImageDimensions: fileBlob can't be empty")}var r=new Image;r.onload=function(){e({blob:t,width:r.width,height:r.height})};r.onerror=function(){n()};r.src=URL.createObjectURL(t)}))}}],[{key:"getVideoPreviewBlob",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return new Promise((function(e,r){var i=document.createElement("video");i.setAttribute("src",URL.createObjectURL(t));i.load();i.addEventListener("error",(function(e){r("Error while loading video file",e)}));i.addEventListener("loadedmetadata",(function(){if(i.duration<n){n=0}i.currentTime=n;i.addEventListener("seeked",(function(){var t=document.createElement("canvas");t.width=i.videoWidth;t.height=i.videoHeight;var n=t.getContext("2d");n.drawImage(i,0,0,t.width,t.height);n.canvas.toBlob((function(t){return e(t)}),"image/jpeg",1)}))}))}))}}]);return t}(t.EventEmitter);babelHelpers.defineProperty(i,"STATUSES",{PENDING:0,PROGRESS:1,DONE:2,CANCELLED:3,FAILED:4});babelHelpers.defineProperty(i,"BOX_MIN_CHUNK_SIZE",1024*1024);babelHelpers.defineProperty(i,"CLOUD_MIN_CHUNK_SIZE",1024*1024*5);babelHelpers.defineProperty(i,"CLOUD_MAX_CHUNK_SIZE",1024*1024*100);e.Uploader=i})(this.BX.Messenger.Lib=this.BX.Messenger.Lib||{},BX.Event,BX);this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e){"use strict";
/**
	 * Bitrix Messenger
	 * Clipboard manager
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var t=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"copy",value:function t(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var r=e.getStore();if(n){r.focus();r.value=n;r.selectionStart=0;document.execCommand("copy")}else{document.execCommand("copy");r.focus();document.execCommand("paste");n=r.value}e.removeStore();return n}},{key:"getStore",value:function t(){if(e.store){return e.store}e.store=document.createElement("textarea");e.store.style="position: absolute; opacity: 0; top: -1000px; left: -1000px;";document.body.insertBefore(e.store,document.body.firstChild);return e.store}},{key:"removeStore",value:function t(){if(!e.store){return true}document.body.removeChild(e.store);e.store=null;return true}}]);return e}();t.store=null;e.Clipboard=t})(this.BX.Messenger.Lib=this.BX.Messenger.Lib||{});this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e,t,n,r,i,s,o,a,l){"use strict";var u=function(){function e(t){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"messagesToSend",[]);babelHelpers.defineProperty(this,"store",null);babelHelpers.defineProperty(this,"restClient",null);babelHelpers.defineProperty(this,"loc",null);this.controller=t.Data.get("controller");this.store=this.controller.store;this.restClient=t.RestClient.get();this.loc=t.Loc.messages;this.onSendMessageHandler=this.onSendMessage.bind(this);this.onClickOnMessageRetryHandler=this.onClickOnMessageRetry.bind(this);this.onClickOnCommandHandler=this.onClickOnCommand.bind(this);this.onClickOnKeyboardHandler=this.onClickOnKeyboard.bind(this);s.EventEmitter.subscribe(o.EventType.textarea.sendMessage,this.onSendMessageHandler);s.EventEmitter.subscribe(o.EventType.dialog.clickOnMessageRetry,this.onClickOnMessageRetryHandler);s.EventEmitter.subscribe(o.EventType.dialog.clickOnCommand,this.onClickOnCommandHandler);s.EventEmitter.subscribe(o.EventType.dialog.clickOnKeyboardButton,this.onClickOnKeyboardHandler)}babelHelpers.createClass(e,[{key:"onSendMessage",value:function e(t){var n=t.data;if(!n.text&&!n.file){return false}this.sendMessage(n.text,n.file)}},{key:"sendMessage",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!n&&!r){return false}var i=this.store.getters["dialogues/getQuoteId"](this.getDialogId());if(i){var a=this.store.getters["messages/getMessage"](this.getChatId(),i);if(a){n=this.getMessageTextWithQuote(a,n);s.EventEmitter.emit(o.EventType.dialog.quotePanelClose)}}if(!this.controller.application.isUnreadMessagesLoaded()){this.sendMessageToServer({id:0,chatId:this.getChatId(),dialogId:this.getDialogId(),text:n,file:r});this.processQueue();return true}var l={};if(r){l.FILE_ID=[r.id]}this.addMessageToModel({text:n,params:l,sending:!r}).then((function(e){s.EventEmitter.emit(o.EventType.dialog.scrollToBottom,{chatId:t.getChatId(),cancelIfScrollChange:true});t.addMessageToQueue({messageId:e,text:n,file:r});t.processQueue()}))}},{key:"processQueue",value:function e(){var t=this;this.messagesToSend.filter((function(e){return!e.sending})).forEach((function(e){t.deleteFromQueue(e.id);e.sending=true;if(e.file){s.EventEmitter.emit(o.EventType.textarea.stopWriting);s.EventEmitter.emit(o.EventType.uploader.addMessageWithFile,e)}else{t.sendMessageToServer(e)}}))}},{key:"addMessageToModel",value:function e(t){var n=t.text,r=t.params,i=t.sending;return this.store.dispatch("messages/add",{chatId:this.getChatId(),authorId:this.getUserId(),text:n,params:r,sending:i})}},{key:"addMessageToQueue",value:function e(t){var n=t.messageId,r=t.text,i=t.file;this.messagesToSend.push({id:n,chatId:this.getChatId(),dialogId:this.getDialogId(),text:r,file:i,sending:false})}},{key:"sendMessageToServer",value:function e(t){var n=this;s.EventEmitter.emit(o.EventType.textarea.stopWriting);this.restClient.callMethod(o.RestMethod.imMessageAdd,{TEMPLATE_ID:t.id,DIALOG_ID:t.dialogId,MESSAGE:t.text},null,null).then((function(e){n.controller.executeRestAnswer(o.RestMethodHandler.imMessageAdd,e,t)}))["catch"]((function(e){n.controller.executeRestAnswer(o.RestMethodHandler.imMessageAdd,e,t);a.Logger.warn("SendMessageHandler: error during adding message",e)}))}},{key:"onClickOnMessageRetry",value:function e(t){var n=t.data;this.retrySendMessage(n.message)}},{key:"retrySendMessage",value:function e(t){this.addMessageToQueue({messageId:t.id,text:t.text,file:null});this.setSendingMessageFlag(t.id);this.processQueue()}},{key:"setSendingMessageFlag",value:function e(t){this.store.dispatch("messages/actionStart",{id:t,chatId:this.getChatId()})}},{key:"deleteFromQueue",value:function e(t){this.messagesToSend=this.messagesToSend.filter((function(e){return e.id!==t}))}},{key:"onClickOnCommand",value:function e(t){var n=t.data;if(n.type==="put"){this.handlePutAction(n.value)}else if(n.type==="send"){this.handleSendAction(n.value)}else{a.Logger.warn("SendMessageHandler: Unprocessed command",n)}}},{key:"onClickOnKeyboard",value:function e(t){var n=t.data;if(n.action==="ACTION"){var r=n.params,i=r.action,s=r.value;this.handleKeyboardAction(i,s)}if(n.action==="COMMAND"){var a=n.params,l=a.dialogId,u=a.messageId,c=a.botId,f=a.command,d=a.params;this.restClient.callMethod(o.RestMethod.imMessageCommand,{MESSAGE_ID:u,DIALOG_ID:l,BOT_ID:c,COMMAND:f,COMMAND_PARAMS:d})["catch"]((function(e){return console.error("SendMessageHandler: command processing error",e)}))}}},{key:"handleKeyboardAction",value:function e(n,r){switch(n){case"SEND":{this.handleSendAction(r);break}case"PUT":{this.handlePutAction(r);break}case"CALL":{break}case"COPY":{t.Clipboard.copy(r);BX.UI.Notification.Center.notify({content:this.loc["IM_DIALOG_CLIPBOARD_COPY_SUCCESS"],autoHideDelay:4e3});break}case"DIALOG":{break}default:{console.error("SendMessageHandler: unknown keyboard action")}}}},{key:"handlePutAction",value:function e(t){s.EventEmitter.emit(o.EventType.textarea.insertText,{text:"".concat(t," ")})}},{key:"handleSendAction",value:function e(t){var n=this;this.sendMessage(t);setTimeout((function(){s.EventEmitter.emit(o.EventType.dialog.scrollToBottom,{chatId:n.getChatId(),duration:300,cancelIfScrollChange:false})}),300)}},{key:"getMessageTextWithQuote",value:function e(t,n){var r=null;if(t.authorId){r=this.store.getters["users/get"](t.authorId)}var s=this.store.getters["files/getList"](this.getChatId());var o="-".repeat(54);var a=r&&r.name?r.name:this.loc["IM_QUOTE_PANEL_DEFAULT_TITLE"];var l=i.Utils.date.format(t.date,null,this.loc);var u=i.Utils.text.quote(t.text,t.params,s,this.loc);var c=[];c.push(o);c.push("".concat(a," [").concat(l,"]"));c.push(u);c.push(o);c.push(n);return c.join("\n")}},{key:"getChatId",value:function e(){return this.store.state.application.dialog.chatId}},{key:"getDialogId",value:function e(){return this.store.state.application.dialog.dialogId}},{key:"getUserId",value:function e(){return this.store.state.application.common.userId}},{key:"destroy",value:function e(){s.EventEmitter.unsubscribe(o.EventType.textarea.sendMessage,this.onSendMessageHandler);s.EventEmitter.unsubscribe(o.EventType.dialog.clickOnMessageRetry,this.onClickOnMessageRetryHandler);s.EventEmitter.unsubscribe(o.EventType.dialog.clickOnCommand,this.onClickOnCommandHandler);s.EventEmitter.unsubscribe(o.EventType.dialog.clickOnKeyboardButton,this.onClickOnKeyboardHandler)}}]);return e}();var c=function(){function e(t){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"messagesToRead",{});babelHelpers.defineProperty(this,"timer",null);babelHelpers.defineProperty(this,"store",null);babelHelpers.defineProperty(this,"restClient",null);this.store=t.Data.get("controller").store;this.restClient=t.RestClient.get();this.timer=new n.Timer;this.onReadMessageHandler=this.onReadMessage.bind(this);s.EventEmitter.subscribe(o.EventType.dialog.readMessage,this.onReadMessageHandler)}babelHelpers.createClass(e,[{key:"onReadMessage",value:function e(t){var n=t.data,r=n.id,i=r===void 0?null:r,s=n.skipTimer,o=s===void 0?false:s,a=n.skipAjax,l=a===void 0?false:a;return this.readMessage(i,o,l)}},{key:"readMessage",value:function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=this.getChatId();if(t){if(!this.messagesToRead[s]){this.messagesToRead[s]=[]}this.messagesToRead[s].push(Number.parseInt(t,10))}this.timer.stop("readMessage",s,true);this.timer.stop("readMessageServer",s,true);if(r){return this.processMessagesToRead(s,i)}return new Promise((function(e,t){n.timer.start("readMessage",s,.1,(function(){n.processMessagesToRead(s,i).then((function(t){return e(t)}))["catch"](t)}))}))}},{key:"processMessagesToRead",value:function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=this.getMaxMessageIdFromQueue(t);delete this.messagesToRead[t];if(i<=0){return Promise.resolve()}return new Promise((function(e,s){n.readMessageOnClient(t,i).then((function(e){return n.decreaseChatCounter(t,e.count)})).then((function(){if(r){return e({chatId:t,lastId:i})}n.timer.start("readMessageServer",t,.5,(function(){n.readMessageOnServer(t,i).then((function(){e({chatId:t,lastId:i})}))["catch"](s)}))}))["catch"]((function(e){a.Logger.error("Reading messages error",e);s()}))}))}},{key:"getMaxMessageIdFromQueue",value:function e(t){var n=0;if(!this.messagesToRead[t]){return n}this.messagesToRead[t].forEach((function(e){if(n<e){n=e}}));return n}},{key:"readMessageOnClient",value:function e(t,n){return this.store.dispatch("messages/readMessages",{chatId:t,readId:n})}},{key:"readMessageOnServer",value:function e(t,n){return this.restClient.callMethod(o.RestMethod.imDialogRead,{DIALOG_ID:this.getDialogIdByChatId(t),MESSAGE_ID:n})}},{key:"decreaseChatCounter",value:function e(t,n){return this.store.dispatch("dialogues/decreaseCounter",{dialogId:this.getDialogIdByChatId(t),count:n})}},{key:"getChatId",value:function e(){return this.store.state.application.dialog.chatId}},{key:"getDialogIdByChatId",value:function e(t){var n=this.store.getters["dialogues/getByChatId"](t);if(!n){return 0}return n.dialogId}},{key:"getDialogId",value:function e(){return this.store.state.application.dialog.dialogId}},{key:"destroy",value:function e(){s.EventEmitter.unsubscribe(o.EventType.dialog.readMessage,this.onReadMessageHandler)}}]);return e}();var f=function(){function e(t){babelHelpers.classCallCheck(this,e);this.store=t.Data.get("controller").store;this.restClient=t.RestClient.get();this.onSetMessageReactionHandler=this.onSetMessageReaction.bind(this);this.onOpenMessageReactionListHandler=this.onOpenMessageReactionList.bind(this);s.EventEmitter.subscribe(o.EventType.dialog.setMessageReaction,this.onSetMessageReactionHandler);s.EventEmitter.subscribe(o.EventType.dialog.openMessageReactionList,this.onOpenMessageReactionListHandler)}babelHelpers.createClass(e,[{key:"onSetMessageReaction",value:function e(t){var n=t.data;this.reactToMessage(n.message.id,n.reaction)}},{key:"onOpenMessageReactionList",value:function e(t){var n=t.data;this.openMessageReactionList(n.message.id,n.values)}},{key:"reactToMessage",value:function t(n,r){var i=r.action||e.actions.auto;if(i!==e.actions.auto){i=i===e.actions.set?e.actions.plus:e.actions.minus}this.restClient.callMethod(o.RestMethod.imMessageLike,{MESSAGE_ID:n,ACTION:i})}},{key:"openMessageReactionList",value:function e(t,n){a.Logger.warn("Message reaction list not implemented yet!",t,n)}},{key:"destroy",value:function e(){s.EventEmitter.unsubscribe(o.EventType.dialog.setMessageReaction,this.onSetMessageReactionHandler);s.EventEmitter.unsubscribe(o.EventType.dialog.openMessageReactionList,this.onOpenMessageReactionListHandler)}}]);return e}();babelHelpers.defineProperty(f,"types",{none:"none",like:"like",kiss:"kiss",laugh:"laugh",wonder:"wonder",cry:"cry",angry:"angry"});babelHelpers.defineProperty(f,"actions",{auto:"auto",plus:"plus",minus:"minus",set:"set"});var d=function(){function e(t){babelHelpers.classCallCheck(this,e);this.store=t.Data.get("controller").store;this.onQuoteMessageHandler=this.onQuoteMessage.bind(this);this.onQuotePanelCloseHandler=this.onQuotePanelClose.bind(this);s.EventEmitter.subscribe(o.EventType.dialog.quoteMessage,this.onQuoteMessageHandler);s.EventEmitter.subscribe(o.EventType.dialog.quotePanelClose,this.onQuotePanelCloseHandler)}babelHelpers.createClass(e,[{key:"onQuoteMessage",value:function e(t){var n=t.data;this.quoteMessage(n.message.id)}},{key:"onQuotePanelClose",value:function e(){this.clearQuote()}},{key:"quoteMessage",value:function e(t){this.store.dispatch("dialogues/update",{dialogId:this.getDialogId(),fields:{quoteId:t}})}},{key:"clearQuote",value:function e(){this.store.dispatch("dialogues/update",{dialogId:this.getDialogId(),fields:{quoteId:0}})}},{key:"getDialogId",value:function e(){return this.store.state.application.dialog.dialogId}},{key:"destroy",value:function e(){s.EventEmitter.unsubscribe(o.EventType.dialog.quoteMessage,this.onQuoteMessageHandler);s.EventEmitter.unsubscribe(o.EventType.dialog.quotePanelClose,this.onQuotePanelCloseHandler)}}]);return e}();var h=function(){function e(t){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"store",null);babelHelpers.defineProperty(this,"restClient",null);babelHelpers.defineProperty(this,"timer",null);this.store=t.Data.get("controller").store;this.restClient=t.RestClient.get();this.timer=new n.Timer;this.subscribeToEvents()}babelHelpers.createClass(e,[{key:"subscribeToEvents",value:function e(){this.onStartWritingHandler=this.onStartWriting.bind(this);this.onStopWritingHandler=this.onStopWriting.bind(this);this.onAppButtonClickHandler=this.onAppButtonClick.bind(this);this.onFocusHandler=this.onFocus.bind(this);this.onBlurHandler=this.onBlur.bind(this);this.onKeyUpHandler=this.onKeyUp.bind(this);this.onEditHandler=this.onEdit.bind(this);s.EventEmitter.subscribe(o.EventType.textarea.startWriting,this.onStartWritingHandler);s.EventEmitter.subscribe(o.EventType.textarea.stopWriting,this.onStopWritingHandler);s.EventEmitter.subscribe(o.EventType.textarea.appButtonClick,this.onAppButtonClickHandler);s.EventEmitter.subscribe(o.EventType.textarea.focus,this.onFocusHandler);s.EventEmitter.subscribe(o.EventType.textarea.blur,this.onBlurHandler);s.EventEmitter.subscribe(o.EventType.textarea.keyUp,this.onKeyUpHandler);s.EventEmitter.subscribe(o.EventType.textarea.edit,this.onEditHandler)}},{key:"onStartWriting",value:function e(){this.startWriting()}},{key:"onStopWriting",value:function e(){this.stopWriting()}},{key:"onAppButtonClick",value:function e(){}},{key:"onFocus",value:function e(){}},{key:"onBlur",value:function e(){}},{key:"onKeyUp",value:function e(){}},{key:"onEdit",value:function e(){}},{key:"startWriting",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getDialogId();if(i.Utils.dialog.isEmptyDialogId(n)||this.timer.has("writes",n)){return false}this.timer.start("writes",n,28);this.timer.start("writesSend",n,5,(function(){t.restClient.callMethod(o.RestMethod.imDialogWriting,{DIALOG_ID:n})["catch"]((function(){t.timer.stop("writes",n)}))}))}},{key:"stopWriting",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getDialogId();this.timer.stop("writes",t,true);this.timer.stop("writesSend",t,true)}},{key:"getChatId",value:function e(){return this.store.state.application.dialog.chatId}},{key:"getDialogId",value:function e(){return this.store.state.application.dialog.dialogId}},{key:"getUserId",value:function e(){return this.store.state.application.common.userId}},{key:"getDiskFolderId",value:function e(){return this.store.state.application.dialog.diskFolderId}},{key:"destroy",value:function e(){s.EventEmitter.unsubscribe(o.EventType.textarea.startWriting,this.onStartWritingHandler);s.EventEmitter.unsubscribe(o.EventType.textarea.stopWriting,this.onStopWritingHandler);s.EventEmitter.unsubscribe(o.EventType.textarea.appButtonClick,this.onAppButtonClickHandler);s.EventEmitter.unsubscribe(o.EventType.textarea.focus,this.onFocusHandler);s.EventEmitter.unsubscribe(o.EventType.textarea.blur,this.onBlurHandler);s.EventEmitter.unsubscribe(o.EventType.textarea.keyUp,this.onKeyUpHandler);s.EventEmitter.unsubscribe(o.EventType.textarea.edit,this.onEditHandler)}}]);return e}();var p=function(){function e(t){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"controller",null);babelHelpers.defineProperty(this,"restClient",null);babelHelpers.defineProperty(this,"uploader",null);babelHelpers.defineProperty(this,"isRequestingDiskFolderId",false);this.controller=t.Data.get("controller");this.restClient=t.RestClient.get();this.initUploader();this.onTextareaFileSelectedHandler=this.onTextareaFileSelected.bind(this);this.addMessageWithFileHandler=this.addMessageWithFile.bind(this);this.onClickOnUploadCancelHandler=this.onClickOnUploadCancel.bind(this);s.EventEmitter.subscribe(o.EventType.textarea.fileSelected,this.onTextareaFileSelectedHandler);s.EventEmitter.subscribe(o.EventType.uploader.addMessageWithFile,this.addMessageWithFileHandler);s.EventEmitter.subscribe(o.EventType.dialog.clickOnUploadCancel,this.onClickOnUploadCancelHandler)}babelHelpers.createClass(e,[{key:"initUploader",value:function e(){this.uploader=new r.Uploader({generatePreview:true,sender:this.getUploaderSenderOptions()});this.uploader.subscribe("onStartUpload",this.onStartUploadHandler.bind(this));this.uploader.subscribe("onProgress",this.onProgressHandler.bind(this));this.uploader.subscribe("onSelectFile",this.onSelectFileHandler.bind(this));this.uploader.subscribe("onComplete",this.onCompleteHandler.bind(this));this.uploader.subscribe("onUploadFileError",this.onUploadFileErrorHandler.bind(this));this.uploader.subscribe("onCreateFileError",this.onCreateFileErrorHandler.bind(this))}},{key:"commitFile",value:function e(t,n){var r=this;this.restClient.callMethod(o.RestMethod.imDiskFileCommit,{chat_id:t.chatId,upload_id:t.uploadId,message:t.messageText,template_id:t.messageId,file_template_id:t.fileId},null,null).then((function(e){r.controller.executeRestAnswer(o.RestMethodHandler.imDiskFileCommit,e,n)}))["catch"]((function(e){r.controller.executeRestAnswer(o.RestMethodHandler.imDiskFileCommit,e,n)}));return true}},{key:"setUploadError",value:function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this.controller.store.dispatch("files/update",{chatId:t,id:n,fields:{status:o.FileStatus.error,progress:0}});if(r){this.controller.store.dispatch("messages/actionError",{chatId:t,id:r,retry:false})}}},{key:"onTextareaFileSelected",value:function e(t){var n=t.data;var r=n&&n.fileChangeEvent&&n.fileChangeEvent.target.files.length>0?n.fileChangeEvent:"";if(!r){return false}this.uploadFile(r)}},{key:"addMessageWithFile",value:function e(t){var n=this;var r=t.getData();if(!this.getDiskFolderId()){this.requestDiskFolderId(r.chatId).then((function(){n.addMessageWithFile(t)}))["catch"]((function(e){a.Logger.error("addMessageWithFile error",e);return false}));return false}this.uploader.addTask({taskId:r.file.id,fileData:r.file.source.file,fileName:r.file.source.file.name,generateUniqueName:true,diskFolderId:this.getDiskFolderId(),previewBlob:r.file.previewBlob})}},{key:"uploadFile",value:function e(t){if(!t){return false}this.uploader.addFilesFromEvent(t)}},{key:"destroy",value:function e(){if(this.uploader){this.uploader.unsubscribeAll()}s.EventEmitter.unsubscribe(o.EventType.textarea.fileSelected,this.onTextareaFileSelectedHandler);s.EventEmitter.unsubscribe(o.EventType.uploader.addMessageWithFile,this.addMessageWithFileHandler);s.EventEmitter.unsubscribe(o.EventType.dialog.clickOnUploadCancel,this.onClickOnUploadCancelHandler)}},{key:"getChatId",value:function e(){return this.controller.store.state.application.dialog.chatId}},{key:"getDialogId",value:function e(){return this.controller.store.state.application.dialog.dialogId}},{key:"getDiskFolderId",value:function e(){return this.controller.store.state.application.dialog.diskFolderId}},{key:"getCurrentUser",value:function e(){return this.controller.store.getters["users/get"](this.controller.store.state.application.common.userId,true)}},{key:"getMessageByFileId",value:function e(t,n){var r=this.controller.store.getters["messages/get"](this.getChatId());var i=r.find((function(e){var n;if(l.Type.isArray((n=e.params)===null||n===void 0?void 0:n.FILE_ID)){return e.params.FILE_ID.includes(t)}return false}));if(!i){return}return{id:i.id,chatId:i.chatId,dialogId:this.getDialogId(),text:i.text,file:{id:t,source:n,previewBlob:n.previewData},sending:true}}},{key:"requestDiskFolderId",value:function e(t){var n=this;return new Promise((function(e,r){if(n.isRequestingDiskFolderId||n.getDiskFolderId()){n.isRequestingDiskFolderId=false;e();return}n.isRequestingDiskFolderId=true;n.restClient.callMethod(o.RestMethod.imDiskFolderGet,{chat_id:t}).then((function(t){n.isRequestingDiskFolderId=false;n.controller.executeRestAnswer(o.RestMethodHandler.imDiskFolderGet,t);e()}))["catch"]((function(e){n.isRequestingDiskFolderId=false;n.controller.executeRestAnswer(o.RestMethodHandler.imDiskFolderGet,e);r(e)}))}))}},{key:"onStartUploadHandler",value:function e(t){var n=t.getData();a.Logger.log("Uploader: onStartUpload",n);this.controller.store.dispatch("files/update",{chatId:this.getChatId(),id:n.id,fields:{status:o.FileStatus.upload,progress:0}})}},{key:"onProgressHandler",value:function e(t){var n=t.getData();a.Logger.log("Uploader: onProgress",n);this.controller.store.dispatch("files/update",{chatId:this.getChatId(),id:n.id,fields:{status:o.FileStatus.upload,progress:n.progress===100?99:n.progress}})}},{key:"onSelectFileHandler",value:function e(t){var n=t.getData();var r=n.file;a.Logger.log("Uploader: onSelectFile",n);var i="file";if(r.type.toString().startsWith("image")){i="image"}else if(r.type.toString().startsWith("video")){i="video"}this.controller.store.dispatch("files/add",{chatId:this.getChatId(),authorId:this.getCurrentUser().id,name:r.name,type:i,extension:r.name.split(".").splice(-1)[0],size:r.size,image:!n.previewData?false:{width:n.previewDataWidth,height:n.previewDataHeight},status:o.FileStatus.progress,progress:0,authorName:this.getCurrentUser().name,urlPreview:n.previewData?URL.createObjectURL(n.previewData):""}).then((function(e){s.EventEmitter.emit(o.EventType.textarea.sendMessage,{text:"",file:{id:e,source:n,previewBlob:n.previewData}})}))}},{key:"onCompleteHandler",value:function e(t){var n=t.getData();a.Logger.log("Uploader: onComplete",n);this.controller.store.dispatch("files/update",{chatId:this.getChatId(),id:n.id,fields:{status:o.FileStatus.wait,progress:100}});var r=this.getMessageByFileId(n.id,n);var i=this.controller.store.getters["files/get"](this.getChatId(),r.file.id,true).type;this.commitFile({chatId:this.getChatId(),uploadId:n.result.data.file.id,messageText:r.text,messageId:r.id,fileId:r.file.id,fileType:i},r)}},{key:"onUploadFileErrorHandler",value:function e(t){var n=t.getData();a.Logger.log("Uploader: onUploadFileError",n);var r=this.getMessageByFileId(n.id,n);if(r){this.setUploadError(this.getChatId(),r.file.id,r.id)}}},{key:"onCreateFileErrorHandler",value:function e(t){var n=t.getData();a.Logger.log("Uploader: onCreateFileError",n);var r=this.getMessageByFileId(n.id,n);if(r){this.setUploadError(this.getChatId(),r.file.id,r.id)}}},{key:"onClickOnUploadCancel",value:function e(t){var n=this;var r=t.data;var i=r.file.id;var s=r.file;var o=this.getMessageByFileId(i,s);if(!o){return}this.uploader.deleteTask(i);this.controller.store.dispatch("messages/delete",{chatId:this.getChatId(),id:o.id}).then((function(){n.controller.store.dispatch("files/delete",{chatId:n.getChatId(),id:o.file.id})}))}},{key:"getActionCommitFile",value:function e(){return null}},{key:"getActionUploadChunk",value:function e(){return null}},{key:"getUploaderSenderOptions",value:function e(){return{actionUploadChunk:this.getActionUploadChunk(),actionCommitFile:this.getActionCommitFile()}}}]);return e}();var m=function(e){babelHelpers.inherits(t,e);function t(e){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"isDragging",false);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"minimumHeight",120);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"maximumHeight",400);n.setEventNamespace("BX.IM.TextareaDragHandler");n.subscribeToEvents(e);if(i.Utils.device.isMobile()){n.maximumHeight=200}return n}babelHelpers.createClass(t,[{key:"subscribeToEvents",value:function e(t){var n=this;var r=l.Type.isObject(t)?t:{};Object.entries(r).forEach((function(e){var t=babelHelpers.slicedToArray(e,2),r=t[0],i=t[1];if(l.Type.isFunction(i)){n.subscribe(r,i)}}))}},{key:"onStartDrag",value:function e(t,n){if(this.isDragging){return}this.isDragging=true;t=t.changedTouches?t.changedTouches[0]:t;this.textareaDragCursorStartPoint=t.clientY;this.textareaDragHeightStartPoint=n;this.addTextareaDragEvents()}},{key:"onTextareaContinueDrag",value:function e(n){if(!this.isDragging){return}n=n.changedTouches?n.changedTouches[0]:n;this.textareaDragCursorControlPoint=n.clientY;var r=Math.min(this.textareaDragHeightStartPoint+this.textareaDragCursorStartPoint-this.textareaDragCursorControlPoint,this.maximumHeight);var i=Math.max(r,this.minimumHeight);this.emit(t.events.onHeightChange,{newHeight:i})}},{key:"onTextareaStopDrag",value:function e(){if(!this.isDragging){return}this.isDragging=false;this.removeTextareaDragEvents();this.emit(t.events.onStopDrag)}},{key:"addTextareaDragEvents",value:function e(){this.onContinueDragHandler=this.onTextareaContinueDrag.bind(this);this.onStopDragHandler=this.onTextareaStopDrag.bind(this);document.addEventListener("mousemove",this.onContinueDragHandler);document.addEventListener("touchmove",this.onContinueDragHandler);document.addEventListener("touchend",this.onStopDragHandler);document.addEventListener("mouseup",this.onStopDragHandler);document.addEventListener("mouseleave",this.onStopDragHandler)}},{key:"removeTextareaDragEvents",value:function e(){document.removeEventListener("mousemove",this.onContinueDragHandler);document.removeEventListener("touchmove",this.onContinueDragHandler);document.removeEventListener("touchend",this.onStopDragHandler);document.removeEventListener("mouseup",this.onStopDragHandler);document.removeEventListener("mouseleave",this.onStopDragHandler)}},{key:"destroy",value:function e(){this.removeTextareaDragEvents()}}]);return t}(s.EventEmitter);babelHelpers.defineProperty(m,"events",{onHeightChange:"onHeightChange",onStopDrag:"onStopDrag"});var g=function(){function e(t){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"restClient",null);this.restClient=t.RestClient.get();this.subscribeToEvents()}babelHelpers.createClass(e,[{key:"subscribeToEvents",value:function e(){this.clickOnMentionHandler=this.onClickOnMention.bind(this);this.clickOnUserNameHandler=this.onClickOnUserName.bind(this);this.clickOnMessageMenuHandler=this.onClickOnMessageMenu.bind(this);this.clickOnReadListHandler=this.onClickOnReadList.bind(this);this.clickOnChatTeaserHandler=this.onClickOnChatTeaser.bind(this);this.clickOnDialogHandler=this.onClickOnDialog.bind(this);s.EventEmitter.subscribe(o.EventType.dialog.clickOnMention,this.clickOnMentionHandler);s.EventEmitter.subscribe(o.EventType.dialog.clickOnUserName,this.clickOnUserNameHandler);s.EventEmitter.subscribe(o.EventType.dialog.clickOnMessageMenu,this.clickOnMessageMenuHandler);s.EventEmitter.subscribe(o.EventType.dialog.clickOnReadList,this.clickOnReadListHandler);s.EventEmitter.subscribe(o.EventType.dialog.clickOnChatTeaser,this.clickOnChatTeaserHandler);s.EventEmitter.subscribe(o.EventType.dialog.clickOnDialog,this.clickOnDialogHandler)}},{key:"onClickOnMention",value:function e(t){var n=t.data;if(n.type==="USER"){a.Logger.warn("DialogActionHandler: open user profile",n)}else if(n.type==="CHAT"){a.Logger.warn("DialogActionHandler: open dialog from mention click",n)}else if(n.type==="CALL"){a.Logger.warn("DialogActionHandler: open phone menu",n)}}},{key:"onClickOnUserName",value:function e(t){var n=t.data;s.EventEmitter.emit(o.EventType.textarea.insertText,{text:"".concat(n.user.name,", ")})}},{key:"onClickOnMessageMenu",value:function e(t){var n=t.data;a.Logger.warn("DialogActionHandler: open message menu",n)}},{key:"onClickOnReadList",value:function e(t){var n=t.data;a.Logger.warn("DialogActionHandler: open read list",n)}},{key:"onClickOnChatTeaser",value:function e(t){var n=t.data;this.joinParentChat(n.message.id,"chat".concat(n.message.params.CHAT_ID)).then((function(e){a.Logger.warn("DialogActionHandler: open dialog from teaser click",e)}))["catch"]((function(e){console.error("DialogActionHandler: error joining parent chat",e)}))}},{key:"onClickOnDialog",value:function e(){a.Logger.warn("DialogActionHandler: click on dialog")}},{key:"joinParentChat",value:function e(t,n){var r=this;return new Promise((function(e,i){if(!t||!n){return i()}if(typeof r.tempJoinChat==="undefined"){r.tempJoinChat={}}else if(r.tempJoinChat["wait"]){return i()}r.tempJoinChat["wait"]=true;r.restClient.callMethod(o.RestMethod.imChatParentJoin,{DIALOG_ID:n,MESSAGE_ID:t}).then((function(){r.tempJoinChat["wait"]=false;r.tempJoinChat[n]=true;return e(n)}))["catch"]((function(){r.tempJoinChat["wait"]=false;return i()}))}))}},{key:"unsubscribeEvents",value:function e(){s.EventEmitter.unsubscribe(o.EventType.dialog.clickOnMention,this.clickOnMentionHandler);s.EventEmitter.unsubscribe(o.EventType.dialog.clickOnUserName,this.clickOnUserNameHandler);s.EventEmitter.unsubscribe(o.EventType.dialog.clickOnMessageMenu,this.clickOnMessageMenuHandler);s.EventEmitter.unsubscribe(o.EventType.dialog.clickOnReadList,this.clickOnReadListHandler);s.EventEmitter.unsubscribe(o.EventType.dialog.clickOnChatTeaser,this.clickOnChatTeaserHandler);s.EventEmitter.unsubscribe(o.EventType.dialog.clickOnDialog,this.clickOnDialogHandler)}},{key:"destroy",value:function e(){this.unsubscribeEvents()}}]);return e}();var v=l.Reflection.getClass("BX.Messenger");if(v){v.ReadingHandler=c;v.ReactionHandler=f;v.QuoteHandler=d}e.TextareaHandler=h;e.TextareaDragHandler=m;e.TextareaUploadHandler=p;e.SendMessageHandler=u;e.ReadingHandler=c;e.ReactionHandler=f;e.QuoteHandler=d;e.DialogActionHandler=g})(this.BX.Messenger.EventHandler=this.BX.Messenger.EventHandler||{},BX.Messenger.Lib,BX.Messenger.Lib,BX.Messenger.Lib,BX.Messenger.Lib,BX.Event,BX.Messenger.Const,BX.Messenger.Lib,BX);(function(e,t,n,r,i){"use strict";function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=function(){function e(t){babelHelpers.classCallCheck(this,e);if(typeof t!=="undefined"){this.restClient=t}else{this.restClient=new BX.RestClient}this.db=new i.Dexie("bx-ui-smiles");this.db.version(1).stores({sets:"id, parentId, name, type, image",smiles:"id, setId, name, image, typing, width, height, originalWidth, originalHeight, definition"})}babelHelpers.createClass(e,[{key:"loadFromCache",value:function e(){var t=this;var n=new BX.Promise;var r=[];var i=[];this.db.transaction("r",this.db.sets,this.db.smiles,(function(){t.db.sets.each((function(e){return t.db.smiles.where("setId").equals(e.id).first().then((function(t){r.push(o(o({},e),{},{image:t.image}))}))["catch"]((function(e){return n.reject(e)}))})).then((function(){return t.db.smiles.where("setId").equals(r[0].id).each((function(e){i.push(e)}))})).then((function(){var e={sets:r,smiles:i};n.resolve(e)}))["catch"]((function(e){return n.reject(e)}))}));return n}},{key:"loadFromServer",value:function e(){var t=this;var n=new BX.Promise;this.restClient.callMethod("smile.get").then((function(e){var r=[];var i=[];var s=e.data();var a={};s.smiles=s.smiles.map((function(e){if(!a[e.setId]){a[e.setId]=e.image}var t=e.width;if(e.definition=="HD"){t=t*2}else if(e.definition=="UHD"){t=t*4}var n=e.height;if(e.definition=="HD"){n=n*2}else if(e.definition=="UHD"){n=n*4}return o(o({},e),{},{originalWidth:t,originalHeight:n})}));s.sets.forEach((function(e){r.push(o(o({},e),{},{image:a[e.id]}))}));s.smiles.forEach((function(e){if(e.setId==r[0].id){i.push(e)}}));var l={sets:r,smiles:i};n.resolve(l);t.db.smiles.clear().then((function(){return t.db.sets.clear().then((function(){t.db.sets.bulkAdd(r);t.db.smiles.bulkAdd(s.smiles)}))["catch"]((function(e){return n.reject(e)}))}))["catch"]((function(e){return n.reject(e)}))}))["catch"]((function(e){return n.reject(e)}));return n}},{key:"changeSet",value:function e(t){var n=new BX.Promise;this.db.smiles.where("setId").equals(t).toArray((function(e){n.resolve(e)}))["catch"]((function(e){return n.reject(e)}));return n}}]);return e}();var l=[{id:1,code:"PEOPLE",showForWindows:true,emoji:[{symbol:"\ud83d\ude00"},{symbol:"\ud83d\ude03"},{symbol:"\ud83d\ude04"},{symbol:"\ud83d\ude01"},{symbol:"\ud83d\ude06"},{symbol:"\ud83d\ude05"},{symbol:"\ud83d\ude02"},{symbol:"\ud83e\udd23"},{symbol:"\ud83d\ude0a"},{symbol:"\ud83d\ude07"},{symbol:"\ud83d\ude42"},{symbol:"\ud83d\ude43"},{symbol:"\ud83d\ude09"},{symbol:"\ud83d\ude0c"},{symbol:"\ud83d\ude0d"},{symbol:"\ud83e\udd70"},{symbol:"\ud83d\ude18"},{symbol:"\ud83d\ude17"},{symbol:"\ud83d\ude19"},{symbol:"\ud83d\ude1a"},{symbol:"\ud83d\ude0b"},{symbol:"\ud83d\ude1b"},{symbol:"\ud83d\ude1d"},{symbol:"\ud83d\ude1c"},{symbol:"\ud83e\udd2a"},{symbol:"\ud83e\udd28"},{symbol:"\ud83e\uddd0"},{symbol:"\ud83e\udd13"},{symbol:"\ud83d\ude0e"},{symbol:"\ud83e\udd29"},{symbol:"\ud83e\udd73"},{symbol:"\ud83d\ude0f"},{symbol:"\ud83d\ude12"},{symbol:"\ud83d\ude1e"},{symbol:"\ud83d\ude14"},{symbol:"\ud83d\ude1f"},{symbol:"\ud83d\ude15"},{symbol:"\u2639"},{symbol:"\ud83d\ude41"},{symbol:"\ud83d\ude23"},{symbol:"\ud83d\ude2b"},{symbol:"\ud83d\ude29"},{symbol:"\ud83e\udd7a"},{symbol:"\ud83d\ude22"},{symbol:"\ud83d\ude2d"},{symbol:"\ud83d\ude24"},{symbol:"\ud83d\ude20"},{symbol:"\ud83d\ude21"},{symbol:"\ud83e\udd2c"},{symbol:"\ud83e\udd2f"},{symbol:"\ud83d\ude33"},{symbol:"\ud83e\udd75"},{symbol:"\ud83e\udd76"},{symbol:"\ud83d\ude31"},{symbol:"\ud83d\ude28"},{symbol:"\ud83d\ude30"},{symbol:"\ud83d\ude25"},{symbol:"\ud83d\ude13"},{symbol:"\ud83e\udd17"},{symbol:"\ud83e\udd14"},{symbol:"\ud83e\udd2d"},{symbol:"\ud83e\udd2b"},{symbol:"\ud83e\udd25"},{symbol:"\ud83d\ude36"},{symbol:"\ud83d\ude10"},{symbol:"\ud83d\ude11"},{symbol:"\ud83d\ude2c"},{symbol:"\ud83d\ude44"},{symbol:"\ud83d\ude2f"},{symbol:"\ud83d\ude26"},{symbol:"\ud83d\ude27"},{symbol:"\ud83d\ude2e"},{symbol:"\ud83d\ude32"},{symbol:"\ud83d\ude34"},{symbol:"\ud83e\udd24"},{symbol:"\ud83d\ude2a"},{symbol:"\ud83d\ude35"},{symbol:"\ud83e\udd10"},{symbol:"\ud83e\udd74"},{symbol:"\ud83e\udd22"},{symbol:"\ud83e\udd2e"},{symbol:"\ud83e\udd27"},{symbol:"\ud83d\ude37"},{symbol:"\ud83e\udd12"},{symbol:"\ud83e\udd15"},{symbol:"\ud83e\udd11"},{symbol:"\ud83e\udd20"},{symbol:"\ud83d\ude08"},{symbol:"\ud83d\udc7f"},{symbol:"\ud83d\udc79"},{symbol:"\ud83d\udc7a"},{symbol:"\ud83e\udd21"},{symbol:"\ud83d\udca9"},{symbol:"\ud83d\udc7b"},{symbol:"\u2620"},{symbol:"\ud83d\udc80"},{symbol:"\ud83d\udc7d"},{symbol:"\ud83d\udc7e"},{symbol:"\ud83e\udd16"},{symbol:"\ud83c\udf83"},{symbol:"\ud83d\ude3a"},{symbol:"\ud83d\ude38"},{symbol:"\ud83d\ude39"},{symbol:"\ud83d\ude3b"},{symbol:"\ud83d\ude3c"},{symbol:"\ud83d\ude3d"},{symbol:"\ud83d\ude40"},{symbol:"\ud83d\ude3f"},{symbol:"\ud83d\ude3e"},{symbol:"\ud83e\udd32"},{symbol:"\ud83d\udc50"},{symbol:"\ud83d\ude4c"},{symbol:"\ud83d\udc4f"},{symbol:"\ud83e\udd1d"},{symbol:"\ud83d\udc4d"},{symbol:"\ud83d\udc4e"},{symbol:"\ud83d\udc4a"},{symbol:"\u270a"},{symbol:"\ud83e\udd1b"},{symbol:"\ud83e\udd1c"},{symbol:"\ud83e\udd1e"},{symbol:"\u270c"},{symbol:"\ud83e\udd1f"},{symbol:"\ud83e\udd18"},{symbol:"\ud83d\udc4c"},{symbol:"\ud83d\udc48"},{symbol:"\ud83d\udc49"},{symbol:"\ud83d\udc46"},{symbol:"\ud83d\udc47"},{symbol:"\ud83e\udd1a"},{symbol:"\ud83d\udd90"},{symbol:"\ud83d\udd96"},{symbol:"\ud83d\udc4b"},{symbol:"\ud83e\udd19"},{symbol:"\ud83d\udcaa"},{symbol:"\ud83d\udd95"},{symbol:"\u270d"},{symbol:"\ud83d\ude4f"},{symbol:"\ud83e\uddb6"},{symbol:"\ud83e\uddb5"},{symbol:"\ud83d\udc84"},{symbol:"\ud83d\udc8b"},{symbol:"\ud83d\udc44"},{symbol:"\ud83e\uddb7"},{symbol:"\ud83d\udc45"},{symbol:"\ud83d\udc43"},{symbol:"\ud83d\udc63"},{symbol:"\ud83d\udc41"},{symbol:"\ud83d\udc40"},{symbol:"\ud83e\udde0"},{symbol:"\ud83d\udde3"},{symbol:"\ud83d\udc64"},{symbol:"\ud83d\udc65"},{symbol:"\ud83d\udc76"},{symbol:"\ud83d\udc67"},{symbol:"\ud83e\uddd2"},{symbol:"\ud83d\udc66"},{symbol:"\ud83d\udc69"},{symbol:"\ud83e\uddd1"},{symbol:"\ud83d\udc68"},{symbol:"\ud83d\udc71"},{symbol:"\ud83e\uddd4"},{symbol:"\ud83d\udc75"},{symbol:"\ud83e\uddd3"},{symbol:"\ud83d\udc74"},{symbol:"\ud83d\udc72"},{symbol:"\ud83d\udc73"},{symbol:"\ud83e\uddd5"},{symbol:"\ud83d\udc6e"},{symbol:"\ud83d\udc77"},{symbol:"\ud83d\udc82"},{symbol:"\ud83d\udd75"},{symbol:"\u2695"},{symbol:"\ud83c\udf3e"},{symbol:"\ud83c\udf73"},{symbol:"\ud83c\udf93"},{symbol:"\ud83c\udfa4"},{symbol:"\ud83c\udfeb"},{symbol:"\ud83c\udfed"},{symbol:"\ud83d\udcbb"},{symbol:"\ud83d\udcbc"},{symbol:"\ud83d\udc69"},{symbol:"\u2764"},{symbol:"\ud83d\udd27"},{symbol:"\ud83d\udd2c"},{symbol:"\ud83c\udfa8"},{symbol:"\ud83d\ude92"},{symbol:"\ud83d\ude80"},{symbol:"\ud83d\udc70"},{symbol:"\ud83e\udd35"},{symbol:"\ud83d\udc78"},{symbol:"\ud83e\udd34"},{symbol:"\ud83e\uddb8"},{symbol:"\ud83e\uddb9"},{symbol:"\ud83e\udd36"},{symbol:"\ud83c\udf85"},{symbol:"\ud83e\uddd9"},{symbol:"\ud83e\udddd"},{symbol:"\ud83e\udddb"},{symbol:"\ud83e\udddf"},{symbol:"\ud83e\uddde"},{symbol:"\ud83e\udddc"},{symbol:"\ud83e\uddda"},{symbol:"\ud83d\udc7c"},{symbol:"\ud83e\udd30"},{symbol:"\ud83e\udd31"},{symbol:"\ud83d\ude47"},{symbol:"\ud83d\udc81"},{symbol:"\ud83d\ude45"},{symbol:"\ud83d\ude46"},{symbol:"\ud83d\ude4b"},{symbol:"\ud83e\udd26"},{symbol:"\ud83e\udd37"},{symbol:"\ud83d\ude4e"},{symbol:"\ud83d\ude4d"},{symbol:"\ud83d\udc87"},{symbol:"\ud83d\udc86"},{symbol:"\ud83e\uddd6"},{symbol:"\ud83d\udc85"},{symbol:"\ud83e\udd33"},{symbol:"\ud83d\udc83"},{symbol:"\ud83d\udd7a"},{symbol:"\ud83d\udc6f"},{symbol:"\ud83d\udd74"},{symbol:"\ud83d\udeb6"},{symbol:"\ud83c\udfc3"},{symbol:"\ud83d\udc6b"},{symbol:"\ud83d\udc6d"},{symbol:"\ud83d\udc6c"},{symbol:"\ud83d\udc91"},{symbol:"\ud83d\udc8f"},{symbol:"\ud83d\udc6a"},{symbol:"\ud83e\uddf6"},{symbol:"\ud83e\uddf5"},{symbol:"\ud83e\udde5"},{symbol:"\ud83e\udd7c"},{symbol:"\ud83d\udc5a"},{symbol:"\ud83d\udc55"},{symbol:"\ud83d\udc56"},{symbol:"\ud83d\udc54"},{symbol:"\ud83d\udc57"},{symbol:"\ud83d\udc59"},{symbol:"\ud83d\udc58"},{symbol:"\ud83e\udd7f"},{symbol:"\ud83d\udc60"},{symbol:"\ud83d\udc61"},{symbol:"\ud83d\udc62"},{symbol:"\ud83d\udc5e"},{symbol:"\ud83d\udc5f"},{symbol:"\ud83e\udd7e"},{symbol:"\ud83e\udde6"},{symbol:"\ud83e\udde4"},{symbol:"\ud83e\udde3"},{symbol:"\ud83c\udfa9"},{symbol:"\ud83e\udde2"},{symbol:"\ud83d\udc52"},{symbol:"\ud83c\udf93"},{symbol:"\u26d1"},{symbol:"\ud83d\udc51"},{symbol:"\ud83d\udc8d"},{symbol:"\ud83d\udc5d"},{symbol:"\ud83d\udc5b"},{symbol:"\ud83d\udc5c"},{symbol:"\ud83d\udcbc"},{symbol:"\ud83c\udf92"},{symbol:"\ud83e\uddf3"},{symbol:"\ud83d\udc53"},{symbol:"\ud83d\udd76"},{symbol:"\ud83e\udd7d"},{symbol:"\ud83c\udf02"}]},{id:2,code:"ANIMALS",showForWindows:true,emoji:[{symbol:"\ud83d\udc36"},{symbol:"\ud83d\udc31"},{symbol:"\ud83d\udc2d"},{symbol:"\ud83d\udc39"},{symbol:"\ud83d\udc30"},{symbol:"\ud83e\udd8a"},{symbol:"\ud83d\udc3b"},{symbol:"\ud83d\udc3c"},{symbol:"\ud83d\udc28"},{symbol:"\ud83d\udc2f"},{symbol:"\ud83e\udd81"},{symbol:"\ud83d\udc2e"},{symbol:"\ud83d\udc37"},{symbol:"\ud83d\udc3d"},{symbol:"\ud83d\udc38"},{symbol:"\ud83d\udc35"},{symbol:"\ud83d\ude48"},{symbol:"\ud83d\ude49"},{symbol:"\ud83d\ude4a"},{symbol:"\ud83d\udc12"},{symbol:"\ud83d\udc14"},{symbol:"\ud83d\udc27"},{symbol:"\ud83d\udc26"},{symbol:"\ud83d\udc24"},{symbol:"\ud83d\udc23"},{symbol:"\ud83d\udc25"},{symbol:"\ud83e\udd86"},{symbol:"\ud83e\udd85"},{symbol:"\ud83e\udd89"},{symbol:"\ud83e\udd87"},{symbol:"\ud83d\udc3a"},{symbol:"\ud83d\udc17"},{symbol:"\ud83d\udc34"},{symbol:"\ud83e\udd84"},{symbol:"\ud83d\udc1d"},{symbol:"\ud83d\udc1b"},{symbol:"\ud83e\udd8b"},{symbol:"\ud83d\udc0c"},{symbol:"\ud83d\udc1e"},{symbol:"\ud83d\udc1c"},{symbol:"\ud83e\udd9f"},{symbol:"\ud83e\udd97"},{symbol:"\ud83d\udd77"},{symbol:"\ud83d\udd78"},{symbol:"\ud83e\udd82"},{symbol:"\ud83d\udc22"},{symbol:"\ud83d\udc0d"},{symbol:"\ud83e\udd8e"},{symbol:"\ud83e\udd96"},{symbol:"\ud83e\udd95"},{symbol:"\ud83d\udc19"},{symbol:"\ud83e\udd91"},{symbol:"\ud83e\udd90"},{symbol:"\ud83e\udd9e"},{symbol:"\ud83e\udd80"},{symbol:"\ud83d\udc21"},{symbol:"\ud83d\udc20"},{symbol:"\ud83d\udc1f"},{symbol:"\ud83d\udc2c"},{symbol:"\ud83d\udc33"},{symbol:"\ud83d\udc0b"},{symbol:"\ud83e\udd88"},{symbol:"\ud83d\udc0a"},{symbol:"\ud83d\udc05"},{symbol:"\ud83d\udc06"},{symbol:"\ud83e\udd93"},{symbol:"\ud83e\udd8d"},{symbol:"\ud83d\udc18"},{symbol:"\ud83e\udd9b"},{symbol:"\ud83e\udd8f"},{symbol:"\ud83d\udc2a"},{symbol:"\ud83d\udc2b"},{symbol:"\ud83e\udd92"},{symbol:"\ud83e\udd98"},{symbol:"\ud83d\udc03"},{symbol:"\ud83d\udc02"},{symbol:"\ud83d\udc04"},{symbol:"\ud83d\udc0e"},{symbol:"\ud83d\udc16"},{symbol:"\ud83d\udc0f"},{symbol:"\ud83d\udc11"},{symbol:"\ud83e\udd99"},{symbol:"\ud83d\udc10"},{symbol:"\ud83e\udd8c"},{symbol:"\ud83d\udc15"},{symbol:"\ud83d\udc29"},{symbol:"\ud83d\udc08"},{symbol:"\ud83d\udc13"},{symbol:"\ud83e\udd83"},{symbol:"\ud83e\udd9a"},{symbol:"\ud83e\udd9c"},{symbol:"\ud83e\udda2"},{symbol:"\ud83d\udd4a"},{symbol:"\ud83d\udc07"},{symbol:"\ud83e\udd9d"},{symbol:"\ud83e\udda1"},{symbol:"\ud83d\udc01"},{symbol:"\ud83d\udc00"},{symbol:"\ud83d\udc3f"},{symbol:"\ud83e\udd94"},{symbol:"\ud83d\udc3e"},{symbol:"\ud83d\udc09"},{symbol:"\ud83d\udc32"},{symbol:"\ud83c\udf35"},{symbol:"\ud83c\udf84"},{symbol:"\ud83c\udf32"},{symbol:"\ud83c\udf33"},{symbol:"\ud83c\udf34"},{symbol:"\ud83c\udf31"},{symbol:"\ud83c\udf3f"},{symbol:"\u2618"},{symbol:"\ud83c\udf40"},{symbol:"\ud83c\udf8d"},{symbol:"\ud83c\udf8b"},{symbol:"\ud83c\udf43"},{symbol:"\ud83c\udf42"},{symbol:"\ud83c\udf41"},{symbol:"\ud83c\udf44"},{symbol:"\ud83d\udc1a"},{symbol:"\ud83c\udf3e"},{symbol:"\ud83d\udc90"},{symbol:"\ud83c\udf37"},{symbol:"\ud83c\udf39"},{symbol:"\ud83e\udd40"},{symbol:"\ud83c\udf3a"},{symbol:"\ud83c\udf38"},{symbol:"\ud83c\udf3c"},{symbol:"\ud83c\udf3b"},{symbol:"\ud83c\udf1e"},{symbol:"\ud83c\udf1d"},{symbol:"\ud83c\udf1b"},{symbol:"\ud83c\udf1c"},{symbol:"\ud83c\udf1a"},{symbol:"\ud83c\udf15"},{symbol:"\ud83c\udf16"},{symbol:"\ud83c\udf17"},{symbol:"\ud83c\udf18"},{symbol:"\ud83c\udf11"},{symbol:"\ud83c\udf12"},{symbol:"\ud83c\udf13"},{symbol:"\ud83c\udf14"},{symbol:"\ud83c\udf19"},{symbol:"\ud83c\udf0e"},{symbol:"\ud83c\udf0d"},{symbol:"\ud83c\udf0f"},{symbol:"\ud83d\udcab"},{symbol:"\u2b50"},{symbol:"\ud83c\udf1f"},{symbol:"\u2728"},{symbol:"\u26a1"},{symbol:"\u2604"},{symbol:"\ud83d\udca5"},{symbol:"\ud83d\udd25"},{symbol:"\ud83c\udf2a"},{symbol:"\ud83c\udf08"},{symbol:"\u2600"},{symbol:"\ud83c\udf24"},{symbol:"\ud83c\udf25"},{symbol:"\ud83c\udf26"},{symbol:"\ud83c\udf27"},{symbol:"\ud83c\udf29"},{symbol:"\ud83c\udf28"},{symbol:"\u2744"},{symbol:"\u2603"},{symbol:"\u26c4"},{symbol:"\ud83c\udf2c"},{symbol:"\ud83d\udca8"},{symbol:"\ud83d\udca7"},{symbol:"\ud83d\udca6"},{symbol:"\u2614"},{symbol:"\u2602"},{symbol:"\ud83c\udf0a"},{symbol:"\ud83c\udf2b"}]},{id:3,code:"FOOD",showForWindows:true,emoji:[{symbol:"\ud83c\udf4f"},{symbol:"\ud83c\udf4e"},{symbol:"\ud83c\udf50"},{symbol:"\ud83c\udf4a"},{symbol:"\ud83c\udf4b"},{symbol:"\ud83c\udf4c"},{symbol:"\ud83c\udf49"},{symbol:"\ud83c\udf47"},{symbol:"\ud83c\udf53"},{symbol:"\ud83c\udf48"},{symbol:"\ud83c\udf52"},{symbol:"\ud83c\udf51"},{symbol:"\ud83e\udd6d"},{symbol:"\ud83c\udf4d"},{symbol:"\ud83e\udd65"},{symbol:"\ud83e\udd5d"},{symbol:"\ud83c\udf45"},{symbol:"\ud83c\udf46"},{symbol:"\ud83e\udd51"},{symbol:"\ud83e\udd66"},{symbol:"\ud83e\udd6c"},{symbol:"\ud83e\udd52"},{symbol:"\ud83c\udf36"},{symbol:"\ud83c\udf3d"},{symbol:"\ud83e\udd55"},{symbol:"\ud83e\udd54"},{symbol:"\ud83c\udf60"},{symbol:"\ud83e\udd50"},{symbol:"\ud83e\udd6f"},{symbol:"\ud83c\udf5e"},{symbol:"\ud83e\udd56"},{symbol:"\ud83e\udd68"},{symbol:"\ud83e\uddc0"},{symbol:"\ud83e\udd5a"},{symbol:"\ud83c\udf73"},{symbol:"\ud83e\udd5e"},{symbol:"\ud83e\udd53"},{symbol:"\ud83e\udd69"},{symbol:"\ud83c\udf57"},{symbol:"\ud83c\udf56"},{symbol:"\ud83e\uddb4"},{symbol:"\ud83c\udf2d"},{symbol:"\ud83c\udf54"},{symbol:"\ud83c\udf5f"},{symbol:"\ud83c\udf55"},{symbol:"\ud83e\udd6a"},{symbol:"\ud83e\udd59"},{symbol:"\ud83c\udf2e"},{symbol:"\ud83c\udf2f"},{symbol:"\ud83e\udd57"},{symbol:"\ud83e\udd58"},{symbol:"\ud83e\udd6b"},{symbol:"\ud83c\udf5d"},{symbol:"\ud83c\udf5c"},{symbol:"\ud83c\udf72"},{symbol:"\ud83c\udf5b"},{symbol:"\ud83c\udf63"},{symbol:"\ud83c\udf71"},{symbol:"\ud83e\udd5f"},{symbol:"\ud83c\udf64"},{symbol:"\ud83c\udf59"},{symbol:"\ud83c\udf5a"},{symbol:"\ud83c\udf58"},{symbol:"\ud83c\udf65"},{symbol:"\ud83e\udd60"},{symbol:"\ud83e\udd6e"},{symbol:"\ud83c\udf62"},{symbol:"\ud83c\udf61"},{symbol:"\ud83c\udf67"},{symbol:"\ud83c\udf68"},{symbol:"\ud83c\udf66"},{symbol:"\ud83e\udd67"},{symbol:"\ud83e\uddc1"},{symbol:"\ud83c\udf70"},{symbol:"\ud83c\udf82"},{symbol:"\ud83c\udf6e"},{symbol:"\ud83c\udf6d"},{symbol:"\ud83c\udf6c"},{symbol:"\ud83c\udf6b"},{symbol:"\ud83c\udf7f"},{symbol:"\ud83c\udf69"},{symbol:"\ud83c\udf6a"},{symbol:"\ud83c\udf30"},{symbol:"\ud83e\udd5c"},{symbol:"\ud83c\udf6f"},{symbol:"\ud83e\udd5b"},{symbol:"\ud83c\udf7c"},{symbol:"\u2615"},{symbol:"\ud83c\udf75"},{symbol:"\ud83e\udd64"},{symbol:"\ud83c\udf76"},{symbol:"\ud83c\udf7a"},{symbol:"\ud83c\udf7b"},{symbol:"\ud83e\udd42"},{symbol:"\ud83c\udf77"},{symbol:"\ud83e\udd43"},{symbol:"\ud83c\udf78"},{symbol:"\ud83c\udf79"},{symbol:"\ud83c\udf7e"},{symbol:"\ud83e\udd44"},{symbol:"\ud83c\udf74"},{symbol:"\ud83c\udf7d"},{symbol:"\ud83e\udd63"},{symbol:"\ud83e\udd61"},{symbol:"\ud83e\udd62"},{symbol:"\ud83e\uddc2"}]},{id:4,code:"HOBBY",showForWindows:true,emoji:[{symbol:"\u26bd"},{symbol:"\ud83c\udfc0"},{symbol:"\ud83c\udfc8"},{symbol:"\u26be"},{symbol:"\ud83e\udd4e"},{symbol:"\ud83c\udfbe"},{symbol:"\ud83c\udfd0"},{symbol:"\ud83c\udfc9"},{symbol:"\ud83e\udd4f"},{symbol:"\ud83c\udfb1"},{symbol:"\ud83c\udfd3"},{symbol:"\ud83c\udff8"},{symbol:"\ud83c\udfd2"},{symbol:"\ud83c\udfd1"},{symbol:"\ud83e\udd4d"},{symbol:"\ud83c\udfcf"},{symbol:"\ud83e\udd45"},{symbol:"\u26f3"},{symbol:"\ud83c\udff9"},{symbol:"\ud83c\udfa3"},{symbol:"\ud83e\udd4a"},{symbol:"\ud83e\udd4b"},{symbol:"\ud83c\udfbd"},{symbol:"\ud83d\udef9"},{symbol:"\ud83d\udef7"},{symbol:"\u26f8"},{symbol:"\ud83e\udd4c"},{symbol:"\ud83c\udfbf"},{symbol:"\u26f7"},{symbol:"\ud83c\udfc2"},{symbol:"\ud83c\udfcb"},{symbol:"\ud83e\udd3c"},{symbol:"\ud83e\udd38"},{symbol:"\u26f9"},{symbol:"\ud83e\udd3a"},{symbol:"\ud83e\udd3e"},{symbol:"\ud83c\udfcc"},{symbol:"\ud83c\udfc7"},{symbol:"\ud83e\uddd8"},{symbol:"\ud83c\udfc4"},{symbol:"\ud83c\udfca"},{symbol:"\ud83e\udd3d"},{symbol:"\ud83d\udea3"},{symbol:"\ud83e\uddd7"},{symbol:"\ud83d\udeb5"},{symbol:"\ud83d\udeb4"},{symbol:"\ud83c\udfc6"},{symbol:"\ud83e\udd47"},{symbol:"\ud83e\udd48"},{symbol:"\ud83e\udd49"},{symbol:"\ud83c\udfc5"},{symbol:"\ud83c\udf96"},{symbol:"\ud83c\udff5"},{symbol:"\ud83c\udf97"},{symbol:"\ud83c\udfab"},{symbol:"\ud83c\udf9f"},{symbol:"\ud83c\udfaa"},{symbol:"\ud83e\udd39"},{symbol:"\ud83c\udfad"},{symbol:"\ud83c\udfa8"},{symbol:"\ud83c\udfac"},{symbol:"\ud83c\udfa4"},{symbol:"\ud83c\udfa7"},{symbol:"\ud83c\udfbc"},{symbol:"\ud83c\udfb9"},{symbol:"\ud83e\udd41"},{symbol:"\ud83c\udfb7"},{symbol:"\ud83c\udfba"},{symbol:"\ud83c\udfb8"},{symbol:"\ud83c\udfbb"},{symbol:"\ud83c\udfb2"},{symbol:"\u265f"},{symbol:"\ud83c\udfaf"},{symbol:"\ud83c\udfb3"},{symbol:"\ud83c\udfae"},{symbol:"\ud83c\udfb0"},{symbol:"\ud83e\udde9"}]},{id:5,code:"TRAVEL",showForWindows:true,emoji:[{symbol:"\ud83d\ude97"},{symbol:"\ud83d\ude95"},{symbol:"\ud83d\ude99"},{symbol:"\ud83d\ude8c"},{symbol:"\ud83d\ude8e"},{symbol:"\ud83c\udfce"},{symbol:"\ud83d\ude93"},{symbol:"\ud83d\ude91"},{symbol:"\ud83d\ude92"},{symbol:"\ud83d\ude90"},{symbol:"\ud83d\ude9a"},{symbol:"\ud83d\ude9b"},{symbol:"\ud83d\ude9c"},{symbol:"\ud83d\udef4"},{symbol:"\ud83d\udeb2"},{symbol:"\ud83d\udef5"},{symbol:"\ud83c\udfcd"},{symbol:"\ud83d\udea8"},{symbol:"\ud83d\ude94"},{symbol:"\ud83d\ude8d"},{symbol:"\ud83d\ude98"},{symbol:"\ud83d\ude96"},{symbol:"\ud83d\udea1"},{symbol:"\ud83d\udea0"},{symbol:"\ud83d\ude9f"},{symbol:"\ud83d\ude83"},{symbol:"\ud83d\ude8b"},{symbol:"\ud83d\ude9e"},{symbol:"\ud83d\ude9d"},{symbol:"\ud83d\ude84"},{symbol:"\ud83d\ude85"},{symbol:"\ud83d\ude88"},{symbol:"\ud83d\ude82"},{symbol:"\ud83d\ude86"},{symbol:"\ud83d\ude87"},{symbol:"\ud83d\ude8a"},{symbol:"\ud83d\ude89"},{symbol:"\u2708"},{symbol:"\ud83d\udeeb"},{symbol:"\ud83d\udeec"},{symbol:"\ud83d\udee9"},{symbol:"\ud83d\udcba"},{symbol:"\ud83d\udef0"},{symbol:"\ud83d\ude80"},{symbol:"\ud83d\udef8"},{symbol:"\ud83d\ude81"},{symbol:"\ud83d\udef6"},{symbol:"\u26f5"},{symbol:"\ud83d\udea4"},{symbol:"\ud83d\udee5"},{symbol:"\ud83d\udef3"},{symbol:"\u26f4"},{symbol:"\ud83d\udea2"},{symbol:"\u2693"},{symbol:"\u26fd"},{symbol:"\ud83d\udea7"},{symbol:"\ud83d\udea6"},{symbol:"\ud83d\udea5"},{symbol:"\ud83d\ude8f"},{symbol:"\ud83d\uddfa"},{symbol:"\ud83d\uddff"},{symbol:"\ud83d\uddfd"},{symbol:"\ud83d\uddfc"},{symbol:"\ud83c\udff0"},{symbol:"\ud83c\udfef"},{symbol:"\ud83c\udfdf"},{symbol:"\ud83c\udfa1"},{symbol:"\ud83c\udfa2"},{symbol:"\ud83c\udfa0"},{symbol:"\u26f2"},{symbol:"\u26f1"},{symbol:"\ud83c\udfd6"},{symbol:"\ud83c\udfdd"},{symbol:"\ud83c\udfdc"},{symbol:"\ud83c\udf0b"},{symbol:"\u26f0"},{symbol:"\ud83c\udfd4"},{symbol:"\ud83d\uddfb"},{symbol:"\ud83c\udfd5"},{symbol:"\u26fa"},{symbol:"\ud83c\udfe0"},{symbol:"\ud83c\udfe1"},{symbol:"\ud83c\udfd8"},{symbol:"\ud83c\udfda"},{symbol:"\ud83c\udfd7"},{symbol:"\ud83c\udfed"},{symbol:"\ud83c\udfe2"},{symbol:"\ud83c\udfec"},{symbol:"\ud83c\udfe3"},{symbol:"\ud83c\udfe4"},{symbol:"\ud83c\udfe5"},{symbol:"\ud83c\udfe6"},{symbol:"\ud83c\udfe8"},{symbol:"\ud83c\udfea"},{symbol:"\ud83c\udfeb"},{symbol:"\ud83c\udfe9"},{symbol:"\ud83d\udc92"},{symbol:"\ud83c\udfdb"},{symbol:"\u26ea"},{symbol:"\ud83d\udd4c"},{symbol:"\ud83d\udd4d"},{symbol:"\ud83d\udd4b"},{symbol:"\u26e9"},{symbol:"\ud83d\udee4"},{symbol:"\ud83d\udee3"},{symbol:"\ud83d\uddfe"},{symbol:"\ud83c\udf91"},{symbol:"\ud83c\udfde"},{symbol:"\ud83c\udf05"},{symbol:"\ud83c\udf04"},{symbol:"\ud83c\udf20"},{symbol:"\ud83c\udf87"},{symbol:"\ud83c\udf86"},{symbol:"\ud83c\udf07"},{symbol:"\ud83c\udf06"},{symbol:"\ud83c\udfd9"},{symbol:"\ud83c\udf03"},{symbol:"\ud83c\udf0c"},{symbol:"\ud83c\udf09"},{symbol:"\ud83c\udf01"}]},{id:6,code:"OBJECTS",showForWindows:true,emoji:[{symbol:"\u231a"},{symbol:"\ud83d\udcf1"},{symbol:"\ud83d\udcf2"},{symbol:"\ud83d\udcbb"},{symbol:"\u2328"},{symbol:"\ud83d\udda5"},{symbol:"\ud83d\udda8"},{symbol:"\ud83d\uddb1"},{symbol:"\ud83d\uddb2"},{symbol:"\ud83d\udd79"},{symbol:"\ud83d\udddc"},{symbol:"\ud83d\udcbd"},{symbol:"\ud83d\udcbe"},{symbol:"\ud83d\udcbf"},{symbol:"\ud83d\udcc0"},{symbol:"\ud83d\udcfc"},{symbol:"\ud83d\udcf7"},{symbol:"\ud83d\udcf8"},{symbol:"\ud83d\udcf9"},{symbol:"\ud83c\udfa5"},{symbol:"\ud83d\udcfd"},{symbol:"\ud83c\udf9e"},{symbol:"\ud83d\udcde"},{symbol:"\u260e"},{symbol:"\ud83d\udcdf"},{symbol:"\ud83d\udce0"},{symbol:"\ud83d\udcfa"},{symbol:"\ud83d\udcfb"},{symbol:"\ud83c\udf99"},{symbol:"\ud83c\udf9a"},{symbol:"\ud83c\udf9b"},{symbol:"\ud83e\udded"},{symbol:"\u23f1"},{symbol:"\u23f2"},{symbol:"\u23f0"},{symbol:"\ud83d\udd70"},{symbol:"\u231b"},{symbol:"\u23f3"},{symbol:"\ud83d\udce1"},{symbol:"\ud83d\udd0b"},{symbol:"\ud83d\udd0c"},{symbol:"\ud83d\udca1"},{symbol:"\ud83d\udd26"},{symbol:"\ud83d\udd6f"},{symbol:"\ud83e\uddef"},{symbol:"\ud83d\udee2"},{symbol:"\ud83d\udcb8"},{symbol:"\ud83d\udcb5"},{symbol:"\ud83d\udcb4"},{symbol:"\ud83d\udcb6"},{symbol:"\ud83d\udcb7"},{symbol:"\ud83d\udcb0"},{symbol:"\ud83d\udcb3"},{symbol:"\ud83d\udc8e"},{symbol:"\u2696"},{symbol:"\ud83e\uddf0"},{symbol:"\ud83d\udd27"},{symbol:"\ud83d\udd28"},{symbol:"\u2692"},{symbol:"\ud83d\udee0"},{symbol:"\u26cf"},{symbol:"\ud83d\udd29"},{symbol:"\u2699"},{symbol:"\ud83e\uddf1"},{symbol:"\u26d3"},{symbol:"\ud83e\uddf2"},{symbol:"\ud83d\udd2b"},{symbol:"\ud83d\udca3"},{symbol:"\ud83e\udde8"},{symbol:"\ud83d\udd2a"},{symbol:"\ud83d\udde1"},{symbol:"\u2694"},{symbol:"\ud83d\udee1"},{symbol:"\ud83d\udeac"},{symbol:"\u26b0"},{symbol:"\u26b1"},{symbol:"\ud83c\udffa"},{symbol:"\ud83d\udd2e"},{symbol:"\ud83d\udcff"},{symbol:"\ud83e\uddff"},{symbol:"\ud83d\udc88"},{symbol:"\u2697"},{symbol:"\ud83d\udd2d"},{symbol:"\ud83d\udd2c"},{symbol:"\ud83d\udd73"},{symbol:"\ud83d\udc8a"},{symbol:"\ud83d\udc89"},{symbol:"\ud83e\uddec"},{symbol:"\ud83e\udda0"},{symbol:"\ud83e\uddeb"},{symbol:"\ud83e\uddea"},{symbol:"\ud83c\udf21"},{symbol:"\ud83e\uddf9"},{symbol:"\ud83e\uddfa"},{symbol:"\ud83e\uddfb"},{symbol:"\ud83d\udebd"},{symbol:"\ud83d\udeb0"},{symbol:"\ud83d\udebf"},{symbol:"\ud83d\udec1"},{symbol:"\ud83d\udec0"},{symbol:"\ud83e\uddfc"},{symbol:"\ud83e\uddfd"},{symbol:"\ud83e\uddf4"},{symbol:"\ud83d\udece"},{symbol:"\ud83d\udd11"},{symbol:"\ud83d\udddd"},{symbol:"\ud83d\udeaa"},{symbol:"\ud83d\udecb"},{symbol:"\ud83d\udecf"},{symbol:"\ud83d\udecc"},{symbol:"\ud83e\uddf8"},{symbol:"\ud83d\uddbc"},{symbol:"\ud83d\udecd"},{symbol:"\ud83d\uded2"},{symbol:"\ud83c\udf81"},{symbol:"\ud83c\udf88"},{symbol:"\ud83c\udf8f"},{symbol:"\ud83c\udf80"},{symbol:"\ud83c\udf8a"},{symbol:"\ud83c\udf89"},{symbol:"\ud83c\udf8e"},{symbol:"\ud83c\udfee"},{symbol:"\ud83c\udf90"},{symbol:"\ud83e\udde7"},{symbol:"\u2709"},{symbol:"\ud83d\udce9"},{symbol:"\ud83d\udce8"},{symbol:"\ud83d\udce7"},{symbol:"\ud83d\udc8c"},{symbol:"\ud83d\udce5"},{symbol:"\ud83d\udce4"},{symbol:"\ud83d\udce6"},{symbol:"\ud83c\udff7"},{symbol:"\ud83d\udcea"},{symbol:"\ud83d\udceb"},{symbol:"\ud83d\udcec"},{symbol:"\ud83d\udced"},{symbol:"\ud83d\udcee"},{symbol:"\ud83d\udcef"},{symbol:"\ud83d\udcdc"},{symbol:"\ud83d\udcc3"},{symbol:"\ud83d\udcc4"},{symbol:"\ud83d\udcd1"},{symbol:"\ud83e\uddfe"},{symbol:"\ud83d\udcca"},{symbol:"\ud83d\udcc8"},{symbol:"\ud83d\udcc9"},{symbol:"\ud83d\uddd2"},{symbol:"\ud83d\uddd3"},{symbol:"\ud83d\udcc6"},{symbol:"\ud83d\udcc5"},{symbol:"\ud83d\uddd1"},{symbol:"\ud83d\udcc7"},{symbol:"\ud83d\uddc3"},{symbol:"\ud83d\uddf3"},{symbol:"\ud83d\uddc4"},{symbol:"\ud83d\udccb"},{symbol:"\ud83d\udcc1"},{symbol:"\ud83d\udcc2"},{symbol:"\ud83d\uddc2"},{symbol:"\ud83d\uddde"},{symbol:"\ud83d\udcf0"},{symbol:"\ud83d\udcd3"},{symbol:"\ud83d\udcd4"},{symbol:"\ud83d\udcd2"},{symbol:"\ud83d\udcd5"},{symbol:"\ud83d\udcd7"},{symbol:"\ud83d\udcd8"},{symbol:"\ud83d\udcd9"},{symbol:"\ud83d\udcda"},{symbol:"\ud83d\udcd6"},{symbol:"\ud83d\udd16"},{symbol:"\ud83e\uddf7"},{symbol:"\ud83d\udd17"},{symbol:"\ud83d\udcce"},{symbol:"\ud83d\udd87"},{symbol:"\ud83d\udcd0"},{symbol:"\ud83d\udccf"},{symbol:"\ud83d\udccc"},{symbol:"\ud83d\udccd"},{symbol:"\u2702"},{symbol:"\ud83d\udd8a"},{symbol:"\ud83d\udd8b"},{symbol:"\u2712"},{symbol:"\ud83d\udd8c"},{symbol:"\ud83d\udd8d"},{symbol:"\ud83d\udcdd"},{symbol:"\u270f"},{symbol:"\ud83d\udd0d"},{symbol:"\ud83d\udd0e"},{symbol:"\ud83d\udd0f"},{symbol:"\ud83d\udd10"},{symbol:"\ud83d\udd12"},{symbol:"\ud83d\udd13"}]},{id:7,code:"SYMBOLS",showForWindows:true,emoji:[{symbol:"\u2764"},{symbol:"\ud83e\udde1"},{symbol:"\ud83d\udc9b"},{symbol:"\ud83d\udc9a"},{symbol:"\ud83d\udc99"},{symbol:"\ud83d\udc9c"},{symbol:"\ud83d\udda4"},{symbol:"\ud83d\udc94"},{symbol:"\u2763"},{symbol:"\ud83d\udc95"},{symbol:"\ud83d\udc9e"},{symbol:"\ud83d\udc93"},{symbol:"\ud83d\udc97"},{symbol:"\ud83d\udc96"},{symbol:"\ud83d\udc98"},{symbol:"\ud83d\udc9d"},{symbol:"\ud83d\udc9f"},{symbol:"\u262e"},{symbol:"\u271d"},{symbol:"\u262a"},{symbol:"\ud83d\udd49"},{symbol:"\u2638"},{symbol:"\u2721"},{symbol:"\ud83d\udd2f"},{symbol:"\ud83d\udd4e"},{symbol:"\u262f"},{symbol:"\u2626"},{symbol:"\ud83d\uded0"},{symbol:"\u26ce"},{symbol:"\u2648"},{symbol:"\u2649"},{symbol:"\u264a"},{symbol:"\u264b"},{symbol:"\u264c"},{symbol:"\u264d"},{symbol:"\u264e"},{symbol:"\u264f"},{symbol:"\u2650"},{symbol:"\u2651"},{symbol:"\u2652"},{symbol:"\u2653"},{symbol:"\ud83c\udd94"},{symbol:"\u269b"},{symbol:"\ud83c\ude51"},{symbol:"\u2622"},{symbol:"\u2623"},{symbol:"\ud83d\udcf4"},{symbol:"\ud83d\udcf3"},{symbol:"\ud83c\ude36"},{symbol:"\ud83c\ude1a"},{symbol:"\ud83c\ude38"},{symbol:"\ud83c\ude3a"},{symbol:"\ud83c\ude37"},{symbol:"\u2734"},{symbol:"\ud83c\udd9a"},{symbol:"\ud83d\udcae"},{symbol:"\ud83c\ude50"},{symbol:"\u3299"},{symbol:"\u3297"},{symbol:"\ud83c\ude34"},{symbol:"\ud83c\ude35"},{symbol:"\ud83c\ude39"},{symbol:"\ud83c\ude32"},{symbol:"\ud83c\udd70"},{symbol:"\ud83c\udd71"},{symbol:"\ud83c\udd8e"},{symbol:"\ud83c\udd91"},{symbol:"\ud83c\udd7e"},{symbol:"\ud83c\udd98"},{symbol:"\u274c"},{symbol:"\u2b55"},{symbol:"\ud83d\uded1"},{symbol:"\u26d4"},{symbol:"\ud83d\udcdb"},{symbol:"\ud83d\udeab"},{symbol:"\ud83d\udcaf"},{symbol:"\ud83d\udca2"},{symbol:"\u2668"},{symbol:"\ud83d\udeb7"},{symbol:"\ud83d\udeaf"},{symbol:"\ud83d\udeb3"},{symbol:"\ud83d\udeb1"},{symbol:"\ud83d\udd1e"},{symbol:"\ud83d\udcf5"},{symbol:"\ud83d\udead"},{symbol:"\u2757"},{symbol:"\u2755"},{symbol:"\u2753"},{symbol:"\u2754"},{symbol:"\u203c"},{symbol:"\u2049"},{symbol:"\ud83d\udd05"},{symbol:"\ud83d\udd06"},{symbol:"\u303d"},{symbol:"\u26a0"},{symbol:"\ud83d\udeb8"},{symbol:"\ud83d\udd31"},{symbol:"\u269c"},{symbol:"\ud83d\udd30"},{symbol:"\u267b"},{symbol:"\u2705"},{symbol:"\ud83c\ude2f"},{symbol:"\ud83d\udcb9"},{symbol:"\u2747"},{symbol:"\u2733"},{symbol:"\u274e"},{symbol:"\ud83c\udf10"},{symbol:"\ud83d\udca0"},{symbol:"\u24c2"},{symbol:"\ud83c\udf00"},{symbol:"\ud83d\udca4"},{symbol:"\ud83c\udfe7"},{symbol:"\ud83d\udebe"},{symbol:"\u267f"},{symbol:"\ud83c\udd7f"},{symbol:"\ud83c\ude33"},{symbol:"\ud83c\ude02"},{symbol:"\ud83d\udec2"},{symbol:"\ud83d\udec3"},{symbol:"\ud83d\udec4"},{symbol:"\ud83d\udec5"},{symbol:"\ud83d\udeb9"},{symbol:"\ud83d\udeba"},{symbol:"\ud83d\udebc"},{symbol:"\ud83d\udebb"},{symbol:"\ud83d\udeae"},{symbol:"\ud83c\udfa6"},{symbol:"\ud83d\udcf6"},{symbol:"\ud83c\ude01"},{symbol:"\ud83d\udd23"},{symbol:"\u2139"},{symbol:"\ud83d\udd24"},{symbol:"\ud83d\udd21"},{symbol:"\ud83d\udd20"},{symbol:"\ud83c\udd96"},{symbol:"\ud83c\udd97"},{symbol:"\ud83c\udd99"},{symbol:"\ud83c\udd92"},{symbol:"\ud83c\udd95"},{symbol:"\ud83c\udd93"},{symbol:"0"},{symbol:"1"},{symbol:"2"},{symbol:"3"},{symbol:"4"},{symbol:"5"},{symbol:"6"},{symbol:"7"},{symbol:"8"},{symbol:"9"},{symbol:"\ud83d\udd1f"},{symbol:"\ud83d\udd22"},{symbol:"#"},{symbol:"*"},{symbol:"\u23cf"},{symbol:"\u25b6"},{symbol:"\u23f8"},{symbol:"\u23ef"},{symbol:"\u23f9"},{symbol:"\u23fa"},{symbol:"\u23ed"},{symbol:"\u23ee"},{symbol:"\u23e9"},{symbol:"\u23ea"},{symbol:"\u23eb"},{symbol:"\u23ec"},{symbol:"\u25c0"},{symbol:"\ud83d\udd3c"},{symbol:"\ud83d\udd3d"},{symbol:"\u27a1"},{symbol:"\u2b05"},{symbol:"\u2b06"},{symbol:"\u2b07"},{symbol:"\u2197"},{symbol:"\u2198"},{symbol:"\u2199"},{symbol:"\u2196"},{symbol:"\u2195"},{symbol:"\u2194"},{symbol:"\u21aa"},{symbol:"\u21a9"},{symbol:"\u2934"},{symbol:"\u2935"},{symbol:"\ud83d\udd00"},{symbol:"\ud83d\udd01"},{symbol:"\ud83d\udd02"},{symbol:"\ud83d\udd04"},{symbol:"\ud83d\udd03"},{symbol:"\ud83c\udfb5"},{symbol:"\ud83c\udfb6"},{symbol:"\u2795"},{symbol:"\u2796"},{symbol:"\u2797"},{symbol:"\u2716"},{symbol:"\u267e"},{symbol:"\ud83d\udcb2"},{symbol:"\ud83d\udcb1"},{symbol:"\u2122"},{symbol:"\xa9"},{symbol:"\xae"},{symbol:"\ud83d\udc41"},{symbol:"\ud83d\udde8"},{symbol:"\ud83d\udd1a"},{symbol:"\ud83d\udd19"},{symbol:"\ud83d\udd1b"},{symbol:"\ud83d\udd1d"},{symbol:"\ud83d\udd1c"},{symbol:"\u3030"},{symbol:"\u27b0"},{symbol:"\u27bf"},{symbol:"\u2714"},{symbol:"\u2611"},{symbol:"\ud83d\udd18"},{symbol:"\u26aa"},{symbol:"\u26ab"},{symbol:"\ud83d\udd34"},{symbol:"\ud83d\udd35"},{symbol:"\ud83d\udd3a"},{symbol:"\ud83d\udd3b"},{symbol:"\ud83d\udd38"},{symbol:"\ud83d\udd39"},{symbol:"\ud83d\udd36"},{symbol:"\ud83d\udd37"},{symbol:"\ud83d\udd33"},{symbol:"\ud83d\udd32"},{symbol:"\u25aa"},{symbol:"\u25ab"},{symbol:"\u25fe"},{symbol:"\u25fd"},{symbol:"\u25fc"},{symbol:"\u25fb"},{symbol:"\u2b1b"},{symbol:"\u2b1c"},{symbol:"\ud83d\udd08"},{symbol:"\ud83d\udd07"},{symbol:"\ud83d\udd09"},{symbol:"\ud83d\udd0a"},{symbol:"\ud83d\udd14"},{symbol:"\ud83d\udd15"},{symbol:"\ud83d\udce3"},{symbol:"\ud83d\udce2"},{symbol:"\ud83d\udcac"},{symbol:"\ud83d\udcad"},{symbol:"\ud83d\uddef"},{symbol:"\u2660"},{symbol:"\u2663"},{symbol:"\u2665"},{symbol:"\u2666"},{symbol:"\ud83c\udccf"},{symbol:"\ud83c\udfb4"},{symbol:"\ud83c\udc04"},{symbol:"\ud83d\udd50"},{symbol:"\ud83d\udd51"},{symbol:"\ud83d\udd52"},{symbol:"\ud83d\udd53"},{symbol:"\ud83d\udd54"},{symbol:"\ud83d\udd55"},{symbol:"\ud83d\udd56"},{symbol:"\ud83d\udd57"},{symbol:"\ud83d\udd58"},{symbol:"\ud83d\udd59"},{symbol:"\ud83d\udd5a"},{symbol:"\ud83d\udd5b"},{symbol:"\ud83d\udd5c"},{symbol:"\ud83d\udd5d"},{symbol:"\ud83d\udd5e"},{symbol:"\ud83d\udd5f"},{symbol:"\ud83d\udd60"},{symbol:"\ud83d\udd61"},{symbol:"\ud83d\udd62"},{symbol:"\ud83d\udd63"},{symbol:"\ud83d\udd64"},{symbol:"\ud83d\udd65"},{symbol:"\ud83d\udd66"},{symbol:"\ud83d\udd67"}]},{id:8,code:"FLAGS",showForWindows:false,emoji:[{symbol:"\ud83c\udff3"},{symbol:"\ud83c\udff4"},{symbol:"\ud83c\udfc1"},{symbol:"\ud83d\udea9"},{symbol:"\ud83c\udff3\ufe0f\u200d\ud83c\udf08"},{symbol:"\ud83c\uddfa\ud83c\uddf3"},{symbol:"\ud83c\udde6\ud83c\uddeb"},{symbol:"\ud83c\udde6\ud83c\uddfd"},{symbol:"\ud83c\udde6\ud83c\uddf1"},{symbol:"\ud83c\udde9\ud83c\uddff"},{symbol:"\ud83c\udde6\ud83c\uddf8"},{symbol:"\ud83c\udde6\ud83c\udde9"},{symbol:"\ud83c\udde6\ud83c\uddf4"},{symbol:"\ud83c\udde6\ud83c\uddee"},{symbol:"\ud83c\udde6\ud83c\uddf6"},{symbol:"\ud83c\udde6\ud83c\uddec"},{symbol:"\ud83c\udde6\ud83c\uddf7"},{symbol:"\ud83c\udde6\ud83c\uddf2"},{symbol:"\ud83c\udde6\ud83c\uddfc"},{symbol:"\ud83c\udde6\ud83c\uddfa"},{symbol:"\ud83c\udde6\ud83c\uddf9"},{symbol:"\ud83c\udde6\ud83c\uddff"},{symbol:"\ud83c\udde7\ud83c\uddf8"},{symbol:"\ud83c\udde7\ud83c\udded"},{symbol:"\ud83c\udde7\ud83c\udde9"},{symbol:"\ud83c\udde7\ud83c\uddfe"},{symbol:"\ud83c\udde7\ud83c\uddea"},{symbol:"\ud83c\udde7\ud83c\uddff"},{symbol:"\ud83c\udde7\ud83c\uddef"},{symbol:"\ud83c\udde7\ud83c\uddf2"},{symbol:"\ud83c\udde7\ud83c\uddf9"},{symbol:"\ud83c\udde7\ud83c\uddf4"},{symbol:"\ud83c\udde7\ud83c\udde6"},{symbol:"\ud83c\udde7\ud83c\uddfc"},{symbol:"\ud83c\udde7\ud83c\uddf7"},{symbol:"\ud83c\uddee\ud83c\uddf4"},{symbol:"\ud83c\uddfb\ud83c\uddec"},{symbol:"\ud83c\udde7\ud83c\uddf3"},{symbol:"\ud83c\udde7\ud83c\uddec"},{symbol:"\ud83c\udde7\ud83c\uddeb"},{symbol:"\ud83c\udde7\ud83c\uddee"},{symbol:"\ud83c\uddf0\ud83c\udded"},{symbol:"\ud83c\udde8\ud83c\uddf2"},{symbol:"\ud83c\udde8\ud83c\udde6"},{symbol:"\ud83c\uddee\ud83c\udde8"},{symbol:"\ud83c\udde8\ud83c\uddfb"},{symbol:"\ud83c\udde7\ud83c\uddf6"},{symbol:"\ud83c\uddf0\ud83c\uddfe"},{symbol:"\ud83c\udde8\ud83c\uddeb"},{symbol:"\ud83c\uddf9\ud83c\udde9"},{symbol:"\ud83c\udde8\ud83c\uddf1"},{symbol:"\ud83c\udde8\ud83c\uddf3"},{symbol:"\ud83c\udde8\ud83c\uddfd"},{symbol:"\ud83c\udde8\ud83c\uddf4"},{symbol:"\ud83c\uddf0\ud83c\uddf2"},{symbol:"\ud83c\udde8\ud83c\uddec"},{symbol:"\ud83c\udde8\ud83c\udde9"},{symbol:"\ud83c\udde8\ud83c\uddf0"},{symbol:"\ud83c\udde8\ud83c\uddf7"},{symbol:"\ud83c\udde8\ud83c\uddee"},{symbol:"\ud83c\udded\ud83c\uddf7"},{symbol:"\ud83c\udde8\ud83c\uddfa"},{symbol:"\ud83c\udde8\ud83c\uddfc"},{symbol:"\ud83c\udde8\ud83c\uddfe"},{symbol:"\ud83c\udde8\ud83c\uddff"},{symbol:"\ud83c\udde9\ud83c\uddf0"},{symbol:"\ud83c\udde9\ud83c\uddef"},{symbol:"\ud83c\udde9\ud83c\uddf2"},{symbol:"\ud83c\udde9\ud83c\uddf4"},{symbol:"\ud83c\uddea\ud83c\udde8"},{symbol:"\ud83c\uddea\ud83c\uddec"},{symbol:"\ud83c\uddf8\ud83c\uddfb"},{symbol:"\ud83c\uddec\ud83c\uddf6"},{symbol:"\ud83c\uddea\ud83c\uddf7"},{symbol:"\ud83c\uddea\ud83c\uddf9"},{symbol:"\ud83c\uddea\ud83c\uddfa"},{symbol:"\ud83c\uddeb\ud83c\uddf0"},{symbol:"\ud83c\uddeb\ud83c\uddf4"},{symbol:"\ud83c\uddeb\ud83c\uddef"},{symbol:"\ud83c\uddeb\ud83c\uddee"},{symbol:"\ud83c\uddeb\ud83c\uddf7"},{symbol:"\ud83c\uddec\ud83c\uddeb"},{symbol:"\ud83c\uddf5\ud83c\uddeb"},{symbol:"\ud83c\uddec\ud83c\udde6"},{symbol:"\ud83c\uddec\ud83c\uddf2"},{symbol:"\ud83c\uddec\ud83c\uddea"},{symbol:"\ud83c\udde9\ud83c\uddea"},{symbol:"\ud83c\uddec\ud83c\udded"},{symbol:"\ud83c\uddec\ud83c\uddee"},{symbol:"\ud83c\uddec\ud83c\uddf7"},{symbol:"\ud83c\uddec\ud83c\uddf1"},{symbol:"\ud83c\uddec\ud83c\udde9"},{symbol:"\ud83c\uddec\ud83c\uddf5"},{symbol:"\ud83c\uddec\ud83c\uddfa"},{symbol:"\ud83c\uddec\ud83c\uddf9"},{symbol:"\ud83c\uddec\ud83c\uddf3"},{symbol:"\ud83c\uddec\ud83c\uddfc"},{symbol:"\ud83c\uddec\ud83c\uddfe"},{symbol:"\ud83c\udded\ud83c\uddf9"},{symbol:"\ud83c\udded\ud83c\uddf3"},{symbol:"\ud83c\udded\ud83c\uddf0"},{symbol:"\ud83c\udded\ud83c\uddfa"},{symbol:"\ud83c\uddee\ud83c\uddf8"},{symbol:"\ud83c\uddee\ud83c\uddf3"},{symbol:"\ud83c\uddee\ud83c\udde9"},{symbol:"\ud83c\uddee\ud83c\uddf7"},{symbol:"\ud83c\uddee\ud83c\uddf6"},{symbol:"\ud83c\uddee\ud83c\uddea"},{symbol:"\ud83c\uddee\ud83c\uddf2"},{symbol:"\ud83c\uddee\ud83c\uddf1"},{symbol:"\ud83c\uddee\ud83c\uddf9"},{symbol:"\ud83c\uddef\ud83c\uddf2"},{symbol:"\ud83c\uddef\ud83c\uddf5"},{symbol:"\ud83c\uddef\ud83c\uddea"},{symbol:"\ud83c\uddef\ud83c\uddf4"},{symbol:"\ud83c\uddf0\ud83c\uddff"},{symbol:"\ud83c\uddf0\ud83c\uddea"},{symbol:"\ud83c\uddf0\ud83c\uddee"},{symbol:"\ud83c\uddfd\ud83c\uddf0"},{symbol:"\ud83c\uddf0\ud83c\uddfc"},{symbol:"\ud83c\uddf0\ud83c\uddec"},{symbol:"\ud83c\uddf1\ud83c\udde6"},{symbol:"\ud83c\uddf1\ud83c\uddfb"},{symbol:"\ud83c\uddf1\ud83c\udde7"},{symbol:"\ud83c\uddf1\ud83c\uddf8"},{symbol:"\ud83c\uddf1\ud83c\uddf7"},{symbol:"\ud83c\uddf1\ud83c\uddfe"},{symbol:"\ud83c\uddf1\ud83c\uddee"},{symbol:"\ud83c\uddf1\ud83c\uddf9"},{symbol:"\ud83c\uddf1\ud83c\uddfa"},{symbol:"\ud83c\uddf2\ud83c\uddf4"},{symbol:"\ud83c\uddf2\ud83c\uddf0"},{symbol:"\ud83c\uddf2\ud83c\uddec"},{symbol:"\ud83c\uddf2\ud83c\uddfc"},{symbol:"\ud83c\uddf2\ud83c\uddfe"},{symbol:"\ud83c\uddf2\ud83c\uddfb"},{symbol:"\ud83c\uddf2\ud83c\uddf1"},{symbol:"\ud83c\uddf2\ud83c\uddf9"},{symbol:"\ud83c\uddf2\ud83c\udded"},{symbol:"\ud83c\uddf2\ud83c\uddf7"},{symbol:"\ud83c\uddf2\ud83c\uddfa"},{symbol:"\ud83c\uddfe\ud83c\uddf9"},{symbol:"\ud83c\uddf2\ud83c\uddfd"},{symbol:"\ud83c\uddeb\ud83c\uddf2"},{symbol:"\ud83c\uddf2\ud83c\udde9"},{symbol:"\ud83c\uddf2\ud83c\udde8"},{symbol:"\ud83c\uddf2\ud83c\uddf3"},{symbol:"\ud83c\uddf2\ud83c\uddea"},{symbol:"\ud83c\uddf2\ud83c\uddf8"},{symbol:"\ud83c\uddf2\ud83c\udde6"},{symbol:"\ud83c\uddf2\ud83c\uddff"},{symbol:"\ud83c\uddf3\ud83c\udde6"},{symbol:"\ud83c\uddf3\ud83c\uddf7"},{symbol:"\ud83c\uddf3\ud83c\uddf5"},{symbol:"\ud83c\uddf3\ud83c\uddf1"},{symbol:"\ud83c\uddf3\ud83c\udde8"},{symbol:"\ud83c\uddf3\ud83c\uddff"},{symbol:"\ud83c\uddf3\ud83c\uddee"},{symbol:"\ud83c\uddf3\ud83c\uddea"},{symbol:"\ud83c\uddf3\ud83c\uddec"},{symbol:"\ud83c\uddf3\ud83c\uddfa"},{symbol:"\ud83c\uddf3\ud83c\uddeb"},{symbol:"\ud83c\uddf0\ud83c\uddf5"},{symbol:"\ud83c\uddf2\ud83c\uddf5"},{symbol:"\ud83c\uddf3\ud83c\uddf4"},{symbol:"\ud83c\uddf4\ud83c\uddf2"},{symbol:"\ud83c\uddf5\ud83c\uddf0"},{symbol:"\ud83c\uddf5\ud83c\uddfc"},{symbol:"\ud83c\uddf5\ud83c\uddf8"},{symbol:"\ud83c\uddf5\ud83c\udde6"},{symbol:"\ud83c\uddf5\ud83c\uddec"},{symbol:"\ud83c\uddf5\ud83c\uddfe"},{symbol:"\ud83c\uddf5\ud83c\uddea"},{symbol:"\ud83c\uddf5\ud83c\udded"},{symbol:"\ud83c\uddf5\ud83c\uddf3"},{symbol:"\ud83c\uddf5\ud83c\uddf1"},{symbol:"\ud83c\uddf5\ud83c\uddf9"},{symbol:"\ud83c\uddf5\ud83c\uddf7"},{symbol:"\ud83c\uddf6\ud83c\udde6"},{symbol:"\ud83c\uddf7\ud83c\uddf4"},{symbol:"\ud83c\uddf7\ud83c\uddfa"},{symbol:"\ud83c\uddf7\ud83c\uddfc"},{symbol:"\ud83c\uddfc\ud83c\uddf8"},{symbol:"\ud83c\uddf8\ud83c\uddf2"},{symbol:"\ud83c\uddf8\ud83c\uddf9"},{symbol:"\ud83c\uddf8\ud83c\udde6"},{symbol:"\ud83c\uddf8\ud83c\uddf3"},{symbol:"\ud83c\uddf7\ud83c\uddf8"},{symbol:"\ud83c\uddf8\ud83c\udde8"},{symbol:"\ud83c\uddf8\ud83c\uddf1"},{symbol:"\ud83c\uddf8\ud83c\uddec"},{symbol:"\ud83c\uddf8\ud83c\uddfd"},{symbol:"\ud83c\uddf8\ud83c\uddf0"},{symbol:"\ud83c\uddf8\ud83c\uddee"},{symbol:"\ud83c\uddec\ud83c\uddf8"},{symbol:"\ud83c\uddf8\ud83c\udde7"},{symbol:"\ud83c\uddf8\ud83c\uddf4"},{symbol:"\ud83c\uddff\ud83c\udde6"},{symbol:"\ud83c\uddf0\ud83c\uddf7"},{symbol:"\ud83c\uddea\ud83c\uddf8"},{symbol:"\ud83c\uddf1\ud83c\uddf0"},{symbol:"\ud83c\uddf8\ud83c\udded"},{symbol:"\ud83c\uddf0\ud83c\uddf3"},{symbol:"\ud83c\uddf1\ud83c\udde8"},{symbol:"\ud83c\uddf5\ud83c\uddf2"},{symbol:"\ud83c\uddfb\ud83c\udde8"},{symbol:"\ud83c\uddf8\ud83c\udde9"},{symbol:"\ud83c\uddf8\ud83c\uddf7"},{symbol:"\ud83c\uddf8\ud83c\uddff"},{symbol:"\ud83c\uddf8\ud83c\uddea"},{symbol:"\ud83c\udde8\ud83c\udded"},{symbol:"\ud83c\uddf8\ud83c\uddfe"},{symbol:"\ud83c\uddf9\ud83c\uddfc"},{symbol:"\ud83c\uddf9\ud83c\uddef"},{symbol:"\ud83c\uddf9\ud83c\uddff"},{symbol:"\ud83c\uddf9\ud83c\udded"},{symbol:"\ud83c\uddf9\ud83c\uddf1"},{symbol:"\ud83c\uddf9\ud83c\uddec"},{symbol:"\ud83c\uddf9\ud83c\uddf0"},{symbol:"\ud83c\uddf9\ud83c\uddf4"},{symbol:"\ud83c\uddf9\ud83c\uddf3"},{symbol:"\ud83c\uddf9\ud83c\uddf7"},{symbol:"\ud83c\uddf9\ud83c\uddf2"},{symbol:"\ud83c\uddf9\ud83c\udde8"},{symbol:"\ud83c\uddf9\ud83c\uddfb"},{symbol:"\ud83c\uddfb\ud83c\uddee"},{symbol:"\ud83c\uddfa\ud83c\uddec"},{symbol:"\ud83c\uddfa\ud83c\udde6"},{symbol:"\ud83c\udde6\ud83c\uddea"},{symbol:"\ud83c\uddec\ud83c\udde7"},{symbol:"\ud83c\uddfa\ud83c\uddf8"},{symbol:"\ud83c\uddfa\ud83c\uddfe"},{symbol:"\ud83c\uddfa\ud83c\uddff"},{symbol:"\ud83c\uddfb\ud83c\uddfa"},{symbol:"\ud83c\uddfb\ud83c\udde6"},{symbol:"\ud83c\uddfb\ud83c\uddea"},{symbol:"\ud83c\uddfb\ud83c\uddf3"},{symbol:"\ud83c\uddfc\ud83c\uddeb"},{symbol:"\ud83c\uddea\ud83c\udded"},{symbol:"\ud83c\uddfe\ud83c\uddea"},{symbol:"\ud83c\uddff\ud83c\uddf2"},{symbol:"\ud83c\uddff\ud83c\uddfc"}]}];
/**
	 * Bitrix UI
	 * Smiles Vue component
	 *
	 * @package bitrix
	 * @subpackage ui
	 * @copyright 2001-2020 Bitrix
	 */r.WidgetBitrixVue.component("bx-smiles",{data:function e(){return{smiles:[],sets:[],emoji:[],mode:"smile",emojiIcon:"\ud83d\ude0d"}},created:function e(){var t=this;this.setSelected=0;this.serverLoad=false;var n=this.$root.$bitrixRestClient||this.$Bitrix.RestClient.get();this.smilesController=new a(n);this.smilesController.loadFromCache().then((function(e){if(t.serverLoad)return true;t.smiles=e.smiles;t.sets=e.sets.map((function(e,n){e.selected=t.setSelected===n;return e}))}));this.smilesController.loadFromServer().then((function(e){t.smiles=e.smiles;t.sets=e.sets.map((function(e,n){e.selected=t.setSelected===n;return e}))}));this.emoji=l},methods:{selectSet:function e(t){var n=this;this.mode="smile";this.$emit("selectSet",{setId:t});this.smilesController.changeSet(t).then((function(e){n.smiles=e;n.sets.map((function(e){e.selected=e.id===t;if(e.selected){n.setSelected=t}return e}));n.$refs.elements.scrollTop=0}))},selectSmile:function e(t){this.$emit("selectSmile",{text:" "+t+" "})},switchToEmoji:function e(){this.mode="emoji";this.sets.map((function(e){e.selected=false}))},showCategory:function e(t){if(this.isWindows()){return t.showForWindows}else{return true}},isMac:function e(){return navigator.userAgent.toLowerCase().includes("macintosh")},isLinux:function e(){return navigator.userAgent.toLowerCase().includes("linux")},isWindows:function e(){return navigator.userAgent.toLowerCase().includes("windows")||!this.isMac()&&!this.isLinux()}},computed:{showEmoji:function e(){return this.$Bitrix.Loc.getMessage("UTF_MODE")==="Y"},isEmojiMode:function e(){return this.mode==="emoji"},isSmileMode:function e(){return this.mode==="smile"},emojiIconStyle:function e(){var t="bx-ui-smiles-set-emoji";if(this.isMac()){return t+="-mac"}else if(this.isLinux()){return t+="-linux"}else if(this.isWindows()){return t+="-win"}else{return t}}},template:'\n\t\t<div class="bx-ui-smiles-box">\n\t\t\t<div class="bx-ui-smiles-elements-wrap" ref="elements">\n\t\t\t\t<template v-if="!smiles.length">\n\t\t\t\t\t<svg class="bx-ui-smiles-loading-circular" viewBox="25 25 50 50">\n\t\t\t\t\t\t<circle class="bx-ui-smiles-loading-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n\t\t\t\t\t\t<circle class="bx-ui-smiles-loading-inner-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</template>\n\t\t\t\t<template v-else-if="isSmileMode">\n\t\t\t\t\t<template v-for="smile in smiles">\n\t\t\t\t\t\t<div class="bx-ui-smiles-smile">\n\t\t\t\t\t\t\t<img v-bx-lazyload :key="smile.id"\n\t\t\t\t\t\t\t\tclass="bx-ui-smiles-smile-icon"\n\t\t\t\t\t\t\t\t:data-lazyload-src="smile.image"\n\t\t\t\t\t\t\t\tdata-lazyload-error-class="bx-ui-smiles-smile-icon-error"\n\t\t\t\t\t\t\t\t:title="smile.name"\n\t\t\t\t\t\t\t\t:style="{height: (smile.originalHeight*0.5)+\'px\', width: (smile.originalWidth*0.5)+\'px\'}"\n\t\t\t\t\t\t\t\t@click="selectSmile(smile.typing)"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t\t<template v-else-if="isEmojiMode">\n\t\t\t\t\t<div v-for="category in emoji" class="bx-ui-smiles-emoji-wrap">\n\t\t\t\t\t\t<template v-if="showCategory(category)">\n\t\t\t\t\t\t\t<div class="bx-ui-smiles-category">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage(\'UI_VUE_SMILES_EMOJI_CATEGORY_\' + category.code) }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<template v-for="element in category.emoji">\n\t\t\t\t\t\t\t\t<div class="bx-ui-smiles-smile" style="font-size: 28px;">\n\t\t\t\t\t\t\t\t\t<div class="bx-ui-smiles-smile-icon" @click="selectSmile(element.symbol)">\n\t\t\t\t\t\t\t\t\t\t{{ element.symbol }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<template v-if="sets.length > 1 || emoji && showEmoji">\n\t\t\t\t<div class="bx-ui-smiles-sets">\n\t\t\t\t\t<template v-for="set in sets">\n\t\t\t\t\t\t<div :class="[\'bx-ui-smiles-set\', {\'bx-ui-smiles-set-selected\': set.selected}]">\n\t\t\t\t\t\t\t<img v-bx-lazyload\n\t\t\t\t\t\t\t\t:key="set.id"\n\t\t\t\t\t\t\t\tclass="bx-ui-smiles-set-icon"\n\t\t\t\t\t\t\t\t:data-lazyload-src="set.image"\n\t\t\t\t\t\t\t\tdata-lazyload-error-class="bx-ui-smiles-set-icon-error"\n\t\t\t\t\t\t\t\t:title="set.name"\n\t\t\t\t\t\t\t\t@click="selectSet(set.id)"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<div v-if="emoji && showEmoji" :class="[\'bx-ui-smiles-set\', {\'bx-ui-smiles-set-selected\': isEmojiMode}]">\n\t\t\t\t\t\t<div :class="[\'bx-ui-smiles-set-icon\', emojiIconStyle]" @click="switchToEmoji">\n\t\t\t\t\t\t \t{{ emojiIcon }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t'})})(this.window=this.window||{},BX,window,BX,BX.Dexie3);(function(e,t,n,r,i,s,o,a,l,u,c,f,d,h,p,m,g,v,y,b,w,S,k,I,E,C,_){"use strict";
/**
	 * Bitrix OpenLines widget
	 * Widget constants
	 *
	 * @package bitrix
	 * @subpackage imopenlines
	 * @copyright 2001-2019 Bitrix
	 */function x(e){var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(e[n])}}return t}var T=Object.freeze({none:"none",like:"like",dislike:"dislike"});var O=Object.freeze({russian:"ru",ukraine:"ua",world:"en"});var M=Object.freeze({none:"none",like:"like",smile:"smile",consent:"consent",welcome:"welcome",offline:"offline",history:"history"});var D=Object.freeze({topLeft:1,topMiddle:2,topBottom:3,bottomLeft:6,bottomMiddle:5,bottomRight:4});var A=Object.freeze({1:"top-left",2:"top-center",3:"top-right",6:"bottom-left",5:"bottom-center",4:"bottom-right"});var P=Object.freeze({width:435,height:557});var L=Object.freeze({width:340,height:435});var R=Object.freeze({configLoaded:"configLoaded",widgetOpen:"widgetOpen",widgetClose:"widgetClose",sessionStart:"sessionStart",sessionOperatorChange:"sessionOperatorChange",sessionFinish:"sessionFinish",operatorMessage:"operatorMessage",userForm:"userForm",userMessage:"userMessage",userFile:"userFile",userVote:"userVote",every:"every"});var H=x(R);var j=Object.freeze({widgetUserRegister:"imopenlines.widget.user.register",widgetChatCreate:"imopenlines.widget.chat.create",widgetConfigGet:"imopenlines.widget.config.get",widgetDialogGet:"imopenlines.widget.dialog.get",widgetDialogList:"imopenlines.widget.dialog.list",widgetUserGet:"imopenlines.widget.user.get",widgetUserConsentApply:"imopenlines.widget.user.consent.apply",widgetVoteSend:"imopenlines.widget.vote.send",widgetActionSend:"imopenlines.widget.action.send",pullServerTime:"server.time",pullConfigGet:"pull.config.get"});var N=x(j);var B=Object.freeze({guest:"guest"});var F=Object.freeze({new:0,skip:5,answer:10,client:20,clientAfterOperator:25,operator:40,waitClient:50,close:60,spam:65,duplicate:69,silentlyClose:75});var U=Object.freeze({showForm:"IMOL.Widget:showForm",hideForm:"IMOL.Widget:hideForm",processMessagesToSendQueue:"IMOL.Widget:processMessagesToSendQueue",requestData:"IMOL.Widget:requestData",showConsent:"IMOL.Widget:showConsent",acceptConsent:"IMOL.Widget:acceptConsent",consentAccepted:"IMOL.Widget:consentAccepted",declineConsent:"IMOL.Widget:declineConsent",consentDeclined:"IMOL.Widget:consentDeclined",sendDialogVote:"IMOL.Widget:sendDialogVote",createSession:"IMOL.Widget:createSession",openSession:"IMOL.Widget:openSession"});
/**
	 * Bitrix OpenLines widget
	 * Widget model (Vuex Builder model)
	 *
	 * @package bitrix
	 * @subpackage imopenlines
	 * @copyright 2001-2019 Bitrix
	 */var W=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"getName",value:function e(){return"widget"}},{key:"getState",value:function e(){return{common:{configId:0,configName:"",host:this.getVariable("common.host",location.protocol+"//"+location.host),pageMode:this.getVariable("common.pageMode",false),copyright:this.getVariable("common.copyright",true),copyrightUrl:this.getVariable("common.copyrightUrl","https://bitrix24.com"),location:this.getVariable("common.location",D.bottomRight),styles:{backgroundColor:this.getVariable("styles.backgroundColor","#17a3ea"),iconColor:this.getVariable("styles.iconColor","#ffffff")},vote:{enable:false,beforeFinish:true,messageText:this.getVariable("vote.messageText",""),messageLike:this.getVariable("vote.messageLike",""),messageDislike:this.getVariable("vote.messageDislike","")},textMessages:{bxLivechatOnlineLine1:this.getVariable("textMessages.bxLivechatOnlineLine1",""),bxLivechatOnlineLine2:this.getVariable("textMessages.bxLivechatOnlineLine2",""),bxLivechatOffline:this.getVariable("textMessages.bxLivechatOffline",""),bxLivechatTitle:""},online:false,operators:[],connectors:[],showForm:M.none,showed:false,reopen:false,dragged:false,textareaHeight:0,widgetHeight:0,widgetWidth:0,showConsent:false,consentUrl:"",dialogStart:false,watchTyping:false,showSessionId:false,isCreateSessionMode:false,crmFormsSettings:{useWelcomeForm:false,welcomeFormId:0,welcomeFormSec:"",welcomeFormDelay:false,welcomeFormFilled:false,successText:"",errorText:""}},dialog:{sessionId:0,sessionClose:true,sessionStatus:0,userVote:T.none,closeVote:false,userConsent:false,operatorChatId:0,operator:{id:0,name:"",firstName:"",lastName:"",workPosition:"",avatar:"",online:false}},user:{id:-1,hash:"",name:"",firstName:"",lastName:"",avatar:"",email:"",phone:"",www:"",gender:"M",position:""}}}},{key:"getStateSaveException",value:function e(){return{common:{host:null,pageMode:null,copyright:null,copyrightUrl:null,styles:null,dragged:null,showed:null,showConsent:null,showForm:null}}}},{key:"getMutations",value:function e(){var t=this;return{common:function e(n,r){if(typeof r.configId==="number"){n.common.configId=r.configId}if(typeof r.configName==="string"){n.common.configName=r.configName}if(typeof r.online==="boolean"){n.common.online=r.online}if(g.Utils.types.isPlainObject(r.vote)){if(typeof r.vote.enable==="boolean"){n.common.vote.enable=r.vote.enable}if(typeof r.vote.beforeFinish==="boolean"){n.common.vote.beforeFinish=r.vote.beforeFinish}if(typeof r.vote.messageText==="string"){n.common.vote.messageText=r.vote.messageText}if(typeof r.vote.messageLike==="string"){n.common.vote.messageLike=r.vote.messageLike}if(typeof r.vote.messageDislike==="string"){n.common.vote.messageDislike=r.vote.messageDislike}}if(g.Utils.types.isPlainObject(r.textMessages)){if(typeof r.textMessages.bxLivechatOnlineLine1==="string"&&r.textMessages.bxLivechatOnlineLine1!==""){n.common.textMessages.bxLivechatOnlineLine1=r.textMessages.bxLivechatOnlineLine1}if(typeof r.textMessages.bxLivechatOnlineLine2==="string"&&r.textMessages.bxLivechatOnlineLine2!==""){n.common.textMessages.bxLivechatOnlineLine2=r.textMessages.bxLivechatOnlineLine2}if(typeof r.textMessages.bxLivechatOffline==="string"&&r.textMessages.bxLivechatOffline!==""){n.common.textMessages.bxLivechatOffline=r.textMessages.bxLivechatOffline}if(typeof r.textMessages.bxLivechatTitle==="string"&&r.textMessages.bxLivechatTitle!==""){n.common.textMessages.bxLivechatTitle=r.textMessages.bxLivechatTitle}}if(typeof r.dragged==="boolean"){n.common.dragged=r.dragged}if(typeof r.textareaHeight==="number"){n.common.textareaHeight=r.textareaHeight}if(typeof r.widgetHeight==="number"){n.common.widgetHeight=r.widgetHeight}if(typeof r.widgetWidth==="number"){n.common.widgetWidth=r.widgetWidth}if(typeof r.showConsent==="boolean"){n.common.showConsent=r.showConsent}if(typeof r.consentUrl==="string"){n.common.consentUrl=r.consentUrl}if(typeof r.showed==="boolean"){n.common.showed=r.showed;r.reopen=g.Utils.device.isMobile()?false:r.showed}if(typeof r.reopen==="boolean"){n.common.reopen=r.reopen}if(typeof r.copyright==="boolean"){n.common.copyright=r.copyright}if(typeof r.dialogStart==="boolean"){n.common.dialogStart=r.dialogStart}if(typeof r.watchTyping==="boolean"){n.common.watchTyping=r.watchTyping}if(typeof r.showSessionId==="boolean"){n.common.showSessionId=r.showSessionId}if(r.operators instanceof Array){n.common.operators=r.operators}if(r.connectors instanceof Array){n.common.connectors=r.connectors}if(typeof r.showForm==="string"&&typeof M[r.showForm]!=="undefined"){if(r.showForm===M.like&&!!n.dialog.closeVote){r.showForm=M.none}n.common.showForm=r.showForm}if(typeof r.location==="number"&&typeof A[r.location]!=="undefined"){if(n.common.location!==r.location){n.common.widgetHeight=0;n.common.widgetWidth=0;n.common.location=r.location}}if(g.Utils.types.isPlainObject(r.crmFormsSettings)){if(typeof r.crmFormsSettings.useWelcomeForm==="string"){n.common.crmFormsSettings.useWelcomeForm=r.crmFormsSettings.useWelcomeForm==="Y"}if(typeof r.crmFormsSettings.welcomeFormId==="string"){n.common.crmFormsSettings.welcomeFormId=r.crmFormsSettings.welcomeFormId}if(typeof r.crmFormsSettings.welcomeFormSec==="string"){n.common.crmFormsSettings.welcomeFormSec=r.crmFormsSettings.welcomeFormSec}if(typeof r.crmFormsSettings.welcomeFormDelay==="string"){n.common.crmFormsSettings.welcomeFormDelay=r.crmFormsSettings.welcomeFormDelay==="Y"}if(typeof r.crmFormsSettings.successText==="string"&&r.crmFormsSettings.successText!==""){n.common.crmFormsSettings.successText=r.crmFormsSettings.successText}if(typeof r.crmFormsSettings.errorText==="string"&&r.crmFormsSettings.errorText!==""){n.common.crmFormsSettings.errorText=r.crmFormsSettings.errorText}}if(typeof r.isCreateSessionMode==="boolean"){n.common.isCreateSessionMode=r.isCreateSessionMode}if(t.isSaveNeeded({common:r})){t.saveState(n)}},dialog:function e(n,r){if(typeof r.sessionId==="number"){n.dialog.sessionId=r.sessionId}if(typeof r.sessionClose==="boolean"){n.dialog.sessionClose=r.sessionClose}if(typeof r.sessionStatus==="number"){n.dialog.sessionStatus=r.sessionStatus}if(typeof r.userConsent==="boolean"){n.dialog.userConsent=r.userConsent}if(typeof r.userVote==="string"&&typeof r.userVote!=="undefined"){n.dialog.userVote=r.userVote}if(typeof r.closeVote==="boolean"){n.dialog.closeVote=r.closeVote;if(!!r.closeVote&&n.common.showForm===M.like){n.common.showForm=M.none}}if(typeof r.operatorChatId==="number"){n.dialog.operatorChatId=r.operatorChatId}if(g.Utils.types.isPlainObject(r.operator)){if(typeof r.operator.id==="number"){n.dialog.operator.id=r.operator.id}if(typeof r.operator.name==="string"||typeof r.operator.name==="number"){n.dialog.operator.name=r.operator.name.toString()}if(typeof r.operator.lastName==="string"||typeof r.operator.lastName==="number"){n.dialog.operator.lastName=r.operator.lastName.toString()}if(typeof r.operator.firstName==="string"||typeof r.operator.firstName==="number"){n.dialog.operator.firstName=r.operator.firstName.toString()}if(typeof r.operator.workPosition==="string"||typeof r.operator.workPosition==="number"){n.dialog.operator.workPosition=r.operator.workPosition.toString()}if(typeof r.operator.avatar==="string"){if(!r.operator.avatar||r.operator.avatar.startsWith("http")){n.dialog.operator.avatar=r.operator.avatar}else{n.dialog.operator.avatar=n.common.host+r.operator.avatar}}if(typeof r.operator.online==="boolean"){n.dialog.operator.online=r.operator.online}}if(t.isSaveNeeded({dialog:r})){t.saveState(n)}},user:function e(n,r){if(typeof r.id==="number"){n.user.id=r.id}if(typeof r.hash==="string"&&r.hash!==n.user.hash){n.user.hash=r.hash;p.Cookie.set(null,"LIVECHAT_HASH",r.hash,{expires:365*86400,path:"/"})}if(typeof r.name==="string"||typeof r.name==="number"){n.user.name=r.name.toString()}if(typeof r.firstName==="string"||typeof r.firstName==="number"){n.user.firstName=r.firstName.toString()}if(typeof r.lastName==="string"||typeof r.lastName==="number"){n.user.lastName=r.lastName.toString()}if(typeof r.avatar==="string"){n.user.avatar=r.avatar}if(typeof r.email==="string"){n.user.email=r.email}if(typeof r.phone==="string"||typeof r.phone==="number"){n.user.phone=r.phone.toString()}if(typeof r.www==="string"){n.user.www=r.www}if(typeof r.gender==="string"){n.user.gender=r.gender}if(typeof r.position==="string"){n.user.position=r.position}if(t.isSaveNeeded({user:r})){t.saveState(n)}}}}},{key:"getActions",value:function e(){var t=this;return{show:function e(t){var n=t.commit;n("common",{showed:true})},setVoteDateFinish:function e(n,r){var i=n.commit,s=n.dispatch,o=n.state;if(!r){clearTimeout(t.setVoteDateTimeout);i("dialog",{closeVote:false});return true}var a=new Date(r).getTime()-(new Date).getTime();var l=1e4;clearTimeout(t.setVoteDateTimeout);if(r){if(a&&!o.dialog.closeVote){i("dialog",{closeVote:false})}var u=a;if(a>l){u=l}t.setVoteDateTimeout=setTimeout((function e(){u=new Date(r).getTime()-(new Date).getTime();if(u>0){if(u>l){u=l}setTimeout(e,u)}else{i("dialog",{closeVote:true})}}),u)}}}}}]);return t}(E.WidgetVuexBuilderModel);
/**
	 * Bitrix OpenLines widget
	 * Rest client (base on BX.RestClient)
	 *
	 * @package bitrix
	 * @subpackage imopenlines
	 * @copyright 2001-2019 Bitrix
	 */var $=function(){function e(t){babelHelpers.classCallCheck(this,e);this.queryAuthRestore=false;this.setAuthId(B.guest);this.restClient=new l.RestClient({endpoint:t.endpoint,queryParams:this.queryParams,cors:true})}babelHelpers.createClass(e,[{key:"setAuthId",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(babelHelpers["typeof"](this.queryParams)!=="object"){this.queryParams={}}if(t==B.guest||typeof t==="string"&&t.match(/^[a-f0-9]{32}$/)){this.queryParams.livechat_auth_id=t}else{console.error("%LiveChatRestClient.setAuthId: auth is not correct (%c".concat(t,"%c)"),"color: black;","font-weight: bold; color: red","color: black");return false}if(t==B.guest&&typeof n==="string"&&n.match(/^[a-f0-9]{32}$/)){this.queryParams.livechat_custom_auth_id=n}return true}},{key:"getAuthId",value:function e(){if(babelHelpers["typeof"](this.queryParams)!=="object"){this.queryParams={}}return this.queryParams.livechat_auth_id||null}},{key:"callMethod",value:function e(t,n,r,i){var s=this;var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;if(!o){o=g.Utils.getLogTrackingParams({name:t})}var a=new BX.Promise;this.restClient.callMethod(t,n,null,i,o).then((function(e){s.queryAuthRestore=false;a.fulfill(e)}))["catch"]((function(e){var r=e.error();if(r.ex.error=="LIVECHAT_AUTH_WIDGET_USER"){s.setAuthId(r.ex.hash);if(t===j.widgetUserRegister){console.warn("BX.LiveChatRestClient: ".concat(r.ex.error_description," (").concat(r.ex.error,")"));s.queryAuthRestore=false;a.reject(e);return false}if(!s.queryAuthRestore){console.warn("BX.LiveChatRestClient: your auth-token has expired, send query with a new token");s.queryAuthRestore=true;s.restClient.callMethod(t,n,null,i,o).then((function(e){s.queryAuthRestore=false;a.fulfill(e)}))["catch"]((function(e){s.queryAuthRestore=false;a.reject(e)}));return false}}s.queryAuthRestore=false;a.reject(e)}));return a}},{key:"callBatch",value:function e(t,n,r,i,s){var o=this;var a=function e(a){for(var l in t){if(!t.hasOwnProperty(l)){continue}var u=a[l].error();if(u&&u.ex.error=="LIVECHAT_AUTH_WIDGET_USER"){o.setAuthId(u.ex.hash);if(l===j.widgetUserRegister){console.warn("BX.LiveChatRestClient: ".concat(u.ex.error_description," (").concat(u.ex.error,")"));o.queryAuthRestore=false;n(a);return false}if(!o.queryAuthRestore){console.warn("BX.LiveChatRestClient: your auth-token has expired, send query with a new token");o.queryAuthRestore=true;o.restClient.callBatch(t,n,r,i,s);return false}}}o.queryAuthRestore=false;n(a);return true};return this.restClient.callBatch(t,a,r,i,s)}}]);return e}();
/**
	 * Bitrix OpenLines widget
	 * Widget Rest answers (Rest Answer Handler)
	 *
	 * @package bitrix
	 * @subpackage imopenlines
	 * @copyright 2001-2019 Bitrix
	 */var V=function(e){babelHelpers.inherits(t,e);function t(){var e;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,n));e.widget=n.widget;return e}babelHelpers.createClass(t,[{key:"handleImopenlinesWidgetConfigGetSuccess",value:function e(t){this.store.commit("widget/common",{configId:t.configId,configName:t.configName,vote:t.vote,textMessages:t.textMessages,operators:t.operators||[],online:t.online,consentUrl:t.consentUrl,connectors:t.connectors||[],watchTyping:t.watchTyping,showSessionId:t.showSessionId,crmFormsSettings:t.crmFormsSettings});this.store.commit("application/set",{disk:t.disk});this.widget.addLocalize(t.serverVariables);m.LocalStorage.set(this.widget.getSiteId(),0,"serverVariables",t.serverVariables||{})}},{key:"handleImopenlinesWidgetUserRegisterSuccess",value:function e(t){this.widget.restClient.setAuthId(t.hash);var n=[];if(typeof this.store.state.messages.collection[this.controller.application.getChatId()]!=="undefined"){n=this.store.state.messages.collection[this.controller.application.getChatId()]}this.store.commit("messages/initCollection",{chatId:t.chatId,messages:n});this.store.commit("dialogues/initCollection",{dialogId:t.dialogId,fields:{entityType:"LIVECHAT",type:"livechat"}});this.store.commit("application/set",{dialog:{chatId:t.chatId,dialogId:"chat"+t.chatId}})}},{key:"handleImopenlinesWidgetChatCreateSuccess",value:function e(t){this.widget.restClient.setAuthId(t.hash);this.store.commit("messages/initCollection",{chatId:t.chatId,messages:[]});this.store.commit("dialogues/initCollection",{dialogId:t.dialogId,fields:{entityType:"LIVECHAT",type:"livechat"}});this.store.commit("application/set",{dialog:{chatId:t.chatId,dialogId:"chat"+t.chatId}})}},{key:"handleImopenlinesWidgetUserGetSuccess",value:function e(t){this.store.commit("widget/user",{id:t.id,hash:t.hash,name:t.name,firstName:t.firstName,lastName:t.lastName,phone:t.phone,avatar:t.avatar,email:t.email,www:t.www,gender:t.gender,position:t.position});this.store.dispatch("users/set",[{id:t.id,name:t.name,firstName:t.firstName,lastName:t.lastName,avatar:t.avatar,gender:t.gender,workPosition:t.position}]);this.store.commit("application/set",{common:{userId:t.id}})}},{key:"handleImopenlinesWidgetDialogGetSuccess",value:function e(t){this.store.commit("messages/initCollection",{chatId:t.chatId});this.store.commit("widget/dialog",t);this.store.commit("application/set",{dialog:{chatId:t.chatId,dialogId:"chat"+t.chatId,diskFolderId:t.diskFolderId}});this.store.dispatch("widget/setVoteDateFinish",t.dateCloseVote)}},{key:"handleImDialogMessagesGetInitSuccess",value:function e(t){this.handleImDialogMessagesGetSuccess(t)}},{key:"handleImDialogMessagesGetSuccess",value:function e(t){if(t.messages&&t.messages.length>0&&!this.widget.isDialogStart()){this.store.commit("widget/common",{dialogStart:true});this.store.commit("widget/dialog",{userConsent:true})}}},{key:"handleImMessageAddSuccess",value:function e(t,n){this.widget.sendEvent({type:R.userMessage,data:{id:t,text:n.text}})}},{key:"handleImDiskFileCommitSuccess",value:function e(t,n){this.widget.sendEvent({type:R.userFile,data:{}})}}]);return t}(u.BaseRestHandler);
/**
	 * Bitrix OpenLines widget
	 * Widget pull commands (Pull Command Handler)
	 *
	 * @package bitrix
	 * @subpackage imopenlines
	 * @copyright 2001-2019 Bitrix
	 */var G=function(){babelHelpers.createClass(e,[{key:"getModuleId",value:function e(){return"im"}}],[{key:"create",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new this(t)}}]);function e(t){babelHelpers.classCallCheck(this,e);this.controller=t.controller;this.store=t.store;this.widget=t.widget}babelHelpers.createClass(e,[{key:"handleMessageChat",value:function e(t,n,r){if(t.message.senderId!=this.controller.application.getUserId()){this.widget.sendEvent({type:R.operatorMessage,data:t});if(!this.store.state.widget.common.showed&&!this.widget.onceShowed){this.widget.onceShowed=true;this.widget.open()}}}}]);return e}();var z=function(){babelHelpers.createClass(e,null,[{key:"create",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new this(t)}}]);function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);this.controller=t.controller;this.store=t.store;this.widget=t.widget}babelHelpers.createClass(e,[{key:"getModuleId",value:function e(){return"imopenlines"}},{key:"handleSessionStart",value:function e(t,n,r){this.store.commit("widget/dialog",{sessionId:t.sessionId,sessionClose:false,sessionStatus:0,userVote:T.none});this.store.dispatch("widget/setVoteDateFinish","");this.widget.sendEvent({type:R.sessionStart,data:{sessionId:t.sessionId}})}},{key:"handleSessionOperatorChange",value:function e(t,n,r){this.store.commit("widget/dialog",{operator:t.operator,operatorChatId:t.operatorChatId});this.widget.sendEvent({type:R.sessionOperatorChange,data:{operator:t.operator}})}},{key:"handleSessionStatus",value:function e(t,n,r){this.store.commit("widget/dialog",{sessionId:t.sessionId,sessionStatus:t.sessionStatus,sessionClose:t.sessionClose});this.widget.sendEvent({type:R.sessionStatus,data:{sessionId:t.sessionId,sessionStatus:t.sessionStatus}});if(t.sessionClose){this.widget.sendEvent({type:R.sessionFinish,data:{sessionId:t.sessionId,sessionStatus:t.sessionStatus}});if(!t.spam){this.store.commit("widget/dialog",{operator:{name:"",firstName:"",lastName:"",workPosition:"",avatar:"",online:false}})}}}},{key:"handleSessionDateCloseVote",value:function e(t,n,r){this.store.dispatch("widget/setVoteDateFinish",t.dateCloseVote)}}]);return e}();function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=function(){function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"params",null);babelHelpers.defineProperty(this,"template",null);babelHelpers.defineProperty(this,"rootNode",null);babelHelpers.defineProperty(this,"restClient",null);babelHelpers.defineProperty(this,"pullClient",null);babelHelpers.defineProperty(this,"ready",true);babelHelpers.defineProperty(this,"inited",false);babelHelpers.defineProperty(this,"offline",false);babelHelpers.defineProperty(this,"widgetConfigRequest",null);babelHelpers.defineProperty(this,"userRegisterData",{});babelHelpers.defineProperty(this,"customData",[]);babelHelpers.defineProperty(this,"options",{checkSameDomain:true});babelHelpers.defineProperty(this,"subscribers",{});babelHelpers.defineProperty(this,"code","");babelHelpers.defineProperty(this,"host","");babelHelpers.defineProperty(this,"language","");babelHelpers.defineProperty(this,"copyright",true);babelHelpers.defineProperty(this,"copyrightUrl","");babelHelpers.defineProperty(this,"buttonInstance",null);babelHelpers.defineProperty(this,"localize",null);babelHelpers.defineProperty(this,"pageMode",null);this.params=n;this.messagesQueue=[];_.EventEmitter.subscribe(U.requestData,this.requestData.bind(this));_.EventEmitter.subscribe(U.createSession,this.createChat.bind(this));_.EventEmitter.subscribe(U.openSession,this.openSession.bind(this));this.initParams();this.initRestClient();this.initPullClient();this.initCore().then((function(){t.initWidget();t.initComplete()}))}babelHelpers.createClass(e,[{key:"initParams",value:function e(){this.rootNode=this.params.node||document.createElement("div");this.code=this.params.code||"";this.host=this.params.host||"";this.language=this.params.language||"en";this.copyright=this.params.copyright!==false;this.copyrightUrl=this.copyright&&this.params.copyrightUrl?this.params.copyrightUrl:"";if(this.params.buttonInstance&&babelHelpers["typeof"](this.params.buttonInstance)==="object"){this.buttonInstance=this.params.buttonInstance}if(this.params.pageMode&&babelHelpers["typeof"](this.params.pageMode)==="object"){this.pageMode={useBitrixLocalize:this.params.pageMode.useBitrixLocalize===true,placeholder:document.querySelector("#".concat(this.params.pageMode.placeholder))}}var t=this.checkRequiredFields();if(t.length>0){t.forEach((function(e){return console.warn(e)}));this.ready=false}this.setRootNode();this.localize=this.pageMode&&this.pageMode.useBitrixLocalize?window.BX.message:{};this.setLocalize()}},{key:"initRestClient",value:function e(){this.restClient=new $({endpoint:"".concat(this.host,"/rest")})}},{key:"initPullClient",value:function e(){this.pullClient=new f.PullClient({serverEnabled:true,userId:0,siteId:this.getSiteId(),restClient:this.restClient,skipStorageInit:true,configTimestamp:0,skipCheckRevision:true,getPublicListMethod:"imopenlines.widget.operator.get"})}},{key:"initCore",value:function e(){this.controller=new h.Controller({host:this.getHost(),siteId:this.getSiteId(),userId:0,languageId:this.language,pull:{client:this.pullClient},rest:{client:this.restClient},localize:this.localize,vuexBuilder:{database:!g.Utils.browser.isIe(),databaseName:"imol/widget",databaseType:E.WidgetVuexBuilder.DatabaseType.localStorage,models:[W.create().setVariables(this.getWidgetVariables())]}});return this.controller.ready()}},{key:"initWidget",value:function e(){this.restClient.setAuthId(this.getRestAuthId());this.setModelData();this.controller.application.setPrepareFilesBeforeSaveFunction(this.prepareFileData.bind(this));this.controller.addRestAnswerHandler(V.create({widget:this,store:this.controller.getStore(),controller:this.controller}))}},{key:"initComplete",value:function e(){window.dispatchEvent(new CustomEvent("onBitrixLiveChat",{detail:{widget:this,widgetCode:this.code,widgetHost:this.host}}));if(this.callStartFlag){this.start()}if(this.pageMode||this.callOpenFlag){this.open()}}},{key:"start",value:function e(){if(!this.controller||!this.controller.getStore()){this.callStartFlag=true;return true}if(this.isSessionActive()){this.requestWidgetData()}return true}},{key:"open",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!this.controller.getStore()){this.callOpenFlag=true;return true}if(!t.openFromButton&&this.buttonInstance){this.buttonInstance.wm.showById("openline_livechat")}var n=this.checkForErrorsBeforeOpen(),r=n.error,i=n.stop;if(i){return false}if(!r&&!this.inited){this.requestWidgetData()}this.attachTemplate()}},{key:"requestWidgetData",value:function e(){var t=this;if(!this.ready){console.error("LiveChatWidget.start: widget code or host is not specified");return false}if(this.isUserReady()||this.isHashAvailable()){this.requestData();this.inited=true;this.fireInitEvent();return true}this.controller.restClient.callMethod(j.widgetConfigGet,{code:this.code},(function(e){t.widgetConfigRequest=e})).then((function(e){t.widgetConfigRequest=null;t.clearError();t.controller.executeRestAnswer(j.widgetConfigGet,e);if(!t.inited){t.inited=true;t.fireInitEvent()}}))["catch"]((function(e){t.widgetConfigRequest=null;t.setError(e.error().ex.error,e.error().ex.error_description)}));if(this.isConfigDataLoaded()){this.inited=true;this.fireInitEvent()}}},{key:"requestData",value:function e(){w.Logger.log("requesting data from widget");if(this.requestDataSend){return true}this.requestDataSend=true;if(this.widgetConfigRequest){this.widgetConfigRequest.abort()}var t=this.handleBatchRequestResult.bind(this);this.controller.restClient.callBatch(this.getDataRequestQuery(),t,false,false,g.Utils.getLogTrackingParams({name:"widget.init.config",dialog:this.controller.application.getDialogData()}))}},{key:"createChat",value:function e(){var t=this;return new Promise((function(e,n){t.controller.restClient.callBatch(t.getCreateChatRequestQuery(),(function(n){t.handleBatchCreateChatRequestResult(n).then((function(){e()}))}),false,false)}))}},{key:"handleBatchRequestResult",value:function e(t){var n=this;if(!t){this.requestDataSend=false;this.setError("EMPTY_RESPONSE","Server returned an empty response.");return false}this.handleConfigGet(t).then((function(){return n.handleUserGet(t)})).then((function(){return n.handleChatGet(t)})).then((function(){return n.handleDialogGet(t)})).then((function(){return n.handleDialogMessagesGet(t)})).then((function(){return n.handleUserRegister(t)})).then((function(){return n.handlePullRequests(t)}))["catch"]((function(e){var t=e.code,r=e.description;n.setError(t,r)}))["finally"]((function(){n.requestDataSend=false}))}},{key:"handleBatchCreateChatRequestResult",value:function e(t){var n=this;if(!t){this.requestDataSend=false;this.setError("EMPTY_RESPONSE","Server returned an empty response.");return false}return this.handleChatCreate(t).then((function(){return n.handleChatGet(t)})).then((function(){return n.handleDialogGet(t)}))["catch"]((function(e){var t=e.code,r=e.description;n.setError(t,r)}))["finally"]((function(){n.requestDataSend=false}))}},{key:"handleBatchOpenSessionRequestResult",value:function e(t){var n=this;if(!t){this.requestDataSend=false;this.setError("EMPTY_RESPONSE","Server returned an empty response.");return false}return this.handleChatGet(t).then((function(){return n.handleDialogGet(t)})).then((function(){return n.handleDialogMessagesGet(t)}))["catch"]((function(e){var t=e.code,r=e.description;n.setError(t,r)}))["finally"]((function(){n.requestDataSend=false}))}},{key:"getDataRequestQuery",value:function e(){var t=babelHelpers.defineProperty({},j.widgetConfigGet,[j.widgetConfigGet,{code:this.code}]);if(this.isUserRegistered()){t[j.widgetDialogGet]=[j.widgetDialogGet,{config_id:this.getConfigId(),trace_data:this.getCrmTraceData(),custom_data:this.getCustomData()}];t[k.RestMethodHandler.imChatGet]=[k.RestMethod.imChatGet,{dialog_id:"$result[".concat(j.widgetDialogGet,"][dialogId]")}];t[k.RestMethodHandler.imDialogMessagesGetInit]=[k.RestMethod.imDialogMessagesGet,{chat_id:"$result[".concat(j.widgetDialogGet,"][chatId]"),limit:this.controller.application.getRequestMessageLimit(),convert_text:"Y"}]}else{t[j.widgetUserRegister]=[j.widgetUserRegister,q({config_id:"$result[".concat(j.widgetConfigGet,"][configId]")},this.getUserRegisterFields())];t[k.RestMethodHandler.imChatGet]=[k.RestMethod.imChatGet,{dialog_id:"$result[".concat(j.widgetUserRegister,"][dialogId]")}];if(this.userRegisterData.hash||this.getUserHashCookie()){t[j.widgetDialogGet]=[j.widgetDialogGet,{config_id:"$result[".concat(j.widgetConfigGet,"][configId]"),trace_data:this.getCrmTraceData(),custom_data:this.getCustomData()}];t[k.RestMethodHandler.imDialogMessagesGetInit]=[k.RestMethod.imDialogMessagesGet,{chat_id:"$result[".concat(j.widgetDialogGet,"][chatId]"),limit:this.controller.application.getRequestMessageLimit(),convert_text:"Y"}]}if(this.isUserAgreeConsent()){t[j.widgetUserConsentApply]=[j.widgetUserConsentApply,{config_id:"$result[".concat(j.widgetConfigGet,"][configId]"),consent_url:location.href}]}}t[j.pullServerTime]=[j.pullServerTime,{}];t[j.pullConfigGet]=[j.pullConfigGet,{CACHE:"N"}];t[j.widgetUserGet]=[j.widgetUserGet,{}];return t}},{key:"getOpenSessionQuery",value:function e(t){var n=babelHelpers.defineProperty({},j.widgetDialogGet,[j.widgetDialogGet,{config_id:this.getConfigId(),chat_id:t}]);n[k.RestMethodHandler.imChatGet]=[k.RestMethod.imChatGet,{dialog_id:"chat".concat(t)}];n[k.RestMethodHandler.imDialogMessagesGetInit]=[k.RestMethod.imDialogMessagesGet,{chat_id:t,limit:50,convert_text:"Y"}];return n}},{key:"getCreateChatRequestQuery",value:function e(){var t={};t[j.widgetChatCreate]=[j.widgetChatCreate,q({config_id:this.getConfigId()},this.getUserRegisterFields())];t[k.RestMethodHandler.imChatGet]=[k.RestMethod.imChatGet,{dialog_id:"$result[".concat(j.widgetChatCreate,"][dialogId]")}];t[j.widgetDialogGet]=[j.widgetDialogGet,{config_id:this.getConfigId(),trace_data:this.getCrmTraceData(),custom_data:this.getCustomData()}];if(this.isUserAgreeConsent()){t[j.widgetUserConsentApply]=[j.widgetUserConsentApply,{config_id:this.getConfigId(),consent_url:location.href}]}t[j.pullServerTime]=[j.pullServerTime,{}];t[j.pullConfigGet]=[j.pullConfigGet,{CACHE:"N"}];t[j.widgetUserGet]=[j.widgetUserGet,{}];return t}},{key:"openSession",value:function e(t){var n=this;var r=t.getData();return new Promise((function(e,t){var i=n.controller.getStore().getters["dialogues/get"](r.session.dialogId);if(i){n.controller.getStore().commit("application/set",{dialog:{chatId:r.session.chatId,dialogId:r.session.dialogId,diskFolderId:0}});n.controller.getStore().commit("widget/common",{isCreateSessionMode:false});e();return}n.controller.restClient.callBatch(n.getOpenSessionQuery(r.session.chatId),(function(t){n.handleBatchOpenSessionRequestResult(t).then((function(){n.controller.getStore().commit("widget/common",{isCreateSessionMode:false});e()}))}),false,false)}))}},{key:"prepareFileData",value:function e(t){var n=this;if(!Array.isArray(t)){return t}return t.map((function(e){var t=(window.md5||v.md5)("".concat(n.getUserId(),"|").concat(e.id,"|").concat(n.getUserHash()));var r="livechat_auth_id=".concat(t,"&livechat_user_id=").concat(n.getUserId());if(e.urlPreview){e.urlPreview="".concat(e.urlPreview,"&").concat(r)}if(e.urlShow){e.urlShow="".concat(e.urlShow,"&").concat(r)}if(e.urlDownload){e.urlDownload="".concat(e.urlDownload,"&").concat(r)}return e}))}},{key:"checkRequiredFields",value:function e(){var t=[];if(typeof this.code==="string"&&this.code.length<=0){t.push("LiveChatWidget.constructor: code is not correct (".concat(this.code,")"))}if(typeof this.host==="string"&&(this.host.length<=0||!this.host.startsWith("http"))){t.push("LiveChatWidget.constructor: host is not correct (".concat(this.host,")"))}return t}},{key:"setRootNode",value:function e(){if(this.pageMode&&this.pageMode.placeholder){this.rootNode=this.pageMode.placeholder}else if(document.body.firstChild){document.body.insertBefore(this.rootNode,document.body.firstChild)}else{document.body.append(this.rootNode)}}},{key:"setLocalize",value:function e(){if(babelHelpers["typeof"](this.params.localize)==="object"){this.addLocalize(this.params.localize)}var t=m.LocalStorage.get(this.getSiteId(),0,"serverVariables",false);if(t){this.addLocalize(t)}}},{key:"getWidgetVariables",value:function e(){var t={common:{host:this.getHost(),pageMode:!!this.pageMode,copyright:this.copyright,copyrightUrl:this.copyrightUrl},vote:{messageText:this.getLocalize("BX_LIVECHAT_VOTE_TITLE"),messageLike:this.getLocalize("BX_LIVECHAT_VOTE_PLUS_TITLE"),messageDislike:this.getLocalize("BX_LIVECHAT_VOTE_MINUS_TITLE")},textMessages:{bxLivechatOnlineLine1:this.getLocalize("BX_LIVECHAT_ONLINE_LINE_1"),bxLivechatOnlineLine2:this.getLocalize("BX_LIVECHAT_ONLINE_LINE_2"),bxLivechatOffline:this.getLocalize("BX_LIVECHAT_OFFLINE")}};if(this.params.styles){t.styles={};if(this.params.styles.backgroundColor){t.styles.backgroundColor=this.params.styles.backgroundColor}if(this.params.styles.iconColor){t.styles.iconColor=this.params.styles.iconColor}}return t}},{key:"getRestAuthId",value:function e(){return this.isUserRegistered()?this.getUserHash():B.guest}},{key:"setModelData",value:function e(){if(this.params.location&&A[this.params.location]){this.controller.getStore().commit("widget/common",{location:this.params.location})}}},{key:"checkForErrorsBeforeOpen",value:function e(){var t={error:false,stop:false};if(!this.checkBrowserVersion()){this.setError("OLD_BROWSER_LOCALIZED",this.localize.BX_LIVECHAT_OLD_BROWSER);t.error=true}else if(g.Utils.versionCompare(C.WidgetVue.version(),"2.1")<0){alert(this.localize.BX_LIVECHAT_OLD_VUE);console.error("LiveChatWidget.error: OLD_VUE_VERSION (".concat(this.localize.BX_LIVECHAT_OLD_VUE_DEV.replace("#CURRENT_VERSION#",C.WidgetVue.version()),")"));t.error=true;t.stop=true}else if(this.isSameDomain()){this.setError("LIVECHAT_SAME_DOMAIN",this.localize.BX_LIVECHAT_SAME_DOMAIN);t.error=true}return t}},{key:"isSameDomain",value:function e(){if(typeof BX==="undefined"||!BX.isReady){return false}if(!this.options.checkSameDomain){return false}return this.host.lastIndexOf(".".concat(location.hostname))>-1}},{key:"checkBrowserVersion",value:function e(){if(g.Utils.platform.isIos()){var t=g.Utils.platform.getIosVersion();if(t&&t<=10){return false}}return true}},{key:"startPullClient",value:function e(t){var n=this;return new Promise((function(e,r){if(!n.getUserId()||!n.getSiteId()||!n.restClient){return r({ex:{error:"WIDGET_NOT_LOADED",error_description:"Widget is not loaded."}})}if(n.pullClientInited){if(!n.pullClient.isConnected()){n.pullClient.scheduleReconnect()}return e(true)}n.controller.userId=n.getUserId();n.pullClient.userId=n.getUserId();n.pullClient.configTimestamp=t?t.server.config_timestamp:0;n.pullClient.skipStorageInit=false;n.pullClient.storage=new f.PullClient.StorageManager({userId:n.getUserId(),siteId:n.getSiteId()});n.pullClient.subscribe(new G({store:n.controller.getStore(),controller:n.controller,widget:n}));n.pullClient.subscribe(new z({store:n.controller.getStore(),controller:n.controller,widget:n}));n.pullClient.subscribe({type:f.PullClient.SubscriptionType.Status,callback:n.eventStatusInteraction.bind(n)});n.pullConnectedFirstTime=n.pullClient.subscribe({type:f.PullClient.SubscriptionType.Status,callback:function t(r){if(r.status===f.PullClient.PullStatus.Online){e(true);n.pullConnectedFirstTime()}}});if(n.template){n.template.$Bitrix.PullClient.set(n.pullClient)}n.pullClient.start(q(q({},t),{},{skipReconnectToLastSession:true}))["catch"]((function(){r({ex:{error:"PULL_CONNECTION_ERROR",error_description:"Pull is not connected."}})}));n.pullClientInited=true}))}},{key:"stopPullClient",value:function e(){if(this.pullClient){this.pullClient.stop(f.PullClient.CloseReasons.MANUAL,"Closed manually")}}},{key:"recoverPullConnection",value:function e(){this.pullClient.restart(f.PullClient.CloseReasons.MANUAL,"Restart after click by connection status button.")}},{key:"eventStatusInteraction",value:function e(t){if(t.status===f.PullClient.PullStatus.Online){this.onPullOnlineStatus()}else if(t.status===f.PullClient.PullStatus.Offline){this.pullRequestMessage=true;this.offline=true}}},{key:"onPullOnlineStatus",value:function e(){var t=this;this.offline=false;if(this.pullRequestMessage){this.controller.pullBaseHandler.option.skip=true;w.Logger.warn("Requesting getDialogUnread after going online");_.EventEmitter.emitAsync(k.EventType.dialog.requestUnread,{chatId:this.controller.application.getChatId()}).then((function(){_.EventEmitter.emit(k.EventType.dialog.scrollOnStart,{chatId:t.controller.application.getChatId()});t.controller.pullBaseHandler.option.skip=false;_.EventEmitter.emit(U.processMessagesToSendQueue)}))["catch"]((function(){t.controller.pullBaseHandler.option.skip=false}));this.pullRequestMessage=false}else{_.EventEmitter.emit(k.EventType.dialog.readMessage);_.EventEmitter.emit(U.processMessagesToSendQueue)}}},{key:"attachTemplate",value:function e(){if(this.template){this.controller.getStore().commit("widget/common",{showed:true});return true}this.rootNode.innerHTML="";this.rootNode.append(document.createElement("div"));var t=this;return this.controller.createVue(t,{el:this.rootNode.firstChild,template:"<bx-livechat/>",beforeCreate:function e(){t.sendEvent({type:R.widgetOpen,data:{}});t.template=this;if(I.ZIndexManager!==undefined){var n=I.ZIndexManager.getOrAddStack(document.body);n.setBaseIndex(1e6);this.$bitrix.Data.set("zIndexStack",n)}},destroyed:function e(){t.sendEvent({type:R.widgetClose,data:{}});t.template=null;t.templateAttached=false;t.rootNode.innerHTML=""}}).then((function(){return new Promise((function(e,t){return e()}))}))}},{key:"detachTemplate",value:function e(){if(!this.template){return true}this.template.$destroy();return true}},{key:"mutateTemplateComponent",value:function e(t,n){return C.WidgetVue.mutateComponent(t,n)}},{key:"close",value:function e(){if(this.pageMode){return false}if(this.buttonInstance){this.buttonInstance.onWidgetClose()}this.detachTemplate()}},{key:"fireInitEvent",value:function e(){if(this.initEventFired){return true}this.sendEvent({type:R.configLoaded,data:{}});if(this.controller.getStore().state.widget.common.reopen){this.open()}this.initEventFired=true}},{key:"isUserRegistered",value:function e(){return!!this.getUserHash()}},{key:"isConfigDataLoaded",value:function e(){return this.controller.getStore().state.widget.common.configId}},{key:"isChatLoaded",value:function e(){return this.controller.getStore().state.application.dialog.chatId>0}},{key:"isSessionActive",value:function e(){return!this.controller.getStore().state.widget.dialog.sessionClose}},{key:"isUserAgreeConsent",value:function e(){return this.controller.getStore().state.widget.dialog.userConsent}},{key:"getCrmTraceData",value:function e(){var t="";if(!this.buttonInstance){return t}if(typeof this.buttonInstance.getTrace!=="function"){t=this.buttonInstance.getTrace()}else if(typeof this.buttonInstance.b24Tracker!=="undefined"&&typeof this.buttonInstance.b24Tracker.guest!=="undefined"){t=this.buttonInstance.b24Tracker.guest.getTrace()}return t}},{key:"getCustomData",value:function e(){var t=[];if(this.customData.length>0){t=this.customData}else{t=[{MESSAGE:this.localize.BX_LIVECHAT_EXTRA_SITE+": [URL]"+location.href+"[/URL]"}]}return JSON.stringify(t)}},{key:"isUserLoaded",value:function e(){return this.controller.getStore().state.widget.user.id>0}},{key:"isUserReady",value:function e(){return this.isConfigDataLoaded()&&this.isUserRegistered()}},{key:"isHashAvailable",value:function e(){return!this.isUserRegistered()&&(this.userRegisterData.hash||this.getUserHashCookie())}},{key:"getSiteId",value:function e(){return this.host.replace(/(http.?:\/\/)|([:.\\\/])/gm,"")+this.code}},{key:"getHost",value:function e(){return this.host}},{key:"getConfigId",value:function e(){return this.controller.getStore().state.widget.common.configId}},{key:"isDialogStart",value:function e(){return this.controller.getStore().state.widget.common.dialogStart}},{key:"getChatId",value:function e(){return this.controller.getStore().state.application.dialog.chatId}},{key:"getDialogId",value:function e(){return this.controller.getStore().state.application.dialog.dialogId}},{key:"getDiskFolderId",value:function e(){return this.controller.getStore().state.application.dialog.diskFolderId}},{key:"getDialogData",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getDialogId();return this.controller.getStore().state.dialogues.collection[t]}},{key:"getSessionId",value:function e(){return this.controller.getStore().state.widget.dialog.sessionId}},{key:"isSessionClose",value:function e(){return this.controller.getStore().state.widget.dialog.sessionClose}},{key:"getUserHash",value:function e(){return this.controller.getStore().state.widget.user.hash}},{key:"getUserHashCookie",value:function e(){var t="";var n=p.Cookie.get(null,"LIVECHAT_HASH");if(typeof n==="string"&&n.match(/^[a-f0-9]{32}$/)){t=n}else{var r=p.Cookie.get(this.getSiteId(),"LIVECHAT_HASH");if(typeof r==="string"&&r.match(/^[a-f0-9]{32}$/)){t=r}}return t}},{key:"getUserId",value:function e(){return this.controller.getStore().state.widget.user.id}},{key:"getUserData",value:function e(){if(!this.controller||!this.controller.getStore()){console.error("LiveChatWidget.getUserData: method can be called after fired event - onBitrixLiveChat");return false}return this.controller.getStore().state.widget.user}},{key:"getUserRegisterFields",value:function e(){return{name:this.userRegisterData.name||"",last_name:this.userRegisterData.lastName||"",avatar:this.userRegisterData.avatar||"",email:this.userRegisterData.email||"",www:this.userRegisterData.www||"",gender:this.userRegisterData.gender||"",position:this.userRegisterData.position||"",user_hash:this.userRegisterData.hash||this.getUserHashCookie()||"",consent_url:this.controller.getStore().state.widget.common.consentUrl?location.href:"",trace_data:this.getCrmTraceData(),custom_data:this.getCustomData()}}},{key:"getWidgetLocationCode",value:function e(){return A[this.controller.getStore().state.widget.common.location]}},{key:"setUserRegisterData",value:function e(t){if(!this.controller||!this.controller.getStore()){console.error("LiveChatWidget.getUserData: method can be called after fired event - onBitrixLiveChat");return false}var n=["hash","name","lastName","avatar","email","www","gender","position"];if(!g.Utils.types.isPlainObject(t)){console.error("%cLiveChatWidget.setUserData: params is not a object","color: black;");return false}for(var r in this.userRegisterData){if(!this.userRegisterData.hasOwnProperty(r)){continue}if(!t[r]){delete this.userRegisterData[r]}}for(var i in t){if(!t.hasOwnProperty(i)){continue}if(n.indexOf(i)===-1){console.warn("%cLiveChatWidget.setUserData: user field is not set, because you are trying to set an unknown field (%c".concat(i,"%c)"),"color: black;","font-weight: bold; color: red","color: black");continue}this.userRegisterData[i]=t[i]}if(this.userRegisterData.hash&&this.getUserHash()&&this.userRegisterData.hash!==this.getUserHash()){this.setNewAuthToken(this.userRegisterData.hash)}}},{key:"setNewAuthToken",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";this.controller.getStoreBuilder().clearModelState();p.Cookie.set(null,"LIVECHAT_HASH","",{expires:365*86400,path:"/"});this.controller.restClient.setAuthId(B.guest,t)}},{key:"setOption",value:function e(t,n){this.options[t]=n;return true}},{key:"setCustomData",value:function e(t){if(!this.controller||!this.controller.getStore()){console.error("LiveChatWidget.getUserData: method can be called after fired event - onBitrixLiveChat");return false}var n=[];if(t instanceof Array){t.forEach((function(e){if(e&&babelHelpers["typeof"](e)==="object"){n.push(e)}}));if(n.length<=0){console.error("LiveChatWidget.setCustomData: params is empty");return false}}else{if(!t){return false}n=[{MESSAGE:t}]}this.customData=this.customData.concat(n);return true}},{key:"setError",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";console.error("LiveChatWidget.error: ".concat(t," (").concat(n,")"));var r="";if(t==="LIVECHAT_AUTH_FAILED"){r=this.getLocalize("BX_LIVECHAT_AUTH_FAILED").replace("#LINK_START#",'<a href="javascript:void();" onclick="location.reload()">').replace("#LINK_END#","</a>");this.setNewAuthToken()}else if(t==="LIVECHAT_AUTH_PORTAL_USER"){r=this.getLocalize("BX_LIVECHAT_PORTAL_USER_NEW").replace("#LINK_START#",'<a href="'+this.host+'">').replace("#LINK_END#","</a>")}else if(t==="LIVECHAT_SAME_DOMAIN"){r=this.getLocalize("BX_LIVECHAT_SAME_DOMAIN");var i=this.getLocalize("BX_LIVECHAT_SAME_DOMAIN_LINK");if(i){r+='<br><br><a href="'+i+'">'+this.getLocalize("BX_LIVECHAT_SAME_DOMAIN_MORE")+"</a>"}}else if(t.endsWith("LOCALIZED")){r=n}this.controller.getStore().commit("application/set",{error:{active:true,code:t,description:r}})}},{key:"clearError",value:function e(){this.controller.getStore().commit("application/set",{error:{active:false,code:"",description:""}})}},{key:"subscribe",value:function e(t){if(!g.Utils.types.isPlainObject(t)){console.error("%cLiveChatWidget.subscribe: params is not a object","color: black;");return false}if(!H.includes(t.type)){console.error("%cLiveChatWidget.subscribe: subscription type is not correct (%c".concat(t.type,"%c)"),"color: black;","font-weight: bold; color: red","color: black");return false}if(typeof t.callback!=="function"){console.error("%cLiveChatWidget.subscribe: callback is not a function (%c".concat(babelHelpers["typeof"](t.callback),"%c)"),"color: black;","font-weight: bold; color: red","color: black");return false}if(typeof this.subscribers[t.type]==="undefined"){this.subscribers[t.type]=[]}this.subscribers[t.type].push(t.callback);return function(){this.subscribers[t.type]=this.subscribers[t.type].filter((function(e){return e!==t.callback}))}.bind(this)}},{key:"sendEvent",value:function e(t){t=t||{};if(!t.type){return false}if(babelHelpers["typeof"](t.data)!=="object"||!t.data){t.data={}}if(this.subscribers[t.type]instanceof Array&&this.subscribers[t.type].length>0){this.subscribers[t.type].forEach((function(e){return e(t.data)}))}if(this.subscribers[R.every]instanceof Array&&this.subscribers[R.every].length>0){this.subscribers[R.every].forEach((function(e){return e({type:t.type,data:t.data})}))}return true}},{key:"addLocalize",value:function e(t){if(babelHelpers["typeof"](t)!=="object"||!t){return false}for(var n in t){if(t.hasOwnProperty(n)){this.localize[n]=t[n]}}return true}},{key:"getLocalize",value:function e(t){var n="";if(typeof t==="undefined"){return this.localize}else if(typeof this.localize[t.toString()]==="undefined"){console.warn("LiveChatWidget.getLocalize: message with code '".concat(t.toString(),"' is undefined."))}else{n=this.localize[t]}return n}},{key:"handleConfigGet",value:function e(t){var n=this;return new Promise((function(e,r){var i=t[j.widgetConfigGet];if(i&&i.error()){return r({code:i.error().ex.error,description:i.error().ex.error_description})}n.controller.executeRestAnswer(j.widgetConfigGet,i);e()}))}},{key:"handleUserGet",value:function e(t){var n=this;return new Promise((function(e,r){var i=t[j.widgetUserGet];if(i.error()){return r({code:i.error().ex.error,description:i.error().ex.error_description})}n.controller.executeRestAnswer(j.widgetUserGet,i);e()}))}},{key:"handleChatGet",value:function e(t){var n=this;return new Promise((function(e,r){var i=t[k.RestMethodHandler.imChatGet];if(i.error()){return r({code:i.error().ex.error,description:i.error().ex.error_description})}n.controller.executeRestAnswer(k.RestMethodHandler.imChatGet,i);e()}))}},{key:"handleDialogGet",value:function e(t){var n=this;return new Promise((function(e,r){var i=t[j.widgetDialogGet];if(!i){return e()}if(i.error()){return r({code:i.error().ex.error,description:i.error().ex.error_description})}n.controller.executeRestAnswer(j.widgetDialogGet,i);e()}))}},{key:"handleDialogMessagesGet",value:function e(t){var n=this;return new Promise((function(e,r){var i=t[k.RestMethodHandler.imDialogMessagesGetInit];if(!i){return e()}if(i.error()){return r({code:i.error().ex.error,description:i.error().ex.error_description})}n.controller.getStore().dispatch("dialogues/saveDialog",{dialogId:n.controller.application.getDialogId(),chatId:n.controller.application.getChatId()});n.controller.executeRestAnswer(k.RestMethodHandler.imDialogMessagesGetInit,i);e()}))}},{key:"handleUserRegister",value:function e(t){var n=this;return new Promise((function(e,r){var i=t[j.widgetUserRegister];if(!i){return e()}if(i.error()){return r({code:i.error().ex.error,description:i.error().ex.error_description})}n.controller.executeRestAnswer(j.widgetUserRegister,i);e()}))}},{key:"handleChatCreate",value:function e(t){var n=this;return new Promise((function(e,r){var i=t[j.widgetChatCreate];if(!i){return e()}if(i.error()){return r({code:i.error().ex.error,description:i.error().ex.error_description})}n.controller.executeRestAnswer(j.widgetChatCreate,i);e()}))}},{key:"handlePullRequests",value:function e(t){var n=this;return new Promise((function(e){var r=0;var i=t[j.pullServerTime];if(i&&!i.error()){r=Math.floor((Date.now()-new Date(i.data()).getTime())/1e3)}var s=null;var o=t[j.pullConfigGet];if(o&&!o.error()){s=o.data();s.server.timeShift=r}n.startPullClient(s).then((function(){_.EventEmitter.emit(U.processMessagesToSendQueue)}))["catch"]((function(e){n.setError(e.ex.error,e.ex.error_description)}))["finally"](e)}))}}]);return e}();
/**
	 * Bitrix OpenLines widget
	 * Widget public interface
	 *
	 * @package bitrix
	 * @subpackage imopenlines
	 * @copyright 2001-2019 Bitrix
	 */var Y=function(){function e(t){babelHelpers.classCallCheck(this,e);this.developerInfo="Do not use private methods.";this.__privateMethods__=new K(t);this.__createLegacyMethods()}babelHelpers.createClass(e,[{key:"open",value:function e(t){return this.__privateMethods__.open(t)}},{key:"close",value:function e(){return this.__privateMethods__.close()}},{key:"showNotification",value:function e(t){return this.__privateMethods__.showNotification(t)}},{key:"getUserData",value:function e(){return this.__privateMethods__.getUserData()}},{key:"setUserRegisterData",value:function e(t){return this.__privateMethods__.setUserRegisterData(t)}},{key:"setCustomData",value:function e(t){return this.__privateMethods__.setCustomData(t)}},{key:"mutateTemplateComponent",value:function e(t,n){return this.__privateMethods__.mutateTemplateComponent(t,n)}},{key:"addLocalize",value:function e(t){return this.__privateMethods__.addLocalize(t)}},{key:"subscribe",value:function e(t){return this.__privateMethods__.subscribe(t)}},{key:"start",value:function e(){return this.__privateMethods__.start()}},{key:"__createLegacyMethods",value:function e(){var t=this;if(typeof window.BX.LiveChat==="undefined"){var n=document.createElement("a");n.href=this.__privateMethods__.host;var r=n.protocol+"//"+n.hostname+(n.port&&n.port!="80"&&n.port!="443"?":"+n.port:"");window.BX.LiveChat={openLiveChat:function e(){t.open({openFromButton:true})},closeLiveChat:function e(){t.close()},addEventListener:function e(n,i,s){if(i==="message"){t.subscribe({type:R.userMessage,callback:function e(t){s({origin:r,data:JSON.stringify({action:"sendMessage"}),event:t})}})}else{console.warn("Method BX.LiveChat.addEventListener is not supported, user new format for subscribe.")}},setCookie:function e(){},getCookie:function e(){},sourceDomain:r}}if(typeof window.BxLiveChatInit==="function"){var i=window.BxLiveChatInit();if(i.user){this.__privateMethods__.setUserRegisterData(i.user)}if(i.firstMessage){this.__privateMethods__.setCustomData(i.firstMessage)}}if(window.BxLiveChatLoader instanceof Array){window.BxLiveChatLoader.forEach((function(e){return e()}))}return true}}]);return e}();var J=function(e){babelHelpers.inherits(t,e);function t(e){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"application",null);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"storedMessage",null);n.application=e.Application.get();n.onProcessQueueHandler=n.processQueue.bind(babelHelpers.assertThisInitialized(n));n.onConsentAcceptedHandler=n.onConsentAccepted.bind(babelHelpers.assertThisInitialized(n));n.onConsentDeclinedHandler=n.onConsentDeclined.bind(babelHelpers.assertThisInitialized(n));_.EventEmitter.subscribe(U.processMessagesToSendQueue,n.onProcessQueueHandler);_.EventEmitter.subscribe(U.consentAccepted,n.onConsentAcceptedHandler);_.EventEmitter.subscribe(U.consentDeclined,n.onConsentDeclinedHandler);return n}babelHelpers.createClass(t,[{key:"destroy",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"destroy",this).call(this);_.EventEmitter.unsubscribe(U.processMessagesToSendQueue,this.onProcessQueueHandler);_.EventEmitter.unsubscribe(U.consentAccepted,this.onConsentAcceptedHandler);_.EventEmitter.unsubscribe(U.consentDeclined,this.onConsentDeclinedHandler)}},{key:"onSendMessage",value:function e(t){var n=this;var r=t.data;r.focus=r.focus!==false;if(this.getWidgetData().common.showForm===M.smile){_.EventEmitter.emit(U.hideForm)}if(!this.getWidgetData().dialog.userConsent&&this.getWidgetData().common.consentUrl){if(r.text){this.storedMessage=r.text}_.EventEmitter.emit(U.showConsent);return false}r.text=r.text?r.text:this.storedMessage;if(!r.text&&!r.file){return false}_.EventEmitter.emit(U.hideForm);if(this.isCreateSessionMode()){_.EventEmitter.emit(U.hideForm);_.EventEmitter.emit(k.EventType.textarea.stopWriting);_.EventEmitter.emitAsync(U.createSession).then((function(){n.store.commit("widget/common",{isCreateSessionMode:false});n.sendMessage(r.text,r.file)}))}else{this.sendMessage(r.text,r.file)}if(r.focus){_.EventEmitter.emit(k.EventType.textarea.setFocus)}return true}},{key:"sendMessage",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!n&&!r){return false}var i=this.store.getters["dialogues/getQuoteId"](this.getDialogId());if(i){var s=this.store.getters["messages/getMessage"](this.getChatId(),i);if(s){n=this.getMessageTextWithQuote(s,n);_.EventEmitter.emit(k.EventType.dialog.quotePanelClose)}}if(!this.controller.application.isUnreadMessagesLoaded()){this.sendMessageToServer({id:0,chatId:this.getChatId(),dialogId:this.getDialogId(),text:n,file:r});this.processQueue();return true}var o={};if(r){o.FILE_ID=[r.id]}this.addMessageToModel({text:n,params:o,sending:!r}).then((function(e){if(!t.isDialogStart()){t.store.commit("widget/common",{dialogStart:true})}_.EventEmitter.emit(k.EventType.dialog.scrollToBottom,{chatId:t.getChatId(),cancelIfScrollChange:true});t.addMessageToQueue({messageId:e,text:n,file:r});if(t.getChatId()){t.processQueue()}else{_.EventEmitter.emit(U.requestData)}}));return true}},{key:"onClickOnKeyboard",value:function e(t){var n=t.data;if(n.action==="ACTION"&&n.params.action==="LIVECHAT"){var r=n.params,i=r.dialogId,s=r.messageId,o=r.value;var a=JSON.parse(o);var l=Number.parseInt(a.SESSION_ID,10);if(l!==this.getSessionId()||this.isSessionClose()){console.error("WidgetSendMessageHandler",this.loc["BX_LIVECHAT_ACTION_EXPIRED"]);return false}this.restClient.callMethod(j.widgetActionSend,{MESSAGE_ID:s,DIALOG_ID:i,ACTION_VALUE:o})}if(n.action==="COMMAND"){var u=n.params,c=u.dialogId,f=u.messageId,d=u.botId,h=u.command,p=u.params;this.restClient.callMethod(k.RestMethod.imMessageCommand,{MESSAGE_ID:f,DIALOG_ID:c,BOT_ID:d,COMMAND:h,COMMAND_PARAMS:p})["catch"]((function(e){return console.error("WidgetSendMessageHandler: command processing error",e)}))}}},{key:"getWidgetData",value:function e(){return this.store.state.widget}},{key:"getChatId",value:function e(){return this.store.state.application.dialog.chatId}},{key:"getDialogId",value:function e(){return this.store.state.application.dialog.dialogId}},{key:"getUserId",value:function e(){return this.store.state.widget.user.id}},{key:"getMessageTextWithQuote",value:function e(t,n){var r=null;if(t.authorId){r=this.store.getters["users/get"](t.authorId)}var i=this.store.getters["files/getList"](this.getChatId());var s="-".repeat(54);var o=r&&r.name?r.name:this.loc["BX_LIVECHAT_SYSTEM_MESSAGE"];var a=g.Utils.date.format(t.date,null,this.loc);var l=g.Utils.text.quote(t.text,t.params,i,this.loc);var u=[];u.push(s);u.push("".concat(o," [").concat(a,"]"));u.push(l);u.push(s);u.push(n);return u.join("\n")}},{key:"addMessageToQueue",value:function e(t){var n=t.messageId,r=t.text,i=t.file;this.messagesToSend.push({id:n,chatId:this.getChatId(),dialogId:this.getDialogId(),text:r,file:i,sending:false})}},{key:"sendMessageToServer",value:function e(t){var n=this;_.EventEmitter.emit(k.EventType.textarea.stopWriting);if(t.chatId===0){t.chatId=this.getChatId()}this.restClient.callMethod(k.RestMethod.imMessageAdd,{TEMPLATE_ID:t.id,CHAT_ID:t.chatId,MESSAGE:t.text},null,null,g.Utils.getLogTrackingParams({name:k.RestMethod.imMessageAdd,data:{timMessageType:"text"},dialog:this.getDialogData()})).then((function(e){n.controller.executeRestAnswer(k.RestMethodHandler.imMessageAdd,e,t)}))["catch"]((function(e){n.controller.executeRestAnswer(k.RestMethodHandler.imMessageAdd,e,t);w.Logger.warn("Error during sending message",e)}));return true}},{key:"isDialogStart",value:function e(){return this.store.state.widget.common.dialogStart}},{key:"isCreateSessionMode",value:function e(){return this.store.state.widget.common.isCreateSessionMode}},{key:"getDialogData",value:function e(){var t=this.getDialogId();return this.store.state.dialogues.collection[t]}},{key:"getApplicationModel",value:function e(){return this.store.state.application}},{key:"getSessionId",value:function e(){return this.store.state.widget.dialog.sessionId}},{key:"isSessionClose",value:function e(){return this.store.state.widget.dialog.sessionClose}},{key:"processQueue",value:function e(){var t=this;if(this.application.offline){return false}this.messagesToSend.filter((function(e){return!e.sending})).forEach((function(e){t.deleteFromQueue(e.id);e.sending=true;if(e.file){_.EventEmitter.emit(k.EventType.textarea.stopWriting);_.EventEmitter.emit(k.EventType.uploader.addMessageWithFile,e)}else{t.sendMessageToServer(e)}}))}},{key:"onConsentAccepted",value:function e(){if(!this.storedMessage){return}var t=this.getApplicationModel().device.type!==k.DeviceType.mobile;this.onSendMessage({data:{focus:t}});this.storedMessage=""}},{key:"onConsentDeclined",value:function e(){if(!this.storedMessage){return}_.EventEmitter.emit(k.EventType.textarea.insertText,{text:this.storedMessage,focus:this.getApplicationModel().device.type!==k.DeviceType.mobile});this.storedMessage=""}}]);return t}(S.SendMessageHandler);var Q=function(e){babelHelpers.inherits(t,e);function t(e){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"application",null);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"pullClient",null);n.application=e.Application.get();n.pullClient=e.PullClient.get();return n}babelHelpers.createClass(t,[{key:"onAppButtonClick",value:function e(t){var n=t.data;if(n.appId===M.smile){if(this.getWidgetModel().common.showForm===M.smile){_.EventEmitter.emit(U.hideForm)}else{_.EventEmitter.emit(U.showForm,{type:M.smile})}}else{_.EventEmitter.emit(k.EventType.textarea.setFocus)}}},{key:"onFocus",value:function e(){var t=this;if(this.getWidgetModel().common.copyright&&this.getApplicationModel().device.type===k.DeviceType.mobile){this.getWidgetModel().common.copyright=false}if(g.Utils.device.isMobile()){clearTimeout(this.onFocusScrollTimeout);this.onScrollHandler=this.onScroll.bind(this);this.onFocusScrollTimeout=setTimeout((function(){document.addEventListener("scroll",t.onScrollHandler)}),1e3)}}},{key:"onBlur",value:function e(){var t=this;if(!this.getWidgetModel().common.copyright&&this.getWidgetModel().common.copyright!==this.application.copyright){this.getWidgetModel().common.copyright=this.application.copyright;setTimeout((function(){_.EventEmitter.emit(k.EventType.dialog.scrollToBottom,{chatId:t.getChatId(),force:true})}),100)}if(g.Utils.device.isMobile()){clearTimeout(this.onFocusScrollTimeout);document.removeEventListener("scroll",this.onScrollHandler)}}},{key:"onKeyUp",value:function e(t){var n=t.data;if(this.canSendTypedText()){var r=this.getWidgetModel().dialog.sessionId;var i=this.getChatId();var s=this.getWidgetModel().user.id;var o=v.md5("".concat(r,"/").concat(i,"/").concat(s));var a=this.getWidgetModel().dialog.operator.id;var l=this.getWidgetModel().dialog.operatorChatId;this.pullClient.sendMessage([a],"imopenlines","linesMessageWrite",{text:n.text,infoString:o,operatorChatId:l})}}},{key:"canSendTypedText",value:function e(){return this.getWidgetModel().common.watchTyping&&this.getWidgetModel().dialog.sessionId&&!this.getWidgetModel().dialog.sessionClose&&this.getWidgetModel().dialog.operator.id&&this.getWidgetModel().dialog.operatorChatId&&this.pullClient.isPublishingEnabled()}},{key:"onScroll",value:function e(){clearTimeout(this.onScrollTimeout);this.onScrollTimeout=setTimeout((function(){_.EventEmitter.emit(k.EventType.textarea.setBlur,true)}),50)}},{key:"getWidgetModel",value:function e(){return this.store.state.widget}},{key:"getApplicationModel",value:function e(){return this.store.state.application}}]);return t}(S.TextareaHandler);var Z=function(e){babelHelpers.inherits(t,e);function t(e){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"storedFile",null);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"widgetApplication",null);n.widgetApplication=e.Application.get();n.onConsentAcceptedHandler=n.onConsentAccepted.bind(babelHelpers.assertThisInitialized(n));n.onConsentDeclinedHandler=n.onConsentDeclined.bind(babelHelpers.assertThisInitialized(n));_.EventEmitter.subscribe(U.consentAccepted,n.onConsentAcceptedHandler);_.EventEmitter.subscribe(U.consentDeclined,n.onConsentDeclinedHandler);return n}babelHelpers.createClass(t,[{key:"destroy",value:function e(){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"destroy",this).call(this);_.EventEmitter.unsubscribe(U.consentAccepted,this.onConsentAcceptedHandler);_.EventEmitter.unsubscribe(U.consentDeclined,this.onConsentDeclinedHandler)}},{key:"getUserId",value:function e(){return this.controller.store.state.widget.user.id}},{key:"getUserHash",value:function e(){return this.controller.store.state.widget.user.hash}},{key:"getHost",value:function e(){return this.controller.store.state.widget.common.host}},{key:"addMessageWithFile",value:function e(t){var n=this;var r=t.getData();if(!this.getDiskFolderId()){this.requestDiskFolderId(r.chatId).then((function(){n.addMessageWithFile(t)}))["catch"]((function(e){w.Logger.error("addMessageWithFile error",e);return false}));return false}this.uploader.senderOptions.customHeaders["Livechat-Dialog-Id"]=this.getDialogId();this.uploader.senderOptions.customHeaders["Livechat-Auth-Id"]=this.getUserHash();this.uploader.addTask({taskId:r.file.id,fileData:r.file.source.file,fileName:r.file.source.file.name,generateUniqueName:true,diskFolderId:this.getDiskFolderId(),previewBlob:r.file.previewBlob,chunkSize:this.widgetApplication.getLocalize("isCloud")?y.Uploader.CLOUD_MAX_CHUNK_SIZE:y.Uploader.BOX_MIN_CHUNK_SIZE})}},{key:"onTextareaFileSelected",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=t.data;var r=null;if(n&&n.fileChangeEvent&&n.fileChangeEvent.target.files.length>0){r=n.fileChangeEvent}else{r=this.storedFile}if(!r){return false}if(!this.controller.store.state.widget.dialog.userConsent&&this.controller.store.state.widget.common.consentUrl){this.storedFile=n.fileChangeEvent;_.EventEmitter.emit(U.showConsent);return false}this.uploadFile(r)}},{key:"uploadFile",value:function e(t){if(!t){return false}if(!this.getChatId()){_.EventEmitter.emit(U.requestData)}this.uploader.addFilesFromEvent(t)}},{key:"onConsentAccepted",value:function e(){if(!this.storedFile){return}this.onTextareaFileSelected();this.storedFile=""}},{key:"onConsentDeclined",value:function e(){if(!this.storedFile){return}this.storedFile=""}},{key:"getUploaderSenderOptions",value:function e(){return{host:this.getHost(),customHeaders:{"Livechat-Auth-Id":this.getUserHash()},actionUploadChunk:"imopenlines.widget.disk.upload",actionCommitFile:"imopenlines.widget.disk.commit",actionRollbackUpload:"imopenlines.widget.disk.rollbackUpload"}}}]);return t}(S.TextareaUploadHandler);var ee=function(e){babelHelpers.inherits(t,e);function t(e){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"application",null);n.application=e.Application.get();return n}babelHelpers.createClass(t,[{key:"readMessage",value:function e(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(this.application.offline){return false}return babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"readMessage",this).call(this,n,r,i)}}]);return t}(S.ReadingHandler);var te=function(e){babelHelpers.inherits(t,e);function t(e){var n;var r=e.widgetLocation,i=e.availableWidth,s=e.availableHeight,o=e.events;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"isResizing",false);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"widgetLocation",null);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"availableWidth",null);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"availableHeight",null);n.setEventNamespace("BX.IMOL.WidgetResizeHandler");n.subscribeToEvents(o);n.widgetLocation=r;n.availableWidth=i;n.availableHeight=s;return n}babelHelpers.createClass(t,[{key:"subscribeToEvents",value:function e(t){var n=this;var r=b.Type.isObject(t)?t:{};Object.entries(r).forEach((function(e){var t=babelHelpers.slicedToArray(e,2),r=t[0],i=t[1];if(b.Type.isFunction(i)){n.subscribe(r,i)}}))}},{key:"startResize",value:function e(t,n,r){if(this.isResizing){return false}this.isResizing=true;t=t.changedTouches?t.changedTouches[0]:t;this.cursorStartPointY=t.clientY;this.cursorStartPointX=t.clientX;this.heightStartPoint=n;this.widthStartPoint=r;this.addWidgetResizeEvents()}},{key:"onContinueResize",value:function e(n){if(!this.isResizing){return false}n=n.changedTouches?n.changedTouches[0]:n;this.cursorControlPointY=n.clientY;this.cursorControlPointX=n.clientX;var r=this.isBottomLocation()?Math.min(this.heightStartPoint+this.cursorStartPointY-this.cursorControlPointY,this.availableHeight):Math.min(this.heightStartPoint-this.cursorStartPointY+this.cursorControlPointY,this.availableHeight);var i=Math.max(r,L.height);var s=this.isLeftLocation()?Math.min(this.widthStartPoint-this.cursorStartPointX+this.cursorControlPointX,this.availableWidth):Math.min(this.widthStartPoint+this.cursorStartPointX-this.cursorControlPointX,this.availableWidth);var o=Math.max(s,L.width);this.emit(t.events.onSizeChange,{newHeight:i,newWidth:o})}},{key:"onStopResize",value:function e(){if(!this.isResizing){return false}this.isResizing=false;this.removeWidgetResizeEvents();this.emit(t.events.onStopResize)}},{key:"setAvailableWidth",value:function e(t){this.availableWidth=t}},{key:"setAvailableHeight",value:function e(t){this.availableHeight=t}},{key:"addWidgetResizeEvents",value:function e(){this.onContinueResizeHandler=this.onContinueResize.bind(this);this.onStopResizeHandler=this.onStopResize.bind(this);document.addEventListener("mousemove",this.onContinueResizeHandler);document.addEventListener("mouseup",this.onStopResizeHandler);document.addEventListener("mouseleave",this.onStopResizeHandler)}},{key:"removeWidgetResizeEvents",value:function e(){document.removeEventListener("mousemove",this.onContinueResizeHandler);document.removeEventListener("mouseup",this.onStopResizeHandler);document.removeEventListener("mouseleave",this.onStopResizeHandler)}},{key:"isBottomLocation",value:function e(){return[D.bottomLeft,D.bottomMiddle,D.bottomRight].includes(this.widgetLocation)}},{key:"isLeftLocation",value:function e(){return[D.bottomLeft,D.topLeft,D.topMiddle].includes(this.widgetLocation)}},{key:"destroy",value:function e(){this.removeWidgetResizeEvents()}}]);return t}(_.EventEmitter);babelHelpers.defineProperty(te,"events",{onSizeChange:"onSizeChange",onStopResize:"onStopResize"});var ne=function(){function e(t){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"store",null);babelHelpers.defineProperty(this,"restClient",null);babelHelpers.defineProperty(this,"application",null);this.store=t.Data.get("controller").store;this.restClient=t.RestClient.get();this.application=t.Application.get();this.subscribeToEvents()}babelHelpers.createClass(e,[{key:"subscribeToEvents",value:function e(){this.showConsentHandler=this.onShowConsent.bind(this);this.acceptConsentHandler=this.onAcceptConsent.bind(this);this.declineConsentHandler=this.onDeclineConsent.bind(this);_.EventEmitter.subscribe(U.showConsent,this.showConsentHandler);_.EventEmitter.subscribe(U.acceptConsent,this.acceptConsentHandler);_.EventEmitter.subscribe(U.declineConsent,this.declineConsentHandler)}},{key:"onShowConsent",value:function e(){this.showConsent()}},{key:"onAcceptConsent",value:function e(){this.acceptConsent()}},{key:"onDeclineConsent",value:function e(){this.declineConsent()}},{key:"showConsent",value:function e(){this.store.commit("widget/common",{showConsent:true})}},{key:"hideConsent",value:function e(){this.store.commit("widget/common",{showConsent:false})}},{key:"acceptConsent",value:function e(){this.hideConsent();this.sendConsentDecision(true);_.EventEmitter.emit(U.consentAccepted);if(this.getWidgetModel().common.showForm===M.none){_.EventEmitter.emit(k.EventType.textarea.setFocus)}}},{key:"declineConsent",value:function e(){_.EventEmitter.emit(U.hideForm);this.hideConsent();this.sendConsentDecision(false);_.EventEmitter.emit(U.consentDeclined);if(this.getApplicationModel().device.type!==k.DeviceType.mobile){_.EventEmitter.emit(k.EventType.textarea.setFocus)}}},{key:"sendConsentDecision",value:function e(t){this.store.commit("widget/dialog",{userConsent:t});if(t&&this.application.isUserRegistered()){this.restClient.callMethod(j.widgetUserConsentApply,{config_id:this.getWidgetModel().common.configId,consent_url:location.href})}}},{key:"getWidgetModel",value:function e(){return this.store.state.widget}},{key:"getApplicationModel",value:function e(){return this.store.state.application}},{key:"destroy",value:function e(){_.EventEmitter.unsubscribe(U.showConsent,this.showConsentHandler);_.EventEmitter.unsubscribe(U.acceptConsent,this.acceptConsentHandler);_.EventEmitter.unsubscribe(U.declineConsent,this.declineConsentHandler)}}]);return e}();var re=function(){function e(t){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"store",null);babelHelpers.defineProperty(this,"application",null);babelHelpers.defineProperty(this,"restClient",null);this.store=t.Data.get("controller").store;this.restClient=t.RestClient.get();this.application=t.Application.get();this.showFormHandler=this.onShowForm.bind(this);this.hideFormHandler=this.onHideForm.bind(this);this.sendVoteHandler=this.onSendVote.bind(this);_.EventEmitter.subscribe(U.showForm,this.showFormHandler);_.EventEmitter.subscribe(U.hideForm,this.hideFormHandler);_.EventEmitter.subscribe(U.sendDialogVote,this.sendVoteHandler)}babelHelpers.createClass(e,[{key:"onShowForm",value:function e(t){var n=this;var r=t.data;clearTimeout(this.showFormTimeout);if(r.type===M.like){if(r.delayed){this.showFormTimeout=setTimeout((function(){n.showLikeForm()}),5e3)}else{this.showLikeForm()}}else if(r.type===M.smile){this.showSmiles()}}},{key:"onHideForm",value:function e(){this.hideForm()}},{key:"onSendVote",value:function e(t){var n=t.data.vote;console.warn("VOTE",n);this.sendVote(n)}},{key:"showLikeForm",value:function e(){if(this.application.offline){return false}clearTimeout(this.showFormTimeout);if(!this.getWidgetModel().common.vote.enable){return false}if(this.getWidgetModel().dialog.sessionClose&&this.getWidgetModel().dialog.userVote!==T.none){return false}this.store.commit("widget/common",{showForm:M.like})}},{key:"showSmiles",value:function e(){this.store.commit("widget/common",{showForm:M.smile})}},{key:"sendVote",value:function e(t){var n=this;var r=this.getWidgetModel().dialog.sessionId;if(!r){return false}this.restClient.callMethod(j.widgetVoteSend,{SESSION_ID:r,ACTION:t})["catch"]((function(){n.store.commit("widget/dialog",{userVote:T.none})}));this.application.sendEvent({type:R.userVote,data:{vote:t}})}},{key:"hideForm",value:function e(){clearTimeout(this.showFormTimeout);if(this.getWidgetModel().common.showForm!==M.none){this.store.commit("widget/common",{showForm:M.none})}}},{key:"getWidgetModel",value:function e(){return this.store.state.widget}},{key:"destroy",value:function e(){_.EventEmitter.unsubscribe(U.showForm,this.showFormHandler);_.EventEmitter.unsubscribe(U.hideForm,this.hideFormHandler);_.EventEmitter.unsubscribe(U.sendDialogVote,this.sendVoteHandler)}}]);return e}();var ie=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"onOpenMessageReactionList",value:function e(t){var n=t.data;w.Logger.warn("Reactions list is blocked for the widget",n)}}]);return t}(S.ReactionHandler);var se=function(){function e(t){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"store",null);babelHelpers.defineProperty(this,"application",null);this.store=t.Data.get("controller").store;this.application=t.Application.get()}babelHelpers.createClass(e,[{key:"getHtmlHistory",value:function e(){var t=this.getChatId();if(t<=0){console.error("WidgetHistoryHandler: Incorrect chatId value")}var n={chatId:this.getChatId()};this.requestControllerAction("imopenlines.widget.history.download",n).then(this.handleRequest.bind(this)).then(this.downloadHistory.bind(this))["catch"]((function(e){return console.error("WidgetHistoryHandler: fetch error.",e)}))}},{key:"requestControllerAction",value:function e(t,n){var r=this.application.host?this.application.host:"";var i="/bitrix/services/main/ajax.php";var s=new URL(i,r);s.searchParams.set("action",t);var o=new FormData;for(var a in n){if(n.hasOwnProperty(a)){o.append(a,n[a])}}return fetch(s,{method:"POST",headers:{"Livechat-Auth-Id":this.getUserHash()},body:o})}},{key:"handleRequest",value:function e(t){var n=t.headers.get("Content-Type");if(n.startsWith("application/json")){return t.json()}return t.blob()}},{key:"downloadHistory",value:function e(t){if(t instanceof Blob){var n=window.URL.createObjectURL(t);var r=document.createElement("a");r.href=n;r.download="".concat(this.getChatId(),".html");document.body.append(r);r.click();r.remove()}else if(t.hasOwnProperty("errors")){console.error("WidgetHistoryHandler: ".concat(t.errors[0]))}else{console.error("WidgetHistoryHandler: unknown error.")}}},{key:"getChatId",value:function e(){return this.store.state.application.dialog.chatId}},{key:"getUserHash",value:function e(){return this.store.state.widget.user.hash}},{key:"destroy",value:function e(){}}]);return e}();var oe=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"onClickOnDialog",value:function e(){_.EventEmitter.emit(U.hideForm)}}]);return t}(S.DialogActionHandler);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}C.WidgetBitrixVue.component("bx-livechat",{data:function e(){return{widgetAvailableHeight:0,widgetAvailableWidth:0,widgetCurrentHeight:0,widgetCurrentWidth:0,widgetIsResizing:false,textareaHeight:100,welcomeFormFilled:false,startNewChatMode:false}},computed:le({FormType:function e(){return M},VoteType:function e(){return T},DeviceType:function e(){return k.DeviceType},EventType:function e(){return k.EventType},showTextarea:function e(){if(this.widget.common.isCreateSessionMode){return this.startNewChatMode}var t=this.widget.common.crmFormsSettings;if(!t.useWelcomeForm||!t.welcomeFormId){return true}else{return t.welcomeFormDelay?true:this.welcomeFormFilled}},showWelcomeForm:function e(){return this.widget.common.crmFormsSettings.useWelcomeForm&&!this.widget.common.crmFormsSettings.welcomeFormDelay&&this.widget.common.crmFormsSettings.welcomeFormId&&!this.welcomeFormFilled},textareaHeightStyle:function e(){return{flex:"0 0 ".concat(this.textareaHeight,"px")}},textareaBottomMargin:function e(){if(!this.widget.common.copyright&&!this.isBottomLocation()){return{marginBottom:"5px"}}return""},widgetHeightStyle:function e(){if(g.Utils.device.isMobile()||this.widget.common.pageMode){return}if(this.widgetAvailableHeight<P.height||this.widgetAvailableHeight<this.widgetCurrentHeight){this.widgetCurrentHeight=Math.max(this.widgetAvailableHeight,L.height)}return"".concat(this.widgetCurrentHeight,"px")},widgetWidthStyle:function e(){if(g.Utils.device.isMobile()||this.widget.common.pageMode){return}if(this.widgetAvailableWidth<P.width||this.widgetAvailableWidth<this.widgetCurrentWidth){this.widgetCurrentWidth=Math.max(this.widgetAvailableWidth,L.width)}return"".concat(this.widgetCurrentWidth,"px")},userSelectStyle:function e(){return this.widgetIsResizing?"none":"auto"},widgetMobileDisabled:function e(){if(this.application.device.type!==k.DeviceType.mobile){return false}if(this.application.device.orientation!==k.DeviceOrientation.horizontal){return false}if(navigator.userAgent.toString().includes("iPhone")){return true}else{return babelHelpers["typeof"](window.screen)!=="object"||window.screen.availHeight<800}},widgetPositionClass:function e(){var t=[];if(this.widget.common.pageMode){t.push("bx-livechat-page-mode")}else{t.push("bx-livechat-position-".concat(A[this.widget.common.location]))}return t},widgetLanguageClass:function e(){var t=[];if(this.application.common.languageId===O.russian){t.push("bx-livechat-logo-ru")}else if(this.application.common.languageId===O.ukraine){t.push("bx-livechat-logo-ua")}else{t.push("bx-livechat-logo-en")}return t},widgetPlatformClass:function e(){var t=[];if(g.Utils.device.isMobile()){t.push("bx-livechat-mobile")}else if(g.Utils.browser.isSafari()){t.push("bx-livechat-browser-safari")}else if(g.Utils.browser.isIe()){t.push("bx-livechat-browser-ie")}if(g.Utils.platform.isMac()){t.push("bx-livechat-mac")}else{t.push("bx-livechat-custom-scroll")}return t},widgetClassName:function e(){var t=[];t.push.apply(t,babelHelpers.toConsumableArray(this.widgetPositionClass).concat(babelHelpers.toConsumableArray(this.widgetLanguageClass),babelHelpers.toConsumableArray(this.widgetPlatformClass)));if(!this.widget.common.online){t.push("bx-livechat-offline-state")}if(this.widget.common.dragged){t.push("bx-livechat-drag-n-drop")}if(this.widget.common.dialogStart){t.push("bx-livechat-chat-start")}if(this.widget.dialog.operator.name&&!(this.application.device.type===k.DeviceType.mobile&&this.application.device.orientation===k.DeviceOrientation.horizontal)){t.push("bx-livechat-has-operator")}if(this.widget.common.styles.backgroundColor&&g.Utils.isDarkColor(this.widget.common.styles.iconColor)){t.push("bx-livechat-bright-header")}return t},showMessageDialog:function e(){return this.messageCollection.length>0},localize:function e(){return C.WidgetBitrixVue.getFilteredPhrases("BX_LIVECHAT_",this)}},E.WidgetVuex.mapState({widget:function e(t){return t.widget},application:function e(t){return t.application},dialog:function e(t){return t.dialogues.collection[t.application.dialog.dialogId]},messageCollection:function e(t){return t.messages.collection[t.application.dialog.chatId]}})),created:function e(){var t=this;w.Logger.warn("Livechat component created");this.onCreated().then((function(){t.subscribeToEvents();t.initEventHandlers()}))},mounted:function e(){if(this.widget.user.id>0){this.welcomeFormFilled=true}this.registerZIndex()},beforeDestroy:function e(){this.unsubscribeEvents();this.destroyHandlers();this.unregisterZIndex()},methods:{initEventHandlers:function e(){this.sendMessageHandler=new J(this.$Bitrix);this.textareaHandler=new Q(this.$Bitrix);this.textareaUploadHandler=new Z(this.$Bitrix);this.readingHandler=new ee(this.$Bitrix);this.consentHandler=new ne(this.$Bitrix);this.formHandler=new re(this.$Bitrix);this.textareaDragHandler=this.getTextareaDragHandler();this.resizeHandler=this.getWidgetResizeHandler();this.reactionHandler=new ie(this.$Bitrix);this.historyHandler=new se(this.$Bitrix);this.dialogActionHandler=new oe(this.$Bitrix)},destroyHandlers:function e(){this.sendMessageHandler.destroy();this.textareaHandler.destroy();this.textareaUploadHandler.destroy();this.readingHandler.destroy();this.consentHandler.destroy();this.formHandler.destroy();this.textareaDragHandler.destroy();this.resizeHandler.destroy();this.reactionHandler.destroy();this.historyHandler.destroy();this.dialogActionHandler.destroy()},subscribeToEvents:function e(){document.addEventListener("keydown",this.onWindowKeyDown);if(!g.Utils.device.isMobile()&&!this.widget.common.pageMode){this.getAvailableSpaceFunc=g.Utils.throttle(this.getAvailableSpace,50);window.addEventListener("resize",this.getAvailableSpaceFunc)}},unsubscribeEvents:function e(){document.removeEventListener("keydown",this.onWindowKeyDown);if(!g.Utils.device.isMobile()&&!this.widget.common.pageMode){window.removeEventListener("resize",this.getAvailableSpaceFunc)}},initMobileEnv:function e(){var t=this;var n=document.head.querySelectorAll("meta");var r=babelHelpers.toConsumableArray(n).find((function(e){return e.name==="viewport"}));if(r){this.viewPortMetaSiteNode=r;this.viewPortMetaSiteNode.remove()}else{this.createViewportMeta()}if(!this.viewPortMetaWidgetNode){this.viewPortMetaWidgetNode=document.createElement("meta");this.viewPortMetaWidgetNode.setAttribute("name","viewport");this.viewPortMetaWidgetNode.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=0");document.head.append(this.viewPortMetaWidgetNode)}document.body.classList.add("bx-livechat-mobile-state");if(g.Utils.browser.isSafariBased()){document.body.classList.add("bx-livechat-mobile-safari-based")}return new Promise((function(e){setTimeout((function(){t.$store.dispatch("widget/show").then(e)}),50)}))},createViewportMeta:function e(){var t=document.body.offsetWidth;if(t<window.innerWidth){t=window.innerWidth}if(t<1024){t=1024}this.viewPortMetaSiteNode=document.createElement("meta");this.viewPortMetaSiteNode.setAttribute("name","viewport");this.viewPortMetaSiteNode.setAttribute("content","width=".concat(t,", initial-scale=1.0, user-scalable=1"))},removeMobileEnv:function e(){document.body.classList.remove("bx-livechat-mobile-state");if(g.Utils.browser.isSafariBased()){document.body.classList.remove("bx-livechat-mobile-safari-based")}if(this.viewPortMetaWidgetNode){this.viewPortMetaWidgetNode.remove();this.viewPortMetaWidgetNode=null}if(this.viewPortMetaSiteNode){document.head.append(this.viewPortMetaSiteNode);this.viewPortMetaSiteNode=null}},onCreated:function e(){var t=this;return new Promise((function(e){if(g.Utils.device.isMobile()){t.initMobileEnv().then(e)}else{t.$store.dispatch("widget/show").then((function(){t.widgetCurrentHeight=P.height;t.widgetCurrentWidth=P.width;t.getAvailableSpace();t.widgetCurrentHeight=t.widget.common.widgetHeight||t.widgetCurrentHeight;t.widgetCurrentWidth=t.widget.common.widgetWidth||t.widgetCurrentWidth;e()}))}t.textareaHeight=t.widget.common.textareaHeight||t.textareaHeight;t.initCollections()}))},initCollections:function e(){this.$store.commit("files/initCollection",{chatId:this.getApplication().getChatId()});this.$store.commit("messages/initCollection",{chatId:this.getApplication().getChatId()});this.$store.commit("dialogues/initCollection",{dialogId:this.getApplication().getDialogId(),fields:{entityType:"LIVECHAT",type:"livechat"}})},onBeforeClose:function e(){if(g.Utils.device.isMobile()){this.removeMobileEnv()}},onAfterClose:function e(){this.getApplication().close()},onOpenMenu:function e(){this.historyHandler.getHtmlHistory()},onPullRequestConfig:function e(){this.getApplication().recoverPullConnection()},onSmilesSelectSmile:function e(t){_.EventEmitter.emit(k.EventType.textarea.insertText,{text:t.text})},onSmilesSelectSet:function e(){_.EventEmitter.emit(k.EventType.textarea.setFocus)},onWidgetStartDrag:function e(t){this.resizeHandler.startResize(t,this.widgetCurrentHeight,this.widgetCurrentWidth);this.widgetIsResizing=true;_.EventEmitter.emit(k.EventType.textarea.setBlur,true)},onWindowKeyDown:function e(t){if(t.keyCode!==27){return}if(this.widget.common.showForm!==M.none){this.$store.commit("widget/common",{showForm:M.none})}else if(this.widget.common.showConsent){_.EventEmitter.emit(U.declineConsent)}else{this.close()}t.preventDefault();t.stopPropagation();_.EventEmitter.emit(k.EventType.textarea.setFocus)},onWelcomeFormSendSuccess:function e(){this.welcomeFormFilled=true},onWelcomeFormSendError:function e(t){console.error("onWelcomeFormSendError",t);this.welcomeFormFilled=true},onTextareaStartDrag:function e(t){this.textareaDragHandler.onStartDrag(t,this.textareaHeight);_.EventEmitter.emit(k.EventType.textarea.setBlur,true)},openDialogList:function e(){this.$store.commit("widget/common",{isCreateSessionMode:!this.widget.common.isCreateSessionMode});this.startNewChatMode=false},onStartNewChat:function e(){this.startNewChatMode=true},getApplication:function e(){return this.$Bitrix.Application.get()},close:function e(){if(this.widget.common.pageMode){return false}this.onBeforeClose();this.$store.commit("widget/common",{showed:false})},getAvailableSpace:function e(){var t=50;if(this.isBottomLocation()){var n=this.$refs.widgetWrapper.getBoundingClientRect().bottom;var r=window.innerHeight-n;this.widgetAvailableHeight=window.innerHeight-t-r}else{var i=this.$refs.widgetWrapper.getBoundingClientRect().top;this.widgetAvailableHeight=window.innerHeight-t-i}this.widgetAvailableWidth=window.innerWidth-t*2;if(this.resizeHandler){this.resizeHandler.setAvailableWidth(this.widgetAvailableWidth);this.resizeHandler.setAvailableHeight(this.widgetAvailableHeight)}},getTextareaDragHandler:function e(){var t=this,n;return new S.TextareaDragHandler((n={},babelHelpers.defineProperty(n,S.TextareaDragHandler.events.onHeightChange,(function(e){var n=e.data;var r=n.newHeight;if(t.textareaHeight!==r){t.textareaHeight=r}})),babelHelpers.defineProperty(n,S.TextareaDragHandler.events.onStopDrag,(function(){t.$store.commit("widget/common",{textareaHeight:t.textareaHeight});_.EventEmitter.emit(k.EventType.dialog.scrollToBottom,{chatId:t.chatId,force:true})})),n))},getWidgetResizeHandler:function e(){var t=this,n;return new te({widgetLocation:this.widget.common.location,availableWidth:this.widgetAvailableWidth,availableHeight:this.widgetAvailableHeight,events:(n={},babelHelpers.defineProperty(n,te.events.onSizeChange,(function(e){var n=e.data;var r=n.newHeight,i=n.newWidth;if(t.widgetCurrentHeight!==r){t.widgetCurrentHeight=r}if(t.widgetCurrentWidth!==i){t.widgetCurrentWidth=i}})),babelHelpers.defineProperty(n,te.events.onStopResize,(function(){t.widgetIsResizing=false;t.$store.commit("widget/common",{widgetHeight:t.widgetCurrentHeight,widgetWidth:t.widgetCurrentWidth})})),n)})},isBottomLocation:function e(){return[D.bottomLeft,D.bottomMiddle,D.bottomRight].includes(this.widget.common.location)},isPageMode:function e(){return this.widget.common.pageMode},registerZIndex:function e(){this.zIndexStackInstance=this.$Bitrix.Data.get("zIndexStack");if(this.zIndexStackInstance&&!!this.$refs.widgetWrapper){this.zIndexStackInstance.register(this.$refs.widgetWrapper)}},unregisterZIndex:function e(){if(this.zIndexStackInstance){this.zIndexStackInstance.unregister(this.$refs.widgetWrapper)}}},template:'\n\t\t<transition enter-active-class="bx-livechat-show" leave-active-class="bx-livechat-close" @after-leave="onAfterClose">\n\t\t\t<div\n\t\t\t\t:class="widgetClassName"\n\t\t\t\tv-if="widget.common.showed"\n\t\t\t\t:style="{height: widgetHeightStyle, width: widgetWidthStyle, userSelect: userSelectStyle}"\n\t\t\t\tclass="bx-livechat-wrapper bx-livechat-show"\n\t\t\t\tref="widgetWrapper"\n\t\t\t>\n\t\t\t\t<div class="bx-livechat-box">\n\t\t\t\t\t<div v-if="isBottomLocation() && !isPageMode()" class="bx-livechat-widget-resize-handle" @mousedown="onWidgetStartDrag"></div>\n\t\t\t\t\t<bx-livechat-head \n\t\t\t\t\t\t:isWidgetDisabled="widgetMobileDisabled" \n\t\t\t\t\t\t@openMenu="onOpenMenu" \n\t\t\t\t\t\t@close="close"\n\t\t\t\t\t\t@openDialogList="openDialogList"\n\t\t\t\t\t/>\n\t\t\t\t\t<template v-if="widgetMobileDisabled">\n\t\t\t\t\t\t<bx-livechat-body-orientation-disabled/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if="application.error.active">\n\t\t\t\t\t\t<bx-livechat-body-error/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if="!widget.common.configId">\n\t\t\t\t\t\t<div class="bx-livechat-body" key="loading-body">\n\t\t\t\t\t\t\t<bx-livechat-body-loading/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div v-show="!widget.common.dialogStart" class="bx-livechat-body" :class="{\'bx-livechat-body-with-scroll\': showWelcomeForm}" key="welcome-body">\n\t\t\t\t\t\t\t<bx-imopenlines-form\n\t\t\t\t\t\t\t  v-show="showWelcomeForm"\n\t\t\t\t\t\t\t  @formSendSuccess="onWelcomeFormSendSuccess"\n\t\t\t\t\t\t\t  @formSendError="onWelcomeFormSendError"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<template v-if="!showWelcomeForm">\n\t\t\t\t\t\t\t\t<bx-livechat-body-operators/>\n\t\t\t\t\t\t\t\t<keep-alive include="bx-livechat-smiles">\n\t\t\t\t\t\t\t\t\t<template v-if="widget.common.showForm === FormType.smile">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-smiles @selectSmile="onSmilesSelectSmile" @selectSet="onSmilesSelectSet"/>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</keep-alive>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<template v-if="widget.common.dialogStart">\n\t\t\t\t\t\t\t<bx-pull-component-status :canReconnect="true" @reconnect="onPullRequestConfig"/>\n\t\t\t\t\t\t\t<div :class="[\'bx-livechat-body\', {\'bx-livechat-body-with-message\': showMessageDialog}]" key="with-message">\n\t\t\t\t\t\t\t\t<template v-if="widget.common.isCreateSessionMode">\n\t\t\t\t\t\t\t\t\t<bx-livechat-dialogues-list @startNewChat="onStartNewChat"/>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else-if="showMessageDialog">\n\t\t\t\t\t\t\t\t\t<div class="bx-livechat-dialog">\n\t\t\t\t\t\t\t\t\t\t<bx-im-component-dialog\n\t\t\t\t\t\t\t\t\t\t\t:userId="application.common.userId"\n\t\t\t\t\t\t\t\t\t\t\t:dialogId="application.dialog.dialogId"\n\t\t\t\t\t\t\t\t\t\t\t:messageLimit="application.dialog.messageLimit"\n\t\t\t\t\t\t\t\t\t\t\t:enableReactions="true"\n\t\t\t\t\t\t\t\t\t\t\t:enableDateActions="false"\n\t\t\t\t\t\t\t\t\t\t\t:enableCreateContent="false"\n\t\t\t\t\t\t\t\t\t\t\t:enableGestureQuote="true"\n\t\t\t\t\t\t\t\t\t\t\t:enableGestureMenu="true"\n\t\t\t\t\t\t\t\t\t\t\t:showMessageAvatar="false"\n\t\t\t\t\t\t\t\t\t\t\t:showMessageMenu="false"\n\t\t\t\t\t\t\t\t\t\t\t:skipDataRequest="true"\n\t\t\t\t\t\t\t\t\t\t\t:showLoadingState="false"\n\t\t\t\t\t\t\t\t\t\t\t:showEmptyState="false"\n\t\t\t\t\t\t\t\t\t\t />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t<bx-livechat-body-loading/>\n\t\t\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t\t\t<keep-alive include="bx-livechat-smiles">\n\t\t\t\t\t\t\t\t\t<template v-if="widget.common.showForm === FormType.like && widget.common.vote.enable">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-form-vote/>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else-if="widget.common.showForm === FormType.welcome">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-form-welcome/>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else-if="widget.common.showForm === FormType.offline">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-form-offline/>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else-if="widget.common.showForm === FormType.history">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-form-history/>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else-if="widget.common.showForm === FormType.smile">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-smiles @selectSmile="onSmilesSelectSmile" @selectSet="onSmilesSelectSet"/>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</keep-alive>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<div v-if="showTextarea || startNewChatMode" class="bx-livechat-textarea" :style="[textareaHeightStyle, textareaBottomMargin]" ref="textarea">\n\t\t\t\t\t\t\t<div class="bx-livechat-textarea-resize-handle" @mousedown="onTextareaStartDrag" @touchstart="onTextareaStartDrag"></div>\n\t\t\t\t\t\t\t<bx-im-component-textarea\n\t\t\t\t\t\t\t\t:siteId="application.common.siteId"\n\t\t\t\t\t\t\t\t:userId="application.common.userId"\n\t\t\t\t\t\t\t\t:dialogId="application.dialog.dialogId"\n\t\t\t\t\t\t\t\t:writesEventLetter="3"\n\t\t\t\t\t\t\t\t:enableEdit="true"\n\t\t\t\t\t\t\t\t:enableCommand="false"\n\t\t\t\t\t\t\t\t:enableMention="false"\n\t\t\t\t\t\t\t\t:enableFile="application.disk.enabled"\n\t\t\t\t\t\t\t\t:autoFocus="application.device.type !== DeviceType.mobile"\n\t\t\t\t\t\t\t\t:styles="{button: {backgroundColor: widget.common.styles.backgroundColor, iconColor: widget.common.styles.iconColor}}"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if="!widget.common.copyright && !isBottomLocation" class="bx-livechat-nocopyright-resize-wrap" style="position: relative;">\n\t\t\t\t\t\t\t<div class="bx-livechat-widget-resize-handle" @mousedown="onWidgetStartDrag"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<bx-livechat-form-consent />\n\t\t\t\t\t\t<template v-if="widget.common.copyright">\n\t\t\t\t\t\t\t<div class="bx-livechat-copyright">\n\t\t\t\t\t\t\t\t<template v-if="widget.common.copyrightUrl">\n\t\t\t\t\t\t\t\t\t<a class="bx-livechat-copyright-link" :href="widget.common.copyrightUrl" target="_blank">\n\t\t\t\t\t\t\t\t\t\t<span class="bx-livechat-logo-name">{{localize.BX_LIVECHAT_COPYRIGHT_TEXT}}</span>\n\t\t\t\t\t\t\t\t\t\t<span class="bx-livechat-logo-icon"></span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t<span class="bx-livechat-logo-name">{{localize.BX_LIVECHAT_COPYRIGHT_TEXT}}</span>\n\t\t\t\t\t\t\t\t\t<span class="bx-livechat-logo-icon"></span>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<div v-if="!isBottomLocation() && !isPageMode()" class="bx-livechat-widget-resize-handle" @mousedown="onWidgetStartDrag"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\n\t'});function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}C.WidgetBitrixVue.component("bx-livechat-body-error",{computed:ce({},E.WidgetVuex.mapState({application:function e(t){return t.application}})),template:'\n\t\t<div class="bx-livechat-body" key="error-body">\n\t\t\t<div class="bx-livechat-warning-window">\n\t\t\t\t<div class="bx-livechat-warning-icon"></div>\n\t\t\t\t<template v-if="application.error.description"> \n\t\t\t\t\t<div class="bx-livechat-help-title bx-livechat-help-title-sm bx-livechat-warning-msg" v-html="application.error.description"></div>\n\t\t\t\t</template> \n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class="bx-livechat-help-title bx-livechat-help-title-md bx-livechat-warning-msg">{{$Bitrix.Loc.getMessage(\'BX_LIVECHAT_ERROR_TITLE\')}}</div>\n\t\t\t\t\t<div class="bx-livechat-help-title bx-livechat-help-title-sm bx-livechat-warning-msg">{{$Bitrix.Loc.getMessage(\'BX_LIVECHAT_ERROR_DESC\')}}</div>\n\t\t\t\t</template> \n\t\t\t</div>\n\t\t</div>\n\t'});function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}C.WidgetBitrixVue.component("bx-livechat-head",{props:{isWidgetDisabled:{default:false}},data:function e(){return{multiDialog:false}},methods:{openDialogList:function e(){_.EventEmitter.emit(U.hideForm);this.$emit("openDialogList")},close:function e(t){this.$emit("close")},like:function e(){_.EventEmitter.emit(U.showForm,{type:M.like})},openMenu:function e(t){this.$emit("openMenu",t)}},computed:de({VoteType:function e(){return T},chatId:function e(){if(this.application){return this.application.dialog.chatId}},customBackgroundStyle:function e(t){return t.widget.common.styles.backgroundColor?"background-color: "+t.widget.common.styles.backgroundColor+"!important;":""},customBackgroundOnlineStyle:function e(t){return t.widget.common.styles.backgroundColor?"border-color: "+t.widget.common.styles.backgroundColor+"!important;":""},showName:function e(t){return t.widget.dialog.operator.firstName||t.widget.dialog.operator.lastName},voteActive:function e(t){if(!!t.widget.dialog.closeVote){return false}if(!t.widget.common.vote.beforeFinish&&t.widget.dialog.sessionStatus<F.waitClient){return false}if(!t.widget.dialog.sessionClose||t.widget.dialog.sessionClose&&t.widget.dialog.userVote===T.none){return true}if(t.widget.dialog.sessionClose&&t.widget.dialog.userVote!==T.none){return true}return false},chatTitle:function e(t){return t.widget.common.textMessages.bxLivechatTitle||t.widget.common.configName||this.localize.BX_LIVECHAT_TITLE},operatorName:function e(t){if(!this.showName)return"";return t.widget.dialog.operator.firstName?t.widget.dialog.operator.firstName:t.widget.dialog.operator.name},operatorDescription:function e(t){if(!this.showName){return""}var n=t.widget.dialog.operator.workPosition?t.widget.dialog.operator.workPosition:this.localize.BX_LIVECHAT_USER;if(t.widget.common.showSessionId&&t.widget.dialog.sessionId>=0){return this.localize.BX_LIVECHAT_OPERATOR_POSITION_AND_SESSION_ID.replace("#POSITION#",n).replace("#ID#",t.widget.dialog.sessionId)}return this.localize.BX_LIVECHAT_OPERATOR_POSITION_ONLY.replace("#POSITION#",n)},localize:function e(){return C.WidgetBitrixVue.getFilteredPhrases("BX_LIVECHAT_",this)},ie11:function e(){return I.Browser.isIE11()}},E.WidgetVuex.mapState({widget:function e(t){return t.widget},application:function e(t){return t.application}})),watch:{showName:function e(t){var n=this;if(t){setTimeout((function(){n.$root.$emit(k.EventType.dialog.scrollToBottom,{chatId:n.chatId})}),300)}}},template:'\n\t\t<div class="bx-livechat-head-wrap">\n\t\t\t<template v-if="isWidgetDisabled">\n\t\t\t\t<div class="bx-livechat-head" :style="customBackgroundStyle">\n\t\t\t\t\t<div class="bx-livechat-title">{{chatTitle}}</div>\n\t\t\t\t\t<div class="bx-livechat-control-box">\n\t\t\t\t\t\t<button v-if="!widget.common.pageMode" class="bx-livechat-control-btn bx-livechat-control-btn-close" :title="localize.BX_LIVECHAT_CLOSE_BUTTON" @click="close"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\n\t\t\t</template>\n\t\t\t<template v-else-if="application.error.active">\n\t\t\t\t<div class="bx-livechat-head" :style="customBackgroundStyle">\n\t\t\t\t\t<div class="bx-livechat-title">{{chatTitle}}</div>\n\t\t\t\t\t<div class="bx-livechat-control-box">\n\t\t\t\t\t\t<button v-if="!widget.common.pageMode" class="bx-livechat-control-btn bx-livechat-control-btn-close" :title="localize.BX_LIVECHAT_CLOSE_BUTTON" @click="close"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if="!widget.common.configId">\n\t\t\t\t<div class="bx-livechat-head" :style="customBackgroundStyle">\n\t\t\t\t\t<div class="bx-livechat-title">{{chatTitle}}</div>\n\t\t\t\t\t<div class="bx-livechat-control-box">\n\t\t\t\t\t\t<button v-if="!widget.common.pageMode" class="bx-livechat-control-btn bx-livechat-control-btn-close" :title="localize.BX_LIVECHAT_CLOSE_BUTTON" @click="close"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\t\t\t\n\t\t\t<template v-else>\n\t\t\t\t<div class="bx-livechat-head" :style="customBackgroundStyle">\n\t\t\t\t\t<template v-if="!showName">\n\t\t\t\t\t\t<div class="bx-livechat-title">{{chatTitle}}</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div class="bx-livechat-user bx-livechat-status-online">\n\t\t\t\t\t\t\t<template v-if="widget.dialog.operator.avatar">\n\t\t\t\t\t\t\t\t<div class="bx-livechat-user-icon" :style="\'background-image: url(\'+encodeURI(widget.dialog.operator.avatar)+\')\'">\n\t\t\t\t\t\t\t\t\t<div v-if="widget.dialog.operator.online" class="bx-livechat-user-status" :style="customBackgroundOnlineStyle"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<div class="bx-livechat-user-icon">\n\t\t\t\t\t\t\t\t\t<div v-if="widget.dialog.operator.online" class="bx-livechat-user-status" :style="customBackgroundOnlineStyle"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bx-livechat-user-info">\n\t\t\t\t\t\t\t<div class="bx-livechat-user-name">{{operatorName}}</div>\n\t\t\t\t\t\t\t<div class="bx-livechat-user-position">{{operatorDescription}}</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<div class="bx-livechat-control-box">\n\t\t\t\t\t\t<span class="bx-livechat-control-box-active" v-if="widget.common.dialogStart && widget.dialog.sessionId">\n\t\t\t\t\t\t\t<button v-if="widget.common.vote.enable && voteActive" :class="\'bx-livechat-control-btn bx-livechat-control-btn-like bx-livechat-dialog-vote-\'+(widget.dialog.userVote)" :title="localize.BX_LIVECHAT_VOTE_BUTTON" @click="like"></button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tv-if="!ie11 && application.dialog.chatId > 0"\n\t\t\t\t\t\t\t\tclass="bx-livechat-control-btn bx-livechat-control-btn-menu"\n\t\t\t\t\t\t\t\t@click="openMenu"\n\t\t\t\t\t\t\t\t:title="localize.BX_LIVECHAT_DOWNLOAD_HISTORY"\n\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tv-if="multiDialog && application.dialog.chatId > 0"\n\t\t\t\t\t\t\t\tclass="bx-livechat-control-btn bx-livechat-control-btn-list"\n\t\t\t\t\t\t\t\t@click="openDialogList"\n\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t</span>\t\n\t\t\t\t\t\t<button v-if="!widget.common.pageMode" class="bx-livechat-control-btn bx-livechat-control-btn-close" :title="localize.BX_LIVECHAT_CLOSE_BUTTON" @click="close"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t'});
/**
	 * Bitrix OpenLines widget
	 * Body loading component (Vue component)
	 *
	 * @package bitrix
	 * @subpackage imopenlines
	 * @copyright 2001-2019 Bitrix
	 */C.WidgetBitrixVue.component("bx-livechat-body-loading",{template:'\n\t\t<div class="bx-livechat-loading-window">\n\t\t\t<svg class="bx-livechat-loading-circular" viewBox="25 25 50 50">\n\t\t\t\t<circle class="bx-livechat-loading-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n\t\t\t\t<circle class="bx-livechat-loading-inner-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n\t\t\t</svg>\n\t\t\t<h3 class="bx-livechat-help-title bx-livechat-help-title-md bx-livechat-loading-msg">{{$Bitrix.Loc.getMessage(\'BX_LIVECHAT_LOADING\')}}</h3>\n\t\t</div>\n\t'});function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}C.WidgetBitrixVue.component("bx-livechat-body-operators",{computed:pe({},E.WidgetVuex.mapState({widget:function e(t){return t.widget}})),template:'\n\t\t<div class="bx-livechat-help-container">\n\t\t\t<transition name="bx-livechat-animation-fade">\n\t\t\t\t<h2 v-if="widget.common.online" key="online" class="bx-livechat-help-title bx-livechat-help-title-lg">{{widget.common.textMessages.bxLivechatOnlineLine1}}<div class="bx-livechat-help-subtitle">{{widget.common.textMessages.bxLivechatOnlineLine2}}</div></h2>\n\t\t\t\t<h2 v-else key="offline" class="bx-livechat-help-title bx-livechat-help-title-sm">{{widget.common.textMessages.bxLivechatOffline}}</h2>\n\t\t\t</transition>\t\n\t\t\t<div class="bx-livechat-help-user">\n\t\t\t\t<template v-for="operator in widget.common.operators">\n\t\t\t\t\t<div class="bx-livechat-user" :key="operator.id">\n\t\t\t\t\t\t<template v-if="operator.avatar">\n\t\t\t\t\t\t\t<div class="bx-livechat-user-icon" :style="\'background-image: url(\'+encodeURI(operator.avatar)+\')\'"></div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<div class="bx-livechat-user-icon"></div>\n\t\t\t\t\t\t</template>\t\n\t\t\t\t\t\t<div class="bx-livechat-user-info">\n\t\t\t\t\t\t\t<div class="bx-livechat-user-name">{{operator.firstName? operator.firstName: operator.name}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\t\n\t\t\t</div>\n\t\t</div>\n\t'});function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}C.WidgetBitrixVue.component("bx-livechat-dialogues-list",{data:function e(){return{newChatMode:false,sessionList:[],isLoading:false,pagesLoaded:0,hasMoreItemsToLoad:true,itemsPerPage:25}},computed:ge({},E.WidgetVuex.mapState({dialogues:function e(t){return t.dialogues}})),mounted:function e(){this.requestDialogList()},methods:{requestDialogList:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;this.isLoading=true;var r={CONFIG_ID:this.$Bitrix.Application.get().getConfigId()};if(n>0){r["OFFSET"]=n}return this.$Bitrix.Application.get().controller.restClient.callMethod(j.widgetDialogList,r).then((function(e){if(e.data().length===0||e.data().length<t.itemsPerPage){t.hasMoreItemsToLoad=false}t.pagesLoaded++;t.isLoading=false;t.sessionList=[].concat(babelHelpers.toConsumableArray(t.sessionList),babelHelpers.toConsumableArray(t.prepareSessionList(e.data())))}))["catch"]((function(e){console.warn("error",e)}))},prepareSessionList:function e(t){return Object.values(t).map((function(e){return{chatId:e.chatId,dialogId:e.dialogId,name:"Dialog #".concat(e.sessionId)}}))},openSession:function e(t){_.EventEmitter.emit(U.openSession,t)},startNewChat:function e(t){this.newChatMode=true;this.$emit("startNewChat",t)},isOneScreenRemaining:function e(t){return t.target.scrollTop+t.target.clientHeight>=t.target.scrollHeight-t.target.clientHeight},onScroll:function e(t){if(this.isOneScreenRemaining(t)){if(this.isLoading||!this.hasMoreItemsToLoad){return}var n=this.itemsPerPage*this.pagesLoaded;this.requestDialogList(n)}}},template:'\n\t<div class="bx-livechat-help-container" style=" height: 100%; display: flex; flex-direction: column; justify-content: space-between;">\n\t\t<div \n\t\t\tstyle="margin-top: 25px;overflow-y: scroll;position:relative"\n\t\t\t:style="{marginBottom: newChatMode ? 0 : \'10px\'}"\n\t\t\t@scroll="onScroll"\n\t\t>\n\t\t\t<div\n\t\t\t\tv-for="session in sessionList"\n\t\t\t\t:key="session.chatId"\n\t\t\t\tclass="bx-livechat-help-subtitle"\n\t\t\t\t@click="openSession({event: $event, session: session})"\n\t\t\t\tstyle="cursor: pointer; border: solid 1px black;border-radius: 10px;margin: 10px;padding: 5px;background-color: #0ae4ff">\n\t\t\t\t{{ session.name }}\n\t\t\t</div>\n\t\t\t<div v-if="isLoading" style="margin: 10px">Loading</div>\n\t\t</div>\n\t\t\n\t\t<div v-if="!newChatMode" style="margin-bottom: 10px;">\n\t\t\t<button \n\t\t\t\tclass="bx-livechat-btn" \n\t\t\t\tstyle="background-color: rgb(23, 163, 234); border-radius: 5px;width: 150px;" \n\t\t\t\t@click="startNewChat">\n\t\t\t\tStart new chat!\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\t'});
/**
	 * Bitrix OpenLines widget
	 * Body orientation disabled component (Vue component)
	 *
	 * @package bitrix
	 * @subpackage imopenlines
	 * @copyright 2001-2019 Bitrix
	 */C.WidgetBitrixVue.component("bx-livechat-body-orientation-disabled",{template:'\n\t\t<div class="bx-livechat-body" key="orientation-head">\n\t\t\t<div class="bx-livechat-mobile-orientation-box">\n\t\t\t\t<div class="bx-livechat-mobile-orientation-icon"></div>\n\t\t\t\t<div class="bx-livechat-mobile-orientation-text">{{$Bitrix.Loc.getMessage(\'BX_LIVECHAT_MOBILE_ROTATE\')}}</div>\n\t\t\t</div>\n\t\t</div>\n\t'});function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}C.WidgetBitrixVue.component("bx-livechat-form-consent",{computed:ye({},E.WidgetVuex.mapState({widget:function e(t){return t.widget}})),methods:{agree:function e(){_.EventEmitter.emit(U.acceptConsent)},disagree:function e(){_.EventEmitter.emit(U.declineConsent)},onShow:function e(t,n){t.classList.add("bx-livechat-consent-window-show");n()},onHide:function e(t,n){t.classList.remove("bx-livechat-consent-window-show");t.classList.add("bx-livechat-consent-window-close");setTimeout((function(){n()}),400)},onKeyDown:function e(t){if(t.keyCode==9){if(t.target===this.$refs.iframe){if(t.shiftKey){this.$refs.cancel.focus()}else{this.$refs.success.focus()}}else if(t.target===this.$refs.success){if(t.shiftKey){this.$refs.iframe.focus()}else{this.$refs.cancel.focus()}}else if(t.target===this.$refs.cancel){if(t.shiftKey){this.$refs.success.focus()}else{this.$refs.iframe.focus()}}t.preventDefault()}else if(t.keyCode==39||t.keyCode==37){if(t.target.nextElementSibling){t.target.nextElementSibling.focus()}else if(t.target.previousElementSibling){t.target.previousElementSibling.focus()}t.preventDefault()}}},directives:{focus:{inserted:function e(t,n){t.focus()}}},template:'\n\t\t<transition @enter="onShow" @leave="onHide">\n\t\t\t<template v-if="widget.common.showConsent && widget.common.consentUrl">\n\t\t\t\t<div class="bx-livechat-consent-window">\n\t\t\t\t\t<div class="bx-livechat-consent-window-title">{{$Bitrix.Loc.getMessage(\'BX_LIVECHAT_CONSENT_TITLE\')}}</div>\n\t\t\t\t\t<div class="bx-livechat-consent-window-content">\n\t\t\t\t\t\t<iframe class="bx-livechat-consent-window-content-iframe" ref="iframe" frameborder="0" marginheight="0"  marginwidth="0" allowtransparency="allow-same-origin" seamless="true" :src="widget.common.consentUrl" @keydown="onKeyDown"></iframe>\n\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t\t<div class="bx-livechat-consent-window-btn-box">\n\t\t\t\t\t\t<button class="bx-livechat-btn bx-livechat-btn-success" ref="success" @click="agree" @keydown="onKeyDown" v-focus>{{$Bitrix.Loc.getMessage(\'BX_LIVECHAT_CONSENT_AGREE\')}}</button>\n\t\t\t\t\t\t<button class="bx-livechat-btn bx-livechat-btn-cancel" ref="cancel" @click="disagree" @keydown="onKeyDown">{{$Bitrix.Loc.getMessage(\'BX_LIVECHAT_CONSENT_DISAGREE\')}}</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</transition>\n\t'});function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}C.WidgetBitrixVue.component("bx-livechat-form-vote",{computed:we({VoteType:function e(){return T}},E.WidgetVuex.mapState({widget:function e(t){return t.widget}})),methods:{userVote:function e(t){_.EventEmitter.emit(U.hideForm);this.$store.commit("widget/dialog",{userVote:t});_.EventEmitter.emit(U.sendDialogVote,{vote:t})},hideForm:function e(){_.EventEmitter.emit(U.hideForm)}},template:'\n\t\t<transition enter-active-class="bx-livechat-consent-window-show" leave-active-class="bx-livechat-form-close">\n\t\t\t<div class="bx-livechat-alert-box bx-livechat-form-rate-show" key="vote">\n\t\t\t\t<div class="bx-livechat-alert-close" :title="$Bitrix.Loc.getMessage(\'BX_LIVECHAT_VOTE_LATER\')" @click="hideForm"></div>\n\t\t\t\t<div class="bx-livechat-alert-rate-box">\n\t\t\t\t\t<h4 class="bx-livechat-alert-title bx-livechat-alert-title-mdl">{{widget.common.vote.messageText}}</h4>\n\t\t\t\t\t<div class="bx-livechat-btn-box">\n\t\t\t\t\t\t<button class="bx-livechat-btn bx-livechat-btn-like" @click="userVote(VoteType.like)" :title="widget.common.vote.messageLike"></button>\n\t\t\t\t\t\t<button class="bx-livechat-btn bx-livechat-btn-dislike" @click="userVote(VoteType.dislike)" :title="widget.common.vote.messageDislike"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bx-livechat-alert-later"><span class="bx-livechat-alert-later-btn" @click="hideForm">{{$Bitrix.Loc.getMessage(\'BX_LIVECHAT_VOTE_LATER\')}}</span></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\t\n\t'});
/**
	 * Bitrix OpenLines widget
	 * Smiles component (Vue component)
	 *
	 * @package bitrix
	 * @subpackage imopenlines
	 * @copyright 2001-2019 Bitrix
	 */C.WidgetVue.cloneComponent("bx-livechat-smiles","bx-smiles",{methods:{hideForm:function e(){_.EventEmitter.emit(U.hideForm)}},template:'\n\t\t<transition enter-active-class="bx-livechat-consent-window-show" leave-active-class="bx-livechat-form-close">\n\t\t\t<div class="bx-livechat-alert-box bx-livechat-alert-box-zero-padding bx-livechat-form-show" key="vote">\n\t\t\t\t<div class="bx-livechat-alert-close" @click="hideForm"></div>\n\t\t\t\t<div class="bx-livechat-alert-smiles-box">\n\t\t\t\t\t#PARENT_TEMPLATE#\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\n\t'});
/**
	 * Bitrix OpenLines widget
	 * Widget component & controller
	 *
	 * @package bitrix
	 * @subpackage imopenlines
	 * @copyright 2001-2019 Bitrix
	 */BX.LiveChatWidget=Y;BX.LiveChatWidget.VoteType=T;BX.LiveChatWidget.SubscriptionType=R;BX.LiveChatWidget.LocationStyle=A;BX.LiveChatWidget.Cookie=p.Cookie;window.dispatchEvent(new CustomEvent("onBitrixLiveChatSourceLoaded",{detail:{}}))})(this.window=this.window||{},BX,window,BX.Messenger,window,BX,window,window,BX,BX.Messenger.Provider.Rest,BX.Main,BX,BX.Ui.Vue.Components.Crm,BX.Messenger,BX.Messenger.Lib,BX.Messenger.Lib,BX.Messenger.Lib,BX,BX.Messenger.Lib,BX,BX.Messenger.Lib,BX.Messenger.EventHandler,BX.Messenger.Const,BX,BX,BX,BX.Event);
//# sourceMappingURL=script.map.js