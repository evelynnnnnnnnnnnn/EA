this.BX=this.BX||{};(function(e,s,t,a,i,l,r,o,n,p,d){"use strict";let c=e=>e,b,h,u,v,m;var P=babelHelpers.classPrivateFieldLooseKey("pausePlayerWidth");var y=babelHelpers.classPrivateFieldLooseKey("scale");var L=babelHelpers.classPrivateFieldLooseKey("videos");var B=babelHelpers.classPrivateFieldLooseKey("loop");var g=babelHelpers.classPrivateFieldLooseKey("autoplay");var H=babelHelpers.classPrivateFieldLooseKey("muted");var f=babelHelpers.classPrivateFieldLooseKey("content");var F=babelHelpers.classPrivateFieldLooseKey("videoNode");var k=babelHelpers.classPrivateFieldLooseKey("playerNode");var _=babelHelpers.classPrivateFieldLooseKey("progressBar");var w=babelHelpers.classPrivateFieldLooseKey("barPadding");var T=babelHelpers.classPrivateFieldLooseKey("posterUrl");var x=babelHelpers.classPrivateFieldLooseKey("loader");var C=babelHelpers.classPrivateFieldLooseKey("currentPlayState");var D=babelHelpers.classPrivateFieldLooseKey("playButton");var O=babelHelpers.classPrivateFieldLooseKey("stopButton");var $=babelHelpers.classPrivateFieldLooseKey("wrapper");var j=babelHelpers.classPrivateFieldLooseKey("analyticsCallback");var K=babelHelpers.classPrivateFieldLooseKey("onInitVideoMetadata");var S=babelHelpers.classPrivateFieldLooseKey("onTick");var I=babelHelpers.classPrivateFieldLooseKey("onClickPlayer");var E=babelHelpers.classPrivateFieldLooseKey("onClickStopButton");var A=babelHelpers.classPrivateFieldLooseKey("onVideoEnded");var W=babelHelpers.classPrivateFieldLooseKey("scaleTo");var N=babelHelpers.classPrivateFieldLooseKey("onPause");var X=babelHelpers.classPrivateFieldLooseKey("onPlay");class U{constructor(e){var s;Object.defineProperty(this,X,{value:J});Object.defineProperty(this,N,{value:V});Object.defineProperty(this,W,{value:q});Object.defineProperty(this,A,{value:G});Object.defineProperty(this,E,{value:Y});Object.defineProperty(this,I,{value:R});Object.defineProperty(this,S,{value:z});Object.defineProperty(this,K,{value:M});Object.defineProperty(this,P,{writable:true,value:void 0});Object.defineProperty(this,y,{writable:true,value:void 0});Object.defineProperty(this,L,{writable:true,value:void 0});Object.defineProperty(this,B,{writable:true,value:void 0});Object.defineProperty(this,g,{writable:true,value:void 0});Object.defineProperty(this,H,{writable:true,value:void 0});Object.defineProperty(this,f,{writable:true,value:void 0});Object.defineProperty(this,F,{writable:true,value:void 0});Object.defineProperty(this,k,{writable:true,value:void 0});Object.defineProperty(this,_,{writable:true,value:void 0});Object.defineProperty(this,w,{writable:true,value:3});Object.defineProperty(this,T,{writable:true,value:void 0});Object.defineProperty(this,x,{writable:true,value:void 0});Object.defineProperty(this,C,{writable:true,value:U.PLAY_STATE_BACKGROUND});Object.defineProperty(this,D,{writable:true,value:void 0});Object.defineProperty(this,O,{writable:true,value:void 0});Object.defineProperty(this,$,{writable:true,value:void 0});Object.defineProperty(this,j,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,$)[$]=e.wrapper;babelHelpers.classPrivateFieldLooseBase(this,P)[P]=(s=e.width)!=null?s:86;babelHelpers.classPrivateFieldLooseBase(this,y)[y]=n.Type.isNumber(e.scale)?e.scale:1;babelHelpers.classPrivateFieldLooseBase(this,L)[L]=n.Type.isArrayFilled(e.videos)?e.videos:[];babelHelpers.classPrivateFieldLooseBase(this,B)[B]=n.Type.isBoolean(e.loop)?e.loop:true;babelHelpers.classPrivateFieldLooseBase(this,g)[g]=n.Type.isBoolean(e.autoplay)?e.autoplay:true;babelHelpers.classPrivateFieldLooseBase(this,H)[H]=n.Type.isBoolean(e.muted)?e.muted:true;babelHelpers.classPrivateFieldLooseBase(this,T)[T]=e.posterUrl;babelHelpers.classPrivateFieldLooseBase(this,j)[j]=n.Type.isFunction(e.analyticsCallback)?e.analyticsCallback:null;babelHelpers.classPrivateFieldLooseBase(this,k)[k]=n.Tag.render(b||(b=c`<div class="ui-popupcomponentmaker__round-player"></div>`));babelHelpers.classPrivateFieldLooseBase(this,D)[D]=n.Tag.render(h||(h=c`<div class="ui-popupcomponentmaker__round-player-btn"></div>`));babelHelpers.classPrivateFieldLooseBase(this,O)[O]=n.Tag.render(u||(u=c`<div class="ui-popupcomponentmaker__round-player-btn --stop-btn"></div>`));let a="";if(n.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,T)[T])){babelHelpers.classPrivateFieldLooseBase(this,k)[k].style.backgroundImage='url("'+n.Text.encode(babelHelpers.classPrivateFieldLooseBase(this,T)[T])+'")';a='poster="'+n.Text.encode(babelHelpers.classPrivateFieldLooseBase(this,T)[T])+'"'}const i=babelHelpers.classPrivateFieldLooseBase(this,g)[g]?"autoplay":"";const l=babelHelpers.classPrivateFieldLooseBase(this,H)[H]?"muted":"";babelHelpers.classPrivateFieldLooseBase(this,F)[F]=n.Tag.render(v||(v=c`<video ${0} ${0} ${0}></video>`),a,i,l);babelHelpers.classPrivateFieldLooseBase(this,F)[F].muted=babelHelpers.classPrivateFieldLooseBase(this,H)[H];babelHelpers.classPrivateFieldLooseBase(this,F)[F].autoplay=babelHelpers.classPrivateFieldLooseBase(this,g)[g];babelHelpers.classPrivateFieldLooseBase(this,x)[x]=new t.Loader({size:40});babelHelpers.classPrivateFieldLooseBase(this,k)[k].style.width=babelHelpers.classPrivateFieldLooseBase(this,P)[P]+"px";babelHelpers.classPrivateFieldLooseBase(this,F)[F].addEventListener("timeupdate",babelHelpers.classPrivateFieldLooseBase(this,S)[S].bind(this));babelHelpers.classPrivateFieldLooseBase(this,F)[F].addEventListener("loadedmetadata",babelHelpers.classPrivateFieldLooseBase(this,K)[K].bind(this));babelHelpers.classPrivateFieldLooseBase(this,k)[k].addEventListener("click",babelHelpers.classPrivateFieldLooseBase(this,I)[I].bind(this));babelHelpers.classPrivateFieldLooseBase(this,F)[F].addEventListener("ended",babelHelpers.classPrivateFieldLooseBase(this,A)[A].bind(this));babelHelpers.classPrivateFieldLooseBase(this,F)[F].addEventListener("play",babelHelpers.classPrivateFieldLooseBase(this,X)[X].bind(this));babelHelpers.classPrivateFieldLooseBase(this,F)[F].addEventListener("pause",babelHelpers.classPrivateFieldLooseBase(this,N)[N].bind(this));babelHelpers.classPrivateFieldLooseBase(this,D)[D].addEventListener("click",babelHelpers.classPrivateFieldLooseBase(this,I)[I].bind(this));babelHelpers.classPrivateFieldLooseBase(this,O)[O].addEventListener("click",babelHelpers.classPrivateFieldLooseBase(this,E)[E].bind(this));babelHelpers.classPrivateFieldLooseBase(this,F)[F].addEventListener("canplay",(()=>{babelHelpers.classPrivateFieldLooseBase(this,x)[x].hide()}));babelHelpers.classPrivateFieldLooseBase(this,F)[F].addEventListener("waiting",(()=>{babelHelpers.classPrivateFieldLooseBase(this,x)[x].show(babelHelpers.classPrivateFieldLooseBase(this,k)[k])}))}render(){if(babelHelpers.classPrivateFieldLooseBase(this,f)[f]){return babelHelpers.classPrivateFieldLooseBase(this,f)[f]}babelHelpers.classPrivateFieldLooseBase(this,L)[L].forEach((e=>{n.Dom.append(n.Tag.render(m||(m=c`<source src="${0}" type="${0}">`),e.url,e.type),babelHelpers.classPrivateFieldLooseBase(this,F)[F])}));n.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,F)[F],babelHelpers.classPrivateFieldLooseBase(this,k)[k]);n.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,D)[D],babelHelpers.classPrivateFieldLooseBase(this,$)[$]);n.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,O)[O],babelHelpers.classPrivateFieldLooseBase(this,$)[$]);n.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,k)[k],babelHelpers.classPrivateFieldLooseBase(this,$)[$]);babelHelpers.classPrivateFieldLooseBase(this,f)[f]=babelHelpers.classPrivateFieldLooseBase(this,$)[$];return babelHelpers.classPrivateFieldLooseBase(this,f)[f]}renderTo(e){n.Dom.append(e,this.render());return e}play(){babelHelpers.classPrivateFieldLooseBase(this,F)[F].play();n.Dom.removeClass(this.render(),"--stop")}setMute(e){babelHelpers.classPrivateFieldLooseBase(this,F)[F].muted=e}getPlayState(){return babelHelpers.classPrivateFieldLooseBase(this,C)[C]}pause(){babelHelpers.classPrivateFieldLooseBase(this,F)[F].pause()}stop(){this.pause();babelHelpers.classPrivateFieldLooseBase(this,C)[C]=U.PLAY_STATE_BACKGROUND;babelHelpers.classPrivateFieldLooseBase(this,F)[F].currentTime=0;n.Dom.addClass(this.render(),"--stop")}userPlay(){this.stop();babelHelpers.classPrivateFieldLooseBase(this,C)[C]=U.PLAY_STATE_USER;babelHelpers.classPrivateFieldLooseBase(this,_)[_].setValue(0);n.Dom.remove(babelHelpers.classPrivateFieldLooseBase(this,_)[_].getContainer());babelHelpers.classPrivateFieldLooseBase(this,_)[_].renderTo(babelHelpers.classPrivateFieldLooseBase(this,k)[k]);this.setMute(false);this.play()}}function M(e){babelHelpers.classPrivateFieldLooseBase(this,_)[_]=new a.ProgressRound({width:babelHelpers.classPrivateFieldLooseBase(this,P)[P]-2*babelHelpers.classPrivateFieldLooseBase(this,w)[w],lineSize:2,maxValue:babelHelpers.classPrivateFieldLooseBase(this,F)[F].duration,value:babelHelpers.classPrivateFieldLooseBase(this,F)[F].currentTime,colorBar:"#fff",colorTrack:"rgba(0, 0, 0, 0)"});if(babelHelpers.classPrivateFieldLooseBase(this,g)[g]){this.play()}}function z(){babelHelpers.classPrivateFieldLooseBase(this,_)[_].update(babelHelpers.classPrivateFieldLooseBase(this,F)[F].currentTime)}function R(){if(babelHelpers.classPrivateFieldLooseBase(this,C)[C]===U.PLAY_STATE_BACKGROUND){this.userPlay();n.Dom.removeClass(this.render(),"--stop")}else{babelHelpers.classPrivateFieldLooseBase(this,F)[F].paused?this.play():this.pause()}if(babelHelpers.classPrivateFieldLooseBase(this,j)[j]){babelHelpers.classPrivateFieldLooseBase(this,j)[j]("click-player")}}function Y(){if(babelHelpers.classPrivateFieldLooseBase(this,j)[j]){babelHelpers.classPrivateFieldLooseBase(this,j)[j]("click-player")}this.stop()}function G(){babelHelpers.classPrivateFieldLooseBase(this,j)[j]("video_finished",`isMuted_${babelHelpers.classPrivateFieldLooseBase(this,F)[F].muted?"Y":"N"}`);this.stop();n.Dom.remove(babelHelpers.classPrivateFieldLooseBase(this,_)[_].getContainer());this.setMute(true);if(babelHelpers.classPrivateFieldLooseBase(this,B)[B]){this.play()}}function q(e){babelHelpers.classPrivateFieldLooseBase(this,k)[k].style.transform=`scale(${e})`}function V(){babelHelpers.classPrivateFieldLooseBase(this,W)[W](1);if(babelHelpers.classPrivateFieldLooseBase(this,j)[j]){babelHelpers.classPrivateFieldLooseBase(this,j)[j]("on-pause")}}function J(){babelHelpers.classPrivateFieldLooseBase(this,W)[W](babelHelpers.classPrivateFieldLooseBase(this,y)[y]);if(babelHelpers.classPrivateFieldLooseBase(this,j)[j]){babelHelpers.classPrivateFieldLooseBase(this,j)[j]("on-play")}}U.PLAY_STATE_BACKGROUND="background";U.PLAY_STATE_USER="user";let Q=e=>e,Z,ee,se,te,ae,ie,le,re,oe,ne,pe,de,ce,be,he;var ue=babelHelpers.classPrivateFieldLooseKey("options");var ve=babelHelpers.classPrivateFieldLooseKey("content");var me=babelHelpers.classPrivateFieldLooseKey("player");class Pe{constructor(e){Object.defineProperty(this,ue,{writable:true,value:null});Object.defineProperty(this,ve,{writable:true,value:void 0});Object.defineProperty(this,me,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,ue)[ue]=e}buildPlayer(e){return new U({wrapper:e.wrapper,pausePlayerWidth:e.width,scale:e.scale,posterUrl:e.posterUrl,videos:e.videos,loop:e.loop,autoplay:e.autoplay,muted:e.muted,analyticsCallback:babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].analyticsCallback})}renderPlayer(e){if(babelHelpers.classPrivateFieldLooseBase(this,me)[me]){return babelHelpers.classPrivateFieldLooseBase(this,me)[me]}const s=n.Tag.render(Z||(Z=Q`<div class="ui-popupcomponentsmaker__round-player-box"/>`));babelHelpers.classPrivateFieldLooseBase(this,me)[me]=this.buildPlayer({...e,wrapper:s});if(babelHelpers.classPrivateFieldLooseBase(this,me)[me]){return babelHelpers.classPrivateFieldLooseBase(this,me)[me].render()}return n.Tag.render(ee||(ee=Q``))}getPlayer(){return babelHelpers.classPrivateFieldLooseBase(this,me)[me]}renderTitle(e){const s=n.Tag.render(se||(se=Q`
			<div class="ui-popupcomponentsmaker-header-tariff__header-content">
				<div class="ui-popupcomponentsmaker-header-tariff__title">${0}</div>
			</div>
		`),e.title);if(!n.Type.isNil(e.subtitle)){n.Dom.append(n.Tag.render(te||(te=Q`<div class="ui-popupcomponentsmaker-header-tariff__subtitle">${0}</div>`),e.subtitle),s)}return s}renderDescription(e){const s=n.Tag.render(ae||(ae=Q`
		<div class="ui-popupcomponentsmaker-header-tariff__box">
			<div class="ui-popupcomponentsmaker-header-tariff__title">${0}</div>
		</div>`),e.title);if(!n.Type.isNil(e.subtitle)){n.Dom.append(n.Tag.render(ie||(ie=Q`<div class="ui-popupcomponentsmaker-header-tariff__subtitle">${0}</div>`),e.subtitle),s)}if(!n.Type.isNil(e.subtitleDescription)){n.Dom.append(n.Tag.render(le||(le=Q`<div class="ui-popupcomponentsmaker-header-tariff__text">${0}</div>`),e.subtitleDescription),s)}if(!n.Type.isNil(e.code)){const t=s=>{s.stopPropagation();d.FeaturePromotersRegistry.getPromoter({code:e.code}).show()};n.Dom.append(n.Tag.render(re||(re=Q`<a onclick="${0}" target="_blank" class="ui-popupcomponentsmaker-header-tariff__more">${0}<div class="ui-icon-set --chevron-right ui-popupcomponentsmaker-header-tariff__more-icon"></div></a>`),t,e.moreLabel),s)}let t="";if(n.Type.isPlainObject(e.roundContent)){t=this.renderPlayer(e.roundContent)}else if(n.Type.isStringFilled(e.roundContent)){t=this.renderIcon(e.roundContent)}else if(n.Type.isDomNode(e.roundContent)){t=this.embedIcon(e.roundContent)}const a=n.Tag.render(oe||(oe=Q`
			<div class="ui-popupcomponentsmaker-header-tariff__message-wrapper">
				${0}
				${0}
			</div>
		`),t,s);const l=new i.PopupComponentsMakerItem({html:a,withoutBackground:false});n.Dom.addClass(l.getContainer(),"ui-popupcomponentsmaker-header-tariff__section-message-wrapper");l.getContainer().style.marginTop="14px";l.getContainer().classList.add("--transparent");return l.getContainer()}renderBtn(e){const s=e instanceof p.Button?e:new p.Button({text:e.label,color:p.ButtonColor.LIGHT_BORDER,size:p.ButtonSize.SMALL,link:e.url,onclick:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].analyticsCallback){babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].analyticsCallback("click-button-header",e.url)}},round:true,noCaps:true});s.addClass("ui-popupcomponentsmaker-header-tariff__button ui-btn-themes");return s.render()}renderIcon(e){if(n.Type.isStringFilled(e)){return n.Tag.render(ne||(ne=Q`
				<div class="ui-popupcomponentsmaker-header-tariff__icon">
					<div class="ui-icon-set ${0}"></div>
				</div>
			`),e)}return n.Tag.render(pe||(pe=Q``))}embedIcon(e){if(n.Type.isDomNode(e)){return n.Tag.render(de||(de=Q`
				<div class="ui-popupcomponentsmaker-header-tariff__icon">
					${0}
				</div>
			`),e)}return n.Tag.render(ce||(ce=Q``))}render(){if(babelHelpers.classPrivateFieldLooseBase(this,ve)[ve]){return babelHelpers.classPrivateFieldLooseBase(this,ve)[ve]}let e="";if(babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].button){e=n.Tag.render(be||(be=Q`
				<div class="ui-popupcomponentsmaker-header-tariff__button-bar">
					${0}
				</div>`),this.renderBtn(babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].button))}babelHelpers.classPrivateFieldLooseBase(this,ve)[ve]=n.Tag.render(he||(he=Q`
			<div class="ui-popupcomponentsmaker-header-tariff__wrapper">
				<div class="ui-popupcomponentsmaker-header-tariff__title-section">
					${0}
					${0}
				</div>
				
				${0}
				${0}
				
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].icon instanceof HTMLElement?this.embedIcon(babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].icon):this.renderIcon(babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].iconClass),this.renderTitle(babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].top),this.renderDescription(babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].info),e);return babelHelpers.classPrivateFieldLooseBase(this,ve)[ve]}}let ye=e=>e,Le,Be;var ge=babelHelpers.classPrivateFieldLooseKey("getThemePicker");var He=babelHelpers.classPrivateFieldLooseKey("applyTheme");class fe extends i.PopupComponentsMakerItem{constructor(e={}){e.withoutBackground=true;e.backgroundColor=null;e.backgroundImage=null;super(e);Object.defineProperty(this,He,{value:ke});Object.defineProperty(this,ge,{value:Fe})}getContainer(){if(!this.layout.container){var e;const t=(e=babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]())==null?void 0:e.getAppliedTheme();this.layout.container=n.Tag.render(Le||(Le=ye`<div class="ui-popupcomponentsmaker__header">${0}</div>`),this.getContent());this.bacgroundNode=n.Tag.render(Be||(Be=ye`<div class="ui-popupcomponentsmaker__header-background"></div>`));n.Dom.append(this.bacgroundNode,this.layout.container);if(t){babelHelpers.classPrivateFieldLooseBase(this,He)[He](this.bacgroundNode,t)}s.EventEmitter.subscribe("BX.Intranet.Bitrix24:ThemePicker:onThemeApply",(e=>{babelHelpers.classPrivateFieldLooseBase(this,He)[He](this.bacgroundNode,e.data.theme)}))}return super.getContainer()}static createByJson(e,t){const a=new Pe(t);const i=new fe({html:a.render()});s.EventEmitter.subscribe("BX.Main.Popup:onClose",(s=>{if(e===s.target.uniquePopupId){var t;(t=a.getPlayer())==null?void 0:t.stop()}}));return i}}function Fe(){var e,s,t,a,i;return(e=(s=BX.Intranet)==null?void 0:(t=s.Bitrix24)==null?void 0:t.ThemePicker.Singleton)!=null?e:(a=top.BX.Intranet)==null?void 0:(i=a.Bitrix24)==null?void 0:i.ThemePicker.Singleton}function ke(e,s){const t=`url('${n.Text.encode(s.previewImage)}')`;n.Dom.style(e,"backgroundImage",t);n.Dom.removeClass(this.layout.container,"bitrix24-theme-default bitrix24-theme-dark bitrix24-theme-light");let a="bitrix24-theme-default";if(s.id!=="default"){a=String(s.id).indexOf("dark:")===0?"bitrix24-theme-dark":"bitrix24-theme-light"}n.Dom.addClass(this.layout.container,a)}let _e=e=>e,we,Te;var xe=babelHelpers.classPrivateFieldLooseKey("size");var Ce=babelHelpers.classPrivateFieldLooseKey("getInnerBlock");class De{constructor(e=473){Object.defineProperty(this,Ce,{value:Oe});Object.defineProperty(this,xe,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,xe)[xe]=e}get(){return n.Tag.render(we||(we=_e`
			<div style="height: ${0}px;" class="popup-with-header-skeleton__wrap">
				<div class="popup-with-header-skeleton__header">
					<div class="popup-with-header-skeleton__header-top">
						<div class="popup-with-header-skeleton__header-circle">
							<div class="popup-with-header-skeleton__header-circle-inner"></div>
						</div>
						<div style="width: 100%;">
							<div style="margin-bottom: 12px; max-width: 219px; height: 6px; background: rgba(255,255,255,.8);" class="popup-with-header-skeleton__line"></div>
							<div style="max-width: 119px; height: 4px;" class="popup-with-header-skeleton__line"></div>
						</div>
					</div>
					<div class="popup-with-header-skeleton__header-bottom">
						<div class="popup-with-header-skeleton__header-bottom-circle-box">
							<div class="popup-with-header-skeleton__header-bottom-circle"></div>
							<div class="popup-with-header-skeleton__header-bottom-circle-blue"></div>
						</div>
						<div style="width: 100%;">
							<div style="margin-bottom: 9px; max-width: 193px; height: 5px;" class="popup-with-header-skeleton__line"></div>
							<div style="margin-bottom: 15px; max-width: 163px; height: 5px;" class="popup-with-header-skeleton__line"></div>
							<div style="margin-bottom: 9px; max-width: 156px; height: 2px;" class="popup-with-header-skeleton__line"></div>
							<div style="margin-bottom: 9px; max-width: 93px; height: 2px;" class="popup-with-header-skeleton__line"></div>
						</div>
					</div>
				</div>
				<div class="popup-with-header-skeleton__bottom">
					${0}
					${0}
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,xe)[xe],babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce](),babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce](),babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]())}}function Oe(){return n.Tag.render(Te||(Te=_e`
			<div class="popup-with-header-skeleton__bottom-inner">
				<div class="popup-with-header-skeleton__bottom-left">
					<div style="margin-bottom: 11px; max-width: 193px; height: 5px;" class="popup-with-header-skeleton__line"></div>
					<div style="margin-bottom: 17px; max-width: 163px; height: 5px;" class="popup-with-header-skeleton__line"></div>
					<div style="margin-bottom: 9px; max-width: 168px; height: 3px; background: rgba(149,156,164,.23);" class="popup-with-header-skeleton__line --dark-animation"></div>
					<div style="margin-bottom: 9px; max-width: 131px; height: 3px; background: rgba(149,156,164,.23);" class="popup-with-header-skeleton__line --dark-animation"></div>
					<div style="margin-bottom: 9px; max-width: 150px; height: 3px; background: rgba(149,156,164,.23);" class="popup-with-header-skeleton__line --dark-animation"></div>
					<div style="margin-bottom: 9px; max-width: 56px; height: 5px; background: rgba(32,102,176,.23);" class="popup-with-header-skeleton__line"></div>
				</div>
				<div class="popup-with-header-skeleton__bottom-right">
					<div class="popup-with-header-skeleton-btn"></div>
					<div style="margin: 0 auto; max-width: 36px; height: 3px; background: #d9d9d9;" class="popup-with-header-skeleton__line"></div>
				</div>
			</div>
		`))}let $e=e=>e,je,Ke,Se,Ie,Ee,Ae;var We=babelHelpers.classPrivateFieldLooseKey("popupOptions");var Ne=babelHelpers.classPrivateFieldLooseKey("prepareItemsContent");var Xe=babelHelpers.classPrivateFieldLooseKey("getThemePicker");var Ue=babelHelpers.classPrivateFieldLooseKey("applyTheme");class Me extends i.PopupComponentsMaker{constructor(e){var s,t;super(e);Object.defineProperty(this,Ue,{value:Ye});Object.defineProperty(this,Xe,{value:Re});Object.defineProperty(this,Ne,{value:ze});Object.defineProperty(this,We,{writable:true,value:void 0});this.header=e.header instanceof fe?e.header:null;this.template=e.template instanceof o.BaseTemplate?e.template:null;this.asyncData=e.asyncData instanceof BX.Promise||e.asyncData instanceof Promise?e.asyncData:null;this.animationTemplate=(s=e.animationTemplate)!=null?s:true;this.skeletonSize=(t=e.skeletonSize)!=null?t:473;this.analyticsCallback=n.Type.isFunction(e.analyticsCallback)?e.analyticsCallback:null;babelHelpers.classPrivateFieldLooseBase(this,We)[We]=n.Type.isPlainObject(e.popupOptions)?e.popupOptions:{}}getPopup(){if(!this.popup){const e=this.width?this.width:344;const s=this.id?`${this.id}-popup`:null;let t=[];if(!this.asyncData){t=n.Tag.render(je||(je=$e`
					<div>
						${0}
					<div>
				`),this.getHeaderWrapper());if(this.content.length>0){t.append(n.Tag.render(Ke||(Ke=$e`<div style="padding: 0 ${0}px ${0}px ${0}px">${0}</div>`),this.padding,this.padding,this.padding,this.getContentWrapper()))}}this.popup=new r.Popup(s,this.target,{className:"ui-popupcomponentmaker",contentBackground:"transparent",contentPadding:this.contentPadding,angle:this.useAngle?{offset:e/2-16}:false,offsetTop:this.offsetTop,width:e,offsetLeft:-(e/2)+(this.target?this.target.offsetWidth/2:0)+40,autoHide:true,closeByEsc:true,padding:0,animation:"fading-slide",content:t,cacheable:this.cacheable,...babelHelpers.classPrivateFieldLooseBase(this,We)[We]});if(this.asyncData){const e=this.popup.getContentContainer();n.Dom.clean(e);n.Dom.append(this.getSkeleton(),e);this.preparePopupAngly(e);if(n.Type.isDomNode(e.parentNode)){n.Dom.addClass(e.parentNode,"--with-header")}this.asyncData.then((a=>{n.Dom.clean(e);a.data.header.analyticsCallback=this.analyticsCallback;this.header=fe.createByJson(s,a.data.header);t=n.Tag.render(Se||(Se=$e`
						<div>
							${0}
						<div>
					`),this.getHeaderWrapper());let i=a.data.items&&this.template;if(i){this.template.setOptions({items:a.data.items,analyticsCallback:this.analyticsCallback});this.content=this.template.getContent();this.contentWrapper=null;if(n.Dom.hasClass(this.getHeaderWrapper(),"--empty-content")){n.Dom.removeClass(this.getHeaderWrapper(),"--empty-content")}if(!this.getHeaderWrapper().querySelector(".ui-popupcomponentsmaker__round-player-box")&&!n.Dom.hasClass(this.getHeaderWrapper(),"--without-video")){n.Dom.addClass(this.getHeaderWrapper(),"--without-video")}if(this.content.length>0){t.append(n.Tag.render(Ie||(Ie=$e`<div class="ui-popupcomponentmaker__content-wrap">${0}</div>`),this.getContentWrapper()))}else{i=false}}n.Dom.append(t,e);if(i){if(this.popup.isShown()){babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne](t)}else{this.popup.subscribeOnce("onShow",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne](t)}))}}this.popup.adjustPosition({forceBindPosition:true,position:this.popup.isBottomAngle()?"top":"bottom"})}))}this.popup.getContentContainer().style.overflowX=null}return this.popup}getSkeleton(){if(!this.skeleton){var e;this.skeleton=new De(this.skeletonSize).get();const t=(e=babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]())==null?void 0:e.getAppliedTheme();if(!t){return this.skeleton}const a=this.skeleton.querySelector(".popup-with-header-skeleton__header");babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue](a,t);s.EventEmitter.subscribe("BX.Intranet.Bitrix24:ThemePicker:onThemeApply",(e=>{babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue](a,e.data.theme)}))}return this.skeleton}preparePopupAngly(e){var t;const a=e==null?void 0:(t=e.parentNode)==null?void 0:t.querySelector(".popup-window-angly--arrow");if(n.Type.isDomNode(a)){var i;const t=(i=babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]())==null?void 0:i.getAppliedTheme();if(t){babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue](a,t);s.EventEmitter.subscribe("BX.Intranet.Bitrix24:ThemePicker:onThemeApply",(e=>{babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue](a,e.data.theme)}))}n.Dom.style(a,"background-position","center top");n.Dom.addClass(e==null?void 0:e.parentNode,"--with-header")}}getHeaderWrapper(){if(!this.header){return null}if(!this.headerWrapper){var e,s,t,a,i;this.headerWrapper=n.Tag.render(Ee||(Ee=$e`
				<div class="ui-popupcomponentmaker__header-content"></div>
			`));if(this.content.length<=0){this.headerWrapper.classList.add("--empty-content")}const l=this.getSection();if((e=this.header)!=null&&e.marginBottom){n.Type.isNumber(this.header.marginBottom)?l.style.marginBottom=`${this.header.marginBottom}px`:null}if((s=this.header)!=null&&s.className){n.Dom.addClass(l,this.header.className)}if(n.Type.isDomNode((t=this.header)==null?void 0:t.html)){l.appendChild(this.getItem(this.header).getContainer());this.headerWrapper.appendChild(l)}if(n.Type.isFunction((a=this.header)==null?void 0:(i=a.html)==null?void 0:i.then)){this.adjustPromise(this.header,l);this.headerWrapper.appendChild(l)}}return this.headerWrapper}}function ze(e){n.Dom.addClass(this.getContentWrapper(),"ui-popup-with-header__content");e.append(n.Tag.render(Ae||(Ae=$e`<div class="ui-popupcomponentmaker__content-wrap">${0}</div>`),this.getContentWrapper()));if(this.popup.isBottomAngle()||!this.animationTemplate){n.Dom.style(this.getContentWrapper(),"transition","none")}if(this.getContentWrapper().scrollHeight>287&&!n.Dom.hasClass(this.getContentWrapper(),"--active-scroll")){n.Dom.style(this.getContentWrapper(),"height","287px");n.Dom.style(this.getContentWrapper(),"overflow-y","scroll");n.Dom.addClass(e,"active-scroll")}else{n.Dom.style(this.getContentWrapper(),"height",`${this.getContentWrapper().scrollHeight}px`)}}function Re(){var e,s,t,a,i;return(e=(s=BX.Intranet)==null?void 0:(t=s.Bitrix24)==null?void 0:t.ThemePicker.Singleton)!=null?e:(a=top.BX.Intranet)==null?void 0:(i=a.Bitrix24)==null?void 0:i.ThemePicker.Singleton}function Ye(e,s){const t=`url('${n.Text.encode(s.previewImage)}')`;n.Dom.style(e,"backgroundImage",t);n.Dom.removeClass(e,"bitrix24-theme-default bitrix24-theme-dark bitrix24-theme-light");let a="bitrix24-theme-default";if(s.id!=="default"){a=String(s.id).indexOf("dark:")===0?"bitrix24-theme-dark":"bitrix24-theme-light"}n.Dom.addClass(e,a)}class Ge{getContent(){throw new Error("Must be implemented in a child class")}setOptions(e){this.options=e}}let qe=e=>e,Ve,Je,Qe,Ze,es,ss;var ts=babelHelpers.classPrivateFieldLooseKey("cache");var as=babelHelpers.classPrivateFieldLooseKey("getItemContent");var is=babelHelpers.classPrivateFieldLooseKey("getTitle");var ls=babelHelpers.classPrivateFieldLooseKey("getIcon");var rs=babelHelpers.classPrivateFieldLooseKey("getDescription");var os=babelHelpers.classPrivateFieldLooseKey("getMoreLink");var ns=babelHelpers.classPrivateFieldLooseKey("getButton");var ps=babelHelpers.classPrivateFieldLooseKey("getButtonDescription");var ds=babelHelpers.classPrivateFieldLooseKey("setTextStyles");class cs extends Ge{constructor(e={}){super();Object.defineProperty(this,ds,{value:Ls});Object.defineProperty(this,ps,{value:ys});Object.defineProperty(this,ns,{value:Ps});Object.defineProperty(this,os,{value:ms});Object.defineProperty(this,rs,{value:vs});Object.defineProperty(this,ls,{value:us});Object.defineProperty(this,is,{value:hs});Object.defineProperty(this,as,{value:bs});Object.defineProperty(this,ts,{writable:true,value:new n.Cache.MemoryCache});this.options=e}getContent(){return babelHelpers.classPrivateFieldLooseBase(this,ts)[ts].remember("popup-content",(()=>{const e=[];this.options.items.forEach(((s,t)=>{var a,i;const l=babelHelpers.classPrivateFieldLooseBase(this,as)[as](s);if((a=s.styles)!=null&&a.color){n.Dom.style(l,"color",s.styles.color)}e.push({html:l,background:(i=s.styles)==null?void 0:i.background,margin:t===0?"12px 0 0 0":null})}));return e}))}}function bs(e){return n.Tag.render(Ve||(Ve=qe`
			<div class="ui-popupconstructor-content-item-wrapper">
				<div class="ui-popupconstructor-content-item-wrapper_information">
					<div class="ui-popupconstructor-content-item-wrapper-title">
						${0}
						${0}
					</div>
					<div>
						${0}
						${0}
					</div>
				</div>
				<div class="ui-popupconstructor-content-item-wrapper_button">
					${0}
					${0}
				</div>
			</div>
		`),e.icon?babelHelpers.classPrivateFieldLooseBase(this,ls)[ls](e.icon):null,e.title?babelHelpers.classPrivateFieldLooseBase(this,is)[is](e.title):null,e.description?babelHelpers.classPrivateFieldLooseBase(this,rs)[rs](e.description):null,e.more?babelHelpers.classPrivateFieldLooseBase(this,os)[os](e.more):null,e.button?babelHelpers.classPrivateFieldLooseBase(this,ns)[ns](e.button):null,e.button.description?babelHelpers.classPrivateFieldLooseBase(this,ps)[ps](e.button.description):null)}function hs(e){const s=n.Tag.render(Je||(Je=qe`
			<div class="ui-popupconstructor-content-item__title">${0}</div>
		`),e.text);babelHelpers.classPrivateFieldLooseBase(this,ds)[ds](s,e);return s}function us(e){const s=n.Tag.render(Qe||(Qe=qe`
			<div class="ui-popupconstructor-content-item__icon ui-icon-set --${0}"></div>
		`),e.name);if(e.color){n.Dom.style(s,"background-color",e.color)}return s}function vs(e){const s=n.Tag.render(Ze||(Ze=qe`
			<div class="ui-popupconstructor-content-item__description">
				${0}
			</div>
		`),e.text);babelHelpers.classPrivateFieldLooseBase(this,ds)[ds](s,e);return s}function ms(e){const s=()=>{if(e.code){d.FeaturePromotersRegistry.getPromoter({code:e.code}).show()}else if(e.articleId){top.BX.Helper.show(`redirect=detail&code=${e.articleId}`)}};const t=n.Tag.render(es||(es=qe`
			<div class="ui-popupconstructor-content-item__more-link" onclick="${0}">${0}</div>
		`),s,e.text.text);babelHelpers.classPrivateFieldLooseBase(this,ds)[ds](t,e.text);return t}function Ps(e){const s=new p.Button({round:true,text:e.text,size:p.Button.Size.EXTRA_SMALL,color:p.Button.Color.SUCCESS,noCaps:true,link:e.url,onclick:()=>{var s;if((s=this.options)!=null&&s.analyticsCallback){this.options.analyticsCallback("click-button",e.url)}}});if(e.backgroundColor){n.Dom.style(s.render(),"background-color",e.backgroundColor);s.setColor(p.Button.Color.LIGHT)}return s.render()}function ys(e){const s=n.Tag.render(ss||(ss=qe`
			<div class="ui-popupconstructor-content-item__button-description">
				${0}
			</div>
		`),e.text);babelHelpers.classPrivateFieldLooseBase(this,ds)[ds](s,e);return s}function Ls(e,s){if(s.color){n.Dom.style(e,"color",s.color)}if(s.fontSize){n.Dom.style(e,"font-size",s.fontSize)}if(s.weight){n.Dom.style(e,"font-weight",s.weight)}}e.PopupWithHeader=Me;e.PopupHeader=fe;e.SaleTemplate=cs;e.BaseTemplate=Ge})(this.BX.UI=this.BX.UI||{},BX.Event,BX,BX.UI,BX.UI,BX.UI.IconSet,BX.Main,BX.UI,BX,BX.UI,BX.UI);
//# sourceMappingURL=popup-with-header.bundle.map.js